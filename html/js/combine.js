window["ymaps_loader_0e9r0l;r16))9t1_191!)*)!1,9u)(1;1j9x1Q1I5Y$H18555$0b0f9W2x9S9T9Y91922D9U2B9X0x0r2b9B9C9E9F9G9K2g9L2l9N2o),):);)@9O9P2r2O2R2X2023265*989699299$9_9.9*9:952-2!2)9;2:0m9j9q2q2z2J3a)i)j)q)z)Q)I3d3g3k3n3r9Q9z3t1y1D6e2(5z3w3A9J3D3N3P9Z3T,d,h,f3W,k30$b,l,a,c32,m38$f,n3$2i0d3i3.3(3:$g3q0D0S05$1$2$5$3$6$8$9$Z$-$_$!$*,D,E,F$,$:$)$@,G,H,K,L,M$q,N,O,P$i$z@2@3@4@5$Q$I-b-c-m-n-p-r-s-u-e-f-h,R-K-E-x,T,V-y-B-C4f$k$l$m$o$p4c$r$t$u$w$x$y$C$D$F$G3J4m4p4t4w4A,o,p,r$R$B4k0M4C,s,t,u,v,w,x4F4K4M0$0)-_494V4Y4245474-0@0z1a5d_75f5h:n:o_9_$___!_*_(5l5m_,_:5o1d5r5s5u5w5x5A5C1@8m1J8D2k8$1g_@_q0t5F5L_i_z_Q_I_Z.b.c5D.h5O5T5V515N.x.y:p!K.E.M52.W.51m_._)_J3*.e.$:r._...!.(.).:.;.q54.j.i.Q565759.J.Z!a0y!c0F5_5-5!5(!d!e!g:s5,5::t:u:v:w:x:y:A:B:C:D:E:F:G:H:K:L:M!h0U025@1o5i5j1r5Q1v5I1x:q!m:j:U:3:4:*:(:):,:::;:@:z:Q:J:I:Z!o;a;b;c;d;e;f:0:2:5!B!D!s;g;h;k;l!E6b!l6f!A!F!H.k!M;m;o;n;p6k!P;t;u;s;y!U!V!X!Y!0!2!3!6!4;A;B!9!$!_6m!R;v;w6o!S;x!86p6s!!!*6u6v6x6D;O*_*R*U.n*!***)086E*:*@6F6K.v$L3).D.H6g6)$M$O6:6@6j6z6I6Z7a7d7e7g7k7n2e$P"]([["0e",function(e){e.modules.define("Balloon",["util.defineClass","Popup","map.action.Single","Monitor","util.pixelBounds","util.math.areEqual","util.preset","vow","util.fireWithBeforeEvent","balloon.component.getBalloonMode","util.scheduler.strategy.Raf","util.margin","balloon.metaOptions"],function(e,t,n,i,o,s,r,a,l,c,u,h,d){function g(e,t){g.superclass.constructor.call(this,e,t),this.options.setName("balloon")}t(g,n,{open:function(e,t){this.options.set("panelMode",this._isPanelNeeded());var n=this.isOpen(),i=g.superclass.open.call(this,e,t);return i.then(function(e){var t=this.getOverlaySync().getLayout();return t.then(function(){return this._shape=this.getOverlaySync().getShape(),n||this._setupListeners(),this._isPanelNeeded()&&this.options.get("autoPan")?this._moveMapCenter():this.options.get("autoPan")&&this.autoPan(),e},this)},this)},close:function(e){var t=g.superclass.close.call(this,e);return t.then(function(){this._clearListeners(),this._shape=null},this),t},setPosition:function(e){return this._positionAtZoom=this._map.getZoom(),g.superclass.setPosition.call(this,e)},autoPan:function(){if(this._isPanelNeeded())return this.options.get("autoPan")?this._moveMapCenter():l.reject();var e=this.getOverlaySync(),t=this.getMap();if(!this.isOpen()||!t||!e)return l.reject();var n=this._shape;if(!n||"visible"==this.getOverlaySync().getPane().getOverflow())return l.reject();if(!this.isOpen())return l.reject();var o=l.defer(),r=t.action.getCurrentState(),a=Math.pow(2,r.zoom-t.getZoom()),c=(1==a?n:n.scale(a)).getBounds(),u=this._map.container.getSize(),h=this.options.get("autoPanMargin"),g=this.options.get("autoPanUseMapMargin",!0)?d.sum([h,this._map.margin.getMargin()]):h,p=u[0]/2,m=u[1]/2,f=[[r.globalPixelCenter[0]-p,r.globalPixelCenter[1]-m],[r.globalPixelCenter[0]+p,r.globalPixelCenter[1]+m]],_=s.fit(c,f,g);if(_){t.action.stop();var M=t.getGlobalPixelCenter(),v=new i({globalPixelCenter:[M[0]-_[0],M[1]-_[1]],zoom:t.getZoom(),duration:this.options.get("autoPanDuration",500),timingFunction:"ease-in-out",checkZoomRange:this.options.get("autoPanCheckZoomRange",!1)},t);this.events.fire("autopanbegin"),t.events.once("actionend",function(){this.events.fire("autopanend"),o.resolve()},this),t.action.execute(v)}else o.resolve();return o.promise()},_setupListeners:function(){this._mapListeners=this.getMap().events.group().add("boundschange",this._onMapBoundsChange,this).add("sizechange",this._applyPanelMode,this),this._overlayListeners=this.getOverlaySync().events.group().add("shapechange",this._onShapeChange,this).add("userclose",this._onUserClose,this),this._panelMaxMapAreaMonitor=new o(this.options).add("panelMaxMapArea",this._applyPanelMode,this)},_clearListeners:function(){this._panelMaxMapAreaMonitor&&this._panelMaxMapAreaMonitor.destroy(),this._overlayListeners&&this._overlayListeners.removeAll(),this._mapListeners&&this._mapListeners.removeAll()},_onMapBoundsChange:function(){this.isOpen()&&(this._preventAutoPanOnZoomChange=!0,this.setupGeometry(),this._preventAutoPanOnZoomChange=!1)},_applyPanelMode:function(){var e=this._isPanelNeeded();this.options.set("panelMode",e),e&&this.options.get("autoPan")&&(this.getOverlaySync().getLayoutSync()?new h(this._moveMapCenter,this).start():this.getOverlaySync().getLayout().then(this._moveMapCenter,this))},_onShapeChange:function(){if(this.isOpen()&&!this._isPanelNeeded()){var e=this.getOverlaySync().getShape();if(e&&this._shape){var t=e.getBounds(),n=this._shape.getBounds();if(r(n[0],t[0])&&r(n[1],t[1]))return}this._shape=e,this.options.get("autoPan")&&!this._preventAutoPanOnZoomChange&&this.autoPan()}},_moveMapCenter:function(){var e=this.getMap(),t=this.getOverlaySync();if(!this.isOpen()||!e||!t)return l.reject();var n=l.defer(),i=t.getGeometry().getCoordinates(),o=this.options.get("autoPanUseMapMargin",!0);if(r(i,e.getGlobalPixelCenter({useMapMargin:o})))n.resolve();else{var s=e.action.getCurrentState().zoom,a=this._positionAtZoom;if(Math.abs(s-a)>1e-7){var c=Math.pow(2,s-a);i=[i[0]*c,i[1]*c]}n.resolve(e.setGlobalPixelCenter(i,s,{useMapMargin:o,duration:300}))}return n.promise()},_onUserClose:function(){c(this.events,{type:"userclose",target:this},{context:this,successCallback:this._onBeforeUserCloseSuccess})},_onBeforeUserCloseSuccess:function(e){this.close(),this.events.fire(e.type,e)},_isPanelNeeded:function(){return"panel"==u(this.getMap(),this.options.get("panelMaxMapArea"))}}),e(g)})}],["9r",function(e){e.modules.define("balloon.component.getBalloonMode",[],function(e){e(function(e,t){var n="default";if(t){var i=e.container.getSize();n=t>=i[0]*i[1]?"panel":"default"}return n})})}],["0l",function(e){e.modules.define("balloon.metaOptions",["map.metaOptions","map.optionMapper","constants.zIndex","interactivityModel.opaque","map.pane.helper.balloon","map.pane.helper.shadows"],function(e,t,n,i,o){t.set({balloonOverlay:"html#balloon",balloonPane:"balloon",balloonShadowsPane:"shadows",balloonLayout:"islands#balloon",balloonPanelLayout:"islands#balloonPanel",balloonContentLayout:"default#balloonContent",balloonAutoPan:!0,balloonAutoPanMargin:34,balloonPanelMaxMapArea:16e4,balloonPanelMaxHeightRatio:.5,balloonZIndex:i.balloon,balloonInteractivityModel:o,balloonCloseButton:!0,balloonMaxWidth:400,balloonMaxHeight:400,balloonMinWidth:85,balloonMinHeight:30}),n.setRule({name:"balloon",rule:"prefixed"}).setRule({name:"balloon",key:["projection"],rule:"plain"}),e({})})}],[";r",function(e){e.modules.define("BaseObjectManager",["util.defineClass","option.Manager","data.Manager","vow","util.bind","Event","Monitor","objectManager.optionMapper","geoObject.optionMapper","objectManager.component.ClusterListener","objectManager.component.Filter","util.array","util.extend","event.Mapper","objectManager.CollectionMappingTable"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){function f(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}function _(e,t){var n=e.replace(t,"");return n.slice(0,1).toLowerCase()+n.slice(1)}function M(e,t){var n=[];return d.each(e,function(e){d.indexOf(t,e)==-1&&n.push(e)}),n}var v={geoObjectBalloonManager:"objectManager#balloon",geoObjectHintManager:"objectManager#hint",clusterHintManager:"objectManager#hint",clusterBalloonManager:"objectManager#balloon"},y=function(e,t){this._eventManager=t.events,this.geometry=null,this.options=new n(g({},v,e),(void 0),"objectManager",l),this.options.events.add("change",this._onOptionsChange,this),this.properties=new i,this.state=new i,this._objectsCollection=t.objects,this._objectsCollection.options.setParent(this.options),this._clustersCollection=t.clusters,this._clustersCollection.options.setParent(this.options),this._clusterListener=new u(this);var o=new p(this._eventManager,new m(this));this._objectsCollection.events.setParent(o),this._clustersCollection.events.setParent(o),this._components=t};y.NoOverlayError=function(){return new Error("ObjectManager doesn't have an overlay.")},t(y,{getOverlay:function(){return o.reject(new y.NoOverlayError)},getOverlaySync:function(){return null},onAddToMap:function(e){this._startObjectCollectionListening(),this._showObjects(),this._clusterListener.setMap(e)},onRemoveFromMap:function(e){this._clusterListener.setMap(null),this._hideObjects(),this._stopObjectCollectionListening()},setFilter:function(e){if(e!=this._filterFunction){var t,n=this._filter,i=[],o=[];n&&(i=n.getFilteredObjects(),n.destroy()),this._filterFunction=e,e?(this._filter=new h(e),this._filter.add(this._objectsCollection.getAll()),t=this._filter.getFilteredObjects(),i.length&&(o=M(i,t)),this.getMap()&&(this._removeDisplayedObjects(t),o.length&&this._addDisplayedObjects(o))):i.length&&(this._filter=null,this._addDisplayedObjects(i))}return this},getFilter:function(){return this._filterFunction},getObjectState:function(e){var t={found:!1};if(this.getMap()){var n=this._objectsCollection.getById(e);n&&(t={found:!0,isFilteredOut:!!this._filter&&this._filter.isFilteredOut(n)})}return t},_addDisplayedObjects:function(e){this._components.addDisplayedObjects.callback.call(this._components.addDisplayedObjects.context,e)},_removeDisplayedObjects:function(e){this._components.removeDisplayedObjects.callback.call(this._components.removeDisplayedObjects.context,e)},_startObjectCollectionListening:function(){this._objectCollectionListener=this._objectsCollection.events.group().add("objectsadd",this._onObjectsAdd,this).add("objectsremove",this._onObjectsRemove,this)},_stopObjectCollectionListening:function(){this._objectCollectionListener.removeAll()},_onObjectsAdd:function(e){var t=e.get("objects"),n=[];if(this._filter&&this._filter.add(t),this._filter)for(var i=0,o=t.length;i<o;i++)this._filter.isFilteredOut(t[i])||n.push(t[i]);else n=t;this._addDisplayedObjects(n)},_onObjectsRemove:function(e){var t=e.get("objects"),n=[];if(this._filter)for(var i=0,o=t.length;i<o;i++)this._filter.isFilteredOut(t[i])||n.push(t[i]);else n=t;this._filter&&this._filter.remove(t),this._removeDisplayedObjects(n)},_showObjects:function(){if(this._objectsCollection.getLength()){var e;e=this._filter?this._filter.getValidObjects():this._objectsCollection.getAll(),this._addDisplayedObjects(e)}},_hideObjects:function(){if(this._objectsCollection.getLength()){var e=this._components.removeAll;e.callback.call(e.context)}},_onOptionsChange:function(){this.events.fire("optionschange")}}),l.setRule({name:"objectCollection",rule:function(e,t){return[f(e,"geoObject"),e]}}),l.setRule({name:"clusterCollection",rule:function(e,t){return[f(e,"cluster"),e]}}),c.setRule({name:"objectManager",rule:function(e,t){return 0==e.indexOf("geoObject")?_(e,"geoObject"):e}}),c.setRule({name:"objectManager",key:["projection"],rule:"plain"}),e(y)})}],["16",function(e){e.modules.define("behavior.action",["util.defineClass","map.action.Continuous","util.bind"],function(e,t,n,i){function o(){o.superclass.constructor.call(this),this._timeoutID=0,this._activeBehavior=null,this._activeBehaviorPriority=0}t(o,n,{capture:function(e,t,n){"undefined"==typeof n&&(n=.5),this._activeBehaviorPriority<=n&&(this._activeBehavior=t,this._activeBehaviorPriority=n,this._cancelStopping());var i=this.getActionManager();return i&&i.getMap()!=e&&this.end(),this.isActive()||e.action.execute(this),this},tick:function(e,t){return t=t||{},t.behavior!=this._activeBehavior?this:(this._cancelStopping(),o.superclass.tick.call(this,e),"undefined"!=typeof t.autoStopTimeout&&this._planStopping((e.duration||0)+t.autoStopTimeout),this)},release:function(e){return e=e||{},e.behavior&&this._activeBehavior==e.behavior&&(this._activeBehavior=null),this._activeBehaviorPriority=0,this._cancelStopping(),this.isActive()&&("undefined"!=typeof e.stopTimeout?this._planStopping(e.stopTimeout):this.end()),this},_planStopping:function(e){this._timeoutID=window.setTimeout(i(function(){this._timeoutID=0,this.end()},this),e)},_cancelStopping:function(){window.clearTimeout(this._timeoutID),this._timeoutID=0}}),e(new o)})}],["))",function(e){e.modules.define("behavior.BaseMultiEngine",["util.defineClass","constants.mapListenerPriority","behavior.action","Event","DomEvent","util.math.restrict","util.coordinates.scaleInvert","domEvent.manager","yandex.counter"],function(e,t,n,i,o,s,r,a,l,c){var u=1/Math.log(2),h=n.blocker,d=function(e){this._behavior=e,this._map=null};t(d,{startListening:function(){this._map=this._behavior.getMap(),this._map.events.add("multitouchstartdefaultaction",this.onMultiTouchStart,this)},stopListening:function(){this._map.events.remove("multitouchstartdefaultaction",this.onMultiTouchStart,this),this._removeListeners(),this._map=null},onMultiTouchStart:function(e){this._captureAction(),this._removeListeners(),this._domListeners=l.group(document.documentElement,!0).add("multitouchmove",this.onMultiTouchMove,this,h).add("multitouchend",this.onMultiTouchEnd,this,h),this._preventDomEvent(e.get("originalEvent").get("domEvent")),c.countByKey("control","multiTouch.multiTouch")},onMultiTouchMove:function(e){this._preventDomEvent(e)},onMultiTouchEnd:function(e){if(i.release({behavior:this}),this._zoomChangeEventFired){this._zoomChangeEventFired=!1;var t=this._map.action.getCurrentState();this._behavior.events.fire("multitouchzoomend",new o({zoomDelta:t.zoom-this._startZoomValue}))}this._removeListeners(),this._preventDomEvent(e)},processMove:function(e,t,n){var i=this._isZoomChanged(t),o=this._isPositionChanged(n),s=this._map.action.getCurrentState(),r=s.zoom;if(i&&!this._zoomChangeEventFired&&(this._behavior.events.fire("multitouchzoomstart"),this._zoomChangeEventFired=!0,this._startZoomValue=r),o||i){var l=this._getZoomDiff(t,r),c=this._map.converter.pageToGlobal(e),u=a.fixedToCenter(s.globalPixelCenter,c,Math.pow(2,l));this._makeTick([u[0]-n[0],u[1]-n[1]],r+l)}},_captureAction:function(){i.capture(this._map,this,1)},_isPositionChanged:function(e){var t=this._behavior.options.get("tremor",2);return Math.abs(e[0])>t||Math.abs(e[1])>t},_isZoomChanged:function(e){return Math.abs(1-e)>this._behavior.options.get("scaleTremor",.1)},_getZoomDiff:function(e,t){var n=this._map.zoomRange.getCurrent();return r(Math.log(e)*u,n[0]-t,n[1]-t)},_makeTick:function(e,t){i.isActive()||this._captureAction(),i.tick({globalPixelCenter:e,zoom:t},{behavior:this})},_removeListeners:function(){this._domListeners&&this._domListeners.removeAll()},_preventDomEvent:function(e){e.callMethod("preventDefault")}}),e(d)})}],["9t",function(e){e.modules.define("behavior.component.defaultMouseDownDispatcher",["util.defineClass","util.Associate"],function(t,n,i){function o(e){e.events.add("mousedowndefaultaction",this._handle,this),this._handlers={}}n(o,{add:function(t,n,i){if(e.env.debug&&this._handlers[t])throw new Error("behavior.component.defaultMouseDownDispatcher.add: Обработчик нажатия данной кнопки по умолчанию уже был добавлен ранее.");return this._handlers[t]=[n,i],this},remove:function(e){return delete this._handlers[e],this},_handle:function(e){var t=this._handlers[e.get("originalEvent").get("domEvent").get("button")];t&&(t[1]?t[0].call(t[1],e):t[0](e))}}),t(new i(function(e){return new o(e)}))})}],["1_",function(e){e.modules.define("behavior.DblClickZoom",["behavior.storage","behavior.factory","util.math.restrict","util.coordinates.scaleInvert","map.behavior.optionMapper","yandex.counter"],function(e,t,n,i,o,s,r){var a=n.create("dblClickZoom",{startListening:function(){this._listeners=this.getMap().events.group().add("dblclickdefaultaction",this._onDblClick,this).add("contextmenudefaultaction",this._onContextMenu,this)},stopListening:function(){this._listeners.removeAll(),this._lastRightClick=null},_onDblClick:function(e){var t=e.get("originalEvent");this._action(t,1),this._preventDomEvent(t)},_onContextMenu:function(e){var t=+new Date,n=this.options.get("dblClickTimeout",400),i=e.get("originalEvent");this._lastRightClick&&t-this._lastRightClick<n?(this._action(i,-1),this._lastRightClick=null):this._lastRightClick=t,this._preventDomEvent(i)},_action:function(e,t){var n=this.getMap();n.action.stop();var s,a=n.getZoom(),l=e.get("globalPixels"),c=this.options.get("duration",200),u=n.zoomRange.getCurrent(),h=i(a+t,u[0],u[1]),d=Math.pow(2,h-a),g=this.options.get("centering",!0);s=g?[l[0]*d,l[1]*d]:o.fixedToCenter(n.getGlobalPixelCenter(),l,Math.pow(2,h-a));var p=g&&this.options.get("useMapMargin",!0);n.setGlobalPixelCenter(s,h,{duration:c,useMapMargin:p}),this.events.fire("zoomchange",{zoomDelta:t}),r.countByKey("control","dblclick.action")},_preventDomEvent:function(e){var t=e.get("domEvent");t&&t.callMethod("preventDefault")}});s.setRule({name:"dblClickZoom",key:["centering","duration"],rule:"prefixed"}),t.add("dblClickZoom",a),e(a)})}],["19",function(e){e.modules.define("behavior.Drag",["behavior.storage","behavior.action","util.Dragger","util.math.cubicBezier","util.scheduler.strategy.Processing","util.hd","behavior.factory","map.behavior.optionMapper","Monitor","behavior.component.defaultMouseDownDispatcher"],function(t,n,i,o,s,r,a,l,c,u,h){function d(e,t,n,i,o,s,r){var a=p(t.slice(n)),l=e.get(n),c=o[1]?o[1]-l.eventTimestamp:o[0]-l.timestamp,u=Math.min(a/c,1)*(r||1),h=u*s,d=M(e.get(i).position,e.get(-1).position),g=_(d);return{targetPath:[d[0]*h/g,d[1]*h/g]}}function g(e,t,n,i,o,s){var r=-.00125,a=p(t.slice(n)),l=e.get(n),c=o[1]?o[1]-l.eventTimestamp:o[0]-l.timestamp,u=Math.min(a/c,2)*(s||1),h=Math.round(Math.min(Math.max(100,-u/r),900)),d=u*h+r*h*h/2,g=M(e.get(i).position,e.get(-1).position),m=_(g);return{targetPath:[g[0]*d/m,g[1]*d/m],duration:h}}function p(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}function m(e,t){for(var n=0,i=e.length-1;i>=0;i--)if(n+=e[i],n>=t)return i;return-1}function f(e){for(var t=a.getPixelRatio(),n=[],i=0,o=e.length;i<o-1;i++)n.push(_(e[i].position,e[i+1].position)/t);return n}function _(e,t){"undefined"==typeof t&&(t=e,e=[0,0]);var n=M(e,t);return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))}function M(e,t){return[t[0]-e[0],t[1]-e[1]]}function v(e){this._length=e||1/0,this.data=[]}var y=e.env.browser,j=l.create("drag",{startListening:function(){var e=this.getMap();this._moves=new v(30),this._grabCursorKey=this.options.get("cursor"),this._grabbingCursorKey=this.options.get("actionCursor"),this._cursorMonitor=new u(this.options).add("cursor",this._onGrabCursorChange,this).add("actionCursor",this._onGrabbingCursorChange,this),this._grabCursor=e.cursors.push(this._grabCursorKey),this._mapEvents=e.events.group().add("multitouchstart",this._stopInertia,this).add("multitouchend",this._onMultiTouchEnd,this),this._dispatcher=h.get(e).add(0,this._onMouseDown,this)},stopListening:function(){this._dispatcher.remove(0),this._mapEvents.removeAll(),this._grabCursor.remove(),this._cursorMonitor.removeAll()},_onMouseDown:function(e){var t=e.get("originalEvent").get("domEvent");0==t.get("button")&&this._createDragger(t)},_onMultiTouchEnd:function(e){function t(e){this._mapEvents.remove(["mousemove","mouseup"],t,this),"mousemove"==e.get("type")&&this._createDragger(e)}var n=e.get("touches");n&&1==n.length&&this._mapEvents.add(["mousemove","mouseup"],t,this)},_createDragger:function(e){this._draggerEvents&&this._draggerEvents.removeAll(),this._dragger=new o({tremor:this.options.get("tremor",2),disableBrowserBehavior:!0}),this._dragger.start(e),this._draggerEvents=this._dragger.events.group(),this._draggerEvents.add("start",this._onDragStart,this).add("move",this._onDragMove,this).add("cancel",this._onDragCancel,this).add("stop",this._onDragStop,this),this._moved=!1},_onDragMove:function(e){i.capture(this.getMap()),this._grabbingCursor||(this._grabbingCursor=this.getMap().cursors.push(this._grabbingCursorKey)),this._moved||(this.events.fire("dragstart"),this._moved=!0),i.tick({pixelOffset:e.get("delta"),duration:0},{autoStopTimeout:this.options.get("autoStopTimeout",500)}),this.options.get("inertia")&&this._addMove(e)},_onDragCancel:function(){this._clearDraggerData()},_onDragStart:function(e){this.options.get("inertia")&&this._addMove(e),this._stopInertia()},_onDragStop:function(e){var t=null;this.options.get("inertia")&&(t=this._startKinetic(e)),this._clearDraggerData(),t||i.release()},_addMove:function(e){var t={timestamp:+new Date,eventTimestamp:e.get("domEvent").get("timeStamp"),position:e.get("position")};this._moves.add(t)},_clearDraggerData:function(){this._grabbingCursor&&(this._grabbingCursor.remove(),this._grabbingCursor=null),this._moved&&(this.events.fire("dragend"),this._moved=!1),this._draggerEvents.removeAll()},_startKinetic:function(e){var t=-1;e&&(this._addMove(e),t=-2);var n=this._moves;if(!n.data.length)return!1;var o={inertiaDuration:this.options.get("inertiaDuration",400),inertiaTimingFunction:this.options.get("inertiaTimingFunction","cubic-bezier(0, 0.1, 0.4, 1)"),inertiaTimeout:this.options.get("inertiaTimeout",75),inertiaMinDistance:this.options.get("inertiaMinDistance",10),inertiaSpeedDistance:this.options.get("inertiaSpeedDistance",40),inertiaSpeedFactor:this.options.get("inertiaSpeedFactor",1)},a=f(n.data),l=m(a,o.inertiaMinDistance),c=m(a,o.inertiaSpeedDistance),u=(new Date).getTime(),h=e.get("domEvent").get("timeStamp"),p=n.get(t),_=p.timestamp,M=p.eventTimestamp,v=h&&M?h-M:u-_;if(v>o.inertiaTimeout)return n.clear(),!1;if(l<0)return n.clear(),!1;c<0&&(c=0),"string"!=typeof o.inertiaTimingFunction&&(o.inertiaTimingFunction="cubic-bezier("+o.inertiaTimingFunction.toString()+")");var j,b,I,L=this.getMap().action.getCurrentState().globalPixelCenter,C=this.getMap().action.getCurrentState().zoom;if("auto"==o.inertiaDuration?(j=g(n,a,c,l,[u,h],o.inertiaSpeedFactor),I=j.duration):(j=d(n,a,c,l,[u,h],o.inertiaDuration,o.inertiaSpeedFactor),I=o.inertiaDuration),b=j.targetPath,n.clear(),this.options.get("stepwiseInertia",!0)===!1||"WebKit"==y.engine&&"iOS"==y.osFamily){var x=[L[0]-b[0],L[1]-b[1]];i.tick({globalPixelCenter:x,zoom:C,duration:I,timingFunction:o.inertiaTimingFunction},{autoStopTimeout:0})}else{var w=+new Date;this._kineticProcess&&(this._kineticProcess.stop(),this._kineticProcess=null),i.capture(this.getMap()),this._kineticProcess=new r(function(){var e=s(o.inertiaTimingFunction).getValue(Math.min((+new Date-w)/I,1));1!=e&&i.isActive()?i.tick({globalPixelCenter:[L[0]-b[0]*e,L[1]-b[1]*e],zoom:C,duration:0},{autoStopTimeout:100}):this._stopInertia()},this,{duration:I}),i.events.once("end",this._stopInertia,this),this._kineticProcess.start()}return!0},_stopInertia:function(){this._kineticProcess&&(this._kineticProcess.stop(),this._kineticProcess=null),i.release()},_onGrabCursorChange:function(e){this._grabCursorKey=e,this._grabCursor&&this._grabCursor.setKey(e)},_onGrabbingCursorChange:function(e){this._grabbingCursorKey=e,this._grabbingCursor&&this._grabbingCursor.setKey(e)}});c.setRule({name:"drag",key:["inertia","inertiaDuration","inertiaTimingFunction","inertiaTimeout","stepwiseInertia","frameRateCompensation","inertiaMinDistance","inertiaSpeedDistance","inertiaSpeedFactor","autoStopTimeout","cursor","actionCursor"],rule:"prefixed"}),v.prototype={add:function(e){this.data.push(e),this.data.length>this._length&&this.data.shift()},get:function(e){return e>=0?this.data[e]:this.data[this.data.length+e]},clear:function(){this.data=[]}},n.add("drag",j),t(j)})}],["1!",function(e){e.modules.define("behavior.factory",["util.defineClass","collection.Item","option.Manager","util.extend","theme.islands.behavior.meta"],function(e,t,n,i,o){e({create:function(e,s){var r=function(e,t){r.superclass.constructor.call(this,e),this._behaviorEnabled=t,"function"==typeof this.init&&this.init()};return t(r,n,o({createOptionManager:function(t){return new i(t,null,e)},onAddToMap:function(){this._behaviorEnabled&&this.startListening()},onRemoveFromMap:function(){this._behaviorEnabled&&this.stopListening()},enable:function(){this._behaviorEnabled||(this._behaviorEnabled=!0,this.getMap()&&this.startListening(),this.events.fire("enable"))},disable:function(){this._behaviorEnabled&&(this.getMap()&&this.stopListening(),this._behaviorEnabled=!1,this.events.fire("disable"))},isEnabled:function(){return this._behaviorEnabled},startListening:function(){},stopListening:function(){}},s)),r}})})}],[")*",function(e){e.modules.define("behavior.LeftMouseButtonMagnifier",["behavior.factory","behavior.magnifier.mouse.Component","behavior.storage","map.behavior.optionMapper","Monitor"],function(e,t,n,i,o,s){var r=t.create("leftMouseButtonMagnifier",{startListening:function(){this._component=new n(this,0),this._optionsMonitor=new s(this.options),this._optionsMonitor.add("cursor",this._onCursorChange,this),this._magnifierCursor=this.getMap().cursors.push(this._optionsMonitor.get("cursor"))},stopListening:function(){this._component.destroy(),this._optionsMonitor.destroy(),this._magnifierCursor.remove()},_onCursorChange:function(e){this._magnifierCursor.setKey(e)}});o.setRule({name:"leftMouseButtonMagnifier",rule:"prefixed"}).setRule({name:"leftMouseButtonMagnifier",key:["projection"],rule:"plain"}),i.add("leftMouseButtonMagnifier",r),e(r)})}],[")!",function(e){e.modules.define("behavior.magnifier.mouse.Component",["util.defineClass","util.Dragger","domEvent.manager","constants.zIndex","constants.paneZIndex","Monitor","geometry.pixel.Rectangle","pane.EventsPane","behavior.component.defaultMouseDownDispatcher","overlay.storage","util.cancelableCallback","yandex.counter","map.pane.helper.controls"],function(e,t,n,i,o,s,r,a,l,c,u,h,d){function g(e,t){this._owner=e,this._activeButton=t||0,this._map=e.getMap(),2==this._activeButton?c.get(this._map).add(2,function(e){return this._onMouseDown(e.get("originalEvent"))},this):this._map.events.add("mousedown",this._onMouseDown,this),this._glassPane=null,this._cursor=null,this._monitor=null,this._startPosition=null,this._endPosition=null,this._dragger=null}t(g,{destroy:function(){this._dragger&&this._clearDragger(),2==this._activeButton?c.get(this._map).remove(2):this._map.events.remove("mousedown",this._onMouseDown,this)},_onMouseDown:function(e){var t=e.get("domEvent");t&&t.get("button")==this._activeButton&&(this._setupDragger(t),e.preventDefault())},_setupDragger:function(e){this._dragger=new n({byRightButton:2==this._activeButton,disableBrowserBehavior:!0}),this._dragger.events.add("start",this._onDragStart,this).add("move",this._onDragMove,this).add("stop",this._onDragStop,this),this._dragger.start(e)},_clearDragger:function(){this._dragger.isDragging()&&this._dragger.stop(),this._dragger.events.remove("start",this._onDragStart,this).remove("move",this._onDragMove,this).remove("stop",this._onDragStop,this)},_onDragStart:function(e){this._map.action.stop(),this._canceled=!1,this._startPosition=this._endPosition=this._map.converter.pageToGlobal(e.get("position")),i.add(document,"keydown",this._onKeyDown,this),this._setupOverlay(),this._owner.events.fire("selectionstart",{activeButton:this._activeButton})},_onDragMove:function(e){this._endPosition=this._map.converter.pageToGlobal(e.get("position")),this._overlay&&this._overlay.setBounds([this._startPosition,this._endPosition])},_onDragStop:function(){this._clearOverlay(),i.remove(document,"keydown",this._onKeyDown,this),this._clearDragger();var e=this._owner.options.get("tremor",2),t=Math.abs(this._endPosition[0]-this._startPosition[0])<=e&&Math.abs(this._endPosition[1]-this._startPosition[1])<=e;this._canceled||t?this._owner.events.fire("selectioncancel",{activeButton:this._activeButton}):(d.countByKey("control","magnifier.action"),this._apply(),this._owner.events.fire("selectionend",{activeButton:this._activeButton}))},_onKeyDown:function(e){27==e.get("keyCode")&&(e.callMethod("preventDefault"),this._canceled=!0,this._clearDragger())},_apply:function(){var e=this._map,t=[(this._endPosition[0]+this._startPosition[0])/2,(this._endPosition[1]+this._startPosition[1])/2],n=this._computeZoom(),i=Math.pow(2,n-e.getZoom());e.action.stop(),e.setGlobalPixelCenter([t[0]*i,t[1]*i],n,{duration:this._owner.options.get("duration",300),checkZoomRange:!0})},_computeZoom:function(){var e=this._map.container.getSize(),t=[Math.abs(this._endPosition[0]-this._startPosition[0]),Math.abs(this._endPosition[1]-this._startPosition[1])];if(0==t[0]||0==t[1])return this._map.getZoom();var n=e[0]/t[0],i=e[1]/t[1],o=Math.min(n,i),s=this._map.getZoom()+Math.log(o)/Math.log(2);return Math.max(s,this._map.getZoom())},_setupOverlay:function(){this._setupGlassPane();var e=u.get("html#rectangle");null==e?(this._overlayCallback=h.create(this._createOverlayInstance,this),u.require(["html#rectangle"]).spread(this._overlayCallback)):this._createOverlayInstance(e)},_createOverlayInstance:function(e){this._overlayCallback=null,this._overlay=new e(this._createOverlayGeometry([this._startPosition,this._endPosition]),null,{zIndex:-1,pane:"controls",eventsPane:"events"}),this._overlay.options.setParent(this._owner.options),this._overlay.setMap(this._map)},_clearOverlay:function(){this._overlayCallback?this._overlayCallback.cancel():(this._overlay.setMap(null),this._overlay.options.setParent(null),this._overlay=null),this._clearGlassPane()},_setupGlassPane:function(){var e=this._map.panes.get("controls");this._glassPane=new l(this._map,{zIndex:(e?e.getZIndex():s.controls)+1}),this._map.panes.append("magnifier",this._glassPane),this._monitor=new r(this._owner.options).add("actionCursor",this._onActionCursorChange,this,{defaultValue:"crosshair"}),this._setupCursor(this._monitor.get("actionCursor"))},_clearGlassPane:function(){this._clearCursor(),this._map.panes.remove(this._glassPane),this._glassPane.destroy()},_setupCursor:function(e){this._cursor=this._glassPane.cursors.push(e)},_clearCursor:function(){this._cursor&&this._cursor.remove()},_onActionCursorChange:function(e){this._clearCursor(),this._setupCursor(e)},_createOverlayGeometry:function(e){return new a([[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1])],[Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]])}}),e(g)})}],["1,",function(e){e.modules.define("behavior.MultiTouch",["behavior.storage","behavior.factory","behavior.MultiTouchEngine","map.behavior.optionMapper"],function(e,t,n,i,o){var s=n.create("multiTouch",{startListening:function(){this._engine=new i(this),this._engine.startListening()},stopListening:function(){this._engine.stopListening(),this._engine=null}});o.setRule({name:"multiTouch",key:["tremor","autoStopTimeout","zoomSensitivity","scaleTremor","actionsPerSecond"],rule:"prefixed"}),t.add("multiTouch",s),e(s)})}],["9u",function(e){e.modules.define("behavior.MultiTouchEngine",["util.defineClass","behavior.BaseMultiEngine","util.throttle"],function(e,t,n,i){var o=function(e){o.superclass.constructor.call(this,e),this._behavior=e};t(o,n,{startListening:function(){o.superclass.startListening.call(this),this._onMoveThrottled=i(1e3/this._behavior.options.get("actionsPerSecond",20),this._onMove,this)},onMultiTouchStart:function(e){var t=e.get("originalEvent").get("domEvent");t&&(o.superclass.onMultiTouchStart.call(this,e),this._distance=this._getDistance(t),this._position=this._getPosition(t))},onMultiTouchMove:function(e){o.superclass.onMultiTouchMove.call(this,e),this._onMoveThrottled(e)},onMultiTouchEnd:function(e){o.superclass.onMultiTouchEnd.call(this,e)},_onMove:function(e){var t=this._getDistance(e),n=this._getPosition(e),i=t/this._distance;this.processMove(n,i,[n[0]-this._position[0],n[1]-this._position[1]]),this._distance=t,this._position=n},_getDistance:function(e){var t=e.get("touches"),n=t[0],i=t[1],o=n.pageX-i.pageX,s=n.pageY-i.pageY,r=Math.sqrt(o*o+s*s);return Math.max(r,1)},_getPosition:function(e){var t=e.get("touches"),n=t[0],i=t[1];return[.5*(n.pageX+i.pageX),.5*(n.pageY+i.pageY)]}}),e(o)})}],[")(",function(e){e.modules.define("behavior.RightMouseButtonMagnifier",["behavior.factory","behavior.magnifier.mouse.Component","behavior.storage","map.behavior.optionMapper"],function(e,t,n,i,o){var s=t.create("rightMouseButtonMagnifier",{startListening:function(){this._component=new n(this,2)},stopListening:function(){this._component.destroy()}});o.setRule({name:"rightMouseButtonMagnifier",rule:"prefixed"}).setRule({name:"rightMouseButtonMagnifier",key:["projection"],rule:"plain"}),i.add("rightMouseButtonMagnifier",s),
e(s)})}],["1;",function(e){e.modules.define("behavior.RouteEditor",["behavior.storage","behavior.factory","util.array","route","map.associate.serviceGeoObjects","util.cancelableCallback","yandex.counter"],function(t,n,i,o,s,r,a,l){var c=i.create("routeEditor",{startListening:function(){!this._route||this._route.getWayPoints().getLength()>1?this._createLoadModulesRequest():(this._startEditor(),this._bindEvents())},stopListening:function(){this._clearLoadModulesRequest(),this._route&&this._route.editor&&this._route.editor.options.set("addWayPoints",!1),this._unbindEvents()},getRoute:function(){return this._route},getState:function(){for(var e=[],t=[],n="",i=this._route.requestPoints,o=0,s=i.length;o<s;o++){var r=i[o];e.push((r.point||r).join(",")),"viaPoint"==r.type&&t.push(o)}return e.length&&(n+="rt="+e.join("~")),t.length&&(n+="&via="+t.join(",")),n},setState:function(e){this._clearLoadModulesRequest();var t=this._route;if(this._removeRoute(),!e)return void this._fireRouteChange(t,this._route);var n,i=e.split("&"),r=i[0]&&i[0].substr(3).split("~"),l=[];if(r&&r.length){n=o.map(i[1]&&i[1].substr(4).split(",")||[],parseInt);for(var c=0,u=r.length;c<u;c++)l.push({type:o.indexOf(n,c)!=-1?"viaPoint":"wayPoint",point:o.map(r[c].split(","),parseFloat)});this._loadModuleCallback=a.create(function(e){this._route=e,this._addRouteToMap(),this._startEditor(),this._onRouteUpdate(),this._fireRouteChange(t,this._route)},this),s(l).then(this._loadModuleCallback)}},_startEditor:function(){this._route.editor.start({addViaPoints:!0,addWayPoints:this._route.getWayPoints().getLength()<2,removeViaPoints:!0,editWayPoints:!0,editViaPoints:!0}),l.countByKey("control","routeEditor.start")},_addRouteToMap:function(){r.get(this.getMap()).add(this._route)},_removeRouteFromMap:function(){r.get(this.getMap()).remove(this._route)},_removeRoute:function(){this._route&&(this._unbindEvents(),this._removeRouteFromMap(),this._route=null)},_bindEvents:function(){this._editorEvents=this._route.editor.events.group(),this._editorEvents.add("routeupdate",this._onRouteUpdate,this)},_unbindEvents:function(){this._editorEvents&&(this._editorEvents.removeAll(),this._editorEvents=null)},_onRouteUpdate:function(){l.countByKey("control","routeEditor.routeAdded"),this._route.getWayPoints().getLength()>=2&&this.disable()},_fireRouteChange:function(e,t){e!==t&&this.events.fire("routechange")},_createLoadModulesRequest:function(){this._loadModuleCallback=a.create(function(e){this._loadModuleCallback=null,this.setState(null),this._route=new e({features:[],properties:{}}),this._addRouteToMap(),this._startEditor(),this._bindEvents()},this),e.modules.require(["router.Route","router.addon.editor"],this._loadModuleCallback)},_clearLoadModulesRequest:function(){this._loadModuleCallback&&(this._loadModuleCallback.cancel(),this._loadModuleCallback=null)}});n.add("routeEditor",c),t(c)})}],["1j",function(e){e.modules.define("behavior.Ruler",["behavior.factory","behavior.storage","map.behavior.optionMapper","pane.EventsPane","hotspot.Manager","constants.paneZIndex","geometry.LineString","localization.common.current","util.cancelableCallback","domEvent.manager","constants.mapListenerPriority","yandex.counter","yandex.state.component.RulerBehavior","behavior.ruler.preset"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(){if("iOS"==e.env.browser.osFamily){var t=h.group(document.documentElement,!0);t.add("touchstart",function(e){e.callMethod("preventDefault"),e.callMethod("stopPropagation"),t.removeAll()})}return window.confirm(c.Control.Ruler.sure.split("\\n").join("\n"))}var f="latlong"==e.env.coordinatesOrder,_=function(e){return f?[e[1],e[0]]:e},M=n.create("ruler",{init:function(e,t){M.superclass.constructor.call(this,e,t),this.geometry=new l(null,{preset:"ruler#line"}),this._yandexStateRulerComponent=new p(this)},onAddToMap:function(e){M.superclass.onAddToMap.call(this,e),this.geometry.options.setParent(e.options),this.geometry.setMap(e)},onRemoveFromMap:function(){this._clearView(),M.superclass.onRemoveFromMap.call(this)},startListening:function(){this._setupEventsPane()},stopListening:function(){this._clearEventsPane()},getState:function(){for(var e=[],t=[0,0],n=0,i=this.geometry.getLength();n<i;n++){var o=_(this.geometry.get(n));e.push((o[0]-t[0]).toFixed(8)+","+(o[1]-t[1]).toFixed(8)),t=o}return e.join("~")},setState:function(e){if(e){var t=e.split(/~|,/),n=t.length;if(n>1){for(var i=[0,0],o=[],s=0;s<n;s+=2)i[0]+=parseFloat(t[s]),i[1]+=parseFloat(t[s+1]),o.push(_(i.slice()));this._setupView(),this.geometry.setCoordinates(o)}}else this.geometry.setCoordinates([])},close:function(){return!!(this.geometry.getLength()<3||m())&&(this.geometry.setCoordinates([]),!0)},_setupEventsPane:function(){var e=this.getMap();this._eventsPane=new s(e,{zIndex:a.behaviors}),e.panes.append("rulerEvents",this._eventsPane),this._hotspotManager=new r(this._eventsPane),this._view&&this._view.setEventsPane("rulerEvents"),e.events.add("click",this._onMapClick,this,d.behaviors),this._cursorHandler=this._eventsPane.cursors.push("arrow")},_clearEventsPane:function(){var e=this.getMap();this._cursorHandler.remove(),e.events.remove("click",this._onMapClick,this,d.behaviors),this._view&&this._view.setEventsPane("events"),this._hotspotManager.destroy(),this._hotspotManager=null,e.panes.remove(this._eventsPane),this._eventsPane=null},_onMapClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),this._setupView(),this.geometry.insert(this.geometry.getLength(),e.get("coords")),g.countByKey("control","ruler.click")},_setupView:function(){this._viewCallback||this._view||!this.getMap()||(this._viewCallback=u.create(function(e){this.geometry.setMap(null),this._viewCallback=null,this._view=new e(this),this._view.setEventsPane(this.isEnabled()?"rulerEvents":"events")},this),e.modules.require(["behavior.ruler.View"],this._viewCallback))},_clearView:function(){this._viewCallback&&(this._viewCallback.cancel(),this._viewCallback=null),this._view?(this._view.destroy(),this._view=null):this.geometry.setMap(null)}});i.add("ruler",M),o.setRule({name:"ruler",rule:"prefixed"}).setRule({name:"ruler",key:["projection"],rule:"plain"}),t(M)})}],["9x",function(e){e.modules.define("behavior.ruler.preset",["option.presetStorage"],function(e,t){t.add("ruler#line",{coordRendering:"shortestPath",simplification:!1,geodesic:!0,pixelRendering:"static"}),e({})})}],["1Q",function(e){e.modules.define("behavior.ScrollZoom",["util.coordinates.scaleInvert","behavior.action","behavior.storage","behavior.factory","map.behavior.optionMapper","util.math.getSign","domEvent.manager","util.bind","yandex.counter"],function(e,t,n,i,o,s,r,a,l,c){var u=100,h=o.create("scrollZoom",{startListening:function(){this._targetZoom=null,this._startZoom=null,this._setupDocumentListener(),this._started=!1,this._mapListeners=this.getMap().events.group().add("wheeldefaultaction",this._onWheel,this).add("click",this._onClick,this),this._zoomDelta=[0,0]},stopListening:function(){this._started&&(this._unscheduleStop(),this._started=!1,this._lastDocumentWheel=null,this._zoomDelta=[0,0]),this._teardownDocumentListener(),this._mapListeners.removeAll()},_setupDocumentListener:function(){this._domListeners=a.group(document).add("wheel",this._onDocumentWheel,this)},_teardownDocumentListener:function(){this._domListeners.removeAll()},_onDocumentWheel:function(e){var t=e.get("deltaX"),n=e.get("deltaY");this._started||!t&&!n||(this._lastDocumentWheel=+new Date)},_onClick:function(){this._lastDocumentWheel=null,this._zoomDelta=[0,0],this._started=!1},_onWheel:function(e){var t=+new Date;if(!(this._lastDocumentWheel&&t-this._lastDocumentWheel<300)){var n,i=e.get("originalEvent"),o=i.get("domEvent");if(this._started||(n=!0),o){o.callMethod("preventDefault"),this._zoomDelta[0]+=o.get("deltaX"),this._zoomDelta[1]+=o.get("deltaY"),n&&c.countByKey("control","scrollZoom.wheel");var s=this._zoomDelta[0],a=this._zoomDelta[1];if(this._zoomDelta=[0,0],this._started||a&&Math.abs(a)>Math.abs(s)){if(this._started=!0,this._scheduleStop(),this._checkWheelTrend(a)||this._checkTimeInterval()){var l=this._getTargetZoom(),u=this._filterByMaximumDelta(this._filterByZoomRange(l+r(a,!0)));l!=u?(this._tick(u,i.get("position")),this.events.fire("zoomchange",{zoomDelta:u-l})):this._teardownState()}o.callMethod("preventDefault")}}}},_checkWheelTrend:function(e){var t=this._currentWheelTrend,n=r(e,!0);return Math.abs(n)>1e-10&&(this._currentWheelTrend=n,n!=t)},_checkTimeInterval:function(){return!this._lastTickTime||new Date-this._lastTickTime>1e3/this.options.get("speed",5)},_scheduleStop:function(){this._started&&this._unscheduleStop(),this._stopTimeout=window.setTimeout(l(this._onSeriesStop,this),u)},_unscheduleStop:function(){window.clearTimeout(this._stopTimeout)},_onSeriesStop:function(){this._started=!1,this._zoomDelta=[0,0],this._lastDocumentWheel=null},_getTargetZoom:function(){return null===this._targetZoom?this.getMap().action.getCurrentState().zoom:this._targetZoom},_filterByZoomRange:function(e){var t=this.getMap().zoomRange.getCurrent();return Math.min(Math.max(t[0],e),t[1])},_filterByMaximumDelta:function(e){var t=this.options.get("maximumDelta",5);if("undefined"!=typeof t){var n=e-this._getStartZoom();Math.abs(n)>t&&(e-=n-r(n)*t)}return e},_getStartZoom:function(){return null===this._startZoom?this._startZoom=this.getMap().action.getCurrentState().zoom:this._startZoom},_tick:function(e,i){this._lastTickTime=new Date,this._targetZoom=e;var o=this.getMap();this._actionListeners||(n.capture(o),this._actionListeners=n.events.group().add("end",this._teardownState,this));var s=o.action.getCurrentState(),r=s.zoom,a=e-r,l=s.globalPixelCenter,c=o.container.getSize(),u=o.container.getOffset(),h=Math.round(1e3*Math.abs(a)/this.options.get("speed",5));n.tick({globalPixelCenter:t.fixedToCenter(l,[l[0]+i[0]-u[0]-c[0]/2,l[1]+i[1]-u[1]-c[1]/2],Math.pow(2,a)),zoom:e,duration:h,timingFunction:a>0?"ease-in":"ease-out"},{autoStopTimeout:Math.max(h,100)})},_teardownState:function(){n.release(),this._actionListeners&&(this._actionListeners.removeAll(),this._actionListeners=null),this._targetZoom=null,this._startZoom=null,this._lastTickTime=null,this._currentWheelTrend=null}});s.setRule({name:"scrollZoom",key:["maximumDelta","speed"],rule:"prefixed"}),i.add("scrollZoom",h),e(h)})}],["1I",function(e){e.modules.define("behavior.storage",["util.Storage"],function(e,t){e(new t)})}],["5Y",function(e){e.modules.define("canvasLayout.storage",["util.AsyncStorage"],function(e,t){e(new t("canvasLayout"))})}],["$H",function(e){e.modules.define("Circle",["util.augment","GeoObject"],function(e,t,n){function i(e){return e&&"undefined"==typeof e.length?e:{type:"Circle",coordinates:e[0],radius:e[1]}}var o=function(e,t,n){o.superclass.constructor.call(this,{geometry:i(e),properties:t},n)};t(o,n),e(o)})}],["18",function(e){e.modules.define("circleDotIconWithCaption.layout.html",["islets-icon-caption","islets-circle-dot-icon-with-caption"],function(e){e([0,'<ymaps class="ymaps-2-1-42-islets_circle-dot-icon-with-caption"><ymaps class="ymaps-2-1-42-islets_circle-dot-icon-with-caption__caption-block"><ymaps class="ymaps-2-1-42-islets_icon-caption">',2001,["properties.iconCaption",[]],0,"</ymaps></ymaps>",2002,["islands#circleDotIcon",[["name",'"baseIcon"']]],0,"</ymaps>"])})}],["55",function(e){e.modules.define("cluster-default",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-default-cluster{position:absolute;text-align:center;font-family:Arial,Helvetica,sans-serif;font-size:13px}",e)})}],["5$",function(e){e.modules.define("cluster-night-content",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-cluster-night-content{color:#fff}",e)})}],["0b",function(e){e.modules.define("cluster.default.css",["cluster-default"],function(e){e({})})}],["0f",function(e){e.modules.define("cluster.nightContent.css",["cluster-night-content"],function(e){e({})})}],["9W",function(e){e.modules.define("cluster.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["2x",function(e){e.modules.define("Clusterer",["util.defineClass","geoObject.optionMapper","clusterer.component.GridClusterer","util.array","util.id","util.bounds","util.bind","component.child.MapChild","Monitor","ClusterPlacemark","data.Manager","option.Manager","event.Manager","component.collection.ParentCollection","event.Mapper","geoObject.EventMappingTable","clusterer.optionMapper","event.globalize","yandex.counter","error","theme.islands.cluster.metaOptions"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j){function b(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}function I(e,t){var n=e.replace(t,"");return n.slice(0,1).toLowerCase()+n.slice(1)}var L=function(e){this.options=new g(e,null,"clusterer",M),this.options.events.add("change",this._onOptionsChange,this),this.events=new p({context:this}),this._clustererComponent=new o(this.options),this._mapChildComponent=new c({onMapChange:{callback:this._onMapChange,context:this},onParentChange:{callback:this._onParentChange,context:this}}),this._collectionComponent=new m(this,null,new f(this.events,new _(this))),this._objects={},this._clusters={},this._mapListener=null,this._objectsCounter=0,this._geoBounds=null,this.events.addController(C),this.events.fire("create")},C=v(L);n(L,{add:function(t){var n;n=s.isArray(t)?t:[t],n=this._getNotAddedObjects(n),this._addGeoObjects(n);var i=this._getHashesByObjects(n);if(e.env.debug)for(var o=0,r=i.length;o<r;o++)j.warnIf("string"==typeof i[o].geometry.coordinates[0]||"string"==typeof i[o].geometry.coordinates[1],"Warning","Clusterer: coordinates of added object are strings and must be numbers ("+i[o].geometry.coordinates+").");return this._clustererComponent.add(i),this.events.fire("pixelboundschange"),this},remove:function(e){var t;t=s.isArray(e)?e:[e],t=this._getAddedObjects(t);var n=this._getHashesByObjects(t);return this._clustererComponent.remove(n),this._removeGeoObjects(t),this.events.fire("pixelboundschange"),this},removeAll:function(){return this._clustererComponent.removeAll(),this._objects={},this._geoBounds=null,this.events.fire("pixelboundschange"),this},createCluster:function(e,t){var n="";return n=this.options.get("showInAlphabeticalOrder")?"alphabetical":"serial",t.sort(l(x[n],this)),new h(e,new d({geoObjects:t,iconContent:t.length.toString()}))},getObjectState:function(e){var t=this._clustererComponent.getObjectState(r.get(e));return{isShown:!!t&&!!t.isShown,isClustered:!!t&&!!t.isClustered,cluster:t&&t.isClustered?this._clusters[t.cluster.id].clusterObject:null}},getBounds:function(){if(!this._geoBounds){var e=[];for(var t in this._objects)this._objects.hasOwnProperty(t)&&e.push(this._objects[t].geoObject.geometry.getCoordinates());this._geoBounds=0==e.length?null:a.fromPoints(e,this.options.get("projection"))}return this._geoBounds},getPixelBounds:function(){var e=this.getBounds();return e&&this.getMap()?a.toGlobalPixelBounds(e,this.getMap().getZoom(),this.options.get("projection")):null},getGeoObjects:function(){var e=[];for(var t in this._objects)e.push(this._objects[t].geoObject);return e},getClusters:function(){var e=[];for(var t in this._clusters)e.push(this._clusters[t].clusterObject);return e},getMap:function(){return this._mapChildComponent.getMap()},setParent:function(e){return this._mapChildComponent.setParent(e),this},getParent:function(){return this._mapChildComponent.getParent()},_onMapChange:function(e,t){e&&this._removeFromMap(e),t&&this._addToMap(t),this.events.fire("mapchange",{oldMap:e,newMap:t})},_addToMap:function(e){this._mapListener=e.events.group().add("boundschange",this._onMapBoundsChange,this),this._clustererComponent.events.add("statechange",this._onStateChange,this),this._clustererComponent.setMap(e),y.countByKey("modulesUsage","clusterer.create")},_removeFromMap:function(e){this._clustererComponent.setMap(null),this._clustererComponent.events.remove("statechange",this._onStateChange,this),this._mapListener.removeAll()},_onStateChange:function(e){var t=e.get("added"),n=e.get("removed"),i=e.get("addedClusters"),o=e.get("removedClusters");this._removeObjectsFromMap(n),this._removeClustersFromMap(o),this._addObjectsToMap(t),this._addClustersToMap(i)},_addClustersToMap:function(e){for(var t=0,n=e.length;t<n;t++)this._clusters[e[t].id]=this._createClusterObject(e[t]),this._addObjectToMap(this._clusters[e[t].id].clusterObject)},_removeClustersFromMap:function(e){for(var t=0,n=e.length;t<n;t++){var i=this._getClusterByHash(e[t]);this._removeObjectFromMap(i),this._clearClusterData(e[t])}},_addObjectsToMap:function(e){for(var t=0,n=e.length;t<n;t++){var i=this._getObjectByHash(e[t]);e[t].singleShown=!0,i.getMap()||this._addObjectToMap(i)}},_removeObjectsFromMap:function(e){for(var t=0,n=e.length;t<n;t++){var i=this._getObjectByHash(e[t]);e[t].singleShown=!1,i.getMap()&&this._removeObjectFromMap(i)}},_createClusterObject:function(e){for(var t,n,i=[],o=e.properties.geoObjects,s=0,r=o.length;s<r;s++)n=this._objects[o[s].id].geoObject,n.options.setParent(this.options),i.push(n);t=this.createCluster(e.geometry.coordinates,i);for(var s=0,r=o.length;s<r;s++)this._objects[o[s].id].cluster=t;return{hash:e,clusterObject:t}},_getClusterByHash:function(e){return this._clusters[e.id]?this._clusters[e.id].clusterObject:null},_addObjectToMap:function(e){this._collectionComponent.add(e)},_removeObjectFromMap:function(e){this._collectionComponent.remove(e)},_getObjectByHash:function(e){return this._objects[e.id].geoObject},_getAddedObjects:function(e){for(var t=[],n=0,i=e.length;n<i;n++)this._objects[r.get(e[n])]&&t.push(e[n]);return t},_getNotAddedObjects:function(e){for(var t=[],n=0,i=e.length;n<i;n++)this._objects[r.get(e[n])]||t.push(e[n]);return t},_getHashesByObjects:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=r.get(e[n]);this._objects[o]||(this._objects[o]={geoObject:e[n],hash:this._createHashFromGeoObject(e[n]),order:this._objectsCounter++}),t.push(this._objects[o].hash)}return t},_addGeoObjects:function(e){if(e.length){for(var t=0,n=e.length;t<n;t++)e[t].setParent(null);this._geoBounds=null}},_removeGeoObjects:function(e){if(e.length){this._geoBounds=null;for(var t=0,n=e.length;t<n;t++)delete this._objects[r.get(e[t])]}},_createHashFromGeoObject:function(e){return{id:r.get(e),geometry:{type:"Point",coordinates:e.geometry.getCoordinates()}}},_clearClusterData:function(e){for(var t=e.properties.geoObjects,n=0,i=t.length;n<i;n++)delete this._objects[t[n].id].cluster,this._objects[t[n].id].geoObject.options.setParent(null);delete this._clusters[e.id]},_onParentChange:function(e,t){this.getParent()?this.options.setParent(this.getParent().options):this.options.setParent(null),this.events.fire("parentchange",{oldParent:e,newParent:t})},_onOptionsChange:function(){this.events.fire("optionschange")},_onMapBoundsChange:function(e){e.get("newZoom")!=e.get("oldZoom")&&this.events.fire("pixelboundschnage")}}),i.setRule({name:"clusterer",rule:function(e,t){return 0==e.indexOf("cluster")?e:0==e.indexOf("geoObject")?[I(e,"geoObject")]:[b(e,t),e]}}),i.setRule({name:"clusterer",key:"projection",rule:"plain"}),M.setRule({name:"geoObject",rule:"prefixed"}),M.setRule({name:"projection",rule:"plain"});var x={alphabetical:function(e,t){var n=e.properties,i=t.properties,o=n.get("clusterCaption")||n.get("balloonContentHeader")||"",s=i.get("clusterCaption")||i.get("balloonContentHeader")||"";return o==s?this._objects[r.get(e)].order-this._objects[r.get(t)].order:o<s?-1:1},serial:function(e,t){return this._objects[r.get(e)].order-this._objects[r.get(t)].order}};t(L)})}],["9S",function(e){e.modules.define("clusterer.addon.balloon",["Clusterer","popup.addonBuilder","сlusterer.Balloon"],function(e,t,n,i){e(n.build({type:"balloon",metaEventManager:t.getMetaEventManager(),defaultManager:i}))})}],["9T",function(e){e.modules.define("clusterer.addon.hint",["Clusterer","popup.addonBuilder","сlusterer.Hint"],function(e,t,n,i){e(n.build({type:"hint",metaEventManager:t.getMetaEventManager(),defaultManager:i}))})}],["9Y",function(e){e.modules.define("clusterer.component.Grid",["util.defineClass"],function(e,t){var n=function(){this._grid={}};t(n,{getCellData:function(e,t){return this._grid[e][t]},setCellData:function(e,t,n){this._grid[e][t]=n},clearAll:function(){this._grid={}},clearCell:function(e,t){this._grid[e]&&this._grid[e][t]&&(this._grid[e].yCounter--,delete this._grid[e][t],this._grid[e].yCounter||delete this._grid[e])},clearCells:function(e){if(e)for(var t=0,n=e.length;t<n;t++)for(var i=e[t][0][1],o=e[t][1][1],s=e[t][0][0],r=e[t][1][0];s<r;s++)for(var a=i;a<o;a++)this.clearCell(s,a);else for(var l in this._grid)for(var c in this._grid[l])"yCounter"!=c&&this.clearCell(l,c)},createCell:function(e,t,n){this._grid[t]={},this._grid[t].yCounter=0,"undefined"==typeof this._grid[t][n]&&(this._grid[t].yCounter++,this._grid[t][n]=e(t,n))},createCells:function(e,t){for(var n=0,i=t.length;n<i;n++)for(var o=t[n][0][1],s=t[n][1][1],r=t[n][0][0],a=t[n][1][0];r<a;r++){"undefined"==typeof this._grid[r]&&(this._grid[r]={},this._grid[r].yCounter=0);for(var l=o;l<s;l++)"undefined"==typeof this._grid[r][l]&&(this._grid[r].yCounter++,this._grid[r][l]=e(r,l))}},forEach:function(e,t,n){if(n)for(var i=0,o=n.length;i<o;i++)for(var s=n[i][0][1],r=n[i][1][1],a=n[i][0][0],l=n[i][1][0];a<l;a++)for(var c=s;c<r;c++)e.call(t,this.getCellData(a,c));else for(var u in this._grid)for(var h in this._grid[u])"yCounter"!=h&&e.call(t,this.getCellData(u,h))}}),e(n)})}],["91",function(e){e.modules.define("clusterer.component.GridBoundsGetter",["util.defineClass","component.TileBoundsGetter"],function(e,t,n){var i=function(e){i.superclass.constructor.call(this,e),this._oldTileBounds=null};t(i,n,{setMap:function(e){i.superclass.setMap.call(this,e),this._applyGridSize()},update:function(){this._applyGridSize(),i.superclass.update.call(this)},get:function(){var e=i.superclass.get.call(this);return e!=this._oldTileBounds&&(e?this._gridBounds=this._fromTileBoundsToGridBounds(e):this._gridBounds=null,this._oldTileBounds=e),this._gridBounds},fireChangeEvent:function(e,t,n,i){this.events.fire("gridboundschange",{oldGridBounds:this._fromTileBoundsToGridBounds(e),newGridBounds:this._fromTileBoundsToGridBounds(t),oldZoom:n,newZoom:i})},_fromTileBoundsToGridBounds:function(e){for(var t=[],n=256/this._currentGridSize,i=0,o=e.length;i<o;i++){t[i]=[];for(var s=0,r=e[i].length;s<r;s++){t[i][s]=[];for(var a=0,l=e[i][s].length;a<l;a++)t[i][s][a]=e[i][s][a]*n}}return t},_applyGridSize:function(){this._currentGridSize=Math.min(this.options.get("gridSize",64),256),this._currentGridSize=Math.max(this._currentGridSize,2);var e=Math.round(Math.log(this._currentGridSize)/Math.LN2);this._currentGridSize=Math.pow(2,e)}}),e(i)})}],["92",function(e){e.modules.define("clusterer.component.GridClusterer",["util.defineClass","clusterer.component.GridBoundsGetter","clusterer.component.Grid","component.tileBoundsGetter.util","util.array","util.bounds","util.pixelBounds","util.id","util.bind","util.margin","util.extend","util.math.areEqual","event.Manager","Monitor"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(e,t){return a.containsPoint([e[0],[e[1][0]-1,e[1][1]-1]],t)}var f=function(e){this.options=e,this._gridBoundsGetter=new n(e),this._objectWrappers=[],this._unprocessedObjects=[],this._grid=new i,this.events=new g({context:this}),this._optionMonitor=null,this._createCellBindFunction=c(this._getCellData,this),this._wrappersById={},this._clustersById={}};t(f,{add:function(e){var t,n,i=this._map,o=[];for(t=0,n=e.length;t<n;t++)"Point"==e[t].geometry.type&&o.push(e[t]);if(i){var r=this._getSortedObjectWrappers(o);this._objectWrappers=s.merge(this._objectWrappers,r,_),this._generateObjectsGridNumbers(r);var a=this._addToGrid(r,this._gridBoundsGetter.get());this._regenerateClusters(a),this._checkBounds()}else this._unprocessedObjects=this._unprocessedObjects.concat(o);return this},remove:function(e){if(this._map){var t=this._removeObjectsFromGrid(e);this._regenerateClusters(t)}else this._removeUnprocessedObjects(e);return this._removeObjectWrappers(e),this._checkBounds(),this},removeAll:function(){return this._map&&(this._fireRemoveAll(),this._grid.clearAll(),this._grid.createCells(this._createCellBindFunction,this._gridBoundsGetter.get()),this._checkBounds()),this._clustersById={},this._objectWrappers=[],this._unprocessedObjects=[],this._wrappersById={},this},setMap:function(e){this._map=e,e?(this._gridBoundsGetter.setMap(e),this._addToMap(e)):(this._removeFromMap(e),this._gridBoundsGetter.setMap(e))},getMap:function(){return this._map},destroy:function(){this._map&&this._removeFromMap(this._map),this._map=null,this.removeAll(),this.events.fire("destroy")},getObjectState:function(e){return this._map&&this._wrappersById[e]?{isShown:!!this._wrappersById[e].isShown,isClustered:!!this._wrappersById[e].isClustered,cluster:this._wrappersById[e].cluster}:null},getObject:function(e){return e in this._wrappersById?h({},this._wrappersById[e].hash):e in this._clustersById?h({},this._clustersById[e]):null},getAll:function(){for(var e=[],t=0,n=this._objectWrappers.length;t<n;t++)e.push(this._objectWrappers[t].hash);return e.concat(this._unprocessedObjects)},getBounds:function(){if(this._map){for(var e=this.getAll(),t=[],n=0,i=e.length;n<i;n++)t.push(e[n].geometry.coordinates);return t.length>0?r.fromPoints(t,this._map.options.get("projection")):null}return null},getPixelBounds:function(){if(this._map){for(var e=this.getAll(),t=[],n=this._map.getZoom(),i=this._map.options.get("projection"),o=0,s=e.length;o<s;o++)t.push(i.toGlobalPixels(e[o].geometry.coordinates,n));return a.fromPoints(t)}return null},_addToMap:function(e){if(this._applyGridSize(),this._setupOptionMonitor(),this._unprocessedObjects.length){var t=this._getSortedObjectWrappers(this._unprocessedObjects);this._objectWrappers=s.merge(this._objectWrappers,t,_),this._unprocessedObjects=[]}this._generateObjectsGridNumbers(this._objectWrappers),this._gridBoundsListener=this._gridBoundsGetter.events.group().add("gridboundschange",this._onGridBoundsChange,this);var n=this._gridBoundsGetter.get();this._grid.createCells(this._createCellBindFunction,n),this._addToGrid(this._objectWrappers,n),this._grid.forEach(this._generateClusters,this,n),this._showClusters()},_removeFromMap:function(e){this._clearOptionMonitor(),this._fireRemoveAll(),this._clearClusterData(),this._gridBoundsListener.removeAll(),this._grid.clearAll()},_getSortedObjectWrappers:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o={hash:e[n],pixelCoordsAtNull:this._map.options.get("projection").toGlobalPixels(e[n].geometry.coordinates,0)};t.push(o),this._wrappersById[e[n].id]=o}return t.sort(_),t},_generateObjectsGridNumbers:function(e){for(var t=0,n=e.length;t<n;t++)e[t].gridNumber=this._getGridNumber(e[t].pixelCoordsAtNull)},_getGridNumber:function(e){var t=this._currentGridSize,n=Math.pow(2,this._map.getZoom()),i=[e[0]*n,e[1]*n];return i=[Math.floor(i[0]/t),Math.floor(i[1]/t)]},_addToGrid:function(e,t){for(var n={},i=this._getGridNumbersArray(e),o=0,r=t.length;o<r;o++)for(var a=s.findAfterValue(i,t[o][0][0]),c=s.findAfterValue(i,t[o][1][0]),u=a;u<c;u++){var h=i[u];if(m(t[o],h)){var d=this._grid.getCellData(h[0],h[1]),g=e[u].pixelCoordsAtNull,p=e[u].hash,f=Math.pow(2,this._map.getZoom());n[l.get(d)]||(n[l.get(d)]={cell:d,gridX:h[0],gridY:h[1]},this._removeCluster(d)),d.sumX+=g[0]*f,d.sumY+=g[1]*f,d.geoObjects.push(p)}}return n},_getGridNumbersArray:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].gridNumber);return t},_removeCluster:function(e){if(e.clusters.length||e.geoObjectsWithoutClusters.length){for(var t=0,n=e.clusters.length;t<n;t++)delete this._clustersById[e.clusters[t].id];this._fireStateChange({removed:e.geoObjectsWithoutClusters,removedClusters:e.clusters}),e.clusters=[],e.geoObjectsWithoutClusters=[];for(var t=0,n=e.geoObjects.length;t<n;t++){var i=this._wrappersById[e.geoObjects[t].id];delete i.isShown,delete i.isClustered,delete i.cluster}}},_regenerateClusters:function(e){for(var t in e)e.hasOwnProperty(t)&&(this._generateClusters(e[t].cell),this._showGridCluster(e[t].cell))},_generateClusters:function(e){if(this._map.getZoom()>this.options.get("maxZoom",Number.POSITIVE_INFINITY))for(var t=e.geoObjects,n=0,i=t.length;n<i;n++){e.geoObjectsWithoutClusters.push(t[n]);var o=this._wrappersById[t[n].id];o.isShown=!0,o.isClustered=!1}else this.options.get("groupByCoordinates",!1)?this._createGroupedByCoordinatesClusters(e):this._createCellCluster(e)},_createGroupedByCoordinatesClusters:function(e){for(var t,n,i={},o=this._map.options.get("projection"),s=0,r=e.geoObjects.length;s<r;s++){var a=e.geoObjects[s];n=o.toGlobalPixels(a.geometry.coordinates,23),t=[Math.floor(n[0]),Math.floor(n[1])].toString(),i[t]||(i[t]=[]),i[t].push(a)}for(t in i){var l,c=i[t];if(c.length>=this.options.get("minClusterSize",2)){var u=this._createCluster(c[0].geometry.coordinates,c);e.clusters.push(u);for(var s=0,r=c.length;s<r;s++)l=this._wrappersById[c[s].id],l.isClustered=!0,l.cluster=u,l.isShown=!0}else{e.geoObjectsWithoutClusters=e.geoObjectsWithoutClusters.concat(c);for(var s=0,r=c.length;s<r;s++)l=this._wrappersById[c[s].id],l.isClustered=!1,l.isShown=!0}}},_createCellCluster:function(e){if(e.geoObjects.length>=this.options.get("minClusterSize",2)){var t=e.geoObjects.length,n=[e.sumX/t,e.sumY/t],i=this._getCorrectMargin(this.options.get("margin",10)),o=this._map.getZoom(),s=this._currentGridSize/2,r=e.center,a=Math.max(Math.round(r[0]-(s-i[3])),n[0]);a=Math.min(r[0]+(s-i[1]),a);var l=Math.max(r[1]-(s-i[0]),n[1]);l=Math.min(r[1]+(s-i[2]),l);var c=this._map.options.get("projection").fromGlobalPixels([a,l],o),u=this._createCluster(c,e.geoObjects);e.clusters.push(u);for(var h,d=0,g=e.geoObjects.length;d<g;d++)h=this._wrappersById[e.geoObjects[d].id],h.isClustered=!0,h.cluster=u,h.isShown=!0}else{e.geoObjectsWithoutClusters=e.geoObjects.slice();for(var h,d=0,g=e.geoObjects.length;d<g;d++)h=this._wrappersById[e.geoObjects[d].id],h.isClustered=!1,h.isShown=!0}},_createCluster:function(e,t){var n={id:l.gen(),type:"Cluster",geometry:{type:"Point",coordinates:e},features:t,number:t.length,properties:{geoObjects:t,iconContent:t.length},options:{}};return this._clustersById[n.id]=n,n},_showGridCluster:function(e){e.geoObjects.length&&this._fireStateChange({added:e.geoObjectsWithoutClusters,addedClusters:e.clusters})},_removeObjectWrappers:function(e){for(var t,n=[],i=0,o=this._objectWrappers.length;i<o;i++){t=!1;for(var s=0,r=e.length;s<r&&!t;s++)e[s].id==this._objectWrappers[i].hash.id&&(delete this._wrappersById[e[s].id],t=!0);t||n.push(this._objectWrappers[i])}this._objectWrappers=n},_removeObjectsFromGrid:function(e){var t=this._gridBoundsGetter.get();if(t){for(var n={},i=this._getGridNumbersArray(this._objectWrappers),o=Math.pow(2,this._map.getZoom()),s={},r=0,a=this._objectWrappers.length;r<a;r++)s[this._objectWrappers[r].hash.id]=r;for(var r=0,a=e.length;r<a;r++){var c=e[r],u=s[c.id],h=this._objectWrappers[u];if(h&&!h.deleted){h.deleted=!0;for(var d=0,g=t.length;d<g;d++){var p=i[u];if(m(t[d],p)){var f=this._grid.getCellData(p[0],p[1]),_=h.pixelCoordsAtNull;n[l.get(f)]||(n[l.get(f)]={cell:f,gridX:p[0],gridY:p[1],removedObjects:{}},this._removeCluster(f)),f.sumX-=_[0]*o,f.sumY-=_[1]*o,n[l.get(f)].removedObjects[c.id]=!0}}}}for(var M=[],r=0,a=this._objectWrappers.length;r<a;r++)this._objectWrappers.deleted||M.push(this._objectWrappers[r]);this._objectWrappers=M;for(var r in n)if(n.hasOwnProperty(r)){for(var v=[],y=n[r].cell.geoObjects,j=0,a=y.length;j<a;j++)n[r].removedObjects[y[j].id]||v.push(y[j]);n[r].cell.geoObjects=v}return n}},_indexOfObject:function(e){for(var t=0,n=this._objectWrappers.length;t<n;){if(e.id==this._objectWrappers[t].hash.id)return t;t++}return-1},_onGridBoundsChange:function(e){e.get("oldZoom")!=e.get("newZoom")?this._refresh():this._onGridBoundsMove(e)},_onGridBoundsMove:function(e){var t=o.getDisjointArea(e.get("newGridBounds"),e.get("oldGridBounds")),n=t.added;this._grid.createCells(this._createCellBindFunction,n);var i=this._addToGrid(this._objectWrappers,n);this._regenerateClusters(i);
var s=t.removed;this._grid.forEach(this._removeCluster,this,s),this._grid.clearCells(s)},_refresh:function(){var e=this._getVisibleObjects();this._clearClusterData(),this._grid.clearAll(),this._applyGridSize(),this._gridBoundsGetter.update();var t=this._gridBoundsGetter.get();this._grid.createCells(this._createCellBindFunction,t),this._generateObjectsGridNumbers(this._objectWrappers),this._addToGrid(this._objectWrappers,t),this._grid.forEach(this._generateClusters,this,t);var n=this._getVisibleObjects(),i=this._getUpdatedObjectArrays(e.objects,n.objects);this._fireStateChange({added:i.added,removed:i.removed,update:i.update,removedClusters:e.clusters,addedClusters:n.clusters})},_getVisibleObjects:function(){var e=[],t=[];return this._grid.forEach(function(n){e=e.concat(n.geoObjectsWithoutClusters),t=t.concat(n.clusters)},this),{objects:e,clusters:t}},_getUpdatedObjectArrays:function(e,t){e.sort(M),t.sort(M);for(var n=[],i=[],o=[],s=0,r=0,a=e.length,l=t.length;s<a&&r<l;)e[s].id<t[r].id?(i.push(e[s]),s++):e[s].id>t[r].id?(n.push(t[r]),r++):(o.push(e[s]),s++,r++);return s!=a&&(i=i.concat(e.slice(s))),r!=l&&(n=n.concat(t.slice(r))),{added:n,removed:i,update:o}},_fireRemoveAll:function(){var e=[],t=[];this._grid.forEach(function(t){e=e.concat(t.geoObjectsWithoutClusters)},this);for(var n in this._clustersById)t.push(this._clustersById[n]);this._fireStateChange({removed:e,removedClusters:t,sync:!0})},_showClusters:function(e){this._grid.forEach(this._showGridCluster,this,e||this._gridBoundsGetter.get())},_getCorrectMargin:function(e){for(var t=this._currentGridSize/2,n=u.correct(e),i=0;i<4;i++)n[i]=Math.min(n[i],t);return n},_setupOptionMonitor:function(){this._optionMonitor=new p(this.options).add(["gridSize","viewportMargin","margin","minClusterSize","maxZoom","groupByCoordinates"],this._refresh,this)},_clearOptionMonitor:function(){this._optionMonitor.destroy()},_fireStateChange:function(e){this.events.fire("statechange",{added:e.added||[],removed:e.removed||[],addedClusters:e.addedClusters||[],removedClusters:e.removedClusters||[],update:e.update||[],sync:e.sync})},_getCellData:function(e,t){var n=this._currentGridSize;return{sumX:0,sumY:0,center:[e*n+n/2,t*n+n/2],geoObjects:[],clusters:[],geoObjectsWithoutClusters:[]}},_removeUnprocessedObjects:function(e){for(var t,n=[],i=0,o=this._unprocessedObjects.length;i<o;i++){t=!0;for(var s=0,r=e.length;s<r&&!t;s++)e[s].id==this._unprocessedObjects[i].id&&(t=!1);t&&n.push(this._unprocessedObjects[i])}this._unprocessedObjects=n},_applyGridSize:function(){this._currentGridSize=Math.min(this.options.get("gridSize",64),256),this._currentGridSize=Math.max(this._currentGridSize,2);var e=Math.round(Math.log(this._currentGridSize)/Math.LN2);this._currentGridSize=Math.pow(2,e)},_clearClusterData:function(){this._clustersById={};for(var e in this._wrappersById)this._wrappersById[e].cluster=null,this._wrappersById[e].isClustered=!1,this._wrappersById[e].isShown=!1},_checkBounds:function(){var e=this.getPixelBounds();!!this._oldBounds==!!e&&e&&d(e[0],this._oldBounds[0])&&d(e[1],this._oldBounds[1])||(this.events.fire("pixelboundschange"),this._oldBounds=e)}});var _=function(e,t){return e.pixelCoordsAtNull[0]-t.pixelCoordsAtNull[0]},M=function(e,t){return e.id>t.id?1:e.id==t.id?0:-1};e(f)})}],["2D",function(e){e.modules.define("clusterer.DataManager",["util.defineClass","data.BaseManager"],function(e,t,n){function i(e){i.superclass.constructor.call(this),this._sourceDataManager=e,this._sourceDataManager.events.add("change",this._onSourceDataChange,this),this._activeObject=e.get("activeObject");for(var t=e.get("geoObjects"),n=0,o=t.length;n<o;n++)this._setupGeoObjectListeners(t[n]);this._activeObject&&this._setupGeoObjectListeners(this._activeObject)}t(i,n,{get:function(e,t){var n,i=e.split("."),o=this._getChildDataManager(i);return n=o?o.get(this._getSubQuery(e,i["geoObjects"==i[0]?2:1]),t):this._sourceDataManager.get(e,t)},destroy:function(){this._sourceDataManager.events.remove("change",this._onSourceDataChange,this);for(var e=this._sourceDataManager.get("geoObjects"),t=0,n=e.length;t<n;t++)this._clearGeoObjectListeners(e[t]);this._activeObject&&this._clearGeoObjectListeners(this._activeObject),i.superclass.destroy.call(this)},_onSourceDataChange:function(){var e=this._sourceDataManager.get("activeObject");this._activeObject!=e&&(this._activeObject&&this._clearGeoObjectListeners(this._activeObject),this._activeObject=e,this._activeObject&&this._setupGeoObjectListeners(this._activeObject)),this.fireChangeEvent()},_getChildDataManager:function(e){var t,n=e.length,i=e[0],o=null;if("geoObjects"==i&&n>3){if(t=e[2],"state"==t||"properties"==t||"options"==t){var s=e[1],r=this._sourceDataManager.get("geoObjects");o=r[s]&&r[s][t]}}else if("activeObject"==i&&n>2&&(t=e[1],"state"==t||"properties"==t||"options"==t)){var a=this._sourceDataManager.get("activeObject");o=a&&a[t]}return o},_getSubQuery:function(e,t){return e.substr(e.indexOf(t)+t.length+1)},_setupGeoObjectListeners:function(e){e.properties.events.add("change",this.fireChangeEvent,this),e.state.events.add("change",this.fireChangeEvent,this),e.options.events.add("change",this.fireChangeEvent,this)},_clearGeoObjectListeners:function(e){e.properties.events.remove("change",this.fireChangeEvent,this),e.state.events.remove("change",this.fireChangeEvent,this),e.options.events.remove("change",this.fireChangeEvent,this)}}),e(i)})}],["9U",function(e){e.modules.define("clusterer.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["2B",function(e){e.modules.define("ClusterPlacemark",["util.defineClass","util.bounds","option.Manager","collection.Item","event.globalize","vow","data.Manager","cluster.optionMapper","clusterer.optionMapper","geoObject.optionMapper","clusterPlacemark.View","geometry.Point","theme.islands.cluster.metaOptions"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g){function p(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}var m=function(e,t,n){m.superclass.constructor.call(this),this.options=this._createOptionManager(n),"function"==typeof e.getType?this.geometry=e:this.geometry=new d(e.coordinates||e),this.properties=t,this.state=new a,this._clusterBounds=null,this._clusterListeners=this.events.group(),this.events.addController(f),this.events.fire("create")},f=s(m);t(m,o,{getGeoObjects:function(){return this.properties.get("geoObjects")},getOverlay:function(){return this._view?this._view.getOverlay():r.reject("ClusterPlacemark wasn't added to map.")},getOverlaySync:function(){return this._view?this._view.getOverlaySync():null},onAddToMap:function(e){this.options.get("disableClickZoom")||this._clusterListeners.add("click",this._onClickZoom,this,100),this.geometry.setMap(e),this.geometry.options.setParent(this.options),this._setupView(e)},onRemoveFromMap:function(e){this.options.get("disableClickZoom")||this._clusterListeners.removeAll(),this._clearView(),this.geometry.setMap(null),this.geometry.options.setParent(null)},getBounds:function(){return this._clusterBounds||this._calculateClusterBounds(),this._clusterBounds},_onClickZoom:function(e){if(!e.isDefaultPrevented()){var t=this.getMap();t.getZoom()!=t.zoomRange.getCurrent()[1]&&(this.getBounds(),this._setMapBounds(),e.preventDefault())}},_setupView:function(){this._view=new h(this)},_clearView:function(){this._view.destroy()},_calculateClusterBounds:function(){for(var e,t=this.getGeoObjects(),i=[],o=0,s=t.length;o<s;o++)i.push(t[o].geometry.getCoordinates());e=0==i.length?null:n.fromPoints(i,this.options.get("projection")),this._clusterBounds=e},_setMapBounds:function(){var e=this.getMap();e.setBounds(this._clusterBounds,{preciseZoom:!e.options.get("avoidFractionalZoom"),margin:this.options.get("zoomMargin",0),useMapMargin:this.options.get("useMapMargin",!0),checkZoomRange:!0})},_createOptionManager:function(e){var t=new i(null,null,"cluster",l);return t.get=function(e,t){var n=i.prototype.getNative.call(this,e);return"undefined"==typeof n&&(n=i.prototype.get.call(this,p(e,"cluster")),"undefined"==typeof n&&(n=i.prototype.get.call(this,e,t))),n},t}}),l.setRule({name:["balloon","hint"],rule:"prefixed"}),c.setRule({name:"cluster",rule:function(e,t){return[p(e,t),e]}}),c.setRule({name:"cluster",key:"projection",rule:"plain"}),u.setRule({name:"cluster",rule:function(e,t){return[p(e,t),e]}}),u.setRule({name:"cluster",key:"projection",rule:"plain"}),e(m)})}],["9X",function(e){e.modules.define("clusterPlacemark.View",["util.defineClass","vow","util.callbackChunker","util.cancelableCallback","constants.zIndex","option.Manager","option.Mapper","Monitor","geoObject.view.component.Dragger","overlay.storage","event.Mapper","geoObject.view.component.OverlayEventMappingTable","constants.zIndex"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,s){function g(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}var p={defaultValue:!0},m=function(e){this._cluster=e,this._overlay=null,this._overlayData=null,this._cancelableCallback=null,this._chunker=i.get(this._cluster.getMap()),this._chunkerCallbackId=NaN,this._optionMonitor=new l(this._cluster.options),this._startOverlayCreating(),this._setupVisibilityListener(),this._overlayEventsListener=null,this._previousZIndex=null};m.GeoObjectIsHiddenError=function(){return new Error("GeoObject is not visible")},m.GeoObjectRemovedFromMapError=function(){return new Error("GeoObject was removed from map")},m.OverlayWasntFoundError=function(){return new Error("Overlay wasn't found")},t(m,{getOverlay:function(){return this._overlayDeferred||(this._overlayDeferred=n.defer(),this._overlayRejectMessageFunc?this._overlayDeferred.reject(this._overlayRejectMessageFunc()):this._overlay&&this._overlayDeferred.resolve(this._overlay)),this._overlayDeferred.promise()},getOverlaySync:function(){return this._overlay||null},destroy:function(){this._optionMonitor.removeAll(),this._rejectOverlayPromises(m.GeoObjectRemovedFromMapError),this._clearOverlayAndFire(),this._clearOverlayOptionManager(),this._overlayData=null},_startOverlayCreating:function(){this._overlayDeferred=null,this._constructOverlay()},_clearOverlayAndFire:function(){this._overlayDeferred=null;var e=!!this._overlay;this._overlay&&(this._overlay.events.setParent(null),this._overlay.setMap(null),this._overlay.options.setParent(null),this._stopOverlayEventsListening(),this._clearHoverZIndex()),this._overlay=null,e>0&&this._fireOverlayChange()},_constructOverlay:function(){this._overlayRejectMessageFunc=null;var e=this._cluster.options.get("pointOverlay");if("string"==typeof e){var t=e;if(e=u.get(t),"undefined"==typeof e)return this._cancelableCallback=o.create(this._createOverlay,this),void u.require([t]).spread(this._cancelableCallback,function(){this._rejectOverlayPromises(m.OverlayWasntFoundError)},this)}this._createOverlay(e)},_createOverlay:function(e){this._cancelableCallback=null,this._overlayClass=e,this._cluster.options.get("syncOverlayInit")?this._setupOverlay():this._chunkerCallbackId=this._chunker.addCallback(this._setupOverlay,this)},_fulfillOverlayPromises:function(){this._overlayDeferred&&this._overlayDeferred.resolve(this._overlay)},_rejectOverlayPromises:function(e){this._clearAsyncOperations(),this._overlayRejectMessageFunc=e,this._overlayDeferred&&this._overlayDeferred.reject(e())},_clearAsyncOperations:function(){this._cancelableCallback&&(this._cancelableCallback.cancel(),this._cancelableCallback=null),this._chunkerCallbackId&&(this._chunker.removeCallback(this._chunkerCallbackId),this._chunkerCallbackId=NaN)},_setupOverlay:function(){this._chunkerCallbackId=NaN;var e=this._overlayData||(this._overlayData={geometry:this._cluster.geometry,properties:this._cluster.properties,state:this._cluster.state,geoObject:this._cluster}),t=new this._overlayClass(this._cluster.geometry.getPixelGeometry(),e);this._setupOverlayOptionManager(),this._setupMappingRules(t.options.getName()),t.options.setParent(this._overlayOptionManager),t.setMap(this._cluster.getMap()),t.events.setParent(new h(this._cluster.events,new d(this._cluster))),this._overlay=t,this._startOverlayEventsListening(),this._fulfillOverlayPromises(),this._fireOverlayChange()},_fireOverlayChange:function(){this._cluster.events.fire("overlaychange",{overlay:this._overlay||null})},_setupVisibilityListener:function(){this._optionMonitor.add("visible",this._onVisibilityChange,this,p)},_clearVisibilityListener:function(){this._optionMonitor.remove("visible")},_onVisibilityChange:function(){this._optionMonitor.get("visible")?this._startOverlayCreating():(this._rejectOverlayPromises(m.GeoObjectIsHiddenError),this._clearOverlayAndFire())},_setupOverlayOptionManager:function(){this._overlayOptionManager&&null!=this._overlayOptionManager.getParent()||(this._overlayOptionNames={},this._overlayOptionMapper=new a,this._overlayOptionManager=new r(null,this._cluster.options,null,this._overlayOptionMapper))},_clearOverlayOptionManager:function(){this._overlayOptionManager&&this._overlayOptionManager.setParent(null)},_setupMappingRules:function(e){this._overlayOptionMapper.setRule({name:e,rule:function(e){return[g(e,"icon"),e]}}),this._overlayOptionMapper.setRule({name:e,key:"projection",rule:"plain"})},_startOverlayEventsListening:function(){this._overlayEventsListener=this._overlay.events.group().add(["mouseenter","mouseleave"],this._onOverlayHoverChange,this)},_stopOverlayEventsListening:function(){this._overlayEventsListener.removeAll()},_onOverlayHoverChange:function(e){"mouseenter"==e.get("type")?this._setupHoverZIndex():this._clearHoverZIndex()},_setupHoverZIndex:function(){this._previousZIndex=this._overlay.options.get("zIndex",0),this._overlay.options.set("zIndex",this._overlay.options.get("zIndexHover",s.hover))},_clearHoverZIndex:function(){null!==this._previousZIndex&&(this._overlay.options.set("zIndex",this._previousZIndex),this._previousZIndex=null)}}),e(m)})}],["0x",function(e){e.modules.define("Collection",["util.defineClass","collection.Item","component.collection.ParentCollection","event.Mapper","collection.EventMappingTable"],function(e,t,n,i,o,s){function r(e){this._childrenCount=0,r.superclass.constructor.call(this,e),this._collectionImplementation=new i(this,{onAdd:{callback:this._onAdd,context:this},onRemove:{callback:this._onRemove,context:this}},new o(this.events,this.getEventMappingTable()))}t(r,n,{add:function(e){return this._collectionImplementation.add(e),this._childrenCount=this._collectionImplementation.getLength(),this},remove:function(e){return this._collectionImplementation.remove(e),this._childrenCount=this._collectionImplementation.getLength(),this},removeAll:function(){return this._collectionImplementation.removeAll(),this._childrenCount=0,this},getIterator:function(){return this._collectionImplementation.getIterator()},each:function(e,t){return this._collectionImplementation.each(e,t),this},getLength:function(){return this._childrenCount},filter:function(e){for(var t,n=this.getIterator(),i=[];(t=n.getNext())!=n.STOP_ITERATION;)e(t)&&i.push(t);return i},get:function(e){if(e>-1&&e<this._childrenCount){for(var t=this.getIterator(),n=0;n<e;n++)t.getNext();return t.getNext()}return null},getAll:function(){for(var e,t=this.getIterator(),n=[];(e=t.getNext())!=t.STOP_ITERATION;)n.push(e);return n},indexOf:function(e){for(var t,n=0,i=this.getIterator();(t=i.getNext())!=i.STOP_ITERATION;){if(e==t)return n;n++}return-1},getEventMappingTable:function(){return new s(this)},_onAdd:function(e){this.events.fire("add",{child:e})},_onRemove:function(e){this.events.fire("remove",{child:e})}}),e(r)})}],["0r",function(e){e.modules.define("collection.EventMappingTable",["util.defineClass","Event"],function(e,t,n){function i(e){this._currentTarget=e,this.parentchange=!1,this.mapchange=!1,this.optionschange=!1,this["*"]=this._defaultMapping}t(i,{_defaultMapping:function(e){return new n({currentTarget:this._currentTarget},e)}}),e(i)})}],["2b",function(e){e.modules.define("collection.Item",["event.Manager","option.Manager","component.child.MapChild"],function(e,t,n,i){function o(e){this.options=this.createOptionManager(e),this.events=new t({context:this}),this._itemImplementation=new i({onParentChange:{callback:this._onParentChange,context:this},onMapChange:{callback:this._onMapChange,context:this}}),this.options.events.add("change",function(e){this.events.fire("optionschange")},this)}o.prototype={getParent:function(){return this._itemImplementation.getParent()},setParent:function(e){return this._itemImplementation.setParent(e),this},getMap:function(){return this._itemImplementation.getMap()},onAddToMap:function(e){},onRemoveFromMap:function(e){},createOptionManager:function(e){return new n(e)},_onParentChange:function(e,t){this.events.fire("parentchange",{newParent:t,oldParent:e})},_onMapChange:function(e,t){e&&this.onRemoveFromMap(e),t&&this.onAddToMap(t),this.events.fire("mapchange",{newMap:t,oldMap:e})}},e(o)})}],["9B",function(e){e.modules.define("component.array.BaseArray",["util.defineClass","util.array","util.ArrayIterator"],function(e,t,n,i){function o(e,t){this._children=e||[],this._callbacks=t||{}}t(o,{set:function(e,t){this._set(e,t)},get:function(e){return this._children[e]},add:function(e,t){this._add(e,"undefined"!=typeof t?t:this._children.length)},remove:function(e){this._remove(n.indexOf(this._children,e))},removeAll:function(){for(var e=0,t=this._children.length;e<t;e++)this._remove(0)},splice:function(e,t){for(var n=[],i=Array.prototype.slice.call(arguments,2),o=i.length,s=0;s<t&&e<this._children.length;s++)n.push(s<o?this._set(e++,i[s]):this._remove(e));for(;s<o;s++)this._add(i[s],e++);return n},getLength:function(){return this._children.length},getIterator:function(){return new i(this._children)},each:function(e,t){n.each(this._children,e,t)},indexOf:function(e){return n.indexOf(this._children,e)},sort:function(e){this._children.sort(e)},quickSort:function(e){return this._children=n.quickSort(this._children,e),this._children},toArray:function(){return this._children.slice()},_add:function(e,t){this._children.length<t&&(this._children.length=t),this._children.splice(t,0,e);var n=this._callbacks.onAdd;n&&n.callback.call(n.context,t,e)},_remove:function(e){var t=this._children.splice(e,1)[0],n=this._callbacks.onRemove;return n&&n.callback.call(n.context,e,t),t},_set:function(e,t){var n=this._children[e],i=this._callbacks.onSet;return this._children[e]=t,i&&i.callback.call(i.context,e,n,t),n}}),e(o)})}],["9C",function(e){e.modules.define("component.array.ParentArray",["util.defineClass","component.array.BaseArray","component.parent.BaseParent"],function(e,t,n,i){function o(e,t,o,s,r){e=e||[],this._callbacks=o||{},this._parent=t,this._parentEvents=s,this._parentOptions=r,this._parentComponent=new i(t,{callback:this._childParentChangeCallback,context:this});for(var a=0,l=e.length;a<l;a++)this._parentComponent.addChild(e[a]);this._baseArrayComponent=new n(e,{onAdd:{callback:this._addCallback,context:this},onRemove:{callback:this._removeCallback,context:this},onSet:{callback:this._setCallback,context:this}})}t(o,{get:function(e){return this._baseArrayComponent.get(e)},set:function(e,t){return this._parent==t.getParent()&&this._baseArrayComponent.remove(t),this._baseArrayComponent.set(e,t)},add:function(e,t){this._parent==e.getParent()&&this._baseArrayComponent.remove(e),this._baseArrayComponent.add(e,t)},remove:function(e){this._baseArrayComponent.remove(e)},removeAll:function(){this._baseArrayComponent.removeAll()},splice:function(e,t){for(var n=Array.prototype.slice.call(arguments,2),i=0,o=n.length;i<o;i++){var s=n[i];this._parent==s.getParent()&&this._baseArrayComponent.remove(s)}return this._baseArrayComponent.splice.apply(this._baseArrayComponent,arguments)},getLength:function(){return this._baseArrayComponent.getLength()},getIterator:function(){return this._baseArrayComponent.getIterator()},each:function(e,t){this._baseArrayComponent.each(e,t)},indexOf:function(e){return this._baseArrayComponent.indexOf(e)},sort:function(e){this._baseArrayComponent.sort(e)},quickSort:function(e){this._baseArrayComponent.quickSort(e)},toArray:function(){return this._baseArrayComponent.toArray()},_addCallback:function(e,t){this._parentComponent.addChild(t);var n=this._callbacks.onAdd;n&&n.callback.call(n.context,e,t)},_removeCallback:function(e,t){this._parentComponent.removeChild(t);var n=this._callbacks.onRemove;n&&n.callback.call(n.context,e,t)},_setCallback:function(e,t,n){this._parentComponent.removeChild(t),this._parentComponent.addChild(n);var i=this._callbacks.onSet;i&&i.callback.call(i.context,e,t,n)},_childParentChangeCallback:function(e,t,n){this._parent==t&&(e.events.setParent(null),e.options.setParent(null),this._baseArrayComponent.indexOf(e)!=-1&&this._baseArrayComponent.remove(e)),this._parent==n&&(e.events.setParent(this._parentEvents||this._parent.events),e.options.setParent(this._parentOptions||this._parent.options))}}),e(o)})}],["9E",function(e){e.modules.define("component.child.BaseChild",[],function(e){var t=function(e,t){this._oldParent=null,this._parent=null,this._parentChangeCallback=e,this._context=t};t.prototype={setParent:function(e){this._parent!=e&&(this._parent=e,this._parentChangeCallback&&this._parentChangeCallback.call(this._context,this._oldParent,this._oldParent=this._parent))},getParent:function(){return this._parent}},e(t)})}],["9F",function(e){e.modules.define("component.child.MapChild",["component.child.BaseChild"],function(e,t){var n=function(e){this._oldMap=null,this._map=null,this._callbacks=e,this._baseItem=new t(this._parentChangeCallback,this)},i="mapchange";n.prototype={setParent:function(e){this._baseItem.setParent(e)},getParent:function(){return this._baseItem.getParent()},getMap:function(){return this._map},_parentChangeCallback:function(e,t){e&&e.events.remove(i,this._onMapChange,this),this._setupMap(null);var n=this._callbacks.onParentChange;n&&n.callback.call(n.context,e,t),this._setupMap(t&&t.getMap()),t&&t.events.add(i,this._onMapChange,this)},_setupMap:function(e){if(this._map!=e){this._map=e;var t=this._callbacks.onMapChange;t&&t.callback.call(t.context,this._oldMap,this._oldMap=this._map)}},_onMapChange:function(e){this._setupMap(e.get("newMap"))}},e(n)})}],["9G",function(e){e.modules.define("component.collection.BaseCollection",["util.List"],function(e,t){var n=function(e){this._callbacks=e||{},this._childList=new t};n.prototype={add:function(e){if("undefined"!=typeof e&&!this._childList.contains(e)){this._childList.insert(e);var t=this._callbacks.onAdd;t&&t.callback.call(t.context,e)}},remove:function(e){if(this._childList.contains(e)){this._childList.remove(e);var t=this._callbacks.onRemove;t&&t.callback.call(t.context,e)}},removeAll:function(){for(var e,t=this._childList.getIterator();(e=t.getNext())!=t.STOP_ITERATION;)this.remove(e)},getLength:function(){return this._childList.length},getIterator:function(){return this._childList.getIterator()},each:function(e,t){for(var n,i=this._childList.getIterator();(n=i.getNext())!=i.STOP_ITERATION&&(t?e.call(t,n):e(n))!==!1;);}},e(n)})}],["9K",function(e){e.modules.define("component.collection.ParentCollection",["component.collection.BaseCollection","component.parent.BaseParent"],function(e,t,n){var i=function(e,i,o){this._callbacks=i||{},this._parent=e,this._parentEvents=o,this._parentComponent=new n(e,{callback:this._childParentChangeCallback,context:this}),this._baseCollectionComponent=new t({onAdd:{callback:this._addCallback,context:this},onRemove:{callback:this._removeCallback,context:this}})};i.prototype={add:function(e){this._baseCollectionComponent.add(e)},remove:function(e){this._baseCollectionComponent.remove(e)},removeAll:function(){this._baseCollectionComponent.removeAll()},getLength:function(){return this._baseCollectionComponent.getLength()},getIterator:function(){return this._baseCollectionComponent.getIterator()},each:function(e,t){this._baseCollectionComponent.each(e,t)},_addCallback:function(e){this._parentComponent.addChild(e);var t=this._callbacks.onAdd;t&&t.callback.call(t.context,e)},_removeCallback:function(e){this._parentComponent.removeChild(e);var t=this._callbacks.onRemove;t&&t.callback.call(t.context,e)},_childParentChangeCallback:function(e,t,n){this._parent==t&&(e.events.setParent(null),e.options.setParent(null),this._baseCollectionComponent.remove(e)),this._parent==n&&(e.events.setParent(this._parentEvents||this._parent.events),e.options.setParent(this._parent.options))}},e(i)})}],["2g",function(e){e.modules.define("component.EdgeMove",["util.defineClass","util.pixelBounds","util.vector","behavior.action","util.scheduler.strategy.Raf","util.math.cubicBezier"],function(e,t,n,i,o,s,r){var a=t(function(e,t){this._map=t,this._activePadding="undefined"!=typeof e.activePadding?e.activePadding:25,this._activeMargin="undefined"!=typeof e.activeMargin?e.activeMargin:150,this._inertiaTimeout="undefined"!=typeof e.inertiaTimeout?e.inertiaTimeout:500,this._useMapMargin="undefined"!=typeof e.useMapMargin&&e.useMapMargin,this._onTickCallback=e.onTick,this._onTickCallbackThisArg=e.thisArg,this._currentVector=null,this._deltaCallback=null,this._startTime=null,this._process=null},{move:function(e){var t=this._getMapGlobalPixelBounds();if(n.containsPoint(t,e))this._process&&this._finishProcess();else{var o=this._getMapGlobalPixelCenter(),s=[e[0]-o[0],e[1]-o[1]],r=this._getMapBoundsIntersection(t,s);s=[e[0]-r.point[0],e[1]-r.point[1]];var a=Math.min(10+i.length(s),this._activeMargin)/10;this._currentVector=i.scale(i.normalize(s),a),this._deltaCallback=this._inDeltaCallback,this._process||this._startProcess()}},stop:function(){this._process&&this._finishProcess()},destroy:function(){this.stop(),this._map=null,this._onTickCallback=null,this._onTickCallbackThisArg=null},_startProcess:function(){o.capture(this._map,this,0),o.events.add("end",this._stopProcess,this),this._startTime=+new Date,this._process=new s(this._tick,this),this._process.start()},_finishProcess:function(){this._deltaCallback!=this._outDeltaCallback&&(this._startTime=+new Date,this._deltaCallback=this._outDeltaCallback)},_stopProcess:function(){this._process&&(this._process.stop(),this._process=null),o.events.remove("end",this._stopProcess,this),o.release({behavior:this})},_tick:function(){var e=r("ease-out").getValue(Math.min((+new Date-this._startTime)/this._inertiaTimeout,1)),t=this._deltaCallback(e);t?(this._onTickCallback&&this._onTickCallback.call(this._onTickCallbackThisArg,t),o.tick({pixelOffset:i.scale(t,-1),duration:0},{behavior:this}),this._process.start()):this._stopProcess()},_inDeltaCallback:function(e){return i.scale(this._currentVector,e)},_outDeltaCallback:function(e){if(e<1)return i.sub(this._currentVector,i.scale(this._currentVector,e))},_getMapGlobalPixelBounds:function(){var e=this._getMapGlobalPixelCenter(),t=this._map.container.getSize(),n=this._activePadding,i=this._useMapMargin?this._map.margin.getMargin():[0,0,0,0],o=[(t[0]-(i[3]+i[1]))/2,(t[1]-(i[0]+i[2]))/2];return[[e[0]-o[0]+n,e[1]-o[1]+n],[e[0]+o[0]-n,e[1]+o[1]-n]]},_getMapBoundsIntersection:function(e,t){for(var o,s=n.getCenter(e),r=[s,i.add(s,t)],a=[e[0],[e[1][0],e[0][1]],e[1],[e[0][0],e[1][1]]],l=0,c=a.length;l<c;l++){var u=[a[l],a[l+1]||a[0]];if(o=i.intersectionPoint(u[0],u[1],r[0],r[1]))break}return o},_getMapGlobalPixelCenter:function(){var e=this._map.action.getCurrentState().globalPixelCenter.slice();if(this._useMapMargin){var t=this._map.margin.getMargin();e[0]+=(t[3]-t[1])/2,e[1]+=(t[0]-t[2])/2}return e}});e(a)})}],["9L",function(e){e.modules.define("component.event.Cacher",[],function(e){function t(e,t,n){this._cache=t,this._overrideStorage=n,this._event=e,this._cacheManager=null}function n(e){return{set:function(t,n){e[t]=n}}}var i={};t.prototype={get:function(e){var t=this._cache,o=t[e];if("undefined"==typeof o){var s=this._overrideStorage.get(e),r=this._event;if(s&&!this._cacheManager&&(this._cacheManager=n(t)),o=s?s(r,this._cacheManager):r.originalEvent[e],"undefined"==typeof o)return void(t[e]=i);t[e]=o}return o==i?void 0:o}},e(t)})}],["2l",function(e){e.modules.define("component.EventFreezer",["util.defineClass"],function(e,t){function n(e,t){this._frozen=!1,this._changed=!1,this._eventCallback=e,this._context=t,this._eventData=null}t(n,{freeze:function(){this._frozen=!0},unfreeze:function(){this._frozen=!1,this._changed&&(this._changed=!1,this._fire())},isFrozen:function(){return this._frozen},fire:function(e,t,n){if("undefined"!=typeof e){this._eventData=this._eventData||{};var i="old"+e;"undefined"==typeof this._eventData[i]&&(this._eventData[i]=t),this._eventData["new"+e]=n}this._frozen?this._changed=!0:this._fire()},_fire:function(){if(this._eventCallback){var e=this._eventData;this._eventData=null,this._eventCallback.call(this._context,e)}}}),e(n)})}],["9N",function(e){e.modules.define("component.parent.BaseParent",["util.defineClass"],function(e,t){function n(e,t){this._context=e,this._childParentChangeCallback=t}t(n,{addChild:function(e){e.getParent()!=this._context&&(e.events.add("parentchange",this._onChildParentChange,this),e.setParent(this._context))},removeChild:function(e){e.getParent()==this._context&&e.setParent(null)},_onChildParentChange:function(e){var t=e.get("target"),n=e.get("oldParent");this._context==n&&t.events.remove("parentchange",this._onChildParentChange,this);var i=this._childParentChangeCallback;i&&i.callback.call(i.context,t,n,e.get("newParent"))}}),e(n)})}],["2o",function(e){e.modules.define("component.ProviderObserver",["util.defineClass","util.array","util.id","vow"],function(e,t,n,i,o){var s=function(e){this._providers=[],this._stricts=[],this._requests={},this._parameters=e};t(s,{destroy:function(){this._providers=[];for(var e in this._requests)if(this._requests.hasOwnProperty(e)){var t=this._requests[e];t.deferred.reject("noProvider"),window.clearTimeout(t.timeout)}},addProvider:function(e,t){return n.indexOf(this._providers,e)==-1&&(this._providers.push(e),this._stricts.push(t),this._parameters.changeCallback&&(this._parameters.changeEventType&&e.events.add(this._parameters.changeEventType,this._parameters.changeCallback,this),this._parameters.changeCallback())),this},removeProvider:function(e){var t=n.indexOf(this._providers,e);return t!=-1&&(this._providers.splice(t,1),this._stricts.splice(t,1),this._parameters.changeCallback&&(this._parameters.changeEventType&&e.events.remove(this._parameters.changeEventType,this._parameters.changeCallback,this),this._parameters.changeCallback())),this},get:function(e){var t=o.defer(),n={resolved:[],rejected:[],stricts:[],timeoutExceeded:0},s=this._requests,r=[],a=this._providers.slice(),l=a.length,c=this._stricts;if(l){for(var u={deferred:t,result:n,pending:l,answers:[]},h=function(e){return function(t){r[e].ready=!0,r[e].result=t,--u.pending||g()}},d=function(e){return function(t){r[e].ready=!0,r[e].result=t,r[e].rejected=!0,--u.pending||g()}},g=function(){window.clearTimeout(u.timeout),delete s[i.get(u)];for(var e=0;e<l;e++)r[e].ready&&(r[e].rejected?n.rejected.push(r[e].result):(n.resolved.push(r[e].result),n.stricts.push(c[e])));t.resolve(n)},p=0;p<l;p++)r[p]={},this._parameters.makeRequest(this._providers[p],e).then(h(p),d(p));u.pending&&(s[i.get(u)]=u,u.timeout=window.setTimeout(function(){n.timeoutExceeded=u.pending,g()},this._parameters.requestTimeout||3e4))}else t.reject("noProvider");return t.promise()}}),e(s)})}],["),",function(e){e.modules.define("component.sharedEntity.captor.Balloon",["util.defineClass","component.sharedEntity.captor.Popup","vow"],function(e,t,n,i){function o(e,t,n,i){o.superclass.constructor.call(this,e,t,n,i)}t(o,n,{getBalloon:function(){return this.getPopup()},autoPan:function(){var e=this.getBalloon();return e?e.autoPan():i.reject("Balloon is not captured.")}}),e(o)})}],["):",function(e){e.modules.define("component.sharedEntity.captor.Popup",["util.defineClass","event.Manager","event.Mapper","Event","sharedEntity.CaptorAccessor","option.Manager","projection.idle","vow","util.cancelableCallback","util.extend","error"],function(t,n,i,o,s,r,a,l,c,u,h,d){function g(e,t,n,o){this._manager=e,this._popupOwner=t,this._optionManagerName=n,this._sharingManager=o,
this.events=new i({context:this}),this._popup=null,this._accessor=null,this._setupAccessor(),this._setupEventMapper()}n(g,{destroy:function(){this._sharingManager&&this._sharingManager.getOwner()==this._popupOwner&&this._sharingManager.capture(null),this._clearEventMapper(),this._accessor=null},setSharingManager:function(e){this._sharingManager=e},open:function(t,n,i){this._cancelCaptureRequest();var o=c.defer();if(this._popup)o.resolve(this._openCaptured(t,n,i));else{if(this._openDeferred=o,this._captureCallback=u.create(function(e){this._openDeferred=this._captureCallback=null,this._onCapture(e);var s=e.isOpen(),r=this._openCaptured(t,n,i);s&&r.then(this._fireOpen,this),o.resolve(r)},this),e.env.debug&&(!this._sharingManager||"function"!=typeof this._sharingManager.capture))throw new Error("component.sharedEntity.captor.Popup.open: Не найден менеджер разделяемого инфо-объекта.");this._sharingManager.capture(this._accessor).then(this._captureCallback)}return o.promise()},close:function(e){return this._popup?this._popup.close(e):(this._cancelCaptureRequest(),c.resolve())},isOpen:function(){return this._popup&&this._popup.isOpen()},setPosition:function(e){return this._position=e,this._popup?c.resolve(this._popup.setPosition(this._position)):c.reject(d.create("StateError","Popup is not captured at the moment"))},setData:function(e){return this._data=e,this._popup?c.resolve(this._popup.setData(this._data)):c.reject(d.create("StateError","Popup is not captured at the moment"))},setOptions:function(e){return this._options=this._specifyOptions(e||{}),this._popup.options.setParent(this._options),c.resolve()},getPosition:function(){return this._position||null},getData:function(){return this._data||null},getOptions:function(){return this._options||null},getPopup:function(){return this._popup||null},getOwner:function(){return this._popupOwner},getOverlay:function(){return this._popup?this._popup.getOverlay():c.reject(d.create("StateError","Popup is not captured at the moment"))},getOverlaySync:function(){return this._popup?this._popup.getOverlaySync():null},setMasterAccessor:function(e){this._accessor.setMaster(e)},_setupAccessor:function(){var e=function(){return this._sharingManager.capture(null)},t=function(e){return e?c.resolve():this.close(!0)};this._accessor=new r(this._popupOwner,{capture:t,open:e,close:e},this._onRelease,this)},_setupEventMapper:function(){var e=this._popupOwner;this.events.setParent(new o(this._manager.events,{"*":function(t){return new s({type:t.get("type"),target:e})}}))},_clearEventMapper:function(){this.events.setParent(null)},_onCapture:function(e){this._popup=e,e.events.setParent(this.events),this.events.fire("capture")},_onRelease:function(){this._popup?(this.isOpen()&&this._fireClose(),this._popup.events.setParent(null),this._popup=null,this.events.fire("release")):this._cancelCaptureRequest()},_cancelCaptureRequest:function(){this._captureCallback&&(this._captureCallback.cancel(),this._captureCallback=null),this._openDeferred&&(this._openDeferred.reject(d.create("OperationCanceledReject","Capturing/opening was canceled")),this._openDeferred=null)},_openCaptured:function(e,t,n){if(this._position=e,this._data=t,this._options=this._specifyOptions(n),this.isOpen()){var i=this._popup.getOverlaySync(),o=i.getMap();return i.setMap(null),this._popup.options.setParent(this._options),this._popup.setData(t),this._popup.setPosition(e),i.setMap(o),this._popup.open()}return this._popup.options.setParent(this._options),this._popup.open(e,t)},_specifyOptions:function(e){var t={projection:l};return e&&"function"==typeof e.get||(e=new a(e?h(t,e):t,this._popupOwner.options,this._optionManagerName)),e},_fireOpen:function(){this.events.fire("open")},_fireClose:function(){this.events.fire("close")}}),t(g)})}],[");",function(e){e.modules.define("component.sharedEntity.manager.Base",["util.defineClass","Event","event.Manager","event.Mapper","vow","util.bind"],function(e,t,n,i,o,s,r){function a(e,t,n,o){this._manager=e,this._sharedEntity=t,this._rootOwner=n,this._proxyClass=o,this.events=new i({context:this}),this._setupEventMapping()}t(a,{perform:function(e,t,n,i,o,a){n=n||this,i=i||r(function(t){return this._sharedEntity[e].apply(this._sharedEntity,t)},this),o=o||function(e){return e},a=a||i;var l;if(this._captorAccessor){var c=this._captorAccessor.access(e,t);l=s.isPromise(c)?c.then(function(e){return i.call(n,e&&e.length?e:t)},o,null,n):c!==!1?i.call(n,c&&c.length?c:t):o.call(n)}else l=a.call(n,t);return l},capture:function(e){return this._captorAccessor==e?s.resolve(this._proxy):this.perform("capture",[e],this,function(e){return this._clearCaptor(),s.resolve(this._setupCaptor(e[0]))},function(e){return s.reject(e)})},getOwner:function(){return this._captorAccessor?this._captorAccessor.getOwner():this._rootOwner},getEntity:function(){return this._sharedEntity},getProxy:function(){return this._proxy},_setupEventMapping:function(){this._sharedEntity.events.setParent(new o(this._manager.events,{"*":r(function(e){return this._proxy&&this._proxy.events.fire(e.get("type")),new n({type:e.get("type"),target:this.getOwner()})},this)}))},_setupCaptor:function(e){return this._captorAccessor=e,e?(this.events.fire("capture"),this._proxy=new this._proxyClass(this._sharedEntity),this._proxy):null},_clearCaptor:function(){this._captorAccessor&&(this._captorAccessor.drop(),this._captorAccessor=null,this._proxy.destroy(),this._proxy=null,this.events.fire("release"))}}),e(a)})}],[")@",function(e){e.modules.define("component.sharedEntity.manager.Popup",["util.defineClass","sharedEntity.proxy.Popup","component.sharedEntity.manager.Base"],function(e,t,n,i){function o(e,t,i,s){o.superclass.constructor.call(this,e,t,i,s||n)}for(var s=["open","close","setPosition","isOpen","getOverlay","getOverlaySync","getPosition","setData","getData","setOptions","getOptions"],r={},a=0,l=s.length;a<l;a++)r[s[a]]=function(e){return function(){return this.perform(e,Array.prototype.slice.call(arguments))}}(s[a]);t(o,i,r),e(o)})}],["9O",function(e){e.modules.define("component.TileBoundsGetter",["util.defineClass","event.Manager","component.tileBoundsGetter.util"],function(e,t,n,i){var o=function(e,t){this._params=t||{},this.options=e,this.events=new n({context:this}),this._tileBounds=null,this._mapListener=null};t(o,{update:function(){this._applyWorldSize(this._map),this._tileBounds=null},setMap:function(e){e!=this._map&&(this._map&&this._removeFromMap(this._map),this._map=e,e&&this._addToMap(e))},get:function(){return!this._tileBounds&&this._map&&(this._tileBounds=this._calculateTileBounds()),this._tileBounds},fireChangeEvent:function(e,t,n,i){this.events.fire("tileboundschange",{oldTileBounds:e,newTileBounds:t,oldZoom:n,newZoom:i})},_addToMap:function(e){this._map=e,this._createMapListener(),this._applyWorldSize(e),this._tileBounds=this._calculateTileBounds()},_removeFromMap:function(e){this._tileBounds=null,this._removeMapListener(),this._worldSize=null,this._map=null},_createMapListener:function(){this._mapListener=this._map.events.group().add("boundschange",function(e){var t=e.get("oldZoom"),n=e.get("newZoom");if(n==t)this._onMapMove(e);else{if(this._params.wholeZoom&&this._processZoom(n)==this._processZoom(t))return;this._onMapZoomChange(e)}},this)},_removeMapListener:function(){this._mapListener.removeAll()},_onMapMove:function(e){var t=this._calculateTileBounds();if(!i.equals(t,this._tileBounds)){var n=this._tileBounds;this._tileBounds=t,this.fireChangeEvent(n,t,e.get("oldZoom"),e.get("newZoom"))}},_onMapZoomChange:function(e){this._applyWorldSize(this._map);var t=this._tileBounds;this._tileBounds=this._calculateTileBounds(),this.fireChangeEvent(t,this._tileBounds,e.get("oldZoom"),e.get("newZoom"))},_calculateTileBounds:function(){var e=this._getMapGlobalPixelBounds(),t=this._expandGlobalPixelBounds(e),n=this._fitToZeroWorld(t);return this._fromPixelBoundsToTiles(n)},_getMapGlobalPixelBounds:function(){var e=this._map,t=e.options.get("projection").toGlobalPixels(e.getCenter(),this._processZoom(e.getZoom())),n=e.container.getSize(),i=this.options.get("viewportMargin",128),o=[.5*n[0]+i,.5*n[1]+i],s=[[t[0]-o[0],t[1]-o[1]],[t[0]+o[0],t[1]+o[1]]];return s},_expandGlobalPixelBounds:function(e){return[[256*Math.floor(e[0][0]/256),256*Math.floor(e[0][1]/256)],[256*Math.ceil(e[1][0]/256),256*Math.ceil(e[1][1]/256)]]},_fitToZeroWorld:function(e){var t=this._fitToZeroWorldAxis([e],0);return this._fitToZeroWorldAxis(t,1)},_fitToZeroWorldAxis:function(e,t){var n=e[0];if(n[1][t]-n[0][t]>=this._worldSize){for(var i=0,o=e.length;i<o;i++)e[i][0][t]=0,e[i][1][t]=this._worldSize;return e}if(n[0][t]>=0&&n[1][t]<=this._worldSize)return e;var s,r=this._map.options.get("projection").isCycled();if(n[0][t]<0){if(r[t]){var a=[0,n[1][t],n[0][t]+this._worldSize,this._worldSize];s=this._splitBoundsArray(e,t,a)}else{for(var i=0,o=e.length;i<o;i++)e[i][0][t]=0;s=e}return s}if(r[t]){var a=[n[0][t],this._worldSize,0,n[1][t]-this._worldSize];s=this._splitBoundsArray(e,t,a)}else{for(var i=0,o=e.length;i<o;i++)e[i][1][t]=this._worldSize;s=e}return s},_splitBoundsArray:function(e,t,n){for(var i=[],o=0,s=e.length;o<s;o++){var r=e[o][0].slice(),a=e[o][1].slice();r[t]=n[0],a[t]=n[1],i.push([r,a]),r=e[o][0].slice(),a=e[o][1].slice(),r[t]=n[2],a[t]=n[3],i.push([r,a])}return i},_fromPixelBoundsToTiles:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];t.push([[Math.floor(o[0][0]/256),Math.floor(o[0][1]/256)],[Math.ceil(o[1][0]/256),Math.ceil(o[1][1]/256)]])}return t},_applyWorldSize:function(e){this._worldSize=256*Math.pow(2,this._processZoom(e.getZoom()))},_processZoom:function(e){return this._params.wholeZoom?Math.round(e):e}}),e(o)})}],["9P",function(e){e.modules.define("component.tileBoundsGetter.util",["util.pixelBounds","util.math.areEqual"],function(e,t,n){e({containsBounds:function(e,n){for(var i=0,o=e.length;i<o;i++)if(t.containsBounds(e[i],n))return!0;return!1},getDisjointArea:function(e,n){var i,o,s={added:[],removed:[]},r=[],a=[];for(i=0,o=e.length;i<o;i++)this._pushBoundsCoords(r,a,e[i]);for(i=0,o=n.length;i<o;i++)this._pushBoundsCoords(r,a,n[i]);for(r=this._getUniqueSorted(r),a=this._getUniqueSorted(a),i=0,o=r.length-1;i<o;i++)for(var l=0,c=a.length-1;l<c;l++){var u=t.fromPoints([[r[i],a[l]],[r[i+1],a[l+1]]]),h=this.containsBounds(e,u),d=this.containsBounds(n,u);h&&!d?s.added.push(u):!h&&d&&s.removed.push(u)}return s},_getUniqueSorted:function(e){var t=[];e.sort(function(e,t){return e-t});for(var n=0,i=e.length;n<i;n++)e[n]!=e[n+1]&&t.push(e[n]);return t},equals:function(e,t){var i=!1;if(e.length==t.length){i=!0;for(var o=0,s=e.length;o<s&&i;o++)n(e[o][0],t[o][0])&&n(e[o][1],t[o][1])||(i=!1)}return i},_pushBoundsCoords:function(e,t,n){e.push(n[0][0]),t.push(n[0][1]),e.push(n[1][0]),t.push(n[1][1])}})})}],["2r",function(e){e.modules.define("component.ZoomRangeObserver",["util.defineClass","component.ProviderObserver","vow"],function(e,t,n,i){var o=function(e){o.superclass.constructor.call(this,{changeEventType:"zoomrangechange",changeCallback:e,makeRequest:function(e,t){return e.getZoomRange(t)}})};t(o,n,{get:function(e){var t,n,s=i.defer();return o.superclass.get.call(this,e).then(function(e){if(e.resolved.length){var i=e.resolved[0].slice();for(t=1,n=e.resolved.length;t<n;t++){var o=e.stricts[t];i=[(o?Math.max:Math.min)(i[0],e.resolved[t][0]),(o?Math.min:Math.max)(i[1],e.resolved[t][1])]}s.resolve(i)}else{var r=!0;for(t=0,n=e.rejected.length;t<n;t++)if("noProvider"!=e.rejected[t]){r=!1;break}r?s.reject("noProvider"):s.reject("noData")}},function(e){s.reject(e)}),s.promise()}}),e(o)})}],["2O",function(e){e.modules.define("constants.editorZIndex",["constants.zIndex"],function(e,t){e({edgeMarker:100,edgeMarkerHover:101,vertexMarker:200,vertexMarkerHover:201,edgeMarkerDrag:210,vertexMarkerDrag:210,vertexMenu:300,guideLines:400,frameEditor:t.drag})})}],["2R",function(e){e.modules.define("constants.hotspotEvents",[],function(e){e({types:{mouseenter:!0,mousemove:!0,mouseleave:!0,mousedown:!0,mouseup:!0,click:!0,contextmenu:!0,dblclick:!0,wheel:!0,multitouchstart:!0,multitouchmove:!0,multitouchend:!0},order:["mousedown","mousemove","multitouchstart","multitouchmove","multitouchend","mouseup","wheel","click","contextmenu","dblclick"]})})}],["2X",function(e){e.modules.define("constants.mapDomEvents",[],function(e){e(["click","dblclick","contextmenu","mousedown","mouseup","mousemove","mouseenter","mouseleave","wheel","multitouchstart","multitouchmove","multitouchend"])})}],["20",function(e){e.modules.define("constants.mapListenerPriority",[],function(e){e({blocker:1300,routeEditor:1e3,behaviors:800})})}],["23",function(e){e.modules.define("constants.paneZIndex",[],function(e){e({ground:100,areas:200,routerRoutes:250,shadows:300,places:400,editor:450,events:500,behaviors:550,overlaps:600,editorGlass:660,routerEditorGlass:660,routerPoints:670,balloon:700,outerBalloon:800,controls:900,copyrights:1e3,editorMenu:1050,editorActiveVertex:1055,hint:1100,outerHint:1200,search:1300})})}],["26",function(e){e.modules.define("constants.zIndex",[],function(e){e({layer:200,mapTypeLayer:150,overlay:650,icon:675,hover:700,drag:725,behavior:750,active:755,routeViaPointHover:757,balloon:760,activePoint:775,hint:1100})})}],["5*",function(e){e.modules.define("control-manager",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-controls__bottom,.ymaps-2-1-42-controls__toolbar{position:absolute;width:100%}.ymaps-2-1-42-controls__toolbar_left{float:left;height:0}.ymaps-2-1-42-controls__toolbar_right{float:right;height:0}.ymaps-2-1-42-controls__control_toolbar{display:inline-block;vertical-align:top}.ymaps-2-1-42-controls__control{display:block;position:absolute;vertical-align:top}.ymaps-2-1-42-controls__control_visibility_hidden{display:none}",e)})}],["98",function(e){e.modules.define("control.Base",["util.defineClass","collection.Item","data.Manager","layout.storage","control.optionMapper","vow","util.dom.className","Monitor","util.cancelableCallback","control.component.EventProxy","util.css","theme.islands.control.meta"],function(e,t,n,i,o,s,r,a,l,c,u,h){var d=function(e){e=e||{},this.state=new i(e.state),this.data=new i(e.data),d.superclass.constructor.call(this,e.options),this.eventProxy=new u(this.events),this.options.setMapper(s),this._layout=null,this._layoutDeferred=null};d.ControlWithoutMapError=function(){return new Error("Control wasn't added to map")},d.ControlCanceledError=function(){return new Error("Canceled")},d.LayoutNotFound=function(){return new Error("Layout wasn't found")},t(d,n,{getLayout:function(){return this._layoutDeferred?this._layoutDeferred.promise():r.reject(d.ControlWithoutMapError())},getLayoutSync:function(){return this._layout},onAddToMap:function(){this._setupLayout(),this._visibilityMonitor=new l(this.options),this._visibilityMonitor.add("visible",this._onVisibilityChange,this)},onRemoveFromMap:function(e){this._destroyLayout(),this._visibilityMonitor.destroy()},_setupLayout:function(){this._layoutCancelableCallback=c.create(function(e){this._createLayout(e[0],e[1]&&e[1][0]||i)},this);var e,t,n=[this.getParent().getChildElement(this)],i=this.options.get("layout");this._layoutDeferred=r.defer(),"string"==typeof i&&(t=i,e={control:this,options:this.options,data:this.data,state:this.state},i=o.get(t,e),"undefined"==typeof i&&n.push(o.require({keys:[t],data:e}))),r.all(n).then(this._layoutCancelableCallback,function(){this._layoutCancelableCallback=null,this._layoutDeferred.reject(d.LayoutNotFound())},this)},_destroyLayout:function(){this._layoutCancelableCallback?(this._layoutDeferred.reject(d.ControlCanceledError()),this._layoutCancelableCallback.cancel(),this._layoutCancelableCallback=null):this._layout&&(this.eventProxy.removeChildEventManager(this._layout.events),this._layout.destroy(),this._layout=null,this._fireLayoutChangeEvent()),this._layoutDeferred=null},_createLayout:function(e,t){this._layoutCancelableCallback=null,this._layout=new t({control:this,options:this.options,data:this.data,state:this.state}),this.eventProxy.addChildEventManager(this._layout.events),this._layout.setParentElement(e),this.events.fire("layoutmapchange"),this._setVisibleState(this.options.get("visible",!0)),this._layoutDeferred.resolve(this._layout),this._fireLayoutChangeEvent()},_onVisibilityChange:function(e,t){this._layout&&this._setVisibleState(e),this.events.fire("visibilitychange")},_setVisibleState:function(e){var t=this._layout.getParentElement();t&&(e?a.remove(t,h.addPrefix("controls__control_visibility_hidden")):a.add(t,h.addPrefix("controls__control_visibility_hidden")))},_fireLayoutChangeEvent:function(){this.events.fire("layoutchange",{layout:this._layout})}}),e(d)})}],["96",function(e){e.modules.define("control.BaseBehaviorButton",["util.defineClass","control.Button","control.optionMapper"],function(e,t,n,i){var o=function(e){o.superclass.constructor.call(this,e),this.options.setName("behaviorButton")};t(o,n,{getBehaviorName:function(){return""},select:function(){o.superclass.select.call(this);var e=this.getMap();if(e){var t=this.getBehaviorName();e.behaviors.isEnabled(t)||e.behaviors.enable(t)}},deselect:function(){o.superclass.deselect.call(this);var e=this.getMap();if(e){var t=this.getBehaviorName();e.behaviors.isEnabled(t)&&e.behaviors.disable(t)}},onAddToMap:function(e){o.superclass.onAddToMap.call(this,e),this._createMapListeners(e)},onRemoveFromMap:function(e){this._clearMapListeners(),o.superclass.onRemoveFromMap.call(this,e)},_createMapListeners:function(e){var t=this.getBehaviorName(),n=e.behaviors.get(t);this._behaviorListeners=n.events.group().add("enable",function(){this.select()},this).add("disable",function(){this.deselect()},this),e.behaviors.isEnabled(t)&&this.select()},_clearMapListeners:function(){this._behaviorListeners.removeAll()}}),i.setRule({name:"behaviorButton",rule:"prefixed"}),i.setRule({name:"behaviorButton",key:["adjustMapMargin"],rule:["prefixed","plain"]}),e(o)})}],["99",function(e){e.modules.define("control.BaseGroup",["util.defineClass","util.array","control.storage","component.array.ParentArray","control.childElementController.GroupController","control.Base","Event","event.Mapper","control.EventMappingTable","util.bind","util.id","util.cancelableCallback","util.extend"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g){function p(e,t){return e.options.get("positionIndex",0)-t.options.get("positionIndex",0)}var m=function(e){var t;if(n.isArray(e)&&(t=e,e={}),e&&e.items&&(e=g({},e),t=e.items,delete e.items),m.superclass.constructor.call(this,e),this._childElementController=new s(this),this._collectionImplementation=new o([],this,{onAdd:{callback:this.onChildAdd,context:this},onRemove:{callback:this.onChildRemove,context:this}},new l(this.events,new c(this))),this._topContainer=null,this._setupGroupLayoutEventRules(),t)for(var i=0,r=t.length;i<r;++i)this.add(t[i])};t(m,r,{add:function(e){return this._childElementController.insert(e),this._collectionImplementation.add(e),this},remove:function(e){return this._collectionImplementation.remove(e),this},removeAll:function(){return this._collectionImplementation.removeAll(),this},getIterator:function(){return this._collectionImplementation.getIterator()},each:function(e,t){return this._collectionImplementation.each(e,t),this},getLength:function(){return this._collectionImplementation.getLength()},filter:function(e){for(var t,n=this.getIterator(),i=[];(t=n.getNext())!=n.STOP_ITERATION;)e(t)&&i.push(t);return i},get:function(e){return"string"==typeof e?this._controlsByKey[e]:this._collectionImplementation.get(e)},getAll:function(){for(var e,t=this.getIterator(),n=[];(e=t.getNext())!=t.STOP_ITERATION;)n.push(e);return n},indexOf:function(e){return this._collectionImplementation.indexOf(e)},onChildAdd:function(e,t){this._collectionImplementation.quickSort(p),this.events.fire("add",{child:t}),t.events.add("update",this._onChildUpdate,this)},onChildRemove:function(e,t){this._childElementController.remove(t),this.events.fire("remove",{child:t}),t.events.remove("update",this._onChildUpdate,this)},getContainer:function(){return this._topContainer},getChildElement:function(e){return this._childElementController.getElement(e)},onAddToMap:function(e){m.superclass.onAddToMap.call(this,e),this._cancelableCallback=d.create(function(e){this._cancelableCallback=null,this._setChildContainer(e.getChildContainerElement())},this),this.getLayout().then(this._cancelableCallback)},onRemoveFromMap:function(e){this._cancelableCallback&&(this._cancelableCallback.cancel(),this._cancelableCallback=null),m.superclass.onRemoveFromMap.call(this,e)},_onChildUpdate:function(e){this.events.fire("update",{originalEvent:e})},_setupGroupLayoutEventRules:function(){this.eventProxy.disableEventFiring("childcontainerchange").setCallback("childcontainerchange",this._onChildContainerSet,this)},_onChildContainerSet:function(e){this._setChildContainer(e.get("newChildContainerElement"))},_setChildContainer:function(e){if(this._topContainer!=e){var t=this._topContainer;this._topContainer=e,this._setChildElementsParent(e),this.events.fire("childcontainerchange",new a({newChildContainerElement:this._topContainer,oldChildContainerElement:t}))}},_setChildElementsParent:function(e){this._childElementController.setParentElement(e)}}),e(m)})}],["29",function(e){e.modules.define("control.Button",["util.defineClass","control.Selectable","control.component.ToolBarButton","control.optionMapper","layout.define"],function(e,t,n,i,o,s){var r=function(e){r.superclass.constructor.call(this,"string"==typeof e?{data:{content:e}}:e),this.options.setName("button"),this._setupLayoutEventRules(),this._toolBarButtonComponent=new i(this)};t(r,n,{_setupLayoutEventRules:function(){this.eventProxy.setCallback("click",this._onClick,this,!0)},_onClick:function(e){this.isEnabled()&&(this.events.fire("press"),this.options.get("selectOnClick",!0)&&(this.isSelected()?this.deselect():this.select()))}}),o.setRule({name:"button",rule:["prefixed","plain"]}),s("islands#buttonLayout","theme.islands.control.layout.Button"),e(r)})}],["9$",function(e){e.modules.define("control.childElementController.Base",["util.defineClass","util.dom.element","util.id","util.List","vow"],function(e,t,n,i,o,s){var r=function(e){this._parent=e,this._childElements={},this._childList=new o,this._parentElementDeferred=s.defer()};t(r,{setParentElement:function(e){this._parentElement!=e&&(this._parentElementDeferred.promise().isResolved()&&(this._parentElementDeferred=s.defer()),this._setupParentElement(e))},getParentElement:function(){return this._parentElement},getElement:function(e){var t=s.defer();return this._parentElement?t.resolve(this._getElementSync(e)):this._parentElementDeferred.promise().then(function(){t.resolve(this._getElementSync(e))},this),t.promise()},getParent:function(){return this._parent},insert:function(e,t){var o=i.get(e);this._childElements[o]=t||n.create(),this._childList.insert(e,this._getBeforeChild(e)),this._parentElement&&this._appendToParentByOrder(e)},remove:function(e){var t=i.get(e);this._childElements[t]&&(this._parentElement&&this._removeFromParent(e),this._childList.remove(e),delete this._childElements[t])},onChildPositionChange:function(e){this._childList.insert(e,this._getBeforeChild(e)),this._removeFromParent(e),this._appendToParentByOrder(e)},_appendToParentByOrder:function(e){var t=this._getElementSync(e),n=this._getBeforeElement(e);null==n?this._parentElement.appendChild(t):this._parentElement.insertBefore(t,n)},_removeFromParent:function(e){var t=this._getElementSync(e);t.parentNode.removeChild(t)},_getBeforeChild:function(e){var t=this.getChildIndex(e);if(null==t)return null;for(var n,i=this._childList.getIterator();(n=i.getNext())!=i.STOP_ITERATION;)if(n!=e&&this.comparator(e,n)<0)return n;return null},_getBeforeElement:function(e){for(var t,n=this._childList.getIterator();(t=n.getNext())!=n.STOP_ITERATION;)if(t==e){var i=n.getNext();return i==n.STOP_ITERATION?null:this._getElementSync(i)}},_setupParentElement:function(e){var t,n;if(e)for(t=this._childList.getIterator();(n=t.getNext())!=t.STOP_ITERATION;)e.appendChild(this._getElementSync(n));else for(t=this._childList.getIterator();(n=t.getNext())!=t.STOP_ITERATION;)this._removeFromParent(n);this._parentElement=e,e&&this._parentElementDeferred.resolve(e)},_getElementSync:function(e){return this._childElements[i.get(e)]},getChildIndex:function(e){return null},comparator:function(e,t){return this.getChildIndex(e)<this.getChildIndex(t)?-1:this.getChildIndex(e)>this.getChildIndex(t)?1:0}}),e(r)})}],["9_",function(e){e.modules.define("control.childElementController.GroupController",["util.defineClass","control.childElementController.Base","util.id","Monitor","util.bind"],function(e,t,n,i,o,s){var r=function(e){r.superclass.constructor.call(this,e),this._childPositionMonitors={}};t(r,n,{setParentElement:function(e){var t=this.getParentElement();r.superclass.setParentElement.call(this,e),t&&!e&&this._clearChildMonitors(),!t&&e&&this._setupChildMonitors()},getChildIndex:function(e){return e.options.get("positionIndex",0)},insert:function(e){r.superclass.insert.call(this,e),this.getParentElement()&&!this._childPositionMonitors[i.get(e)]&&this._setupChildMonitor(e)},remove:function(e){this._childPositionMonitors[i.get(e)]&&this._clearChildMonitor(e),r.superclass.remove.call(this,e)},_setupChildMonitors:function(){this.getParent().each(s(function(e){this._setupChildMonitor(e)},this))},_clearChildMonitors:function(){this.getParent().each(s(function(e){this._clearChildMonitor(e)},this))},_setupChildMonitor:function(e){this._childPositionMonitors[i.get(e)]=new o(e.options).add("positionIndex",function(){this.onChildPositionChange(e)},this)},_clearChildMonitor:function(e){var t=i.get(e);this._childPositionMonitors[t].destroy(),delete this._childPositionMonitors[t]}}),e(r)})}],["9.",function(e){e.modules.define("control.component.CollapseOnBlur",["Monitor","domEvent.manager","util.id","util.cancelableCallback","util.dom.style"],function(e,t,n,i,o,s){var r=function(e){this._context=e,this._optionMonitor=null,this._controlElementListener=null,this._documentListener=null,this._cancelableCallback=null,e.events.add("mapchange",this._onMapChange,this)};r.prototype={_onMapChange:function(e){var n=e.get("newMap");n?(this._optionMonitor=new t(this._context.options).add("collapseOnBlur",this._checkCollapseOnBlur,this),this._checkCollapseOnBlur()):(this._optionMonitor.removeAll(),this._context.options.get("collapseOnBlur",!0)&&this._stopMouseDownListening())},_checkCollapseOnBlur:function(){this._context.options.get("collapseOnBlur",!0)?this._startMouseDownListening():this._stopMouseDownListening()},_startMouseDownListening:function(){this._cancelableCallback=o.create(function(e){this._controlElementListener=n.group(e).add("mousedown",function(e){var t=e.get("propagatedData");t.targetControlId=i.get(this._context)},this),this._documentListener=n.group(window.document.documentElement).add("mousedown",function(e){var t=e.get("propagatedData");t.targetControlId!=i.get(this._context)&&this._context.collapse()},this)},this),this._context.getParent().getChildElement(this._context).then(this._cancelableCallback)},_stopMouseDownListening:function(){this._cancelableCallback&&(this._cancelableCallback.cancel(),this._cancelableCallback=null),this._controlElementListener&&(this._controlElementListener.removeAll(),this._documentListener.removeAll())}},e(r)})}],["9*",function(e){e.modules.define("control.component.EventProxy",["util.bind","util.array","Event"],function(e,t,n,i){function o(e,t){var n;n=e.context?e.callback.call(e.context,t):e.callback(t)}function s(e){return e.isPropagationStopped&&e.isPropagationStopped()}var r=function(e){this._callbacks={},this._disabledEvents={},this._parentEvents=e,this._controller={onAfterEventFiring:t(this._onAfterLayoutEventFiring,this)}};r.prototype={addChildEventManager:function(e){n.indexOf(e.params.controllers,this._controller)==-1&&e.addController(this._controller)},removeChildEventManager:function(e){e.removeController(this._controller)},setCallback:function(e,t,n,i){return this._callbacks[e]={callback:t,context:n,afterEventFiring:i},this},unsetCallback:function(e){return delete this._callbacks[e],this},disableEventFiring:function(e){return this._disabledEvents[e]=!0,this},enableEventFiring:function(e){return delete this._disabledEvents[e],this},isEnabled:function(e){return!this._disabledEvents[e]},getCallback:function(e){return this._callbacks[e]},_onAfterLayoutEventFiring:function(e,t,n){if(t.indexOf("defaultaction")==-1&&!s(n)){var r=this.getCallback(t);if(r&&!r.afterEventFiring&&o(r,n),this.isEnabled(t)){var a=new i({type:t,target:this._parentEvents.params.context},n);n.isDefaultPrevented()&&a.preventDefault(),this._parentEvents.fire(t,a)}r&&r.afterEventFiring&&o(r,n)}}},e(r)})}],["9:",function(e){e.modules.define("control.component.ToolBarButton",["Monitor","util.array"],function(e,t,n){function i(e,t){var i=e.options.get("maxWidth")||90;if(n.isArray(i)){var o=n.indexOf(e.getParent().options.get("states"),t);return i[o]}return i}var o=function(e){this._context=e,e.events.add("parentchange",this._onParentChange,this),e.options.events.add("change",this._checkOptionSize,this),this._parentStateMonitor=null,this._contextOptionsMonitor=null};o.prototype={_onParentChange:function(e){var n=e.get("newParent");n?(this._optionSize=this._context.options.get("size"),this._applyStateSize(),this._applyStateMaxWidth(),this._parentStateMonitor=new t(n.state).add("size",this._applyStateSize,this),this._contextOptionsMonitor=new t(this._context.options).add("maxWidth",this._applyStateMaxWidth,this)):(this._parentStateMonitor.destroy(),this._contextOptionsMonitor.destroy())},_checkOptionSize:function(){var e=this._context.options.get("size");e!=this._optionSize&&(this._optionSize=e,this._applyStateSize())},_applyStateSize:function(){var e=this._context.options.get("size","auto");if("auto"==e){var t=this._context.getParent();this._context.state.set("size",t?t.state.get("size","large"):"large")}else this._context.state.set("size",e)},_applyStateMaxWidth:function(){var e=this._context.state.get("size","large");this._context.state.set("maxWidth",i(this._context,e))}},e(o)})}],["95",function(e){e.modules.define("control.EventMappingTable",["util.defineClass","MapEvent"],function(e,t,n){function i(e){this._controlManager=e,this.add=!1,this.remove=!1,this.parentchange=!1,this.mapchange=!1,this.optionschange=!1,this.destroy=!1,this["*"]=this._defaultMapping}t(i,{_defaultMapping:function(e){return new n({currentTarget:this._controlManager},e)}}),e(i)})}],["2-",function(e){e.modules.define("control.FullscreenControl",["util.defineClass","control.Button","control.storage","control.optionMapper","layout.define","yandex.counter"],function(e,t,n,i,o,s,r){var a=function(e){a.superclass.constructor.call(this,e),this.options.setName("fullscreenControl")};t(a,n,{onAddToMap:function(e){a.superclass.onAddToMap.call(this,e),this._mapContainerListener=e.container.events.group().add("fullscreenenter",this._onMapFullscreenEnter,this).add("fullscreenexit",this._onMapFullscreenExit,this),r.countByKey("control","fullscreen.create")},onRemoveFromMap:function(e){this._mapContainerListener.removeAll(),a.superclass.onRemoveFromMap.call(this,e)},select:function(){this.getMap().container.isFullscreen()?a.superclass.select.call(this):this.enterFullscreen()},deselect:function(){this.getMap().container.isFullscreen()?this.exitFullscreen():a.superclass.deselect.call(this)},enterFullscreen:function(){this.getMap().container.enterFullscreen()},exitFullscreen:function(){this.getMap().container.exitFullscreen()},_onMapFullscreenEnter:function(){this.state.set("fullscreen",!0),this.events.fire("fullscreenenter"),this.select(),r.countByKey("control","fullscreen.enter")},_onMapFullscreenExit:function(){this.state.set("fullscreen",!1),this.events.fire("fullscreenexit"),this.deselect()}}),o.setRule({name:"fullscreenControl",rule:["prefixed"]}),o.setRule({name:"fullscreenControl",key:["adjustMapMargin"],rule:["prefixed","plain"]}),i.add("fullscreenControl",a),
s("islands#fullscreenLayout","theme.islands.control.layout.Fullscreen"),e(a)})}],["2!",function(e){e.modules.define("control.GeolocationControl",["util.defineClass","geolocation","control.Button","control.storage","control.optionMapper","map.associate.serviceGeoObjects","localization.common.current","util.extend","yandex.counter"],function(e,t,n,i,o,s,r,a,l,c){var u="geolocationControl",h=t(function(e){var t=e&&e.data||{};h.superclass.constructor.call(this,e),this.data.set(l({iconType:"geolocation",title:a.Control.ToolBar.geolocation},t)),this.options.setName(u),this.options.set("selectOnClick",!1),this._state="ready",this._geoObjects=null,this._actualRequest=null},i,{onAddToMap:function(){h.superclass.onAddToMap.call(this),this.events.add("press",this._onGeolocationPress,this),c.countByKey("control","geolocation.create")},onRemoveFromMap:function(e){this.events.remove("press",this._onGeolocationPress,this);var t=this._geoObjects;t&&t.getParent()&&(t.getParent().remove(t),this._geoObjects=null,this._actualRequest=null,this._state="ready"),h.superclass.onRemoveFromMap.call(this,e)},_onGeolocationPress:function(){if("ready"==this._state){this.disable(),this._state="pending";var e=this._actualRequest=this._getLocation().then(function(t){if(e==this._actualRequest){this.enable();var n=this._geoObjects;n&&n.getParent()&&n.getParent().remove(n),this._geoObjects=t.geoObjects,this.options.get("noPlacemark",!1)||r.get(this.getMap()).add(this._geoObjects),this._state="ready",this.events.fire("locationchange",{position:this._geoObjects.get(0).geometry.getCoordinates(),geoObjects:this._geoObjects})}},function(){e==this._actualRequest&&(this.enable(),this._state="ready")},null,this)}c.countByKey("control","geolocation.click")},_getLocation:function(){return n.get({mapStateAutoApply:!0,useMapMargin:this.options.get("useMapMargin",!0)})}});s.setRule({name:u,rule:["prefixed","plain"]}),o.add(u,h),e(h)})}],["2)",function(e){e.modules.define("control.ListBox",["util.defineClass","control.BaseGroup","control.component.ToolBarButton","control.component.CollapseOnBlur","control.optionMapper","layout.define"],function(e,t,n,i,o,s,r){var a=function(e){a.superclass.constructor.call(this,e),this.options.setName("listBox"),this._setupListBoxLayoutEventRules(),this._expanded=this.state.get("expanded"),this._enabled=this.state.get("enabled"),this.state.events.add("change",this._onListBoxStateChange,this),this._toolBarButtonComponent=new i(this),this._collapseOnBlurComponent=new o(this)};t(a,n,{enable:function(){return this.isEnabled()||this.state.set("enabled",!0),this},disable:function(){return this.isEnabled()&&this.state.set("enabled",!1),this},isEnabled:function(){return this.state.get("enabled",!0)},expand:function(){return this.isExpanded()||this.state.set("expanded",!0),this},collapse:function(){return this.isExpanded()&&this.state.set("expanded",!1),this},isExpanded:function(){return this.state.get("expanded",!1)},_setupListBoxLayoutEventRules:function(){this.eventProxy.disableEventFiring("expand").setCallback("expand",this.expand,this).disableEventFiring("collapse").setCallback("collapse",this.collapse,this).disableEventFiring("enable").setCallback("enable",this.enable,this).disableEventFiring("disable").setCallback("disable",this.disable,this).setCallback("click",this._onClick,this,!0)},_onClick:function(e){this.isEnabled()&&(this.events.fire("press"),this.options.get("expandOnClick",!0)&&(this.isExpanded()?this.collapse():this.expand()))},_onListBoxStateChange:function(){this.state.get("expanded")!=this._expanded&&(this._expanded=this.state.get("expanded"),this.events.fire(this._expanded?"expand":"collapse")),this.state.get("enabled")!=this._enabled&&(this._enabled=this.state.get("enabled"),this.events.fire(this._enabled?"enable":"disable"))}}),s.setRule({name:"listBox",rule:["prefixed","plain"]}),r("islands#listBoxLayout","theme.islands.control.layout.ListBox"),e(a)})}],["9;",function(e){e.modules.define("control.ListBoxItem",["util.defineClass","control.Selectable","control.optionMapper","layout.define"],function(e,t,n,i,o){function s(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}var r=function(e){r.superclass.constructor.call(this,"string"==typeof e?{data:{content:e}}:e),this.options.setName("listBoxItem"),this._setupItemLayoutEventRules()};t(r,n,{_setupItemLayoutEventRules:function(){this.eventProxy.setCallback("click",this._onClick,this,!0)},_onClick:function(e){this.isEnabled()&&this.options.get("selectOnClick",!0)&&(this.isSelected()?this.deselect():this.select())}}),i.setRule({name:"listBoxItem",rule:function(e,t){return[s(e,"item"),s(e,"listBoxItem")]}}),o("islands#listBoxItemLayout","theme.islands.control.layout.ListBoxItem"),e(r)})}],["2:",function(e){e.modules.define("control.Manager",["event.Manager","option.Manager","data.Manager","Monitor","vow","control.manager.toolbarElementController","control.childElementController.Base","control.manager.predefinedSets","component.array.BaseArray","control.storage","map.pane.helper.controls","control.optionMapper","event.Mapper","control.EventMappingTable","util.id","util.bind","util.array","util.extend","util.dom.style","util.dom.element","util.dom.className","util.margin","util.css","yandex.counter","util.defineClass","control.manager.css"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j,b,I,L,C,x){function w(e,t,n){var i=e.options.get("maxWidth")||90;if(M.isArray(i)){var o=e.options.get("size");i=o?i[M.indexOf(n,o)]:i[t]}return i}function N(e){for(var t={},n=0,i=z.length;n<i;n++){var o=z[n],s=typeof e[o];"number"==s?t[o]=e[o].toString()+"px":"undefined"!=s&&(t[o]=e[o])}return t}function S(e){var t=D(e);if("none"!=t)return t;var n=v({},E,N(e.options.get("position",{})));return"auto"!=n.bottom?"bottom":"top"}function D(e){var t=e.options.get("float",P["float"]),n=e.options.get("position");return n||"none"==t?"none":t}var T={marginLeft:0,marginRight:0},E={left:"auto",right:"auto",top:"auto",bottom:"auto",marginLeft:0,marginRight:0},P={"float":"right",floatIndex:0,states:["small","medium","large"],margin:10,pane:null,toolbarMarginAreaHeight:28},z=["top","left","right","bottom"],A=x(function(t,s,r){if(r=r||{},e.env.debug&&!t)throw new Error("control.Manager: map not found");this._map=t,this.events=new n({context:this}),this._defaultPane=this._map.panes.get("controls"),this.options=new i(v({margin:P.margin,states:P.states,pane:this._defaultPane},r),this._map.options,"controls",g),this._activeState=Math.floor(this.options.get("states",P.states).length/2),this.state=new o({size:this._getActiveState()}),this._controlsOrderArray=[],this._controlsArray=new u,this._controlsByKey={},this._controlKeys={},this._toolbarsMarginAccessors={left:this._map.margin.addArea(0),right:this._map.margin.addArea(0)},this._childMonitors={},this._childListeners={},this._childElementControllers={top:new l(this),bottom:new l(this),left:a.create(this,"left"),right:a.create(this,"right")},this._childElements={},this._childSides={},this._init(s)},{add:function(t,n){var i;if("string"==typeof t&&(i=c.get(t))){for(var o=0,s=i.length;o<s;o++){var r=i[o];"string"==typeof r?this.add(r):this.add(r.type,r.options)}C.countByKey("modulesUsage","controlSet."+t.replace(/[^A-Za-z]/g,"_"))}else{if("string"==typeof t){if(this._controlsByKey[t]){if(e.env.debug)throw new Error("Control.Manager.add: "+t+" is already added by the key.");return!1}var a=h.get(t);if(e.env.debug&&!a)throw new Error("Control.Manager.add: "+t+" doesn't exist.");var l=new a;this._controlsByKey[t]=l,this._controlKeys[f.get(l)]=t,t=l}this._addControlInstance(t,n)}return this},getChildElement:function(e){var t=r.defer();return t.resolve(this._childElements[f.get(e)]),t.promise()},remove:function(e){var t;if("string"==typeof e&&(t=c.get(e)))for(var n=0,i=t.length;n<i;n++){var o=t[n];"string"==typeof o?this.remove(o):this.remove(o.type)}else{if(this.indexOf(e)==-1)return this;if("string"==typeof e){var s=this._controlsByKey[e];delete this._controlsByKey[e],e=s}this._removeControlInstance(e),e.setParent(null),e.options.setParent(null),this._applyState()}return this},indexOf:function(e){return"string"==typeof e&&(e=this._controlsByKey[e]),M.indexOf(this._controlsOrderArray,e)},getIterator:function(){return this._controlsArray.getIterator()},get:function(e){return"string"==typeof e?this._controlsByKey[e]:this._controlsArray.get(e)},getContainer:function(){return this.options.get("pane",this._defaultPane).getElement()},each:function(e,t){return this._controlsArray.each(e,t),this},getMap:function(){return this._map},destroy:function(){this._optionMonitor.destroy(),this._mapStateMonitor.destroy(),this._mapListeners.removeAll();var e=[];this.each(function(t){e.push(t)});for(var t=0,n=e.length;t<n;t++)this.remove(e[t]);this.options.setParent(null)},_addControlInstance:function(t,n){if(this._controlsArray.indexOf(t)!=-1){if(e.env.debug)throw new Error("Control.Manager.add: control is already added");return!1}n&&t.options.set(n),this._controlsOrderArray.push(t),this._childElements[f.get(t)]=j.create();var i=S(t);this._childSides[f.get(t)]=i,this._setupChildElementController(t,i),this._setupControlMonitors(t),this._controlsArray.add(t),this._applyState(),t.options.setParent(this.options),t.events.setParent(new p(this.events,new m(this))),t.setParent(this),this._setupControlListeners(t),this.events.fire("add",{child:t})},_removeControlInstance:function(e){var t=f.get(e);if(this._controlKeys[f.get(e)]){var n=this._controlKeys[t];delete this._controlKeys[t],delete this._controlsByKey[n]}this._controlsArray.remove(e),M.remove(this._controlsOrderArray,e),this._removeControlMonitors(e),this._clearControlListeners(e),this._clearChildElementController(e,this._childSides[t]),delete this._childSides[t],delete this._childElements[t],this.events.fire("remove",{child:e})},_setupControlListeners:function(e){this._childListeners[f.get(e)]=e.events.group().add("mapchange",this._onControlMapChange,this)},_clearControlListeners:function(e){var t=f.get(e);this._childListeners[t].removeAll(),delete this._childListeners[t]},_setupControlMonitors:function(e){var t=f.get(e);this._childMonitors[t]=new s(e.options).add("adjustMapMargin",function(){this._recalculateToolbarsMarginAreas()},this).add("float",function(){this._onControlFloatChange(e),this._recalculateToolbarsMarginAreas()},this).add("position",function(){this._onControlPositionChange(e),this._recalculateToolbarsMarginAreas()},this).add(["maxWidth","visible","size"],this._applyState,this)},_removeControlMonitors:function(e){var t=f.get(e);this._childMonitors[t].destroy(),delete this._childMonitors[t]},_setupChildElementController:function(e,t){var n=this._childElements[f.get(e)];if(this._childElementControllers[t].insert(e,n),"right"==t||"left"==t){var i,o=this.options.get("margin",P.margin).toString()+"px";i="left"==t?{marginRight:0,marginLeft:o}:{marginLeft:0,marginRight:o},y.css(n,v({},T,i)),b.add(n,L.addPrefix("controls__control_toolbar"))}else this._applyCustomPosition(e),b.add(n,L.addPrefix("controls__control"))},_clearChildElementController:function(e,t){var n=this._childElements[f.get(e)];this._childElementControllers[t].remove(e,n),"right"==t||"left"==t?b.remove(n,L.addPrefix("controls__control_toolbar")):b.remove(n,L.addPrefix("controls__control"))},_applyState:function(){for(var e=this.options.get("states",P.states),t=this.options.get("pane",this._defaultPane).getViewport(),n=t[1][0]-t[0][0],i=!0;i;)this._getMaxWidth(this._activeState)<n?this._activeState+1<e.length&&this._getMaxWidth(this._activeState+1)<n?this._activeState++:i=!1:this._activeState>0?this._activeState--:i=!1;this.state.set("size",this._getActiveState()),this._recalculateToolbarsMarginAreas()},_onMarginChange:function(e){e="undefined"!=typeof e?e:P.margin,y.css(this._toolbarElement,{marginTop:e.toString()+"px"}),this._applyState()},_onPaneChange:function(){var e=this.getContainer();this._toolbarElement.parentNode.removeChild(this._toolbarElement),this._bottomContainerElement.parentNode.removeChild(this._bottomContainerElement),e.appendChild(this._toolbarElement),e.appendChild(this._bottomContainerElement),this._childElementControllers.top.setParentElement(e)},_onMapSizeChange:function(){this._applyState(),this._applyBottomContainerPosition()},_getActiveState:function(){return this.options.get("states",P.states)[this._activeState]},_getMaxWidth:function(e){var t=this.options.get("states",P.states),n=this.options.get("margin",P.margin),i=0,o=0;return this._controlsArray.each(function(n){var s=D(n),r=n.options.get("visible",!0);"none"!=s&&r&&(i+=parseInt(w(n,e,t),10),o++)}),i+n*(o+1)},_onControlFloatChange:function(e){this._checkChildController(e)},_onControlPositionChange:function(e){this._checkChildController(e);var t=this._childSides[f.get(e)];"top"!=t&&"bottom"!=t||this._applyCustomPosition(e)},_recalculateToolbarsMarginAreas:function(){var e=this.options.get("margin",P.margin),t={left:0,right:0},n=this.options.get("states",P.states);this._controlsArray.each(function(i){var o=this._childSides[f.get(i)],s=i.options.get("visible",!0);t.hasOwnProperty(o)&&i.options.get("adjustMapMargin",!1)&&s&&(t[o]+=parseInt(w(i,this._activeState,n),10)+e)},this);for(var i in t)if(t.hasOwnProperty(i)){t[i]>0&&(t[i]-=e);var o={top:e,width:t[i],height:this.options.get("toolbarMarginAreaHeight",P.toolbarMarginAreaHeight)};o[i]=e,this._toolbarsMarginAccessors[i].setArea(o)}},_onControlMapChange:function(e){var t=e.get("target");this._removeControlInstance(t),this._applyState()},_onMapMarginChange:function(){this._applyBottomContainerPosition()},_checkChildController:function(e){var t=f.get(e),n=S(e),i=this._childSides[t];n!=i&&(this._clearChildElementController(e,i),this._childSides[t]=n,this._setupChildElementController(e,n))},_applyCustomPosition:function(e){if("none"==D(e)){var t=e.options,n=v({},E,N(t.get("position",{}))),i=this._childElements[f.get(e)];y.css(i,n)}},_applyBottomContainerPosition:function(){var e=this._map.state.get("margin"),t=this.options.get("pane",this._defaultPane).getViewport(),n=t[1][1]-t[0][1];n-=I.correct(e)[2],y.css(this._bottomContainerElement,{top:n.toString()+"px"})},_init:function(e){if(this._initHTMLContainers(),this._optionMonitor=new s(this.options).add("margin",this._onMarginChange,this).add("states",this._applyState,this).add("pane",this._onPaneChange,this),this._mapListeners=this._map.events.group().add("sizechange",this._onMapSizeChange,this).add("destroy",this.destroy,this),this._mapStateMonitor=new s(this._map.state).add("margin",this._onMapMarginChange,this),e)for(var t=0,n=e.length;t<n;t++)this.add(e[t])},_initHTMLContainers:function(){this._toolbarElement=j.create({className:L.addPrefix("controls__toolbar"),css:{marginTop:this.options.get("margin",P.margin).toString()+"px"}}),this._bottomContainerElement=j.create({className:L.addPrefix("controls__bottom")}),this._leftContainerElement=j.create({className:L.addPrefix("controls__toolbar_left")}),this._rightContainerElement=j.create({className:L.addPrefix("controls__toolbar_right")});var e=this.getContainer();e.appendChild(this._toolbarElement),e.appendChild(this._bottomContainerElement),this._toolbarElement.appendChild(this._leftContainerElement),this._toolbarElement.appendChild(this._rightContainerElement),this._applyBottomContainerPosition(),this._childElementControllers.top.setParentElement(e),this._childElementControllers.bottom.setParentElement(this._bottomContainerElement),this._childElementControllers.right.setParentElement(this._rightContainerElement),this._childElementControllers.left.setParentElement(this._leftContainerElement)}});t(A)})}],["0m",function(e){e.modules.define("control.manager.css",["control-manager"],function(e){e({})})}],["9j",function(e){e.modules.define("control.manager.predefinedSets",["util.Storage"],function(e,t){e(new t)})}],["9q",function(e){e.modules.define("control.manager.toolbarElementController",["util.defineClass","control.childElementController.Base","Monitor","util.bind","util.id"],function(e,t,n,i,o,s){var r=function(e,t){r.superclass.constructor.call(this,e),this._side=t,this._childPositionMonitors={}};t(r,n,{insert:function(e,t){r.superclass.insert.call(this,e,t),this.getParentElement()&&this._setupChildMonitor(e)},remove:function(e){this.getParentElement()&&this._clearChildMonitor(e),r.superclass.remove.call(this,e)},getChildIndex:function(e){return this.getParent().indexOf(e)},comparator:function(e,t){var n=e.options.get("floatIndex",0),i=this.getChildIndex(e),o=t.options.get("floatIndex",0),s=this.getChildIndex(t);return"left"==this._side?o-n||s-i:n-o||i-s},setParentElement:function(e){var t=this.getParentElement();r.superclass.setParentElement.call(this,e),t&&!e&&this._clearChildMonitors(),!t&&e&&this._setupChildMonitors()},_setupChildMonitors:function(){this.getParent().each(o(function(e){this._setupChildMonitor(e)},this))},_clearChildMonitors:function(){this.getParent().each(o(function(e){this._clearChildMonitor(e)},this))},_setupChildMonitor:function(e){this._childPositionMonitors[s.get(e)]=new i(e.options).add("floatIndex",function(){this.onChildPositionChange(e)},this)},_clearChildMonitor:function(e){var t=s.get(e);this._childPositionMonitors[t].destroy(),delete this._childPositionMonitors[t]}});var a={create:function(e,t){return new r(e,t)}};e(a)})}],["2q",function(e){e.modules.define("control.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["2z",function(e){e.modules.define("control.RouteEditor",["util.defineClass","localization.common.current","control.storage","control.optionMapper","control.BaseBehaviorButton","util.extend","yandex.counter","behavior.RouteEditor"],function(e,t,n,i,o,s,r,a){function l(e){var t=e&&e.data||{};l.superclass.constructor.call(this,e),this.data.set(r({iconType:"routes",title:n.Control.RouteEditor},t)),this._behaviorEvents=null,this.options.setName("routeEditor")}t(l,s,{getBehaviorName:function(){return"routeEditor"},getRoute:function(){return this.getMap().behaviors.get(this.getBehaviorName()).getRoute()},onAddToMap:function(e){l.superclass.onAddToMap.call(this,e),this._behaviorEvents=e.behaviors.get(this.getBehaviorName()).events.group().add("disable",this.deselect,this),a.countByKey("control","routeEditor.create")},onRemoveFromMap:function(e){this._behaviorEvents.removeAll(),this._behaviorEvents=null,l.superclass.onRemoveFromMap.call(this,e)}}),o.setRule({name:"routeEditor",rule:"prefixed"}),o.setRule({name:"routeEditor",key:["adjustMapMargin"],rule:["prefixed","plain"]}),i.add("routeEditor",l),e(l)})}],["2J",function(e){e.modules.define("control.RulerControl",["localization.common.current","control.storage","control.BaseBehaviorButton","control.optionMapper","util.extend","layout.define","yandex.counter","util.defineClass","behavior.Ruler"],function(e,t,n,i,o,s,r,a,l){function c(e){var n=e&&e.data||{};c.superclass.constructor.call(this,e),this.data.set(s({iconType:"ruler",title:t.Control.ToolBar.ruler},n)),this.options.setName("rulerControl"),this._setupRulerButtonEvents(),a.countByKey("control","ruler.create")}l(c,i,{getBehaviorName:function(){return"ruler"},_setupRulerButtonEvents:function(){this.eventProxy.unsetCallback("click").disableEventFiring("click").setCallback("rulerbuttonclick",this._onRulerButtonClick,this).disableEventFiring("rulerbuttonclick")},_onRulerButtonClick:function(){this.events.fire("click"),this.isEnabled()&&(this.events.fire("press"),this.options.get("selectOnClick",!0)&&(this.isSelected()?this.deselect():this.select()))}}),n.add("rulerControl",c),o.setRule({name:"rulerControl",rule:"prefixed"}),o.setRule({name:"rulerControl",key:["adjustMapMargin"],rule:["prefixed","plain"]}),r("islands#rulerLayout","theme.islands.control.layout.Ruler"),e(c)})}],["3a",function(e){e.modules.define("control.SearchControl",["control.Base","control.storage","control.optionMapper","yandex.geocodeProvider.storage","yandex.searchProvider.storage","control.searchControl.GeocodeProvider","control.searchControl.SearchProvider","control.searchControl.component.SearchGeoObjects","control.searchControl.component.GeocodeGeoObjects","control.component.ToolBarButton","Monitor","util.extend","util.cancelableCallback","util.defineClass","vow","yandex.state.component.SearchControl","yandex.counter","meta.internal","theme.islands.search.meta"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v){function y(e){y.superclass.constructor.call(this,e),this.options.setName("searchControl"),this._toolbarControlComponent=new h(this),this._controlOptionsMonitor=null,this._provider=null,this._providerListener=null,this._geoObjectsComponent=null,this._setupProvider(),this._setupLayoutEventRules(),this._suggestOptionMonitor=null,this._suggestStateMonitor=null,this._providerResolveCallback=null}var j="yandex#map";m(y,n,{onAddToMap:function(e){y.superclass.onAddToMap.call(this,e),this._yandexState=new _(this),this._setupSuggest(),M.countByKey("control","search.create")},onRemoveFromMap:function(e){this._yandexState.destroy(),this._yandexState=null,this._teardownSuggest(),y.superclass.onRemoveFromMap.call(this,e)},search:function(e){var t,n=this.getMap(),i={boundedBy:this.options.get("useMapBounds")&&n?n.getBounds():this.options.get("boundedBy")};return this._clearState(),t=this._provider.load(e,i),this.state.set("inputValue",e),this.events.fire("submit",{request:e}),t},showResult:function(t){var n=this._provider,i=n.state.get("found"),o=n.getResult(t),s=this.getMap(),r=f.defer();if(!n.isLoaded()||t>=i||!s){var a;if(n.isLoaded()?t>=i?a="control.SearchControl.showResult: index is larger then found":s||(a="control.SearchControl.showResult: map not found"):a="control.SearchControl.showResult: results is not loaded",e.env.debug)throw new Error(a);return f.reject(a)}return o?(this._selectResult(t),this._geoObjectsComponent.show(t).then(function(){r.resolve(o)},this)):this.getResult(t).then(function(){r.resolve(this.showResult(t))},this),r.promise()},hideResult:function(){var e=this.state.get("currentIndex");this.events.fire("componenthide"),"number"==typeof e&&this.events.fire("resulthide",{index:e}),this.state.unset("currentIndex")},getResponseMetaData:function(){return this._provider.getResponseMetaData()},getResult:function(t){var n=f.defer(),i=this._provider,o=i.state.get("found"),s=i.getResult(t);if(e.env.debug){if(!i.isLoaded())throw new Error("control.SearchControl: Данные ещё не были загружены.");if(t>=o)throw new Error("control.SearchControl: индекс больше, чем количество найденных результатов")}return t<o&&(s?n.resolve(s):i.load({results:t-i.getResults().length+1,type:"loadmore"}).then(function(e){return n.resolve(i.getResult(t)),e})),n.promise()},getResultsArray:function(){return this._provider.getResults()},getResultsCount:function(){return this._provider.state.get("found")},getSelectedIndex:function(){return this.state.get("currentIndex")},getRequestString:function(){return this._provider.state.get("request")},destroy:function(){this.events.fire("destroy"),this._clearProvider(),this._teardownSuggest(),this._clearState()},getProvider:function(){return this._provider},clear:function(){this._provider.stopLoad(),this.state.unset("currentIndex"),this.events.fire("componenthide",{data:!0}),this._clearState(),this.events.fire("clear")},_setupProvider:function(){var e,t=this.options.get("provider",j);"string"==typeof t&&r.isDefined(t)?(t=new l(this),e=c):(t=new a(this),e=u),this._provider=t,this._setupProviderListeners(),this._setupGeoObjectsComponent(e)},_clearProvider:function(){this._clearGeoObjectsComponent(),this._clearProviderListeners(),this._provider.destroy(),this._provider=null},_setupProviderListeners:function(){this._providerListener=this._provider.events.group().add("load",this._onRequestLoad,this).add("error",this._onErrorLoad,this),this._providerOptionsMonitor=new d(this.options).add("provider",this._onProviderChange,this,{defaultValue:j})},_clearProviderListeners:function(){this._providerListener.removeAll(),this._providerOptionsMonitor.destroy()},_setupGeoObjectsComponent:function(e){var t=new e(this);this._geoObjectsComponentListeners=t.events.group().add("show",this._onComponentShowGeoObject,this).add("hide",this._onComponentGeoObjectHide,this),this._geoObjectsComponent=t},_clearGeoObjectsComponent:function(e){this._geoObjectsComponent&&(this._geoObjectsComponentListeners.removeAll(),this._geoObjectsComponent.destroy(),this._geoObjectsComponent=null)},_setupSuggest:function(){this._suggestOptionMonitor=new d(this.options).add("noSuggestPanel",this._checkSuggestNeeded,this),this._suggestStateMonitor=new d(this.state).add("size",this._checkSuggestNeeded,this),this._checkSuggestNeeded()},_teardownSuggest:function(){this._cancelProviderResolve(),this._suggestOptionMonitor.removeAll(),this._suggestStateMonitor.removeAll(),this.state.set("noSuggestPanel",!0)},_cancelProviderResolve:function(){this._providerResolveCallback&&(this._providerResolveCallback.cancel(),this._providerResolveCallback=null)},_checkSuggestNeeded:function(){var e=this.state.get("size"),t=this.options.get("noSuggestPanel");"large"!=e||t?(this._cancelProviderResolve(),this.state.set("noSuggestPanel",!0)):(this._providerResolveCallback=p.create(function(e){this.state.set("noSuggestPanel",!e),this._providerResolveCallback=null},this),this._provider.hasSuggest().done(this._providerResolveCallback))},_onComponentShowGeoObject:function(e){var t=e.get("index"),n=this.state.get("currentIndex");n!=t&&this._selectResult(t),this.events.fire("resultshow",{index:t})},_onComponentSelectGeoObject:function(e){},_onComponentGeoObjectHide:function(e){var t=e.get("index");this.state.get("currentIndex")==t&&(this.state.unset("currentIndex"),this.events.fire("resulthide",{index:t}))},_setupLayoutEventRules:function(){this.eventProxy.disableEventFiring("search").setCallback("search",function(e){this.search(e.get("request"))},this).disableEventFiring("loadmore").setCallback("loadmore",function(){this._provider.load({type:"loadmore"})},this).disableEventFiring("resultselect").setCallback("resultselect",this._onResultSelect,this).disableEventFiring("dataclear").setCallback("dataclear",this._onDataClear,this).disableEventFiring("suggest")},_onResultSelect:function(e){var t=e.get("index");this.showResult(t)},_selectResult:function(e){var t=this.state.get("currentIndex");"number"==typeof t&&this.events.fire("resulthide",{index:t}),this.state.set("currentIndex",e),this.events.fire("resultselect",{index:e})},_onRequestLoad:function(e){var t=e.get("skip");t||this.state.unset("currentIndex"),this._renderResults(),this.events.fire("load",{skip:t,count:e.get("count")})},_onErrorLoad:function(e){this.events.fire("error",{error:e.get("error")})},_onDataClear:function(){this.clear()},_clearState:function(){this.getMap()&&this.events.fire("componenthide"),this._provider&&this._provider.state.unsetAll(),this.state.unset(["popupOpened","inputValue","request","suggest","correction","isLoaded","metaData","found","results","currentIndex"]),this.events.fire("clearstate")},_renderResults:function(){var e,t=this._provider,n=t.getType(),i=t.getResponseMetaData(),o={};switch(n){case"geocode":o=i;break;case"search":g(o,i.SearchRequest,i.SearchResponse)}e=v.displayAdvert&&o.Banners&&o.Banners[0],this.state.set({isLoaded:!0,request:o.request,correction:o.suggest,suggest:o.suggest,found:o.found,advert:e,results:t.getResults()})},_onProviderChange:function(){this._cancelProviderResolve(),this._clearProvider(),this.state.get("noSuggestPanel")||this.state.set("noSuggestPanel",!0),this._setupProvider(),this._checkSuggestNeeded()}}),o.setRule({name:"searchControl",rule:["prefixed"]}),o.setRule({name:"searchControl",key:["adjustMapMargin"],rule:["prefixed","plain"]}),i.add("searchControl",y),t(y)})}],[")i",function(e){e.modules.define("control.searchControl.BaseProvider",["event.Manager","data.Manager","option.Manager","control.optionMapper","yandex.geocodeProvider.storage","suggest","util.extend","vow","util.defineClass"],function(e,t,n,i,o,s,r,a,l,c){function u(e){this._control=e,this.events=new t,this.state=new n({isLoaded:!1,request:null,searchOptions:{},results:[]}),this.options=new i,this.options.setMapper(o),this.options.setParent(e.options)}c(u,{getType:function(){return"geocode"},load:function(e,t){},stopLoad:function(){var e=this.getLoadDefer();e&&!e.promise().isResolved()&&e.reject("Loading is stopped")},getLoadDefer:function(){},hasSuggest:function(){var e=this._control.options.get("provider"),t=this.options.get("providerStorage",s);return"string"==typeof e?t.require([e]).then(function(e){return"function"==typeof e[0].suggest}):l.resolve(e&&"function"==typeof e.suggest)},suggest:function(e,t){var n=this._control.options,i=this.options.get("suggestResults");return t=a({provider:n.get("provider"),results:n.get("suggestResults",i)},t),r(e,t)},isLoaded:function(){return this.state.get("isLoaded")},getResponseMetaData:function(){return this.state.get("responseMetaData")},getResult:function(e){var t=this.getResults()[e];return"undefined"!=typeof t?t:null},getResults:function(){return this.state.get("results",[]).slice()},getControl:function(){return this._control},destroy:function(){this.state.unsetAll(),this._control=null}}),e(u)})}],[")j",function(e){e.modules.define("control.searchControl.component.BaseGeoObjects",["event.Manager","GeoObjectCollection","map.associate.serviceGeoObjects","util.defineClass"],function(e,t,n,i,o){function s(e){this.events=new t,this._control=e,this._collection=new n,this._isCollectionAdded=null,this._isInited=!1,this._setupComponent()}o(s,{isInited:function(){return this._isInited},initComponent:function(){this.addCollectionToMap(),this._setupBaseComponentControlListeners()},destroy:function(){this._isInited&&(this.removeCollectionFromMap(),this._clearBaseComponentControlListeners())},show:function(e){},hide:function(e){},getCollection:function(){return this._collection},getControl:function(){return this._control},isCollectionAddedToMap:function(){return this._isCollectionAdded},addCollectionToMap:function(){var e=this._control.getMap(),t=i.get(e);t.indexOf(this._collection)==-1&&t.add(this._collection),this._isCollectionAdded=!0},removeCollectionFromMap:function(e){if(e=e||this._control.getMap()){var t=i.get(e);t.indexOf(this._collection)!=-1&&(this._openBalloonCallback&&this._openBalloonCallback.cancel(),t.remove(this._collection)),this._isCollectionAdded=!1}},fireShow:function(e){this.events.fire("show",{index:e})},_setupComponent:function(){var e=this._control;e.getMap()?(this.initComponent(),this._isInited=!0):e.events.once("mapchange",this._setupComponent,this)},_setupBaseComponentControlListeners:function(){this._baseComponentControlListeners=this._control.events.group().add("componentshow",this._onBaseComponentControlShow,this).add("componenthide",this._onBaseComponentControlHide,this)},_clearBaseComponentControlListeners:function(){this._baseComponentControlListeners.removeAll()},_onBaseComponentControlShow:function(e){this.show(e.get("index"))},_onBaseComponentControlHide:function(e){this.hide(e.get("data"))}}),e(s)})}],[")q",function(e){e.modules.define("control.searchControl.component.GeocodeGeoObjects",["control.searchControl.component.BaseGeoObjects","util.cancelableCallback","util.defineClass","vow"],function(e,t,n,i,o){function s(e){this._controlListeners=null,this._currentGeoObject=null,this._openBalloonCallback=null,s.superclass.constructor.call(this,e)}i(s,t,{show:function(e){this.hide();var t,n,i=this.getControl(),s=i.getMap(),r=i.getResultsArray()[e],a=this.getCollection(),l=i.options,c=l.get("noCentering"),u=l.get("noPlacemark");if(!c){var h=r.properties.get("boundedBy")||r.geometry.getBounds();t=s.setBounds(h,{checkZoomRange:!0,zoomMargin:l.get("zoomMargin",0),useMapMargin:l.get("useMapMargin",!0)}),n=t}if(!u)if(this._currentGeoObject=r,a.add(r),c)r.options.set("balloonAutoPan",!1),n=r.balloon.open().then(function(){r.options.set("balloonAutoPan",!0)});else{var d=this._geoOpenBalloonCancelableCallback();t.then(d)}return n||(n=o.resolve(!0)),n.then(function(){this.fireShow(e)},this)},hide:function(){
var e=this._currentGeoObject,t=this.getCollection();e&&(this._openBalloonCallback&&(this._openBalloonCallback.cancel(),this._openBalloonCallback=null),this._requestCallback&&(this._requestCallback.cancel(),this._requestCallback=null),t.removeAll(),this._currentGeoObject=null)},initComponent:function(){s.superclass.initComponent.call(this),this._setupListeners()},destroy:function(){this.isInited()&&(this._openBalloonCallback&&(this._openBalloonCallback.cancel(),this._openBalloonCallback=null),this._clearListeners()),s.superclass.destroy.call(this)},_setupListeners:function(){var e=this.getControl();this._controlListeners=e.events.group().add("submit",this._onSubmit,this).add("load",this._onLoad,this).add("mapchange",this._onMapChange,this)},_clearListeners:function(){this._controlListeners.removeAll()},_onSubmit:function(){this.hide()},_onLoad:function(e){var t=this.getControl();0!=e.get("skip")||1!=t.state.get("found")||t.options.get("noSelect")||this.show(0)},_onMapChange:function(e){var t=e.get("oldMap"),n=e.get("newMap"),i=this._currentGeoObject,o=this.getControl().state,s=this.getCollection(),r=o.get("request")&&o.get("found");t&&this.isCollectionAddedToMap()&&this.removeCollectionFromMap(t),n&&(r&&!s.getLength()&&i&&s.add(i),this.addCollectionToMap())},_geoOpenBalloonCancelableCallback:function(){var e=this._currentGeoObject;return this._openBalloonCallback&&this._openBalloonCallback.cancel(),this._openBalloonCallback=n.create(function(){this._openBalloonCallback=null,e.getMap()&&e.balloon.open()},this),this._openBalloonCallback}}),e(s)})}],[")z",function(e){e.modules.define("control.searchControl.component.SearchGeoObjects",["control.searchControl.component.BaseGeoObjects","util.cancelableCallback","yandex.counter","vow","util.array","util.defineClass"],function(e,t,n,i,o,s,r){function a(e){this._controlListeners=null,this._geoObjectListeners=null,this._deferredBalloonOpen=null,this._isFirstLoad=null,a.superclass.constructor.call(this,e)}r(a,t,{show:function(e){var t,n=this.getControl(),i=this.getCollection(),o=n.getResponseMetaData().SearchResponse.display,s=n.getResultsArray()[e],r=this._getInnerGeoObjectIndex(s),a=s;return r!=-1&&(a=i.get(r)),this._setProcessingState(),a.balloon.isOpen()?t=a.balloon.autoPan().then(this._unsetProcessingState,this):("multiple"!=o&&(this._clearCollection(),i.add(a),this.isCollectionAddedToMap()||this.addCollectionToMap()),t=a.getOverlay().then(function(){return this._openBalloon(a)},this),this._logCardShow(a)),t.then(function(){this.fireShow(e)},this)},hide:function(e){var t=this.getControl(),n=t.getMap(),i=o.resolve();return n&&(n.balloon.isOpen()&&(i=n.balloon.close()),e&&(this.removeCollectionFromMap(),this._clearCollection())),i},initComponent:function(){var e=this.getControl(),t=this.getCollection(),n=e.state,i=n.get("request")&&n.get("found");i&&!t.getLength()&&this._addItems(),this._setupListeners(),this._setupCollectionOptions(),a.superclass.initComponent.call(this)},destroy:function(){this.isInited()&&(this._requestCallback&&(this._requestCallback.cancel(),this._requestCallback=null),this._clearGeoObjectListeners(),this._clearListeners()),a.superclass.destroy.call(this)},_setupCollectionOptions:function(){var e=this.getCollection(),t=this.getControl();e.options.set({preset:t.options.get("geoObjectStandardPreset")})},_setupListeners:function(){var e=this.getControl(),t=this.getCollection();this._controlListeners=e.events.group().add("submit",this._onSubmit,this).add("load",this._onLoad,this).add("mapchange",this._onMapChange,this),this._collectionListeners=t.events.group().add("click",this._onGeoObjectClick,this)},_clearListeners:function(){this._controlListeners.removeAll(),this._collectionListeners.removeAll()},_onSubmit:function(){this.removeCollectionFromMap(),this._clearCollection(),this._isFirstLoad=!0},_onLoad:function(e){var t=this.getControl(),n=t.getMap(),i=t.getResponseMetaData().SearchResponse,o="multiple"==i.display,s=e.get("skip");if(s)o&&this._addItems(s);else if(this._addItemsDiff(),o&&this.addCollectionToMap(),this._isFirstLoad&&i.found){this._setProcessingState();var r=n.setBounds(i.boundedBy,{checkZoomRange:!0});1==i.found&&r.then(function(){this.show(0)},this),r.then(this._unsetProcessingState,this)}this._isFirstLoad=!1},_onMapChange:function(e){var t=e.get("oldMap"),n=e.get("newMap"),i=this.getCollection(),o=this.getControl(),s=o.state,r=s.get("request")&&s.get("found");t&&this.isCollectionAddedToMap()&&this.removeCollectionFromMap(t),n&&(r&&!i.getLength()&&this._addItems(),this.addCollectionToMap())},_logCardShow:function(e){var t=e.properties.get("advert.counter");t&&i.directCount(t),i.countByKey("modulesUsage","search.showCard."+e.properties.get("type","unknown"))},_openBalloon:function(e){var t=o.defer(),n=e.getMap();return this._deferredBalloonOpen&&this._deferredBalloonOpen.reject("show: new request"),this._clearGeoObjectListeners(),n?(e.balloon.open().then(this._unsetProcessingState,this).then(function(){t.resolve(!0)}),this._geoObjectListeners=e.events.group().add("balloonclose",this._onBalloonClose,this)):t.reject("show: map not found"),this._deferredBalloonOpen=t,t.promise()},_clearGeoObjectListeners:function(){this._geoObjectListeners&&this._geoObjectListeners.removeAll()},_setProcessingState:function(){var e=this.getControl();e.state.set("processing",!0)},_unsetProcessingState:function(){var e=this.getControl();e.state.set("processing",!1)},_clearCollection:function(){var e=this.getCollection();e.removeAll(),this._clearGeoObjectListeners()},_onGeoObjectClick:function(e){var t,n=e.get("target");n.balloon.isOpen()||(t=this._getGeoObjectIndex(n),this._logCardShow(n),this.fireShow(t)),this._clearGeoObjectListeners(),this._geoObjectListeners=n.events.group().add("balloonclose",this._onBalloonClose,this)},_onBalloonClose:function(e){var t=e.get("target"),n=this._getGeoObjectIndex(t);this.events.fire("hide",{index:n}),this._clearGeoObjectListeners()},_addItems:function(e){var t=this.getControl(),n=t.getResultsArray();e&&(n=n.slice(e)),s.each(n,this._addItem,this)},_addItemsDiff:function(){var e=this.getControl(),t=this.getCollection(),n=e.getResultsArray(),i=[],o={};t.each(function(e){var t=e.properties.get("id");t?o[t]={geoObject:e,needToRemove:!0}:i.push(e)});for(var r=0,a=n.length;r<a;r++){var l=n[r],c=l.properties.get("id");o[c]?o[c].needToRemove=!1:this._addItem(l)}for(var u in o)if(o.hasOwnProperty(u)){var h=o[u];h.needToRemove&&t.remove(h.geoObject)}i.length&&s.each(i,t.remove,t)},_addItem:function(e){var t=this.getCollection(),n=this.getControl(),i=(e.properties.get("type"),n.options.get("geoObjectGeoproductPreset"));e.properties.get("advert")&&e.options.set("preset",i),t.add(e)},_getGeoObjectIndex:function(e){var t=this.getControl(),n=t.getResultsArray(),i=s.indexOf(n,e);return i!=-1?i:this._findGeoObjectIndex(n,e)},_getInnerGeoObjectIndex:function(e){var t=[],n=this.getCollection(),i=n.indexOf(e),o=e.properties.get("id");return i==-1&&"undefined"!=typeof o&&(n.each(function(e){t.push(e)}),i=this._findGeoObjectIndex(t,e)),i},_findGeoObjectIndex:function(e,t){var n=t.properties.get("id"),i=function(e){return e.properties.get("id")==n};return s.findIndex(e,i)}}),e(a)})}],[")Q",function(e){e.modules.define("control.searchControl.GeocodeProvider",["control.searchControl.BaseProvider","control.optionMapper","map.metaOptions","yandex.geocodeProvider.storage","geocode","util.extend","vow","util.defineClass"],function(t,n,i,o,s,r,a,l,c){function u(e){u.superclass.constructor.call(this,e),this._control=e,this.options.setName("geocodeProvider")}c(u,n,{load:function(t,n){if("string"==typeof t)n=n||{},n=this._getRequestOptions(this._control.options,n),this._clearData(),this.state.set({request:t,searchOptions:n});else{if(e.env.debug&&!this.isLoaded())throw new Error("control.searchControl.Provider: Для дозагрузки данных сначала нужно загрузить запрос");var i,o=this.state.get("results",[]),s=this.options.get("results"),c=this.state.get("searchOptions");i={skip:o.length,results:this._control.options.get("results",s)},n="object"==typeof t?a({},c,i,t):a({},c,i),t=this.state.get("request")}this._deferred&&!this._deferred.promise().isResolved()&&this._deferred.reject("control.searchControl.GeocodeProvider: New request");var u=this._deferred=l.defer();return r(t,n).then(function(e){u.promise().isRejected()||(this._onLoad(e),u.resolve(e))},function(e){u.reject(e),this._onLoadError(e)},this),this.events.fire("submit"),u.promise()},destroy:function(){this._clearData(),u.superclass.destroy.call(this)},getLoadDefer:function(){return this._deferred},_onLoad:function(e){var t=e.metaData.geocoder;return this._updateResults(e.geoObjects,t.skip),this.state.set({isLoaded:!0,request:t.request,correction:t.suggest,suggest:t.suggest,found:t.found,results:this.getResults(),responseMetaData:t}),this.events.fire("load",{skip:t.skip,count:t.results}),e},_onLoadError:function(e){this.events.fire("error",{error:e})},_getRequestOptions:function(e,t){return a({provider:e.get("provider"),boundedBy:e.get("boundedBy"),strictBounds:e.get("strictBounds"),kind:e.get("kind"),results:e.get("results",this.options.get("results")),searchCoordOrder:e.get("searchCoordOrder",this.options.get("coordOrder")),origin:"jsapi2searchcontrol"},t)},_updateResults:function(e,t){var n=t||0,i=this.state.get("results",[]);e.each(function(e){i[n]=e,n++}),this.state.set("results",i)},_clearData:function(){this.state.unsetAll()}}),i.setRule({name:"geocodeProvider",rule:["prefixed"]}),i.setRule({name:"geocodeProvider",key:["adjustMapMargin"],rule:["prefixed","plain"]}),o.set({searchControlGeocodeProviderProviderStorage:s,searchControlGeocodeProviderCoordOrder:"latlong",searchControlGeocodeProviderResults:10,searchControlGeocodeProviderSuggestResults:5}),t(u)})}],[")I",function(e){e.modules.define("control.searchControl.SearchProvider",["control.searchControl.BaseProvider","control.optionMapper","map.metaOptions","search","yandex.searchProvider.storage","localization.common.current","formatter","util.array","yandex.counter","util.cancelableCallback","util.extend","vow","util.defineClass","meta.internal"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){function f(e){f.superclass.constructor.call(this,e),this._control=e,this.options.setName("searchProvider"),this._isLoadMoreRequest=null,this._requestCallback=null,this._setupListeners(),u.countByKey("modulesUsage","searchProvider.create")}var _="loadmore",M="boundschange",v=a.ppo.Card;p(f,n,{getType:function(){return"search"},load:function(t,n){var i=this._control.options;if(u.countByKey("business_search","search."+(t&&t.type||"direct")),"string"==typeof t)n=n||{},n=this._getRequestOptions(i,n),this._clearData(),this.state.set({request:t,searchOptions:n});else{if(e.env.debug&&!this.isLoaded())throw new Error("control.searchControl.SearchProvider: Для дозагрузки данных сначала нужно загрузить запрос");var o,r=this.state,a=r.get("requestContext"),l=r.get("display"),c=r.get("searchOptions"),p=this.options.get("results"),m=r.get("results",[]).length,f=d({},c,{context:a}),M=this._control.getMap();this._isLoadMoreRequest=t&&t.type==_,!this._isLoadMoreRequest&&M&&(f.boundedBy=M.getBounds(),c.boundedBy=f.boundedBy),("multiple"!=l||this._isLoadMoreRequest)&&(o=t&&t.results?t.results:this._isLoadMoreRequest?i.get("loadMoreResults"):i.get("results",p),d(f,{results:o,skip:m})),n="object"==typeof t?d(f,t):f,t=this.state.get("request")}this._deferred&&!this._deferred.promise().isResolved()&&this._deferred.reject("control.searchControl.SearchProvider: new request.");var v=this._deferred=g.defer();return this._requestCallback=h.create(function(e){v.promise().isRejected()||(this._onLoad(e),v.resolve(e))},this),s(t,n,"searchProvider").then(this._requestCallback,function(e){v.reject(e),this._onLoadError(e)},this),this.events.fire("submit"),v.promise()},destroy:function(){this._clearData(),this._clearListeners(),f.superclass.destroy.call(this)},getLoadDefer:function(){return this._deferred},_clearData:function(){this._isLoadMoreRequest=null,this.state.unsetAll()},_setupListeners:function(){var e=this._control;e.getMap()&&this._setupMapListeners(),this._controlListeners=e.events.group().add("mapchange",this._onMapChange,this)},_clearListeners:function(){this._clearMapListeners(),this._controlListeners.removeAll()},_setupMapListeners:function(){var e=this._control.getMap();this._mapListeners=e.events.group().add("boundschange",this._onBoundsChange,this).add("balloonopen",this._onMapBalloonOpen,this)},_clearMapListeners:function(){this._mapListeners&&this._mapListeners.removeAll()},_onMapChange:function(e){var t=e.get("newMap");this._clearMapListeners(),t&&this._setupMapListeners()},_onBoundsChange:function(){var e=this._control,t=this.state.get("display"),n=e.getMap();!this.isLoaded()||"multiple"!=t||e.state.get("processing")||n.balloon.isOpen()||this.load({type:M})},_onMapBalloonOpen:function(){this._deferred&&!this._deferred.promise().isResolved()&&this._requestCallback.cancel()},_getRequestOptions:function(e,t){var n=this._control.getMap();return"undefined"==typeof t.boundedBy&&n&&(t.boundedBy=n.getBounds()),d({provider:e.get("provider"),boundedBy:e.get("boundedBy"),results:e.get("results",this.options.get("results")),searchCoordOrder:e.get("searchCoordOrder",this.options.get("coordOrder")),origin:"jsapi2SearchControl"},t)},_onLoad:function(e){var t,n=e.geoObjects,i=n.properties.getAll(),o=i.resultsArray.slice();return"multiple"!=i.display||this._isLoadMoreRequest?(c.each(o,this._prepareItem,this),t=this.state.get("results",[]),t=t.concat(o)):(t=o,c.each(t,this._prepareItem,this)),this.state.set(d({},i,{isLoaded:!0,results:t,correction:i.suggest})),this.events.fire("load",{skip:i.skip||0,count:i.results}),i.counter&&u.directCount(i.counter),e},_onLoadError:function(e){this.events.fire("error",{error:e})},_prepareItem:function(e){e.properties.set("displayAdvert",m.displayAdvert);var t=e.properties.get("type");"business"==t&&(this._setLocalization(e),this._setBalloonOptions(e)),"public-map-object"!=t&&"toponym"!=t||this._setBalloonOptions(e)},_setLocalization:function(e){var t=e.properties,n=t.get("rating.reviews",0),i=t.get("rating.ratings",0);e.properties.set("loc",{timeClosedUntil:v.timeClosedUntil.replace("%s",t.get("workingStatus.time","")),timeOpenUntil:v.timeOpenUntil.replace("%s",t.get("workingStatus.time","")),ratingReviews:l.numeral(n,v.ratingReviews),ratingRatings:l.numeral(i,v.ratingRatings)})},_setBalloonOptions:function(e){var t=this.options;e.options.set({balloonContentLayout:t.get("balloonContentLayout"),balloonCardStatusLayout:t.get("balloonStatusLayout"),balloonCardOpenInYmapsLayout:t.get("balloonOpenInYmapsLayout"),balloonCardAddReviewButtonLayout:t.get("balloonAddReviewButtonLayout"),balloonCardShowAdvert:t.get("balloonShowAdvert"),balloonCardShowReviewLink:t.get("balloonShowReviewLink"),balloonCardAddOrgUrl:t.get("balloonAddOrgUrl"),balloonMaxHeight:t.get("balloonMaxHeight"),balloonMinWidth:t.get("balloonMinWidth"),balloonMaxWidth:t.get("balloonMaxWidth")}),"business"==e.properties.get("type")&&e.options.set("balloonPanelMaxMapArea",t.get("balloonBusinessPanelMaxMapArea"))}}),i.setRule({name:"searchProvider",rule:["prefixed"]}),o.set({searchControlSearchProviderProviderStorage:r,searchControlSearchProviderCoordOrder:"latlong",searchControlSearchProviderResults:20,searchControlSearchProviderSuggestResults:5}),t(f)})}],["3d",function(e){e.modules.define("control.Selectable",["util.defineClass","control.Base"],function(e,t,n){var i=function(e){i.superclass.constructor.call(this,e),this.state.get("enabled",!0)&&this.enable(),this.state.events.add("change",this._onStateChange,this),this._selected=this.state.get("selected"),this._enabled=this.state.get("enabled"),this._setupSelectableEventRules()};t(i,n,{select:function(){this.isSelected()||this.state.set("selected",!0)},deselect:function(){this.isSelected()&&this.state.set("selected",!1)},isSelected:function(){return this.state.get("selected",!1)},enable:function(){this.state.set("enabled",!0)},disable:function(){this.state.set("enabled",!1)},isEnabled:function(){return this.state.get("enabled",!0)},_onStateChange:function(){this.state.get("selected")!=this._selected&&(this._selected=this.state.get("selected"),this.events.fire(this._selected?"select":"deselect")),this.state.get("enabled")!=this._enabled&&(this._enabled=this.state.get("enabled"),this.events.fire(this._enabled?"enable":"disable"))},_setupSelectableEventRules:function(){this.eventProxy.disableEventFiring("select").setCallback("select",this.select,this).disableEventFiring("deselect").setCallback("deselect",this.deselect,this).disableEventFiring("enable").setCallback("enable",this.enable,this).disableEventFiring("disable").setCallback("disable",this.disable,this)}}),e(i)})}],["3g",function(e){e.modules.define("control.storage",["util.Storage"],function(e,t){e(new t)})}],["3k",function(e){e.modules.define("control.TrafficControl",["control.component.ToolBarButton","control.component.CollapseOnBlur","control.Selectable","control.storage","Monitor","control.optionMapper","traffic.provider.storage","util.bind","util.defineClass","theme.islands.traffic.metaOptions","layout.define","traffic.provider.Actual","traffic.provider.Archive","traffic.provider.Forecast","yandex.counter"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f){var _=function(e){_.superclass.constructor.call(this,e),this.options.setName("trafficControl"),"undefined"==typeof this.state.get("providerKey")&&this.state.set("providerKey","traffic#actual"),this._providers={},this._providerListeners={},this._currentProviderKey=null,this._stateMonitor=null,this._setupTrafficLayoutEventRules(),this._trafficShown=this.state.get("trafficShown"),this._expanded=this.state.get("expanded"),this.state.events.add("change",this._onTrafficStateChange,this),this._toolBarButtonComponent=new n(this),this._collapseOnBlurComponent=new i(this)};u(_,o,{onAddToMap:function(e){_.superclass.onAddToMap.call(this,e),this._stateMonitor=new r(this.state).add(["trafficShown","providerKey"],this._onVisibleProviderChange,this),this.state.get("trafficShown")&&this._addProviderToMap(this.state.get("providerKey")),f.countByKey("control","traffic.create")},onRemoveFromMap:function(e){this._stateMonitor.removeAll(),_.superclass.onRemoveFromMap.call(this,e),this.state.get("trafficShown")&&this._removeProviderFromMap(this.state.get("providerKey"))},showTraffic:function(){this.isTrafficShown()||this.state.set("trafficShown",!0)},hideTraffic:function(){this.isTrafficShown()&&this.state.set("trafficShown",!1)},isTrafficShown:function(){return this.state.get("trafficShown")},expand:function(){this.isExpanded()||this.state.set("expanded",!0)},collapse:function(){this.isExpanded()&&this.state.set("expanded",!1)},isExpanded:function(){return this.state.get("expanded",!1)},_setupTrafficLayoutEventRules:function(){this.eventProxy.disableEventFiring("showtraffic").setCallback("showtraffic",this.showTraffic,this).disableEventFiring("hidetraffic").setCallback("hidetraffic",this.hideTraffic,this).disableEventFiring("expand").setCallback("expand",this.expand,this).disableEventFiring("collapse").setCallback("collapse",this.collapse,this).disableEventFiring("collapse").setCallback("providerkeychange",function(e){this.state.set("providerKey",e.get("newProviderKey"))},this)},getProvider:function(e){return e=e||this.state.get("providerKey"),this._providers[e]||(this._providers[e]=this._createProvider(e),this._providerListeners[e]=this._providers[e].events.group().add("mapchange",this._getProviderCallback(e),this)),this._providers[e]},_createProvider:function(t){var n=l.get(t);if(!n&&e.env.debug)throw new Error("control.TrafficControl.getProvider: can't find provider constructor by the key.");var i=new n;return i.options.setParent(this.options),i},_getProviderCallback:function(e){return c(function(t){var n=t.get("newMap");this._currentProviderKey==e?n||this.state.get("providerKey")!=e||this.state.set("trafficShown",!1):n&&this.state.set("providerKey",e)},this)},_addProviderToMap:function(e){this._currentProviderKey=e;var t=this.getProvider(e);t.setMap(this.getMap()),this.events.fire("providerkeychange",{newProviderKey:e,oldProviderKey:null}),f.countByKey("control","traffic."+e.replace("traffic#","")+"Provider"),"traffic#archive"==e&&f.countByKey("traffic.archive")},_removeProviderFromMap:function(e){var t=this.getProvider(e);t.setMap(null),this._currentProviderKey=null,this.events.fire("providerkeychange",{newProviderKey:null,oldProviderKey:e})},_changeProvider:function(e,t){var n=this.getProvider(e),i=this.getProvider(t);n.setMap(null),i.options.setParent(this.options),i.setMap(this.getMap()),this._currentProviderKey=t,this.events.fire("providerkeychange",{newProviderKey:t}),n.options.setParent(null),f.countByKey("control","traffic."+t.replace("traffic#","")+"Provider"),"traffic#archive"==t&&f.countByKey("traffic.archive")},_onVisibleProviderChange:function(){this._applyProvider(this.state.get("providerKey"))},_applyProvider:function(e){var t=this.state,n=this._currentProviderKey;t.get("trafficShown")?e!=n&&(this._providers[n]?this._changeProvider(n,e):this._addProviderToMap(e)):this._removeProviderFromMap(n)},_onTrafficStateChange:function(){this.state.get("expanded")!=this._expanded&&(this._expanded=this.state.get("expanded"),this.events.fire(this._expanded?"expand":"collapse")),this.state.get("trafficShown")!=this._trafficShown&&(this._trafficShown=this.state.get("trafficShown"),this.events.fire(this._trafficShown?"showtraffic":"hidetraffic"))}}),a.setRule({name:"trafficControl",rule:["prefixed","plain"]}),a.setRule({name:"routeEditor",key:["adjustMapMargin"],rule:["prefixed","plain"]}),d("islands#trafficControlLayout","theme.islands.traffic.layout.Control"),d("islets#trafficControlLayout","theme.islets.traffic.layout.Control"),s.add("trafficControl",_),t(_)})}],["3n",function(e){e.modules.define("control.TypeSelector",["util.defineClass","control.ListBox","control.ListBoxItem","mapType.storage","localization.common.current","control.storage","util.array","control.optionMapper","util.bind","util.extend","map.metaOptions","yandex.counter"],function(t,n,i,o,s,r,a,l,c,u,h,d,g){function p(e){return"string"==typeof e?s.get(e):e}var m=r.Control.TypeControl.layers,f=function(e){l.isArray(e)&&(e={mapTypes:e});var t=e&&e.data||{};f.superclass.constructor.call(this,e),this.data.set(h({content:m,iconType:"layers"},t)),this._selectedMapType=null,this._mapTypeListItems=[],this._createMapTypeItems(e&&e.mapTypes),this.options.setName("typeSelector"),this._mapListeners=null};n(f,i,{addMapType:function(t,n){if(e.env.debug&&!p(t))throw new Error("TypeSelector: undefined map type "+t);if(this._getItem(t))return this;if("undefined"==typeof n){var i=d.get("typeSelectorMapTypePositions");"string"==typeof t&&i[t]&&(n=i[t])}var o=this._createItem(t,n),s=this.getMap(),r=!!s&&s.getType()===t;return this._mapTypeListItems.push(o),this.add(o.listItem),r&&this._selectMapType(s.getType()),this},removeMapType:function(e){var t=this._getItem(e);if(t){t=t.listItem,e=t.mapType;for(var n=this.getMap(),i=!!n&&n.getType()===e,o=0;this._mapTypeListItems[o].listItem!=t;)o++;this._mapTypeListItems[o].listener.removeAll(),this._mapTypeListItems.splice(o,1),this.remove(t),i&&this._selectMapType(null)}return this},removeAllMapTypes:function(){for(;this._mapTypeListItems.length;)this.removeMapType(this._mapTypeListItems[0].mapType);return this},onAddToMap:function(e){f.superclass.onAddToMap.call(this,e),this._mapListeners=e.events.group().add("typechange",function(t){this._selectMapType(e.getType())},this);var t=this.isExpanded();this._selectMapType(e.getType()),t&&this.expand(),g.countByKey("control","typeSelector.create")},onRemoveFromMap:function(e){this._mapListeners.removeAll(),f.superclass.onRemoveFromMap.call(this,e)},_createMapTypeItems:function(e){e||(e=d.get("typeSelectorMapTypes"));for(var t=0,n=e.length;t<n;++t)this.addMapType(e[t])},_getItem:function(e){for(var t,n=0,i=this._mapTypeListItems.length;n<i;++n)if(t=this._mapTypeListItems[n],t.mapType===e)return t;return null},_selectMapType:function(e){var t=!1;if(this._selectedMapType){var n=this._getItem(this._selectedMapType);n&&n.listItem.deselect(),t=!0}if(this._selectedMapType=e,e){var i=this._getItem(e);i&&i.listItem.select()}else t=!1;t&&g.countByKey("control","typeSelector."+typeof e=="string"?e.replace(/[^A-Za-z]/g,"_"):"other")},_createItem:function(e,t){var n=new o({data:{content:p(e).getName(),mapType:e},options:{positionIndex:t,selectOnClick:!0}});n.deselect=u(function(){return this.getMap()&&e==this.getMap().getType()?void this.collapse():void o.prototype.deselect.call(n)},this);var i=n.events.group().add(["select"],function(){var t=this.getMap();t.getType()!=e&&("string"==typeof e&&g.countByKey("control","typeSelector."+e.replace(/[^A-Za-z]/g,"_")),this.getMap().setType(e)),this.collapse()},this);return{mapType:e,listItem:n,listener:i}}}),c.setRule({name:"typeSelector",rule:["prefixed","plain"]}),c.setRule({name:"routeEditor",key:["adjustMapMargin"],rule:["prefixed","plain"]}),a.add("typeSelector",f),t(f)})}],["3r",function(e){e.modules.define("control.ZoomControl",["util.defineClass","control.storage","control.Base","control.optionMapper","Monitor","map.action.Continuous","layout.define","yandex.counter"],function(e,t,n,i,o,s,r,a,l){var c=function(e){c.superclass.constructor.call(this,e),this.options.setName("zoomControl"),this._map=null,this._mapListeners=null,this._zoomRangeListeners=null,this._mapAction=null;var t=this.options.get("size");this.state.set("size","auto"==t?"small":t)};t(c,i,{onAddToMap:function(e){this._map=e,this.state.set({zoom:this._map.getZoom(),zoomRange:this._map.zoomRange.getCurrent(),mapHeight:this._map.container.getSize()[1]-this._map.state.get("margin",[0,0,0,0])[2]}),c.superclass.onAddToMap.call(this,e),this._setupLayoutEventRules(),this._setupZoomListeners(),l.countByKey("control","zoom.create")},onRemoveFromMap:function(e){this._clearZoomListeners(),c.superclass.onRemoveFromMap.call(this,e)},_setupZoomListeners:function(){this._mapListeners=this._map.events.group().add("sizechange",this._onMapSizeChange,this).add("boundschange",this._onMapBoundsChange,this),this._mapMarginMonitor=new s(this._map.state).add("margin",this._onMapSizeChange,this),this._zoomRangeListeners=this._map.zoomRange.events.group().add("change",this._onZoomRangeChange,this)},_clearZoomListeners:function(){this._mapListeners.removeAll(),this._mapMarginMonitor.removeAll(),this._zoomRangeListeners.removeAll()},_setupLayoutEventRules:function(){this.eventProxy.disableEventFiring("zoomchange").disableEventFiring("dragstart").disableEventFiring("dragstop"),this.eventProxy.setCallback("zoomchange",this._onZoomChange,this).setCallback("dragstart",this._onDragStart,this).setCallback("dragstop",this._onDragStop,this)},_onDragStart:function(){this._dragging=!0,this._initialZoom=this._map.getZoom(),l.countByKey("control","zoom.drag")},_onDragStop:function(){this._dragging=!1,this._mapAction&&(this._mapAction.end(),this._mapAction=null),l.countByKey("control","zoom.change."+Math.abs(Math.round(this._map.getZoom()-this._initialZoom)))},_onZoomRangeChange:function(e){this.state.set("zoomRange",e.get("newZoomRange"))},_onMapBoundsChange:function(e){var t=e.get("newZoom"),n=e.get("oldZoom");!this._dragging&&Math.abs(t-n)>.001&&this.state.set("zoom",t)},_onZoomChange:function(e){var t=e.get("newZoom");if(this._dragging)this._mapAction||(this._mapAction=new r,this._map.action.execute(this._mapAction)),this._mapAction.tick({zoom:t});else if(this._map.options.get("avoidFractionalZoom")&&(t=Math.floor(t)),Math.abs(t-this.state.get("zoom"))>.001){var n=this._map.getZoom();this.state.set("zoom",t),this._map.setZoom(t,{duration:this.options.get("zoomDuration")}),l.countByKey("control","zoom.change."+Math.abs(Math.round(t-n)))}},_onMapSizeChange:function(){this.state.set("mapHeight",this._map.container.getSize()[1]-this._map.state.get("margin",[0,0,0,0])[2])}}),o.setRule({name:"zoomControl",rule:"prefixed"}),o.setRule({name:"zoomControl",key:["adjustMapMargin"],rule:["prefixed","plain"]}),n.add("zoomControl",c),a("islands#zoomLayout","theme.islands.control.layout.Zoom"),e(c)})}],["9Q",function(e){e.modules.define("coordSystem.cartesian",["coordSystem.Cartesian"],function(e,t){e(new t(1))})}],["9z",function(e){e.modules.define("coordSystem.Cartesian",["util.extend"],function(e,t){function n(e){e=e||[1,1],this._scale="number"==typeof e?[e,e]:e}function i(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}t(n.prototype,{solveDirectProblem:function(e,t,n){t=i(t);var o=t[0]*n/this._scale[0],s=t[1]*n/this._scale[1];return{startPoint:e,startDirection:t,endPoint:[e[0]+o,e[1]+s],endDirection:t,distance:n,pathFunction:function(n){return{point:[e[0]+o*n,e[1]+s*n],direction:t}}}},solveInverseProblem:function(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=this._getUnitDistance(e,t),s=[n/o,i/o];return{startPoint:e,startDirection:s,endPoint:t,endDirection:s,distance:this.getDistance(e,t),pathFunction:function(t){return{point:[e[0]+n*t,e[1]+i*t],direction:s}}}},getDistance:function(e,t){return Math.sqrt(Math.pow((t[0]-e[0])*this._scale[0],2)+Math.pow((t[1]-e[1])*this._scale[1],2))},_getUnitDistance:function(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}),n.prototype.distance=n.prototype.getDistance,e(n)})}],["3t",function(e){e.modules.define("coordSystem.geo",["util.math.cycleRestrict"],function(t,n){var i=e.env.coordinatesOrder,o=function(e){return e<0?-1:e>0?1:0},s=6378137,r=.00669437999014,a=1-Math.sqrt(1-r),l=(1-a)*s,c=1e-10,u=function(e){return e*e},h=function(e){return Math.abs(e-o(e)*Math.PI/2)<c?o(e)*Math.PI/2:Math.atan((1-a)*Math.tan(e))},d=function(e){return[e[1],e[0]]},g=function(e){return Math.max(Math.min(e,89.999),-89.999)},p={solveDirectProblem:function(e,t,r){"longlat"==i&&(e=d(e),t=d(t)),e[0]=g(e[0]);var u=e[0]*Math.PI/180,h=e[1]*Math.PI/180,p=Math.sqrt(t[0]*t[0]+t[1]*t[1]),m=t[0]/p,f=t[1]/p,_=(1-a)*Math.tan(u),M=o(Math.cos(u))*Math.sqrt(1/(1+_*_)),v=Math.sqrt(1-M*M)*o(_),y=Math.atan2(_,m),j=M*f,b=(1-j)*(1+j),I=b*(s*s/(l*l)-1),L=1+I*(4096+I*(-768+I*(320-175*I)))/16384,C=I*(256+I*(-128+I*(74-47*I)))/1024,x=function(e){var t,o=r*e,s=o/(l*L),u=y+s/2,g=Math.cos(2*u),p=0,_=0;do{var I=C*Math.sin(s)*(g+.25*C*(Math.cos(s)*(-1+2*g*g)-1/6*C*g*(-3+4*Math.sin(s)*Math.sin(s))*(-3+4*g*g))),t=I-_;_=I,s=o/(l*L)+I,p++}while(Math.abs(t)>c&&p<10);var x=v*Math.sin(s)-M*Math.cos(s)*m,w=Math.atan2(v*Math.cos(s)+M*Math.sin(s)*m,(1-a)*Math.sqrt(j*j+x*x)),N=Math.atan2(Math.sin(s)*f,M*Math.cos(s)-v*Math.sin(s)*m),S=a/16*b*(4+a*(4-3*b)),D=N-(1-S)*a*j*(s+S*Math.sin(s)*(g+S*Math.cos(s)*(-1+2*g*g))),T=Math.atan2(j,-v*Math.sin(s)+M*Math.cos(s)*m),E=[180*w/Math.PI,n(180*(h+D)/Math.PI,-180,180)],P=[Math.cos(T),Math.sin(T)];return{point:"longlat"==i?d(E):E,direction:"longlat"==i?d(P):P}},w=x(1);return{startPoint:"longlat"==i?d(e):e,startDirection:"longlat"==i?d(t):t,endPoint:w.point,endDirection:w.direction,distance:r,pathFunction:x}},solveInverseProblem:function(e,t,r){var p,m=this.solveDirectProblem;if(e==t||e[0]==t[0]&&e[1]==t[1])p={startPoint:e,startDirection:[1,1],endPoint:t,endDirection:[1,1],distance:0};else{"longlat"==i&&(e=d(e),t=d(t)),e[0]=g(e[0]),t[0]=g(t[0]);var f,_=e[0]*Math.PI/180,M=t[0]*Math.PI/180,v=(t[1]-e[1])*Math.PI/180,y=h(_),j=h(M),b=v,I=b,L=0,C=[],x=[],w=0;if(0==_&&0==M){var N=n(t[1]-e[1],r?-360:-180,r?360:180);C=x=[0,N>0?1:-1],w=2*Math.PI*s/360*Math.abs(N)}else{var S,D,T,E,P,z,A;do S=Math.sqrt(u(Math.cos(j)*Math.sin(b))+u(Math.cos(y)*Math.sin(j)-Math.sin(y)*Math.cos(j)*Math.cos(b))),D=Math.sin(y)*Math.sin(j)+Math.cos(y)*Math.cos(j)*Math.cos(b),P=r?2*Math.PI-Math.atan2(S,D):Math.atan2(S,D),T=Math.cos(y)*Math.cos(j)*Math.sin(b)/Math.sin(P),E=1-u(T),z=Math.cos(P)-2*Math.sin(y)*Math.sin(j)/E,A=a/16*E*(4+a*(4-3*E)),b=Math.min(Math.max(v+(1-A)*a*T*(P+A*Math.sin(P)*(z+A*Math.cos(P)*(-1+2*z*z))),-2*Math.PI),2*Math.PI),f=Math.abs(I-b),I=b,L++;while(f>c&&L<10);var O=E*(s*s-l*l)/(l*l),k=1+O*(4096+O*(-768+O*(320-175*O)))/16384,G=O*(256+O*(-128+O*(74-47*O)))/1024,Z=G*Math.sin(P)*(z+.25*G*(Math.cos(P)*(-1+2*z*z)-1/6*G*z*(-3+4*Math.sin(P)*Math.sin(P))*(-3+4*z*z))),R=Math.atan2(Math.cos(j)*Math.sin(b),Math.cos(y)*Math.sin(j)-Math.sin(y)*Math.cos(j)*Math.cos(b)),B=Math.atan2(Math.cos(y)*Math.sin(b),-Math.sin(y)*Math.cos(j)+Math.cos(y)*Math.sin(j)*Math.cos(b));
w=l*k*(P-Z),r&&(R-=o(R-Math.PI)*Math.PI,B-=o(B-Math.PI)*Math.PI),C=[Math.cos(R),Math.sin(R)],x=[Math.cos(B),Math.sin(B)]}p={startPoint:"longlat"==i?d(e):e,startDirection:"longlat"==i?d(C):C,endPoint:"longlat"==i?d(t):t,endDirection:"longlat"==i?d(x):x,distance:w}}return p.pathFunction=function(e){var t=m(p.startPoint,p.startDirection,p.distance*e);return{point:t.endPoint,direction:t.endDirection}},p},getDistance:function(e,t){return this.solveInverseProblem(e,t).distance}};p.distance=p.getDistance,t(p)})}],["1y",function(e){e.modules.define("copyright",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standards")]},function(e){e({})})}],["1D",function(e){e.modules.define("copyright__logo",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standards")]},function(e){e({})})}],["6e",function(e){e.modules.define("copyright__logo.standards",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-copyright__logo{display:block;width:46px;height:20px;position:relative;top:-2px;opacity:.7;background-position:0 100%;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NS45OSIgaGVpZ2h0PSIyMC4wMiIgdmlld0JveD0iMC4wMSAtMS4wMjMgNDUuOTg5IDIwLjAyMSI+PHBhdGggZmlsbD0icmVkIiBkPSJNOC43NyAxSDYuNTJDNC4zIDEgMi40NCAyLjY3IDIuNDQgNS45NWMwIDEuOTcuOSAzLjQyIDIuNTIgNC4xNGwtMy4wMiA1LjQ4Yy0uMS4xOCAwIC4zMi4xNi4zMmgxLjRjLjEyIDAgLjItLjA0LjI0LS4xNGwyLjc0LTUuMzloLjk5djUuNGMwIC4wNS4wNi4xMy4xMy4xM2gxLjIzYy4xMiAwIC4xNi0uMDYuMTYtLjE2VjEuMmMwLS4xNC0uMDktLjItLjIyLS4yem0tMS4zIDguMWgtLjg0Yy0xLjMgMC0yLjU2LS45NS0yLjU2LTMuMzQgMC0yLjQ4IDEuMTgtMy41IDIuMzktMy41aDFWOS4xeiIvPjxwYXRoIGQ9Ik0xNi4xOCA1LjkzaC0xLjIyYy0uMSAwLS4xNi4wOC0uMTYuMTR2My44aC0yLjI3di0zLjhjMC0uMS0uMDQtLjE0LS4xNC0uMTRoLTEuMjJjLS4xIDAtLjE2LjA2LS4xNi4xNHY5LjY2YzAgLjEuMDQuMTYuMTQuMTZoMS4yNGMuMDggMCAuMTQtLjA2LjE0LS4xNnYtNC42aDIuMjd2NC42YzAgLjEuMDYuMTYuMTYuMTZoMS4yMmMuMSAwIC4xNC0uMDguMTQtLjE2VjYuMDdhLjEzLjEzIDAgMCAwLS4xNC0uMTR6bTI3LjkyIDkuMzNsLS4xNi0uNjgtLjEtLjA4Yy0uMSAwLS42My4yMi0xLjQuMjItMS41IDAtMi4yMi0xLjQ1LTIuMjItMy43NSAwLTIuMDMuNi00LjA0IDEuNjMtNC4wNC4yOCAwIC42Mi4wOCAxLjE1LjU4LjA2LjA2LjEuMDguMTUuMDguMDYgMCAuMTItLjA0LjE4LS4xNGwuNTMtLjg4LjA3LS4xOGMwLS4wOC0uMDgtLjE0LS4yLS4yYTMuNzkgMy43OSAwIDAgMC0xLjg0LS41Yy0xLjg1IDAtMy4zIDIuMjMtMy4zIDUuNzEgMCAzIDEuMzkgNC43MyAzLjM2IDQuNzMuODMgMCAxLjcyLS40IDIuMDctLjY1LjA4LS4wNi4xLS4xNC4wOC0uMjJ6bS04LjU3LTQuODNsMi4zNi00LjM2Yy4wNS0uMDYuMDItLjE0LS4wNS0uMTRoLTEuMTdjLS4zMyAwLS40NS4xMi0uNTcuMzhsLTEuNzcgMy43MmMtLjEuMjItLjIuMzYtLjMuNDJWNi4wN2MwLS4wOC0uMDQtLjE0LS4xMi0uMTRoLTEuMjhjLS4wNiAwLS4xMi4wNi0uMTIuMTR2OS42OGMwIC4wNi4wNC4xNC4xMi4xNGgxLjI4Yy4wOCAwIC4xMi0uMDYuMTItLjE0di00Ljk5Yy4wNi4wNC4xLjEuMTQuMThsMi4yNSA0LjY1Yy4xMS4yNC4zLjMuNTUuM2gxLjI2Yy4wOCAwIC4xLS4wOC4wNi0uMTRsLTIuNzYtNS4zM3ptLTExLjMgNC4yMWgtLjI0Yy0uMyAwLS4zNy0uMTItLjM3LS4zNnYtOC4yYzAtLjEtLjA0LS4xNS0uMTItLjE1aC0zLjk0Yy0uMSAwLS4xNi4wNi0uMTYuMTR2LjcyYzAgMi40LS4xNCA1LjUtMS40IDcuODVoLS40NGMtLjExIDAtLjE1LjA2LS4xNS4xNnYyLjljMCAuMS4wNy4xNC4xMy4xNGguOTVjLjIyIDAgLjMtLjE2LjMtLjNWMTUuOUgyM3YxLjgxYzAgLjA4LjA3LjE0LjE0LjE0aDFjLjEzIDAgLjI1LS4xLjI1LS4zVjE0LjhjMC0uMS0uMDYtLjE2LS4xNi0uMTZ6bS0yLjEzIDBoLTIuODZjMS0xLjczIDEuNC0zLjY4IDEuNTQtNi4wNi4wNC0uNTIuMDYtMS4wNS4wNi0xLjRoMS4yNnY3LjQ2em02LjE1LTguOTVjLTIuMTMgMC0zLjA4IDIuNy0zLjA4IDUuNjUgMCAzIDEuMzUgNC43OSAzLjMyIDQuNzkuOTYgMCAxLjgxLS4zOCAyLjI0LS42Ni4wOC0uMDQuMS0uMS4wOC0uMTdsLS4xNS0uNjhjLS4wMy0uMDgtLjA2LS4xMi0uMTYtLjEyLS4wOCAwLS42NS4yMi0xLjQ2LjIyLTEuNTIgMC0yLjIzLTEuMzMtMi4yMy0zLjA4di0uNDdzLjc3LjA5IDEuMjMuMDloMi44N3YtLjg0YzAtMy4wOC0xLjA4LTQuNzMtMi42Ni00Ljczem0tLjIxIDQuMzJjLS40NiAwLTEuMTcuMDgtMS4xNy4wOHMwLS4zLjA0LS42MmMuMTgtMS42OS42LTIuNTQgMS4yOC0yLjU0LjY0IDAgMS4wMy44NyAxLjEzIDIuNC4wMi4zMi4wMi42OC4wMi42OGgtMS4zeiIvPjwvc3ZnPg==)}.ymaps-2-1-42-copyright_color_white .ymaps-2-1-42-copyright__logo{opacity:.95;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NS45OSIgaGVpZ2h0PSIyMC4wMiIgdmlld0JveD0iMC4wMSAtMS4wMjMgNDUuOTg5IDIwLjAyMSI+PHBhdGggZD0iTTguNzcgMUg2LjUyQzQuMyAxIDIuNDMgMi42NyAyLjQzIDUuOTVjMCAxLjk3LjkxIDMuNDIgMi41MyA0LjE0bC0zLjAyIDUuNDhjLS4xLjE4IDAgLjMyLjE2LjMyaDEuNGMuMTIgMCAuMi0uMDQuMjQtLjE0bDIuNzQtNS4zOWguOTl2NS40YzAgLjA1LjA1LjEzLjEzLjEzaDEuMjNjLjEyIDAgLjE2LS4wNi4xNi0uMTZWMS4yYzAtLjE0LS4wOS0uMi0uMjItLjJ6bS0xLjMgOC4xaC0uODRjLTEuMyAwLTIuNTYtLjk1LTIuNTYtMy4zNCAwLTIuNDggMS4xOC0zLjUgMi4zOS0zLjVoMVY5LjF6bTguNzEtMy4xN2gtMS4yMmMtLjEgMC0uMTYuMDgtLjE2LjE0djMuOGgtMi4yN3YtMy44YzAtLjEtLjA0LS4xNC0uMTQtLjE0aC0xLjIyYy0uMSAwLS4xNi4wNi0uMTYuMTR2OS42NmMwIC4xLjA0LjE2LjE0LjE2aDEuMjRjLjA4IDAgLjE0LS4wNi4xNC0uMTZ2LTQuNmgyLjI3djQuNmMwIC4xLjA1LjE2LjE1LjE2aDEuMjNjLjEgMCAuMTMtLjA4LjEzLS4xNlY2LjA3YS4xMy4xMyAwIDAgMC0uMTMtLjE0em0yNy45MiA5LjMzbC0uMTYtLjY4LS4xLS4wOGMtLjEgMC0uNjMuMjItMS40LjIyLTEuNSAwLTIuMjItMS40NS0yLjIyLTMuNzUgMC0yLjAzLjYtNC4wNCAxLjYzLTQuMDQuMjggMCAuNjIuMDggMS4xNS41OC4wNi4wNi4xLjA4LjE1LjA4cy4xMi0uMDQuMTgtLjE0bC41My0uODguMDctLjE4YzAtLjA4LS4wOC0uMTQtLjItLjJhMy43OSAzLjc5IDAgMCAwLTEuODQtLjVjLTEuODUgMC0zLjMgMi4yMy0zLjMgNS43MSAwIDMgMS4zOSA0LjczIDMuMzYgNC43My44MyAwIDEuNzItLjQgMi4wNy0uNjUuMDgtLjA2LjEtLjE0LjA4LS4yMnptLTguNTctNC44M2wyLjM2LTQuMzZjLjA1LS4wNi4wMi0uMTQtLjA1LS4xNGgtMS4xN2MtLjMzIDAtLjQ1LjEyLS41Ny4zOGwtMS43NyAzLjcyYy0uMS4yMi0uMi4zNi0uMy40MlY2LjA3YzAtLjA4LS4wNC0uMTQtLjEyLS4xNGgtMS4yOGMtLjA2IDAtLjEyLjA2LS4xMi4xNHY5LjY4YzAgLjA2LjA0LjE0LjEyLjE0aDEuMjhjLjA4IDAgLjEyLS4wNi4xMi0uMTR2LTQuOTljLjA2LjA0LjEuMS4xNC4xOGwyLjI1IDQuNjVjLjEyLjI0LjMuMy41NS4zaDEuMjZjLjA4IDAgLjEtLjA4LjA2LS4xNGwtMi43Ni01LjMzem0tMTEuMyA0LjIxaC0uMjRjLS4zIDAtLjM4LS4xMi0uMzgtLjM2di04LjJjMC0uMS0uMDMtLjE1LS4xMS0uMTVoLTMuOTVjLS4xIDAtLjE2LjA2LS4xNi4xNHYuNzJjMCAyLjQtLjEzIDUuNS0xLjQgNy44NWgtLjQzYy0uMTIgMC0uMTYuMDYtLjE2LjE2djIuOWMwIC4xLjA4LjE0LjE0LjE0aC45NWMuMjEgMCAuMy0uMTYuMy0uM1YxNS45SDIzdjEuODFjMCAuMDguMDYuMTQuMTQuMTRoMWMuMTMgMCAuMjUtLjEuMjUtLjNWMTQuOGMwLS4xLS4wNi0uMTYtLjE2LS4xNnptLTIuMTMgMGgtMi44NmMxLTEuNzMgMS40LTMuNjggMS41NC02LjA2LjA0LS41Mi4wNi0xLjA1LjA2LTEuNGgxLjI2djcuNDZ6bTYuMTUtOC45NWMtMi4xMyAwLTMuMDggMi43LTMuMDggNS42NSAwIDMgMS4zNCA0Ljc5IDMuMzIgNC43OS45NiAwIDEuOC0uMzggMi4yNC0uNjYuMDgtLjA0LjEtLjEuMDgtLjE3bC0uMTYtLjY4Yy0uMDItLjA4LS4wNi0uMTItLjE1LS4xMi0uMDggMC0uNjUuMjItMS40Ni4yMi0xLjUyIDAtMi4yMy0xLjMzLTIuMjMtMy4wOHYtLjQ3cy43Ny4wOSAxLjIyLjA5aDIuODh2LS44NGMwLTMuMDgtMS4wOC00LjczLTIuNjYtNC43M3ptLS4yMSA0LjMyYy0uNDYgMC0xLjE3LjA4LTEuMTcuMDhzMC0uMy4wNC0uNjJjLjE4LTEuNjkuNi0yLjU0IDEuMjgtMi41NC42NCAwIDEuMDMuODcgMS4xMyAyLjQuMDIuMzIuMDIuNjguMDIuNjhoLTEuM3oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ymaps-2-1-42-copyright .ymaps-2-1-42-copyright__logo:hover{opacity:1}.ymaps-2-1-42-copyright__logo_lang_en{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NS45OSIgaGVpZ2h0PSIyMC4wMiIgdmlld0JveD0iMC4wMSAtMS4wMjMgNDUuOTg5IDIwLjAyMSI+PHBhdGggZD0iTTEyLjYzIDUuNzhjLS42MSAwLTEuNTMuMjMtMi4xMy41LS4xNy4wNy0uMjYuMTUtLjE1LjRsLjQzLjg3Yy4wMy4xLjEuMTMuMTUuMTNsLjE4LS4wNmMuNjEtLjQgMS4wNC0uNiAxLjQtLjYuNDYgMCAuNzYuMy45NC43NS4yLjQ0LjI2IDEuMDUuMjYgMS43M3YuMmEzLjQzIDMuNDMgMCAwIDAtMS4zOC0uMzZjLTEuNzUgMC0yLjcgMS42OC0yLjcgMy40NyAwIDEuOTYgMS4xMiAzLjM2IDIuNDQgMy4zNi43NSAwIDEuNDItLjQzIDEuODctLjk3bC4yNS42Yy4wNC4xMS4xLjEzLjIuMTNoLjcxYy4wNiAwIC4xMy0uMDQuMTMtLjE1VjEwLjJjMC0xLjM4LS4xLTIuNDMtLjQ1LTMuMTNhMi4yOSAyLjI5IDAgMCAwLTIuMTUtMS4yOXptMS4wOCA4LjU5Yy0uMzcuMzYtLjc3LjUzLTEuMTUuNTMtMS4wNiAwLTEuMy0xLjMtMS4zLTIuMTkgMC0xLjA1LjQtMi4xMyAxLjItMi4xMy40IDAgLjg2LjEgMS4yNS40M3YzLjM2em02LjgyLTguNDZjLS45NyAwLTEuOTYuNzItMS45Ni43MnYtLjQ3YzAtLjA4LS4wNy0uMTUtLjEzLS4xNWgtMS4yNWEuMTUuMTUgMCAwIDAtLjE0LjE1djkuNjJjMCAuMS4wMi4xNS4xNC4xNWgxLjI1Yy4wNiAwIC4xMy0uMDYuMTMtLjE1VjcuNTNzLjU3LS4zNSAxLjI5LS4zNWMuNjUgMCAxLjE3LjMzIDEuMTcgMXY3LjZjMCAuMS4wNy4xNS4xNy4xNWgxLjJjLjE0IDAgLjE1LS4wNi4xNS0uMTVWNy43NWMwLTEuMi0uNzMtMS44NC0yLjAyLTEuODR6bTkuNS00LjgzSDI4LjhjLS4xIDAtLjE0LjA3LS4xNC4xNHY0Ljg2Yy0uNS0uMi0uOTMtLjMtMS4yNS0uMy0yLjAyIDAtMy4zNiAxLjktMy4zNiA1LjU4IDAgMy4xNCAxLjMgNC44MyAzLjA2IDQuODMuNzIgMCAxLjMzLS40MiAxLjc1LS44bC4yNy40NGMuMDUuMDkuMDcuMS4xNy4xaC43NWMuMDggMCAuMTItLjA2LjEyLS4xNVYxLjIyYzAtLjEtLjA0LS4xNC0uMTItLjE0em0tMS4zOSAxMy41Yy0uMzIuMTctLjcuMzItMS4xLjMyLTEuMzMgMC0xLjg4LTEuNTctMS44OC0zLjg2IDAtMi4wMi41Ny00LjAxIDEuOC00LjAxLjM4IDAgLjc4LjE1IDEuMTguNDJ2Ny4xM3ptNi4wOC04LjhjLTIuMTIgMC0zLjA4IDIuNzEtMy4wOCA1LjYzIDAgMi45OCAxLjMzIDQuNzYgMy4zMiA0Ljc2Ljk1IDAgMS44LS4zNyAyLjI2LS42OC4wNi0uMDQuMDgtLjA2LjA2LS4xNWwtLjE1LS42OGMtLjAyLS4wOC0uMDUtLjEzLS4xNC0uMTMtLjEgMC0uNjguMjQtMS40OC4yNC0xLjUyIDAtMi4yMi0xLjM0LTIuMjItMy4wOXYtLjQ3cy43Ni4xIDEuMi4xaDIuOXYtLjgyYzAtMy4wOS0xLjEtNC43MS0yLjY3LTQuNzF6bS0uMjMgNC4yOWMtLjQ0IDAtMS4xNi4xLTEuMTYuMXMwLS4zLjA0LS42M2MuMjItMS42OS41OC0yLjUzIDEuMy0yLjUzLjYyIDAgMS4wMi44NyAxLjExIDIuMzkuMDIuMzIuMDIuNjcuMDIuNjdoLTEuM3ptOS4zNi00LjA2aC0xLjA3Yy0uMTMgMC0uMjEuMDctLjI0LjE3LS4wNS4xNS0uNTMgMS40LS43IDEuODlsLS41MiAxLjRoLS4wNGwtLjQyLTEuMTJjLS4xLS4zMy0uNzEtMS45Mi0uNzktMi4xMi0uMDMtLjEtLjEyLS4yMi0uMjUtLjIyaC0xLjJjLS4xNCAwLS4yLjE1LS4xNS4yNGwxLjkyIDQuNDQtMi4wNyA0Ljk3Yy0uMDcuMTQuMDIuMjcuMTUuMjdoMS4wM2MuMiAwIC4yNS0uMDguMzItLjI1bC43LTEuOS41Mi0xLjY3aC4wNGwuNSAxLjQyLjgzIDIuMmMuMDQuMTIuMTIuMi4yNi4yaDEuMTZjLjEyIDAgLjE5LS4xMy4xMi0uMjUtLjE1LS4yOC0xLjI0LTMuMDQtMi4wNC00LjgyTDQ0IDYuMjVjLjAyLS4xMS4wMi0uMjQtLjE1LS4yNHoiLz48cGF0aCBmaWxsPSJyZWQiIGQ9Ik0xMC45NS0uMjZoLTEuM2MtLjE0IDAtLjIuMDUtLjI0LjE4bC0yLjM5IDYuN2MtLjI4Ljc1LS42IDIuMDQtLjYgMi4wNGgtLjA4cy0uNTItMS41Mi0uNjUtMi4wMUM1LjUgNi4xIDMuODEgMS40NiAzLjc3IDEuM2MtLjAyLS4xMS0uMDktLjI0LS4yNi0uMjRIMi4yYy0uMiAwLS4yMi4xNy0uMTUuMy4yNS42NyAyLjU3IDYuNTggMy41IDguOTV2NS40M2MwIC4xLjA1LjE1LjE2LjE1aDEuMjRjLjA2IDAgLjEzLS4wNi4xMy0uMTV2LTUuMzljLjgyLTIuMyA0LTEwLjMyIDQuMDMtMTAuMzkuMDUtLjEyLjAyLS4yMi0uMTUtLjIyeiIvPjwvc3ZnPg==)}.ymaps-2-1-42-copyright_color_white .ymaps-2-1-42-copyright__logo_lang_en{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NS45OSIgaGVpZ2h0PSIyMC4wMiIgdmlld0JveD0iMC4wMSAtMS4wMjMgNDUuOTg5IDIwLjAyMSI+PHBhdGggZD0iTTEyLjYzIDUuNzhjLS42MSAwLTEuNTMuMjMtMi4xMy41LS4xNy4wNy0uMjYuMTUtLjE1LjRsLjQzLjg3Yy4wMy4xLjEuMTMuMTUuMTNsLjE4LS4wNmMuNjEtLjQgMS4wNC0uNiAxLjQtLjYuNDYgMCAuNzYuMy45NC43NS4yLjQ0LjI2IDEuMDUuMjYgMS43M3YuMmEzLjQzIDMuNDMgMCAwIDAtMS4zOC0uMzZjLTEuNzUgMC0yLjcgMS42OC0yLjcgMy40NyAwIDEuOTYgMS4xMiAzLjM2IDIuNDQgMy4zNi43NSAwIDEuNDItLjQzIDEuODctLjk3bC4yNS42Yy4wNC4xMS4xLjEzLjIuMTNoLjcxYy4wNiAwIC4xMy0uMDQuMTMtLjE1VjEwLjJjMC0xLjM4LS4xLTIuNDMtLjQ1LTMuMTNhMi4yOSAyLjI5IDAgMCAwLTIuMTUtMS4yOXptMS4wOCA4LjU5Yy0uMzcuMzYtLjc3LjUzLTEuMTUuNTMtMS4wNiAwLTEuMy0xLjMtMS4zLTIuMTkgMC0xLjA1LjQtMi4xMyAxLjItMi4xMy40IDAgLjg2LjEgMS4yNS40M3YzLjM2em02LjgyLTguNDZjLS45NyAwLTEuOTYuNzItMS45Ni43MnYtLjQ3YzAtLjA4LS4wNy0uMTUtLjEzLS4xNWgtMS4yNWEuMTUuMTUgMCAwIDAtLjE0LjE1djkuNjJjMCAuMS4wMi4xNS4xNC4xNWgxLjI1Yy4wNiAwIC4xMy0uMDYuMTMtLjE1VjcuNTNzLjU3LS4zNSAxLjI5LS4zNWMuNjUgMCAxLjE3LjMzIDEuMTcgMXY3LjZjMCAuMS4wNy4xNS4xNy4xNWgxLjJjLjE0IDAgLjE1LS4wNi4xNS0uMTVWNy43NWMwLTEuMi0uNzMtMS44NC0yLjAyLTEuODR6bTkuNS00LjgzSDI4LjhjLS4xIDAtLjE0LjA3LS4xNC4xNHY0Ljg2Yy0uNS0uMi0uOTMtLjMtMS4yNS0uMy0yLjAyIDAtMy4zNiAxLjktMy4zNiA1LjU4IDAgMy4xNCAxLjMgNC44MyAzLjA2IDQuODMuNzIgMCAxLjMzLS40MiAxLjc1LS44bC4yNy40NGMuMDUuMDkuMDcuMS4xNy4xaC43NWMuMDggMCAuMTItLjA2LjEyLS4xNVYxLjIyYzAtLjEtLjA0LS4xNC0uMTItLjE0em0tMS4zOSAxMy41Yy0uMzIuMTctLjcuMzItMS4xLjMyLTEuMzMgMC0xLjg4LTEuNTctMS44OC0zLjg2IDAtMi4wMi41Ny00LjAxIDEuOC00LjAxLjM4IDAgLjc4LjE1IDEuMTguNDJ2Ny4xM3ptNi4wOC04LjhjLTIuMTIgMC0zLjA4IDIuNzEtMy4wOCA1LjYzIDAgMi45OCAxLjMzIDQuNzYgMy4zMiA0Ljc2Ljk1IDAgMS44LS4zNyAyLjI2LS42OC4wNi0uMDQuMDgtLjA2LjA2LS4xNWwtLjE1LS42OGMtLjAyLS4wOC0uMDUtLjEzLS4xNC0uMTMtLjEgMC0uNjguMjQtMS40OC4yNC0xLjUyIDAtMi4yMi0xLjM0LTIuMjItMy4wOXYtLjQ3cy43Ni4xIDEuMi4xaDIuOXYtLjgyYzAtMy4wOS0xLjEtNC43MS0yLjY3LTQuNzF6bS0uMjMgNC4yOWMtLjQ0IDAtMS4xNi4xLTEuMTYuMXMwLS4zLjA0LS42M2MuMjItMS42OS41OC0yLjUzIDEuMy0yLjUzLjYyIDAgMS4wMi44NyAxLjExIDIuMzkuMDIuMzIuMDIuNjcuMDIuNjdoLTEuM3ptOS4zNi00LjA2aC0xLjA3Yy0uMTMgMC0uMjEuMDctLjI0LjE3LS4wNS4xNS0uNTMgMS40LS43IDEuODlsLS41MiAxLjRoLS4wNGwtLjQyLTEuMTJjLS4xLS4zMy0uNzEtMS45Mi0uNzktMi4xMi0uMDMtLjEtLjEyLS4yMi0uMjUtLjIyaC0xLjJjLS4xNCAwLS4yLjE1LS4xNS4yNGwxLjkyIDQuNDQtMi4wNyA0Ljk3Yy0uMDcuMTQuMDIuMjcuMTUuMjdoMS4wM2MuMiAwIC4yNS0uMDguMzItLjI1bC43LTEuOS41Mi0xLjY3aC4wNGwuNSAxLjQyLjgzIDIuMmMuMDQuMTIuMTIuMi4yNi4yaDEuMTZjLjEyIDAgLjE5LS4xMy4xMi0uMjUtLjE1LS4yOC0xLjI0LTMuMDQtMi4wNC00LjgyTDQ0IDYuMjVjLjAyLS4xMS4wMi0uMjQtLjE1LS4yNHpNMTAuOTUtLjI2aC0xLjNjLS4xNCAwLS4yLjA1LS4yNC4xOGwtMi4zOSA2LjdjLS4yOC43NS0uNiAyLjA0LS42IDIuMDRoLS4wOHMtLjUyLTEuNTItLjY1LTIuMDFDNS41IDYuMSAzLjgxIDEuNDYgMy43NyAxLjNjLS4wMi0uMTEtLjA5LS4yNC0uMjYtLjI0SDIuMmMtLjIgMC0uMjIuMTctLjE1LjMuMjUuNjcgMi41NyA2LjU4IDMuNSA4Ljk1djUuNDNjMCAuMS4wNS4xNS4xNi4xNWgxLjI0Yy4wNiAwIC4xMy0uMDYuMTMtLjE1di01LjM5Yy44Mi0yLjMgNC0xMC4zMiA0LjAzLTEwLjM5LjA1LS4xMi4wMi0uMjItLjE1LS4yMnoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}",e)})}],["2(",function(e){e.modules.define("copyright.layout.html",["copyright","copyright__logo"],function(e){e([0,'<ymaps class="ymaps-2-1-42-copyright"><ymaps class="ymaps-2-1-42-copyright__fog">…</ymaps><ymaps class="ymaps-2-1-42-copyright__wrap"><ymaps class="ymaps-2-1-42-copyright__layout"><ymaps class="ymaps-2-1-42-copyright__content-cell"><ymaps class="ymaps-2-1-42-copyright__content"><ymaps class="ymaps-2-1-42-copyright__text"></ymaps><ymaps class="ymaps-2-1-42-copyright__agreement">&nbsp;<a class="ymaps-2-1-42-copyright__link" target="_blank" href="',2001,["localization.Copyrights.agreementLink",[]],0,'">',2003,'data.get("state.size") == "large"',2001,["localization.Copyrights.agreement",[]],2004,null,2001,["localization.Copyrights.agreementCompact",[]],2005,null,0,'</a></ymaps></ymaps></ymaps><ymaps class="ymaps-2-1-42-copyright__logo-cell"><a class="ymaps-2-1-42-copyright__logo" href="" target="_blank"></a></ymaps></ymaps></ymaps></ymaps>'])})}],["5z",function(e){e.modules.define("copyright.standards",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-copyright{position:relative;z-index:1;display:block;height:20px;top:-20px;float:right}.ymaps-2-1-42-copyright_float_left{float:left}.ymaps-2-1-42-copyright_fog_yes{float:none}.ymaps-2-1-42-copyright__wrap{display:block;overflow:hidden}.ymaps-2-1-42-copyright__layout{position:relative;z-index:1;top:1px;display:table;float:right}.ymaps-2-1-42-copyright__content-cell,.ymaps-2-1-42-copyright__logo-cell{display:table-cell;vertical-align:top}.ymaps-2-1-42-copyright__logo-cell{padding-left:4px}.ymaps-2-1-42-copyright__content-cell{height:20px}.ymaps-2-1-42-copyright__content{display:inline-block;float:right;padding:0 4px 1px;white-space:nowrap;border-radius:3px;background-color:rgba(255,255,255,.75);font:11px/14px Verdana,Arial,sans-serif}.ymaps-2-1-42-copyright_fog_yes .ymaps-2-1-42-copyright__content{background-color:transparent}.ymaps-2-1-42-copyright_fog_yes .ymaps-2-1-42-copyright__wrap{margin-left:17px}.ymaps-2-1-42-copyright_fog_yes:after{position:absolute;z-index:-1;top:1px;right:50px;left:17px;height:15px;content:'';border-radius:0 3px 3px 0;background-color:rgba(255,255,255,.75)}.ymaps-2-1-42-copyright_logo_no.ymaps-2-1-42-copyright_fog_yes:after{right:0}.ymaps-2-1-42-copyright_logo_no .ymaps-2-1-42-copyright__logo-cell,.ymaps-2-1-42-copyright_providers_no .ymaps-2-1-42-copyright__text,.ymaps-2-1-42-copyright_ua_no .ymaps-2-1-42-copyright__agreement,.ymaps-2-1-42-copyright_ua_no.ymaps-2-1-42-copyright_providers_no .ymaps-2-1-42-copyright__content-cell{display:none}.ymaps-2-1-42-copyright__fog{position:absolute;z-index:2;top:1px;left:0;display:none;width:12px;height:15px;padding-left:5px;border-radius:3px 0 0 3px;background:rgba(255,255,255,.75);font:11px/14px Verdana,Arial,sans-serif}.ymaps-2-1-42-copyright_fog_yes .ymaps-2-1-42-copyright__fog{display:block}.ymaps-2-1-42-copyright__extend{margin-left:.4em}.ymaps-2-1-42-copyright__link{text-decoration:underline!important;color:#333!important}.ymaps-2-1-42-copyright__link:hover{color:#c00!important}",e)})}],["3w",function(e){e.modules.define("data.Adapter",["util.defineClass","data.BaseManager","Event"],function(e,t,n,i){function o(e,t,n,i){o.superclass.constructor.call(this),this._object=e,this._events=t,this._fields=n||{},this._all=i||{},this._isDirect=s(this._fields),e.events.add(t,this.fireChangeEvent,this)}function s(e){if("function"==typeof Object.keys){var t=Object.keys(e);return 0==t.length&&"*"===t[0]}for(var n in e)if("*"!=n&&e.hasOwnProperty(n))return!1;return!0}t(o,n,{getObject:function(){return this._object},singleSet:function(e,t){var n=this._parsePath(e);n&&this._fields[n.field].set(this._object,t,n.postfix)},singleUnset:function(e){var t=this._parsePath(e);t&&this._fields[t.field].unset(this._object,t.postfix)},unsetAll:function(){return"function"==typeof this._all.unset&&this._all.unset(this._object),this},get:function(e,t){var n=this._parsePath(e);if(n){var i=this._fields[n.field].get(this._object,n.postfix);return"undefined"!=typeof i?i:t}return t},getAll:function(){if("function"==typeof this._all.get)return this._all.get(this._object)},destroy:function(){this._object.events.remove(this._events,this.fireChangeEvent,this)},_changeCallback:function(){this.events.fire("change",new i({type:"change",target:this}))},_parsePath:function(e){if(this._fields.hasOwnProperty(e))return{field:e};if(this._isDirect)return{field:"*",postfix:e};var t=e.split("."),n=[];for(t.push("*");!this._fields.hasOwnProperty(e=t.join("."));){if(t.length-=1,!t.length)return null;n.push(t.pop()),t.push("*")}return n.length>1&&n.reverse(),{field:e,postfix:n.join(".")}}}),e(o)})}],["3A",function(e){e.modules.define("data.Aggregator",["util.defineClass","data.Manager"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e),this._children={};for(var t in e)e.hasOwnProperty(t)&&this._testDataManager(e[t])&&this.addChild(t,e[t])}t(i,n,{singleSet:function(e,t){var n=this._parsePath(e);if(n){if(n.postfix)return void n.child.set(n.postfix,t);this.removeChild(e,n.child)}i.superclass.singleSet.call(this,e,t),this._testDataManager(t)&&this.addChild(e,t)},singleUnset:function(e){var t=this._parsePath(e);if(t){if(t.postfix)return void t.child.unset(t.postfix);this.removeChild(e,t.child)}i.superclass.singleUnset.call(this,e)},unsetAll:function(){return this._clearAll(),i.superclass.unsetAll.call(this),this},get:function(e,t){var n=this._parsePath(e);return n?n.postfix?n.child.get(n.postfix,t):n.child:i.superclass.get.call(this,e,t)},destroy:function(){this._clearAll(),i.superclass.destroy.call(this)},addChild:function(e,t){this._children[e]=t,t.events.add("change",this.fireChangeEvent,this)},removeChild:function(e,t){t.events.remove("change",this.fireChangeEvent,this),delete this._children[e]},_testDataManager:function(e){return e&&"function"==typeof e.get&&e.events&&"function"==typeof e.events.add},_parsePath:function(e){var t,n,i=e.indexOf(".");if(i!=-1?(t=e.slice(0,i),n=e.slice(i+1)):t=e,this._children.hasOwnProperty(t))return{child:this._children[t],postfix:n}},_clearAll:function(){for(var e in this._children)this._children.hasOwnProperty(e)&&this._children[e].events.remove("change",this.fireChangeEvent,this);this._children={}}}),e(i)})}],["9J",function(e){e.modules.define("data.BaseManager",["util.defineClass","util.array","event.manager.Base","Event","component.EventFreezer"],function(e,t,n,i,o,s){function r(){this.events=new i,this._internalFreezer=new s(a,this),this._freezer=new s(l,this)}function a(){this._freezer.fire()}function l(){this.events.fire("change",new o({type:"change",target:this}))}t(r,{set:function(e,t){if("string"==typeof e||e instanceof String)this.singleSet(e,t);else{this._internalFreezer.freeze();for(var n in e)e.hasOwnProperty(n)&&this.singleSet(n,e[n]);this._internalFreezer.unfreeze()}return this},singleSet:function(e,t){},unset:function(e){if(n.isArray(e)){this._internalFreezer.freeze();for(var t=0,i=e.length;t<i;t++)this.singleUnset(e[t]);this._internalFreezer.unfreeze()}else this.singleUnset(e);return this},singleUnset:function(e){},freeze:function(){return this._freezer.freeze(),this},unfreeze:function(){return this._freezer.unfreeze(),this},isFrozen:function(){return this._freezer.isFrozen()},fireChangeEvent:function(){this._internalFreezer.fire()},destroy:function(){}}),e(r)})}],["3D",function(e){e.modules.define("data.Manager",["util.defineClass","util.extend","data.BaseManager","util.array","util.safeAccess"],function(t,n,i,o,s,r){function a(e){a.superclass.constructor.call(this),this._data=e||{},this._preventInputChange=!!e}n(a,o,{singleSet:function(t,n){var i=t.split("."),o=i.pop(),s=r(this._data,i);if("undefined"!=typeof s)this._preventInputChange&&(s=this._checkInputChange(s)),s[o]=n,this.fireChangeEvent();else if(e.env.debug)throw new Error("data.Manager: некорректный путь к данным: "+t)},_checkInputChange:function(e){return e==this._data&&(e=this._data=i({},this._data),this._preventInputChange=!1),e},singleUnset:function(t){var n=t.split("."),i=n.pop(),o=r(this._data,n);if("undefined"!=typeof o)this._preventInputChange&&(o=this._checkInputChange(o)),delete o[i],this.fireChangeEvent();else if(e.env.debug)throw new Error("data.Manager: некорректный путь к данным: "+t)},unsetAll:function(){return this._data={},this.fireChangeEvent(),this},setAll:function(e){return this._data=e,this._preventInputChange=!0,this.fireChangeEvent(),this},get:function(e,t){var n=r(this._data,e);return"undefined"!=typeof n?n:t},getAll:function(){return this._data}}),t(a)})}],["3N",function(e){e.modules.define("data.Sync",["util.defineClass"],function(e,t){function n(e){this._managers=e;for(var t=0,n=e.length;t<n;t++)e[t].events.add("change",this._onChange,this);this._onSync=!1,this._sync(e[0])}t(n,{destroy:function(){for(var e=0,t=this._managers.length;e<t;e++)this._managers[e].events.remove("change",this._onChange,this)},_sync:function(e){var t=e.getAll();this._onSync=!0;for(var n=0,i=this._managers.length;n<i;n++){var o=this._managers[n];o!=e&&o.setAll(t)}this._onSync=!1},_onChange:function(e){this._onSync||this._sync(e.get("target"))}}),e(n)})}],["3P",function(e){e.modules.define("DomEvent",["util.defineClass","domEvent.Base","domEvent.overrideStorage","component.event.Cacher"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t),this._cache={type:t||e.type},this._cacher=null}t(s,n,{get:function(e){return this._cacher||(this._cacher=new o(this,this._cache,i)),this._cacher.get(e)},clone:function(e){return new s(e,this._cache.type)}}),e(s)})}],["9Z",function(e){e.modules.define("domEvent.Base",["util.defineClass","Event"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e),this._dataKey="domEventData"+t}t(i,n,{callMethod:function(e){return this.get(e).apply(this.originalEvent,Array.prototype.slice.call(arguments,1))},stopImmediatePropagation:function(){var e=this._getPropagatedData();e.immediatePropagationStopped=!0,e.propagationStopped=!0},isImmediatePropagationStopped:function(){return this._getPropagatedData().immediatePropagationStopped},stopPropagation:function(){this._getPropagatedData().propagationStopped=!0},isPropagationStopped:function(){return this._getPropagatedData().propagationStopped},preventDefault:function(){this._getPropagatedData().defaultPrevented=!0},isDefaultPrevented:function(){return this._getPropagatedData().defaultPrevented},allowMapEvent:function(){this._getPropagatedData().mapEventAllowed=!0},disallowMapEvent:function(){this._getPropagatedData().mapEventAllowed=!1},isMapEventAllowed:function(){return this._getPropagatedData().mapEventAllowed},_getPropagatedData:function(){var e=this.get("propagatedData");return e[this._dataKey]||(e[this._dataKey]={})}}),e(i)})}],["3T",function(e){e.modules.define("domEvent.manager",["util.defineClass","util.id","util.data","DomEvent","event.manager.Base","event.Group","domEvent.managerOverrideStorage","util.dom.event"],function(t,n,i,o,s,r,a,l,c){function u(e){return function(t){var n=t.type,i=c.getIdealName(t.type);o.get(e,f).fire(n,new s(t,n)),n==i||l.get(i)||o.get(e,f).fire(i,new s(t,i))}}function h(e){var t=e.type,n=c.getIdealName(e.type);o.get(this,m).fire(t,new s(e,t)),t==n||l.get(n)||o.get(this,m).fire(n,new s(e,n))}function d(e){var t=e.type,n=c.getIdealName(e.type);o.get(this,f).fire(t,new s(e,t)),t==n||l.get(n)||o.get(this,f).fire(n,new s(e,n))}function g(e,t,n){this.htmlElement=e,this.domEventManager=t,this.capture=n}var p=e.env.browser.oldIE,m="eventManagerCapturingPhase",f="eventManagerBubblingPhase",_="ieHandler";t({add:function(t,n,i,o,s){if(e.env.debug&&(!t||!n))throw new Error("domEvent.Manager: Не был передан обязательный аргумент!.");var a=this._getEventManager(t,s);return a||(a=new r({controllers:[this],htmlElement:t,capture:!!s}),this._setEventManager(t,a,s)),a.add(n,i,o),this},remove:function(t,n,i,o,s){if(e.env.debug&&(!t||!n))throw new Error("domEvent.Manager: Не был передан обязательный аргумент!.");var r=this._getEventManager(t,s);return r&&r.remove(n,i,o),this},fire:function(e,t,n){var i=this._getEventManager(e,!0),o=this._getEventManager(e,!1);return i&&i.fire(t,n),o&&o.fire(t,n),this},onStartListening:function(e,t){var n=l.get(t);if(n)n.start(e);else{t=c.getActualName(t);var i=e.params,s=i.htmlElement,r=!!i.capture;p?s.attachEvent("on"+t,o.get(s,_)):s.addEventListener(t,r?h:d,r)}},onStopListening:function(e,t){var n=l.get(t),i=e.params,s=i.htmlElement,r=!!i.capture;n?n.stop(e):(t=c.getActualName(t),p?s.detachEvent("on"+t,o.get(s,_)):s.removeEventListener(t,r?h:d,r)),e.typesCount||this._unsetEventManager(s,r)},group:function(e,t){return new a(new g(e,this,t))},_getEventManager:function(e,t){return o.get(e,t&&!p?m:f)},_setEventManager:function(e,t,n){o.add(e,n&&!p?m:f,t),p&&o.add(e,_,u(e))},_unsetEventManager:function(e,t){o.remove(e,t&&!p?m:f),p&&o.remove(e,_)}}),n(g,{add:function(e,t,n){return this.domEventManager.add(this.htmlElement,e,t,n,this.capture)},remove:function(e,t,n){return this.domEventManager.remove(this.htmlElement,e,t,n,this.capture)}})})}],[",d",function(e){e.modules.define("domEvent.managerComponent.mouseLeaveEnterDispatcher",["DomEvent","system.browser"],function(e,t,n){var i=!0;e({setEnabled:function(e){i=e},fire:function(e,o,s,r){if(i){var a,l=e.params.htmlElement;for(a=n.oldIE?"mouseenter"==o?s.fromElement:s.toElement:s.relatedTarget;a&&a!=l;)try{a=a.parentNode}catch(c){return!1}if(a!=l)return r||(r=t),e.fire(o,new r(s,o)),!0}return!1}})})}],[",h",function(e){e.modules.define("domEvent.managerOverrides.touches",["util.data","domEvent.managerOverrideStorage","domEvent.TouchMapper"],function(e,t,n,i){for(var o=function(e){n.add(e,{start:function(t){r(t,e)},stop:function(t){a(t,e)}})},s=["mouseenter","mouseleave","mousemove","mousedown","mouseup","wheel","click","dblclick","contextmenu","multitouchstart","multitouchmove","multitouchend"],r=function(e,n){var o=e.params,s=o.capture?"touchDataWithCapture":"touchData",r=o.htmlElement,a=t.get(r,s);a||(a={types:{},count:0,touchMapper:new i(e)},t.add(r,s,a)),a.types[n]||(a.count||a.touchMapper.start(),a.types[n]=!0,a.count++)},a=function(e,n){var i=e.params,o=i.capture?"touchDataWithCapture":"touchData",s=i.htmlElement,r=t.get(s,o);r&&r.types[n]&&(delete r.types[n],--r.count||(r.touchMapper.stop(),t.remove(s,o)))},l=0,c=s.length;l<c;l++)o(s[l]);e({})})}],[",f",function(e){e.modules.define("domEvent.managerOverrideStorage",["util.Storage"],function(e,t){e(new t)})}],["3W",function(e){e.modules.define("domEvent.MultiPointer",["util.defineClass","domEvent.Base","domEvent.multiPointer.overrideStorage","component.event.Cacher"],function(e,t,n,i,o){function s(e,t,n){s.superclass.constructor.call(this,e,t),this._cache={type:t||"multi"+e.type,touches:n},this._cacher=null}t(s,n,{get:function(e){return this._cacher||(this._cacher=new o(this,this._cache,i)),this._cacher.get(e)},clone:function(e){return new s(e,this._cache.type,this._cache.touches)}}),e(s)})}],[",k",function(e){e.modules.define("domEvent.multiPointer.overrideStorage",["util.Storage"],function(e,t){e(new t)})}],["30",function(e){e.modules.define("domEvent.MultiTouch",["util.defineClass","domEvent.Base","domEvent.multiTouch.overrideStorage","component.event.Cacher"],function(e,t,n,i,o){function s(e,t,n){s.superclass.constructor.call(this,e,t),this._cache={type:t||"multi"+e.type,touches:n},this._cacher=null}t(s,n,{get:function(e){return this._cacher||(this._cacher=new o(this,this._cache,i)),this._cacher.get(e)},clone:function(e){return new s(e,this._cache.type,this._cache.touches)}}),e(s)})}],["$b",function(e){e.modules.define("domEvent.multiTouch.override",["domEvent.multiTouch.overrideStorage","util.instantCache","util.id","util.array"],function(e,t,n,i,o){function s(e){return function(t){var n=t.get("touches"),i=0,s=0;return n&&n.lenght&&(o.each(n,function(t){i+=t[e]}),s+=n.length,i/=s),i}}for(var r=["pageX","pageY","screenX","screenY","clientX","clientY"],a=0,l=r.length;a<l;a++)t.add(r[a],s(r[a]));t.add("position",function(e){return[e.get("pageX"),e.get("pageY")]}),t.add("propagatedData",function(e){var t=i.get(e.originalEvent),o=n.get(t);return o||n.add(t,o={}),o}),t.add("target",function(e){return e.get("touches")[0].target}),e({})})}],[",l",function(e){e.modules.define("domEvent.multiTouch.overrideStorage",["util.Storage"],function(e,t){e(new t)})}],[",a",function(e){e.modules.define("domEvent.override.common",["domEvent.overrideStorage","util.eventId","util.instantCache"],function(t,n,i,o){function s(e,t){var n=e.originalEvent,i=0,o=0;"wheel"==n.type&&(o=-n.deltaY,i=n.deltaX),"mousewheel"==n.type&&("undefined"!=typeof n.wheelDeltaY?(o=n.wheelDeltaY,i=n.wheelDeltaX):o=n.wheelDelta),t.set("delta",o),t.set("deltaY",o),t.set("deltaX",i)}function r(e,t){return c(e,t),e.get("pageX")}function a(e,t){return c(e,t),e.get("pageY")}function l(e,t){return[e.get("pageX"),e.get("pageY")]}function c(e,t){var n=e.originalEvent,i=n.pageX,o=n.pageY;"undefined"==typeof i&&(i=n.clientX,o=n.clientY,f&&(i+=(f.scrollLeft||0)-(f.clientLeft||0),o+=(f.scrollTop||0)-(f.clientTop||0)),_&&(i+=_.scrollLeft||0,o+=_.scrollTop||0)),t.set("pageX",i),t.set("pageY",o)}function u(e,t){var n=d(e,t);return n.target}function h(e,t){var n=d(e,t);return n.relatedTarget}function d(e,t){var n=e.originalEvent,i=n.target||n.srcElement,o=n.relatedTarget||null;if(i&&3==i.nodeType&&(i=i.parentNode),!n.relatedTarget&&n.fromElement&&(o=n.fromElement==i?n.toElement:n.fromElement),"Gecko"==g.engine&&n.relatedTarget)try{-n.relatedTarget.nodeType}catch(s){o=null}return t.set("target",i),t.set("relatedTarget",o),{target:i,relatedTarget:o}}var g=e.env.browser,p=function(e,t){return s(e,t),e.get("delta")},m=function(e,t){return s(e,t),e.get("deltaX")};n.add("delta",p).add("deltaY",p).add("deltaX",m);var f=document.documentElement,_=document.body;n.add("pageX",r).add("pageY",a).add("position",l),n.add("propagatedData",function(e,t){var n=e.originalEvent,s=i.get(n),r=o.get(s);return r||o.add(s,r={}),r}),n.add("activeMouseButton",function(e){var t=e.originalEvent,n=-1;if(void 0!=t.buttons){var i=t.buttons;n=0,4&i?n=3:2&i?n=2:1&i&&(n=1),"Trident"==g.engine&&9==g.documentMode&&"mousemove"==t.type.toLocaleLowerCase()&&(n=-1)}else n=t.hasOwnProperty("which")?t.which:-1;return n}),n.add("target",u).add("relatedTarget",h),t(!0)})}],[",c",function(e){e.modules.define("domEvent.overrideStorage",["util.Storage"],function(e,t){e(new t)})}],["32",function(e){e.modules.define("domEvent.Pointer",["util.defineClass","domEvent.Base","domEvent.pointer.overrideStorage","component.event.Cacher"],function(e,t,n,i,o){function s(e,t,n){s.superclass.constructor.call(this,e,t),this._cache={type:t||e.type,mode:n,touches:[e]},this._cacher=null}t(s,n,{get:function(e){return this._cacher||(this._cacher=new o(this,this._cache,i)),this._cacher.get(e)},clone:function(e){return new s(e,this._cache.type,this._cache.mode)}}),e(s)})}],[",m",function(e){e.modules.define("domEvent.pointer.overrideStorage",["util.Storage"],function(e,t){e(new t)})}],["38",function(e){e.modules.define("domEvent.Touch",["util.defineClass","domEvent.Base","domEvent.touch.overrideStorage","component.event.Cacher"],function(e,t,n,i,o){function s(e,t,n){s.superclass.constructor.call(this,e,t),this._cache={type:t||e.type,button:0,touches:n},this._cacher=null}t(s,n,{get:function(e){return this._cacher||(this._cacher=new o(this,this._cache,i)),this._cacher.get(e)},clone:function(e){return new s(e,this._cache.type,this._cache.touches)}}),e(s)})}],["$f",function(e){
e.modules.define("domEvent.touch.override",["domEvent.touch.overrideStorage","util.instantCache","util.id"],function(e,t,n,i){function o(e){return function(t){var n=t.get("touches");return n[0][e]}}for(var s=["pageX","pageY","screenX","screenY","clientX","clientY"],r=0,a=s.length;r<a;r++)t.add(s[r],o(s[r]));t.add("position",function(e){return[e.get("pageX"),e.get("pageY")]}),t.add("propagatedData",function(e){var t=i.get(e.originalEvent),o=n.get(t);return o||n.add(t,o={}),o}),t.add("target",function(e){return e.get("touches")[0].target}),e({})})}],[",n",function(e){e.modules.define("domEvent.touch.overrideStorage",["util.Storage"],function(e,t){e(new t)})}],["3$",function(e){e.modules.define("domEvent.TouchMapper",["util.extend","util.bind","DomEvent","util.math.areEqual","domEvent.managerComponent.mouseLeaveEnterDispatcher","domEvent.Touch","domEvent.MultiTouch","map.metaOptions","util.dom.event","system.browser"],function(e,t,n,i,o,s,r,a,l,c,u){var h=20,d="iOS"!=u.osFamily,g=20,p=1200,m=["mouseenter","mouseleave","mousemove","mousedown","mouseup","wheel","click","dblclick","contextmenu"],f={activeMappers:0,activeTouchSession:!1,touchSessionEndTime:0,initTouchId:0,sessionStartPosition:null,sessionEndPosition:null},_=function(e){var t=e.touches;if(1==t.length||!f.initTouchId){var n=t[0];f.initTouchId=n.identifier,f.sessionStartPosition=[n.clientX,n.clientY]}f.activeTouchSession=!0},M=function(e){for(var t=e.touches.length,n=e.changedTouches,i=0,o=n.length;i<o;i++){var s=n[i];if(s.identifier==f.initTouchId){f.sessionEndPosition=[s.clientX,s.clientY],f.initTouchId=0;break}}0==t&&(f.touchSessionEndTime=+new Date,f.activeTouchSession=!1)},v=function(e,i){this.events=e,this._useCapture=this.events.params.capture,this.params=t({},{dblClickTimeout:l.get("dblClickTimeout",500),contextMenuTimeout:l.get("touchContextMenuTimeout",400)},i),this._state={},this._listeners=null,this._elementTouchStartHandler=n(this._onTouchStart,this),this._elementTouchMoveHandler=n(this._onTouchMove,this),this._elementTouchEndHandler=n(this._onTouchEnd,this),this._mouseEventsHandler=n(this._onMouseEvent,this)};v.prototype={start:function(){this._state={initMouseEventSent:!1,multiTouch:!1,preventClick:!1,mouseOver:!1,previousEventType:"",clickData:{}},u.isIE&&(this._state.eventsWithoutHover=0);var e=this.events.params.htmlElement;if(e.addEventListener("touchstart",this._elementTouchStartHandler,this._useCapture),e.addEventListener("touchmove",this._elementTouchMoveHandler,this._useCapture),e.addEventListener("touchend",this._elementTouchEndHandler,this._useCapture),e.addEventListener("touchcancel",this._elementTouchEndHandler,this._useCapture),d){for(var t=0,n=m.length;t<n;t++)e.addEventListener(c.getActualName(m[t]),this._mouseEventsHandler,this._useCapture);0==f.activeMappers++&&(document.addEventListener("touchstart",_,!0),document.addEventListener("touchend",M,!0),document.addEventListener("touchcancel",M,!0))}},stop:function(){var e=this.events.params.htmlElement;if(e.removeEventListener("touchstart",this._elementTouchStartHandler,this._useCapture),e.removeEventListener("touchmove",this._elementTouchMoveHandler,this._useCapture),e.removeEventListener("touchend",this._elementTouchEndHandler,this._useCapture),e.removeEventListener("touchcancel",this._elementTouchEndHandler,this._useCapture),d){0==--f.activeMappers&&(document.removeEventListener("touchstart",_,!0),document.removeEventListener("touchend",M,!0),document.removeEventListener("touchcancel",M,!0),f.touchSessionEndTime=0,f.sessionStartPosition=f.sessionEndPosition=null);for(var t=0,n=m.length;t<n;t++)e.removeEventListener(c.getActualName(m[t]),this._mouseEventsHandler,this._useCapture)}},_onTouchStart:function(e){this._state.previousEventType="touch";var t=this._state,n=e.touches,i=n.length;t.initMouseEventSent||(t.initMouseEventSent=!0,this._fireMouseInitEvents(e),t.initTimestamp=e.timeStamp,t.touches=e.touches),i>1&&(t.initMouseEventSent&&!t.preventClick&&(t.preventClick=!0),this._fireEndStartMultiTouchEvents(t.multiTouch?e:null,e))},_onTouchMove:function(e){this._state.previousEventType="touch";var t=e.touches,n=this._state;if(1==t.length&&f.sessionStartPosition){var i=t[0],s=[i.clientX,i.clientY];if(o(f.sessionStartPosition,s,3))return}n.touches=e.touches,n.initMouseEventSent||this._onTouchStart(e),n.preventClick||(n.preventClick=!0),1==e.touches.length?this._fireTouchEvent(e,"mousemove"):(n.multiTouch||this._fireEndStartMultiTouchEvents(null,e),this._fireMultiTouchEvent(e,"multitouchmove"))},_onTouchEnd:function(e){this._state.previousEventType="touch";var t=e.touches.length,n=this._state,i=n.multiTouch||!n.initMouseEventSent&&e.changedTouches.length>0;i&&this._fireEndStartMultiTouchEvents(e,t>1?e:null),0==t&&(n.initTimestamp||(n.initTimestamp=e.timeStamp),n.touches||(n.touches=e.changedTouches),this._fireMouseEndEvents(e))},_fireEndStartMultiTouchEvents:function(e,t){e&&this._fireMultiTouchEvent(e,"multitouchend");var n=null!=t;n&&this._fireMultiTouchEvent(t,"multitouchstart"),this._state.multiTouch=n},_fireMouseInitEvents:function(e){this._state.mouseOver||(this._state.mouseOver=!0,this._fireTouchEvent(e,"mouseenter")),this._fireTouchEvent(e,"mousemove"),this._fireTouchEvent(e,"mousedown")},_fireMouseEndEvents:function(e){var t=e.timeStamp,n=this._state,i=n.touches;if(this._fireTouchEvent(e,"mouseup",i),"touchend"!=e.type&&(n.preventClick=!0),!n.preventClick)if(t-n.initTimestamp>this.params.contextMenuTimeout)this._fireTouchEvent(e,"contextmenu",i),n.clickData.time=null;else{var o=i[0];this._processClickEvent({clickPos:[o.clientX,o.clientY],time:e.timeStamp,diff:h},function(t){this._fireTouchEvent(e,t,i)})}this._fireTouchEvent(e,"mousemove",i),this._fireTouchEvent(e,"mouseleave",i),n.initMouseEventSent=n.preventClick=n.mouseOver=!1},_fireTouchEvent:function(e,t,n){n||(n=e.touches),this.events.fire(t,new r(e,t,n))},_fireMultiTouchEvent:function(e,t,n){n||(n=e.touches),this.events.fire(t,new a(e,t,n))},_onMouseEvent:function(e){var t=this._state.previousEventType,n=this._state,r=c.getIdealName(e.type);if("dblclick"!=r){var a="mouseenter"==r,l="mouseleave"==r,h=new i(e,r);if(l||!f.activeTouchSession&&this._allowMouseEvent(e))if(this._state.previousEventType="mouse",a||l)n.mouseOver=a,s.fire(this.events,r,h.originalEvent),u.isIE&&(n.eventsWithoutHover=0);else{if(u.isIE&&!n.mouseOver&&"mousemove"==r&&0==n.eventsWithoutHover++)return;"touch"==t&&(n.mouseOver||(n.mouseOver=!0,s.fire(this.events,"mouseenter",e)));var d=n.clickData;if("click"==r){var g=[e.clientX,e.clientY],p=d.lastMouseDownPos;if(p&&o(p,g,0))return void this._processClickEvent({clickPos:[e.clientX,e.clientY],time:e.timeStamp,diff:1},function(t){this.events.fire(t,new i(e,t))})}else"mousedown"==r&&(d.lastMouseDownPos=[e.clientX,e.clientY]);this.events.fire(r,h)}}},_allowMouseEvent:function(e){if(f.touchSessionEndTime>0){var t=[e.clientX,e.clientY];if(+new Date-f.touchSessionEndTime>p)f.touchSessionEndTime=0,f.sessionStartPosition=f.sessionEndPosition=null;else if(f.sessionStartPosition&&o(t,f.sessionStartPosition,g)||f.sessionEndPosition&&o(t,f.sessionEndPosition,g))return!1}return!0},_processClickEvent:function(e,t){var n=this._state,i=e.time,s=e.diff,r=e.clickPos;n.clickData.time&&i-n.clickData.time<this.params.dblClickTimeout?(t.call(this,"click"),n.clickData.pos&&o(n.clickData.pos,r,s)&&t.call(this,"dblclick"),n.clickData.time=null):(t.call(this,"click"),n.clickData.time=i),n.clickData.pos=r}},e(v)})}],["2i",function(e){e.modules.define("dotIconWithCaption.layout.html",["islets-icon-caption","islets-dot-icon-with-caption"],function(e){e([0,'<ymaps class="ymaps-2-1-42-islets_dot-icon-with-caption"><ymaps class="ymaps-2-1-42-islets_dot-icon-with-caption__caption-block"><ymaps class="ymaps-2-1-42-islets_icon-caption">',2001,["properties.iconCaption",[]],0,"</ymaps></ymaps>",2002,["islands#dotIcon",[["name",'"baseIcon"']]],0,"</ymaps>"])})}],["0d",function(e){e.modules.define("error",["util.defineClass","util.extend"],function(t,n,i){function o(e,t){function n(t){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.name=e,this.message=t}return t&&(n.errorClass=t),s[e]=n,n}var s={create:function(e,t){return s[e]?new s[e](t):void s.log("ProcessError",e+": is undefined error type")},throwException:function(t,n){if(e.env.debug)throw"object"==typeof t?t:s.create(t,n)},throwExceptionIf:function(e,t,n){e&&s.throwException(t,n)},warn:function(t,n){if(e.env.debug&&"object"==typeof console&&console.warn){var i="object"==typeof t?t:s.create(t,n),o=new Error(i.name+": "+i.message);o.stack=i.stack,console.warn(o)}},warnIf:function(e,t,n){e&&s.warn(t,n)}},r=o("_YMError");n(r,Error);var a=o("ClientError");n(a,r);var l=o("InputError","ClientError");n(l,a);var c=o("StateError","ClientError");n(c,a);var u=o("ProcessError","ClientError");n(u,a);var h=o("StorageItemAccessError","ClientError");n(h,a);var d=o("FeatureRemovedError","ClientError");n(d,a);var g=o("ExternalError");n(g,r);var p=o("RequestError","ExternalError");n(p,g);var m=o("DataProcessingError","ExternalError");n(m,g);var f=o("AccessError","ExternalError");n(f,g);var _=o("NotSupportedError","ExternalError");n(_,g);var M=o("Reject");n(M,r);var v=o("OperationUnallowedReject","Reject");n(v,M);var y=o("OperationCanceledReject","Reject");n(y,M);var j=o("EmptyResultReject","Reject");n(j,M);var b=o("OperationUnawailableReject","Reject");n(b,M);var I=o("Warning");n(I,r);var L=o("DeprecationWarning","Warning");n(L,I);var C=o("OveruseWarning","Warning");n(C,I),t(s)})}],["3i",function(e){e.modules.define("Event",["util.defineClass"],function(e,t){function n(e,t){this.originalEvent=e||{},this._sourceEvent=t||null,t?(this._propagationStopped=t.isPropagationStopped(),this._immediatePropagationStopped=t.isImmediatePropagationStopped(),this._defaultPrevented=t.isDefaultPrevented(),this._mapEventAllowed=t.isMapEventAllowed()):(this._propagationStopped=!1,this._immediatePropagationStopped=!1,this._defaultPrevented=!1,this._mapEventAllowed=!1)}t(n,{getSourceEvent:function(){return this._sourceEvent},get:function(e){return"undefined"==typeof this.originalEvent[e]&&this._sourceEvent?this._sourceEvent.get(e):this.originalEvent[e]},callMethod:function(e){return"undefined"==typeof this.originalEvent[e]&&this._sourceEvent?this._sourceEvent.callMethod.apply(this._sourceEvent,arguments):this.originalEvent[e].apply(this.originalEvent,Array.prototype.slice.call(arguments,1))},stopImmediatePropagation:function(){this._sourceEvent&&(this._sourceEvent.stopImmediatePropagation(),this._sourceEvent.stopPropagation()),this._immediatePropagationStopped=!0,this._propagationStopped=!0},isImmediatePropagationStopped:function(){return this._immediatePropagationStopped},stopPropagation:function(){this._sourceEvent&&this._sourceEvent.stopPropagation(),this._propagationStopped=!0},isPropagationStopped:function(){return this._propagationStopped},preventDefault:function(){this._sourceEvent&&this._sourceEvent.preventDefault(),this._defaultPrevented=!0},isDefaultPrevented:function(){return this._defaultPrevented},allowMapEvent:function(){this._sourceEvent&&this._sourceEvent.allowMapEvent(),this._mapEventAllowed=!0},disallowMapEvent:function(){this._sourceEvent&&this._sourceEvent.disallowMapEvent(),this._mapEventAllowed=!1},isMapEventAllowed:function(){return this._mapEventAllowed},clone:function(e){return new n(e,this.getSourceEvent())}}),e(n)})}],["3.",function(e){e.modules.define("event.globalize",["util.defineClass","util.Associate","event.Manager"],function(e,t,n,i){function o(){this.globalEventManager=null}var s=new n(function(){return new o});t(o,{onBeforeEventFiring:function(e,t,n){this.globalEventManager&&this.globalEventManager.fire(t,n)}}),e(function(e){var t=s.get(e);return e.getMetaEventManager=function(){return t.globalEventManager||(t.globalEventManager=new i)},t})})}],["3(",function(e){e.modules.define("event.Group",["util.defineClass"],function(e,t){function n(e){this.events=e,this._listeners=[]}t(n,{add:function(e,t,n,i){if("string"==typeof e)this._listeners.push(e,t,n,i);else for(var o=0,s=e.length;o<s;o++)this._listeners.push(e[o],t,n,i);return this.events.add(e,t,n,i),this},remove:function(e,t,n,i){if("string"==typeof e)this._removeListener(e,t,n,i);else for(var o=0,s=e.length;o<s;o++)this._removeListener(e[o],t,n,i);return this},removeAll:function(){for(var e=0,t=this._listeners.length;e<t;e+=4)this.events.remove(this._listeners[e],this._listeners[e+1],this._listeners[e+2],this._listeners[e+3]);return this._listeners=[],this},getLength:function(){return this._listeners.length/4},_removeListener:function(e,t,n,i){for(var o=0,s=this._listeners.length;o<s;o+=4)if(this._listeners[o]==e&&this._listeners[o+1]==t&&this._listeners[o+2]==n&&this._listeners[o+3]==i){this._listeners.splice(o,4),this.events.remove(e,t,n,i);break}}}),e(n)})}],["3:",function(e){e.modules.define("event.Manager",["util.defineClass","event.manager.Base","Event","util.extend"],function(e,t,n,i,o){function s(e){s.superclass.constructor.call(this,e)}t(s,n,{controllerMethods:["onAfterEventFiring","onBeforeEventFiring","onStartListening","onStopListening"],setParent:function(e){return this.params.parent=e,this},getParent:function(){return this.params.parent},fire:function(e,t){if(t&&"function"==typeof t.get||(t=this.createEventObject(e,t,this.params.context)),!t.isPropagationStopped()){var n;if(this.controllersHash.onBeforeEventFiring&&(n=this.callControllers("onBeforeEventFiring",this,e,t)),n!==!1){t.isImmediatePropagationStopped()||s.superclass.fire.call(this,e,t),this.params.parent&&!t.isPropagationStopped()&&this.params.parent.fire(e,t);var i=this.params.context;if(t.get("target")==i&&!t.isDefaultPrevented()){var o,r=e+"defaultaction";this.controllersHash.onBeforeEventFiring&&(o=this.getDefaultActionEvent(t,r,i),n=this.callControllers("onBeforeEventFiring",this,r,o)),n!==!1&&this.types[r]&&(o||(o=this.getDefaultActionEvent(t,r,i)),s.superclass.fire.call(this,r,o)),this.controllersHash.onAfterEventFiring&&(o||(o=this.getDefaultActionEvent(t,r,i)),this.callControllers("onAfterEventFiring",this,r,o))}this.controllersHash.onAfterEventFiring&&this.callControllers("onAfterEventFiring",this,e,t)}}return this},createEventObject:function(e,t,n){var s={type:e,target:n};return new i(t?o(s,t):s)},getDefaultActionEvent:function(e,t,n){return new i({type:t,target:n,originalEvent:e})}}),e(s)})}],["$g",function(e){e.modules.define("event.manager.Base",["util.defineClass","util.array","event.Group"],function(t,n,i,o){function s(e){if(this.types={},this.typesCount=0,this.params=e||{},this.controllersHash={},this.params.controllers)for(var t=this.params.controllers,n=0,i=t.length;n<i;n++)this._setupController(t[n]);else this.params.controllers=[];this._onFire={},this._deletedOnFire={}}n(s,{add:function(e,t,n,i){if(i=+i||0,"string"==typeof e)this._addListener(e,t,n,i);else for(var o=0,s=e.length;o<s;o++)this._addListener(e[o],t,n,i);return this},remove:function(e,t,n,i){if(i=+i||0,"string"==typeof e)this._removeListener(e,t,n,i);else for(var o=0,s=e.length;o<s;o++)this._removeListener(e[o],t,n,i);return this},fire:function(e,t){var n=this.types[e];if(n&&!t.isPropagationStopped()){this._onFire.hasOwnProperty(e)?this._onFire[e]++:this._onFire[e]=1;var i="undefined"!=typeof n.priorityKeys;if(i)for(var o=n.priorityKeys.length-1;o>=0;o--)this._callListeners(n[n.priorityKeys[o]],t);else this._callListeners(n,t);var s=this._deletedOnFire[e];if(s){if(n=this.types[e],i){for(var o=0,r=s.priorityKeys.length;o<r;o++){var a=s.priorityKeys[o],l=n[a];this._removeDeletedOnFire(l,s[a]),l.length||this._clearPriority(e,a)}n.priorityKeys.length||this._clearType(e)}else this._removeDeletedOnFire(n,s),n.length||this._clearType(e);delete this._deletedOnFire[e]}--this._onFire[e]||delete this._onFire[e]}return this},_removeDeletedOnFire:function(e,t){for(var n,i=0,o=t.length-1;o>=0;o-=2)t[o]&&(i+=2,n=o,o>0)||i&&(e.splice(n,i),i=0)},_addListener:function(t,n,i,o){var s=!1,r=this.types[t],a=r;if(r){if(e.env.debug&&t.length>13&&t.lastIndexOf("defaultaction")==t.length-13)throw new Error("event.manager.Base._addListener: Обработчик события по умолчанию "+t+" уже был добавлен ранее.");if("undefined"!=typeof r.priorityKeys)r[o]||this._addPriority(r,o),a=r[o];else if(o){var l=this._deletedOnFire[t];l&&(this._deletedOnFire[t]={priorityKeys:[0],0:l}),r=this.types[t]={priorityKeys:[0],0:r},this._addPriority(r,o),a=r[o]}}else o?(r=this.types[t]={priorityKeys:[o]},a=r[o]=[]):a=this.types[t]=[],s=!0,this.typesCount++;a.push(n,i||null),s&&this.controllersHash.onStartListening&&this.callControllers("onStartListening",this,t)},_addPriority:function(e,t){e[t]=[];for(var n=e.priorityKeys,i=0,o=n.length;i<o&&!(n[i]>t);i++);n.splice(i,0,t)},_removeListener:function(e,t,n,i){var o=this.types[e];if(o){var s="undefined"!=typeof o.priorityKeys,r=o;s&&o[i]&&(r=o[i]);for(var a=-1,l=0,c=r.length;l<c;l+=2)if(r[l]==t&&r[l+1]==n){a=l;break}if(a!=-1)if(this._onFire.hasOwnProperty(e)){r[a]=null;var u=this._deletedOnFire[e];u?s&&!u[i]&&(u.priorityKeys.push(i),u=u[i]=[]):s?(u=this._deletedOnFire[e]={priorityKeys:[i]},u=u[i]=[]):u=this._deletedOnFire[e]=[],u[a]=!0}else 2==c?s?(this._clearPriority(e,i),o.priorityKeys.length||this._clearType(e)):this._clearType(e):r.splice(a,2)}},_callListeners:function(e,t){for(var n=0,i=e.length;n<i&&!t.isImmediatePropagationStopped();){var o=e[n];o&&o.call(e[n+1],t),n+=2}},_clearPriority:function(e,t){for(var n=this.types[e],i=0,o=n.priorityKeys.length;i<o;i++)if(n.priorityKeys[i]==t){n.priorityKeys.splice(i,1);break}delete this.types[e][t]},_clearType:function(e){delete this.types[e],this.typesCount--,this.controllersHash.onStopListening&&this.callControllers("onStopListening",this,e)},controllerMethods:["onStartListening","onStopListening"],callControllers:function(e,t,n,i){for(var o,s=this.controllersHash[e],r=0,a=s.length;r<a&&(o=s[r][e](t,n,i),o!==!1);r++);return o},group:function(){return new o(this)},addController:function(e){this.params.controllers.push(e),this._setupController(e)},_setupController:function(e){for(var t=this.controllerMethods,n=0,i=t.length;n<i;n++){var o=t[n];e[o]&&(this.controllersHash[o]?this.controllersHash[o].push(e):this.controllersHash[o]=[e])}},removeController:function(t){var n=i.indexOf(this.params.controllers,t);if(n!=-1){1==this.params.controllers.length?this.params.controllers.pop():this.params.controllers.splice(n,1);for(var o=this.controllerMethods,s=0,r=o.length;s<r;s++){var a=o[s];if(t[a]){var l=this.controllersHash[a];1==l.length?l[0]==t&&l.pop():(n=i.indexOf(l,t),n!=-1&&l.splice(n,1)),l.length||(this.controllersHash[a]=null)}}}else if(e.env.debug)throw new Error("event.Manager.removeController: контроллер не найден")},once:function(e,t,n,i){function o(s){this.remove(e,o,this,i),n?t.call(n,s):t(s)}return this.add(e,o,this,i),this}}),t(s)})}],["3q",function(e){e.modules.define("event.Mapper",["util.defineClass"],function(e,t){function n(e,t){this._targetEventManager=e,this._mappingTable=t}t(n,{getTargetEventManager:function(){return this._targetEventManager},setMappingTable:function(e){this._mappingTable=e},getMappingTable:function(){return this._mappingTable},fire:function(e,t){"undefined"==typeof this._mappingTable[e]&&(e="*");var n,i=this._mappingTable[e];return"function"==typeof i?n=this._mappingTable[e](t):i&&(n=t),n&&this._targetEventManager.fire(n.get("type"),n),this}}),e(n)})}],["0D",function(e){e.modules.define("formatter",["localization.units.current","localization.lib"],function(t,n,i){var o=Math.log(10),s={distance:function(t,n){var o=i.UnitsTransform(e.env.lang,"distance",t);return s.unit(s.toSignificantDigits(o.value,n||2),"distance",o.name)},duration:function(t,n){for(var o=i.UnitsTransform(e.env.lang,"duration",t,n||2),r=[],a=0,l=o.length;a<l;a++)r.push(s.unit(o[a].value,"duration",o[a].name));return r.join(" ")},unit:function(e,t,i){return s.numeral(e,n[t][i])},numeral:function(e,t){var n,i=parseFloat(e);if("string"==typeof t)n=t;else if(i>10&&i<20)n=t[2]||t[1];else switch((""+i%10).charAt(0)){case"1":n=t[0];break;case"2":case"3":case"4":n=t[1];break;default:n=t[2]||t[1]}return n.replace("%d",e)},toSignificantDigits:function(e,t){if(0==e)return e;var n=Math.floor(Math.log(Math.abs(e))/o),i=e/Math.pow(10,n),s=Math.abs(i*Math.pow(10,t-1));Math.round(s).toString().length>Math.floor(s).toString().length&&(n++,i=e/Math.pow(10,n),s=Math.abs(i*Math.pow(10,t-1)));var r,a=Math.round(s).toString(),l=n+1,c=(i<0?"-":"")+(l<=0?"0.":"");if(l<=0){for(r=l;r<0;r++)c+="0";c+=a}else if(l>=t)for(c+=a,r=t;r<l;r++)c+="0";else c+=a.slice(0,l),a.length>l&&(c+="."+a.slice(l));return c}};t(s)})}],["0S",function(e){e.modules.define("geocode",["map.metaOptions","yandex.geocodeProvider.storage","vow","yandex.counter","yandex.geocodeProvider.metaOptions","yandex.counter"],function(e,t,n,i,o){function s(e,r){r=r||{};var a=r.provider||t.get("geocodeProvider");if("string"==typeof a){var l=a;if(o.countByKey("modulesUsage","geocode."+l.replace(/[^A-Za-z]/g,"_")),a=n.get(l),!a){var c=i.defer();return n.require([l]).spread(function(t){c.resolve(t.geocode(e,r))},function(){c.reject(s.ProviderWasntFound())}),c.promise()}}else o.countByKey("modulesUsage","geocode.custom");return a.geocode(e,r)}s.ProviderWasntFound=function(){return new Error("Provider wasn't found")},e(s)})}],["05",function(e){e.modules.define("geolocation",function(e){return["vow","util.extend","util.defineClass","util.bounds","geocode","Placemark","GeoObjectCollection","coordSystem.geo","yandex.counter","geolocationPreset."+(e.env.browser.oldIE?"ie.":"standard.")+("ru"==e.env.lang.slice(0,2)?"ru":"en")]},function(t,n,i,o,s,r,a,l,c,u){function h(e,t){var i=n.defer(),o=e.accuracy,s=e.position,l={origin:j,geolocationAccuracy:o};return t.autoReverseGeocode?(o>=M.locality&&(l.kind="locality"),r(s,l).then(function(e){var n=e.geoObjects.get(0);n&&g(n,s,o)?(e.geoObjects.remove(n),i.resolve(m(n,s,o,t))):i.reject("Not found")},function(e){i.reject(e)})):i.resolve(m(new a(s),s,o,t)),i.promise()}function d(t){var i=n.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){i.resolve({position:"longlat"==e.env.coordinatesOrder?[t.coords.longitude,t.coords.latitude]:[t.coords.latitude,t.coords.longitude],accuracy:t.coords.accuracy})},function(e){i.reject(e)},{enableHighAccuracy:!0,maximumAge:6e4}):i.reject("Geolocation API isn't supported"),i.promise().timeout(t)}function g(e,t,n){return s.areIntersecting(e.properties.get("boundedBy")||p(e.geometry.getCoordinates(),n),p(t,n))}function p(e,t){return[[c.solveDirectProblem(e,[-1,0],t).endPoint[0],c.solveDirectProblem(e,[0,-1],t).endPoint[1]],[c.solveDirectProblem(e,[1,0],t).endPoint[0],c.solveDirectProblem(e,[0,1],t).endPoint[1]]]}function m(e,t,n,i){var o;return i.mapStateAutoApply&&(o=n?p(t,n):e.geometry.getBounds()),e.geometry.setCoordinates(t),{geoObjects:new f(e,t,n,o,i)}}var f=o(function(e,t,n,i,o){f.superclass.constructor.call(this,{},{preset:"islands#geolocationIcon"}),this.position=t,this.accuracy=n,this.add(e),i&&this.events.once("mapchange",function(){this.getMap().setBounds(i,{checkZoomRange:!0,useMapMargin:o.useMapMargin,duration:400})},this)},l),_=e.env.geolocation,M={precise:10,locality:2e3,region:1e4},v="longlat"==e.env.coordinatesOrder?[_.longitude,_.latitude]:[_.latitude,_.longitude],y={position:v,accuracy:_.isHighAccuracy?M.precise:_.span.longitude||_.span.latitude?Math.max(c.getDistance(v,"longlat"==e.env.coordinatesOrder?[v[0]+_.span.longitude,v[1]]:[v[0],v[1]+_.span.longitude]),c.getDistance(v,"longlat"==e.env.coordinatesOrder?[v[0],v[1]+_.span.latitude]:[v[0]+_.span.latitude,v[1]])):M.region},j="jsapi21Geolocation";t({get:function(e){if(e=i({provider:"auto",mapStateAutoApply:!1,useMapMargin:!0,autoReverseGeocode:!0,timeout:3e4},e),u.countByKey("modulesUsage","geolocation.get."+e.provider),"yandex"==e.provider||"auto"==e.provider&&y.accuracy<=10)return h(y,e);var t=n.defer();return"browser"==e.provider?d(e.timeout).then(function(n){t.resolve(h(n,e))},function(e){t.reject(e)}):d(e.timeout).then(function(n){t.resolve(h(n.accuracy>y.accuracy?y:n,e))},function(){t.resolve(h(y,e))}),t.promise()}})})}],["$1",function(e){var t=e.modules.importImages({geolocationIcon:{src:"../../YaRu.svg",optimization:{dataUrl:!0}}});e.modules.define("geolocationPreset.standard.ru",["option.presetStorage","layout.Image"],function(e,n,i){n.add("islands#geolocationIcon",{iconLayout:i,iconImageHref:t.get("geolocationIcon"),iconImageSize:[22,22],iconImageOffset:[-11,-11],cursor:"inherit"}),e(!0)})}],["$2",function(e){e.modules.define("geometry.base.Circle",["event.Manager","util.extend","component.EventFreezer","geometry.component.commonMethods.circle"],function(t,n,i,o,s){var r=s,a=function(e,t){this._coordinates=a.castCoordinates(e),this._radius=a.castRadius(t),this._freezer=new o(this._changeCallback,this),this.events=new n({context:this})};a.castCoordinates=function(t){if(e.env.debug&&t&&(!t.length||2!=t.length||"number"!=typeof t[0]))throw new Error("CircleGeometry.castCoordinates: Неверный формат координат круга.");return t||null},a.castRadius=function(e){return e||0},i(a.prototype,{getType:function(){return"Circle"},getBounds:function(){return this._bounds||(this._bounds=this._calculateBounds())},setCoordinates:function(e){var t=this._coordinates;return this._coordinates=e,this._bounds=null,this._freezer.fire("Coordinates",t,this._coordinates),this},getCoordinates:function(){return this._coordinates},getCenter:function(){return this._coordinates},setRadius:function(e){var t=this._radius;return this._radius=e,this._bounds=null,this._freezer.fire("Radius",t,this._radius),this},getRadius:function(){return this._radius},freeze:function(){return this._freezer.freeze(),this},unfreeze:function(){return this._freezer.unfreeze(),this},isFrozen:function(){return this._freezer.isFrozen()},contains:function(e){return r.contains(this._coordinates,this._radius,e)},getClosest:function(e){return r.getClosest(this._coordinates,this._radius,e)},_calculateBounds:function(){return r.calculateBounds(this._coordinates,this._radius)},_changeCallback:function(e){this.events.fire("change",i({type:"change",target:this},e))}}),t(a)})}],["$5",function(e){e.modules.define("geometry.base.LinearRing",["event.Manager","util.extend","util.coordinates.encode","util.pixelBounds","geometry.component.pointInPolygon","geometry.component.findClosestPathPosition","component.EventFreezer","geometry.component.closedPathDecode","geometry.component.CoordPath","geometry.component.ChildPath","geometry.component.FillRule","util.math.areEqual","geometry.base.Point"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(e,t){var n=this._getNonClosedCoords();n[t]=e.getCoordinates(),this._setNonClosedCoords(n)}function f(e,t){this._freezer.fire("Coordinates",e,t)}function _(e){return s.fromPoints(e)}function M(e,t){this._freezer.fire("FillRule",e,t)}var v=function(e,t){this._coordPath=new u(v.keepClosed(e||[],!0),{callback:f,context:this},{callback:_,context:this}),this._childPath=new h([],p,["change"],{callback:m,context:this}),this._fillRuleComponent=new d(t,{callback:M,context:this}),this._freezer=new l(this._changeCallback,this),this.events=new n({context:this})};v.keepClosed=function(e,t){var n=e.length;return(1==n||n>1&&!g(e[0],e[n-1]))&&(t&&(e=e.slice()),e.push(e[0])),e},v.fromEncodedCoordinates=function(e){return new v(c(e))},v.toEncodedCoordinates=function(t){if(e.env.debug&&"LinearRing"!=t.getType())throw new Error("geometry.base.LinearRing.toEncodedCoordinates: неверный тип геометрии: "+t.getType());return o(t.getCoordinates())},i(v.prototype,{getType:function(){return"LinearRing"},getBounds:function(){return this._coordPath.getBounds()},set:function(e,t){this._childPath.setChild(e,null);var n=this._getNonClosedCoords();return n[e]=t,this._setNonClosedCoords(n),this},get:function(e){return this._coordPath.get(e)},getChildGeometry:function(e){return e==this._coordPath.getLength()-1&&(e=0),this._childPath.getChild(e)||this._childPath.createChild(e,this._coordPath.get(e))},remove:function(e){this._childPath.splice(e,1);var t=this._getNonClosedCoords(),n=t.splice(e,1)[0];return this._setNonClosedCoords(t),n},insert:function(e,t){this._childPath.splice(e,0,null);var n=this._getNonClosedCoords();return n.splice(e,0,t),this._setNonClosedCoords(n),this},splice:function(e,t){arguments.length>2?this._childPath.splice.apply(this._childPath,[e,t].concat(new Array(arguments.length-2))):this._childPath.splice(e,t);var n=this._getNonClosedCoords(),i=arguments.length>2?n.splice.apply(n,arguments):n.splice(e,t);return this._setNonClosedCoords(n),i},setCoordinates:function(e){return this._childPath.setChildren([]),this._coordPath.setCoordinates(v.keepClosed(e,!0)),this},getCoordinates:function(){return this._coordPath.getCoordinates()},getLength:function(){return this._coordPath.getLength()},setFillRule:function(e){return this._fillRuleComponent.setFillRule(e),this},getFillRule:function(){this._fillRuleComponent.getFillRule()},freeze:function(){return this._freezer.freeze(),this},unfreeze:function(){return this._freezer.unfreeze(),this},isFrozen:function(){return this._freezer.isFrozen()},contains:function(e){return r(e,[this._coordPath.getCoordinates()],this._fillRuleComponent.getFillRule())},getClosest:function(e){return a(this._coordPath.getCoordinates(),e)},_getNonClosedCoords:function(){return this._coordPath.getCoordinates().slice(0,this._coordPath.getLength()-1)},_setNonClosedCoords:function(e){this._coordPath.setCoordinates(v.keepClosed(e))},_changeCallback:function(e){this.events.fire("change",i({type:"change",target:this},e))}}),t(v)})}],["$3",function(e){e.modules.define("geometry.base.LineString",["util.defineClass","event.Manager","geometry.component.findClosestPathPosition","component.EventFreezer","geometry.component.CoordPath","geometry.component.ChildPath","geometry.base.Point","util.extend","util.coordinates.encode","util.coordinates.decode","util.pixelBounds"],function(t,n,i,o,s,r,a,l,c,u,h,d){function g(e,t){this._coordPath.set(t,e.getCoordinates())}function p(e,t){this._freezer.fire("Coordinates",e,t)}function m(e){return d.fromPoints(e)}var f=function(e){this._coordPath=new r(e||[],{callback:p,context:this},{callback:m,context:this}),this._childPath=new a([],l,["change"],{callback:g,context:this}),this._freezer=new s(this._changeCallback,this),this.events=new i({context:this})};f.fromEncodedCoordinates=function(e){return new f(h(e))},f.toEncodedCoordinates=function(t){if(e.env.debug&&"LineString"!=t.getType())throw new Error("geometry.base.LineString.toEncodedCoordinates: неверный тип геометрии: "+t.getType());return u(t.getCoordinates())},n(f,{getType:function(){return"LineString"},getBounds:function(){return this._coordPath.getBounds()},set:function(e,t){return this._childPath.setChild(e,null),this._coordPath.set(e,t),this},get:function(e){return this._coordPath.get(e)},getChildGeometry:function(e){return this._childPath.getChild(e)||this._childPath.createChild(e,this._coordPath.get(e))},remove:function(e){return this._childPath.splice(e,1),this._coordPath.splice(e,1)[0]},insert:function(e,t){return this._childPath.splice(e,0,null),this._coordPath.splice(e,0,t),this},splice:function(e,t){return arguments.length>2?this._childPath.splice.apply(this._childPath,[e,t].concat(new Array(arguments.length-2))):this._childPath.splice(e,t),arguments.length>2?this._coordPath.splice.apply(this._coordPath,arguments):this._coordPath.splice(e,t)},setCoordinates:function(e){return this._childPath.setChildren([]),this._coordPath.setCoordinates(e),this},getCoordinates:function(){return this._coordPath.getCoordinates()},getLength:function(){return this._coordPath.getLength()},freeze:function(){return this._freezer.freeze(),this},unfreeze:function(){return this._freezer.unfreeze(),this},isFrozen:function(){return this._freezer.isFrozen()},getClosest:function(e){return o(this._coordPath.getCoordinates(),e)},_changeCallback:function(e){this.events.fire("change",c({type:"change",target:this},e))}}),t(f);
})}],["$6",function(e){e.modules.define("geometry.base.Point",["util.extend","event.Manager"],function(e,t,n){var i=function(e){this._coordinates=e||null,this.events=new n({context:this})};t(i.prototype,{getType:function(){return"Point"},setCoordinates:function(e){this._bounds=null;var t=this._coordinates;this._coordinates=e,this.events.fire("change",{oldCoordinates:t,newCoordinates:this._coordinates})},getCoordinates:function(){return this._coordinates},getBounds:function(){return this._bounds||(this._bounds=this._coordinates?[this._coordinates.slice(),this._coordinates.slice()]:null)}}),e(i)})}],["$8",function(e){e.modules.define("geometry.base.Polygon",["event.Manager","util.extend","util.coordinates.encode","component.EventFreezer","geometry.component.closedPathDecode","geometry.component.CoordPath","geometry.component.ChildPath","geometry.component.FillRule","geometry.component.commonMethods.polygon","geometry.base.LinearRing"],function(t,n,i,o,s,r,a,l,c,u,h){function d(e,t){this._coordPath.set(t,e.getCoordinates())}function g(e,t){this._freezer.fire("Coordinates",e,t)}function p(e){return f.calculateBounds(e)}function m(e,t){this._freezer.fire("FillRule",e,t)}var f=u,_=function(e,t){this._coordPath=new a(_.keepClosed(e||[]),{callback:g,context:this},{callback:p,context:this}),this._childPath=new l([],h,["change"],{callback:d,context:this}),this._fillRuleComponent=new c(t,{callback:m,context:this}),this._freezer=new s(this._changeCallback,this),this.events=new n({context:this})};_.keepClosed=function(e){for(var t=0,n=e.length,i=e;t<n;t++){var o=e[t],s=h.keepClosed(o,!0);o!==s&&(i==e&&(i=e.slice()),i[t]=s)}return i},_.fromEncodedCoordinates=function(e){for(var t=e.split(";"),n=[],i=0,o=t.length;i<o;i++)n.push(r(t[i]));return new _(n)},_.toEncodedCoordinates=function(t){if(e.env.debug&&"Polygon"!=t.getType())throw new Error("geometry.base.Polygon.toEncodedCoordinates: неверный тип геометрии: "+t.getType());for(var n=[],i=0,s=t.getLength();i<s;i++)n.push(o(t.get(i)));return n.join(";")},i(_.prototype,{getType:function(){return"Polygon"},getBounds:function(){return this._coordPath.getBounds()},set:function(e,t){return this._childPath.setChild(e,null),this._coordPath.set(e,h.keepClosed(t)),this},get:function(e){return this._coordPath.get(e)},getChildGeometry:function(e){return this._childPath.getChild(e)||this._childPath.createChild(e,this._coordPath.get(e))},remove:function(e){return this._childPath.splice(e,1),this._coordPath.splice(e,1)[0]},insert:function(e,t){return this._childPath.splice(e,0,null),this._coordPath.splice(e,0,h.keepClosed(t)),this},splice:function(e,t){return arguments.length>2?this._childPath.splice.apply(this._childPath,[e,t].concat(new Array(arguments.length-2))):this._childPath.splice(e,t),arguments.length>2?this._coordPath.splice.apply(this._coordPath,[e,t].concat(_.keepClosed(Array.prototype.slice.call(arguments,2)))):this._coordPath.splice(e,t)},setCoordinates:function(e){return e=_.keepClosed(e),this._childPath.setChildren([]),this._coordPath.setCoordinates(e),this},getCoordinates:function(){return this._coordPath.getCoordinates()},getLength:function(){return this._coordPath.getLength()},setFillRule:function(e){return this._fillRuleComponent.setFillRule(e),this},getFillRule:function(){return this._fillRuleComponent.getFillRule()},freeze:function(){return this._freezer.freeze(),this},unfreeze:function(){return this._freezer.unfreeze(),this},isFrozen:function(){return this._freezer.isFrozen()},contains:function(e){return f.contains(this._coordPath.getCoordinates(),e,this._fillRuleComponent.getFillRule())},getClosest:function(e){return f.getClosest(this._coordPath.getCoordinates(),e)},_changeCallback:function(e){this.events.fire("change",i({type:"change",target:this},e))}}),t(_)})}],["$9",function(e){e.modules.define("geometry.base.Rectangle",["event.Manager","util.extend","geometry.component.commonMethods.rectangle"],function(e,t,n,i){var o=i,s=function(e){this._coordinates=s.keepСonsistent(e),this.events=new t({context:this})};s.keepСonsistent=function(e){var t=null;return e&&e.length&&(t=e,2!=e.length&&(t=t.slice(0,2),1==e.length&&(t[1]=t[0].slice()))),t},n(s.prototype,{getType:function(){return"Rectangle"},getBounds:function(){return this._bounds||(this._bounds=o.calculateBounds(this._coordinates))},setCoordinates:function(e){var t=this._coordinates;return this._coordinates=s.keepСonsistent(e),this._bounds=null,this._fireChangeEvent(t,this._coordinates),this},getCoordinates:function(){return this._coordinates},getClosest:function(e){return o.getClosest(this._coordinates,e)},contains:function(e){return o.contains(this._coordinates,e)},_fireChangeEvent:function(e,t){this.events.fire("change",{oldCoordinates:e,newCoordinates:t})}}),e(s)})}],["$Z",function(e){e.modules.define("geometry.Circle",["util.defineClass","option.Manager","geometry.base.Circle","geometry.pixel.Circle","geometry.component.renderFlowManager","geometry.component.pixelGeometryGeodesic.circle","geometry.component.renderFlow.stageScale","geometry.component.renderFlow.stageShift","geometry.defaultOptions","geometry.component.boundsFromPixels","geometry.component.pixelGetClosest","util.getPixelRadius","geometry.component.pixelContains","util.matrix.2d","Event"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f){function _(){this.events.fire("optionschange")}function M(e){this._bounds=null,this.events.fire("pixelgeometrychange",new f({type:"pixelgeometrychange",target:this,pixelGeometry:e}))}function v(t,n){if(e.env.debug&&!n.projection)throw new Error("geometry.Circle._renderingStageBasePixels: значение опции projection не определено");return t?n.geodesic?y(t,this.getRadius(),n):new s(n.projection.toGlobalPixels(t,0),g(t,this.getRadius(),n.projection,0)):new s}var y=a,j=function(e,t,n){j.superclass.constructor.call(this,e,t),this.options=new i(n),this.options.events.add("change",_,this)};n(j,o,{getBounds:function(){return this._bounds||(this._bounds=h.get(this))},getPixelGeometry:function(t){if(e.env.debug&&!this._map)throw new Error("geometry.main.Circle.getPixelGeometry: Не задана карта.");return this._map?r.getPixelGeometry(this,t):null},setMap:function(e){var t=this._map;t&&this._clearRenderFlow(),this._map=e,e&&this._setupRenderFlow(),this.events.fire("mapchange",new f({type:"mapchange",target:this,newMap:this._map,oldMap:t}))},getMap:function(){return this._map},contains:function(e){return p(this,e)},getClosest:function(t){var n=d(this,t),i=this.options.get("projection");if(e.env.debug&&"object"!=typeof i)throw new Error("geometry.Circle.getClosest: В опциях геометрии не определена проекция.");return n&&(n.position=i.fromGlobalPixels(n.position,this._map.getZoom()),n.distance=i.getCoordSystem().getDistance(t,n.position)),n},applyProjectedTransformation:function(e){var t=this.options.get("projection"),n=this.getMap().action.getCurrentState().zoom,i=t.toGlobalPixels(this.getCoordinates(),n),o=[];m.applyToPoint(o,i,e),this.setCoordinates(t.fromGlobalPixels(o,n))},_setupRenderFlow:function(){var e=b;e[0].stage=this.getCoordinates,r.add(this,e,u,M)},_clearRenderFlow:function(){r.remove(this,b)}});var b=[{stage:null,event:{target:"self",event:"change"}},{stage:v,options:["projection","geodesic"]},{stage:l.apply,event:{target:"map",event:"actionend",callback:l.onActionEnd}},{stage:c.apply,options:["projection","pixelRendering"],event:{target:"map",event:"actionend",callback:c.onActionEnd}}];t(j)})}],["$-",function(e){e.modules.define("geometry.component.anchor",[],function(e){var t={getAnchor:function(e,t,n){var i,o=Math.floor(t/n),s=(i=t%n)>=0?i:n+i,r=(i=e%n)>=0?i:n+i,a=this.getShortestPathWorld(r,s,n);return r+n*(o+a)},getShortestPathWorld:function(e,t,n){var i=n/2;return e>=i==t>=i?0:e<i?t-e<=i?0:1:t<i?e-t<=i?0:-1:0}};e(t)})}],["$_",function(e){e.modules.define("geometry.component.boundsFromPixels",["util.bounds"],function(e,t){function n(e){var n=e.getPixelGeometry({simplification:!1,pixelRendering:"static"});if(n){var i=n.getBounds();return i?t.fromGlobalPixelBounds(i,e.getMap().getZoom(),e.options.get("projection")):null}throw new Error("geometry.component.getBoundsFromPixels: Расчет границ не возможен без добавления на карту.")}e({get:n})})}],["$!",function(e){e.modules.define("geometry.component.ChildPath",["util.bind","util.array"],function(e,t,n){function i(e,t,i){if(n.indexOf(this._changeEvents,t)!=-1){var o=i.get("target"),s=n.indexOf(this._children,o);this._changeCallback.callback.call(this._changeCallback.context,o,s)}}var o=function(e,n,o,s){this._children=e,this._setupChildren(e),this._childClass=n,this._changeEvents=o,this._changeCallback=s,this._childEventController={onAfterEventFiring:t(i,this)}};o.prototype={setChild:function(e,t){this._children[e]&&this._clearChild(this._children[e]),this._children[e]=t,t&&this._setupChild(t)},getChild:function(e){return this._children[e]},createChild:function(e,t){var n=null;return t&&(n=new this._childClass(t),this._setupChild(n)),this._children[e]=n},splice:function(e,t){var n;return arguments.length>2?(this._setupChildren(Array.prototype.slice.call(arguments,2)),n=this._children.splice.apply(this._children,arguments)):n=this._children.splice(e,t),this._clearChildren(n),n},setChildren:function(e){this._clearChildren(this._children),this._children=e,this._setupChildren(e)},_setupChild:function(e){e.events.addController(this._childEventController)},_clearChild:function(e){e.events.removeController(this._childEventController)},_setupChildren:function(e){for(var t=0,n=e.length;t<n;t++)e[t]&&this._setupChild(e[t])},_clearChildren:function(e){for(var t=0,n=e.length;t<n;t++)e[t]&&this._clearChild(e[t])}},e(o)})}],["$*",function(e){e.modules.define("geometry.component.closedPathDecode",["util.coordinates.decode","util.math.areEqual"],function(e,t,n){var i=1e6,o=1/i+1e-12;e(function(e){var i=t(e),s=i.length-1;return s<0?[]:(n(i[0],i[s],o)&&(i[s]=i[0].slice()),i)})})}],[",D",function(e){e.modules.define("geometry.component.commonMethods.circle",[],function(e){e({contains:function(e,t,n){return!(!e||!t)&&Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2))<t},getClosest:function(e,t,n){if(!e||!t)return null;var i=[n[0]-e[0],n[1]-e[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return 0==o?{position:[e[0],e[1]+t],distance:t}:{position:[e[0]+i[0]*t/o,e[1]+i[1]*t/o],distance:Math.abs(o-t)}},calculateBounds:function(e,t){return e?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:null}})})}],[",E",function(e){e.modules.define("geometry.component.commonMethods.polygon",["geometry.component.pointInPolygon","geometry.component.findClosestPathPosition","util.pixelBounds"],function(e,t,n,i){e({contains:function(e,n,i){return t(n,e,i)},getClosest:function(e,t){for(var i=null,o=0,s=e.length;o<s;o++){var r=n(e[o],t);r&&(!i||r.distance<i.distance)&&(i=r,i.pathIndex=o)}return i},calculateBounds:function(e){for(var t=null,n=0,o=e.length;n<o;n++){var s=i.fromPoints(e[n]);s&&(t=t?i.fromBounds([t,s]):s)}return t}})})}],[",F",function(e){e.modules.define("geometry.component.commonMethods.rectangle",["util.pixelBounds","geometry.component.findClosestPathPosition"],function(e,t,n){e({contains:function(e,n){return t.containsPoint(this.calculateBounds(e),n)},getClosest:function(e,t){var i=this.calculateBounds(e),o=[i[0],[i[1][0],i[0][1]],i[1],[i[0][0],i[1][1]],i[0]],s=n(o,t);return{position:s.position,distance:s.distance}},calculateBounds:function(e){return t.fromPoints(e||[])}})})}],["$,",function(e){e.modules.define("geometry.component.CoordPath",[],function(e){var t=function(e,t,n){this._coordinates=e,this._changeCallback=t,this._boundsCallback=n};t.prototype={getBounds:function(){return this._bounds||(this._bounds=this._boundsCallback.callback.call(this._boundsCallback.context,this._coordinates))},set:function(e,t){var n=this._coordinates;this._coordinates=this._coordinates.slice(),this._coordinates[e]=t,this._bounds=null,this._changeCallback.callback.call(this._changeCallback.context,n,this._coordinates)},get:function(e){return this._coordinates[e]},splice:function(e,t){var n=this._coordinates;this._coordinates=this._coordinates.slice();var i=arguments.length>2?this._coordinates.splice.apply(this._coordinates,arguments):this._coordinates.splice(e,t);return this._bounds=null,this._changeCallback.callback.call(this._changeCallback.context,n,this._coordinates),i},setCoordinates:function(e){var t=this._coordinates;this._coordinates=e,this._bounds=null,this._changeCallback.callback.call(this._changeCallback.context,t,this._coordinates)},getCoordinates:function(){return this._coordinates},getLength:function(){return this._coordinates.length}},e(t)})}],["$:",function(e){e.modules.define("geometry.component.FillRule",[],function(t){var n=["evenOdd","nonZero"],i=function(t,i){if(this._fillRule=t||n[0],e.env.debug){for(var o,s=0,r=n.length;s<r;s++)if(this._fillRule==n[s]){o=!0;break}if(!o)throw new Error("geometry.component.FillRule: неверное значение параметра fillRule "+this._fillRule)}this._changeCallback=i};i.prototype={setFillRule:function(t){if(e.env.debug){for(var i,o=0,s=n.length;o<s;o++)if(t==n[o]){i=!0;break}if(!i)throw new Error("geometry.component.FillRule.setFillRule: неверное значение параметра fillRule "+t)}var r=this._fillRule;this._fillRule=t,this._changeCallback.callback.call(this._changeCallback.context,r,this._fillRule)},getFillRule:function(){return this._fillRule}},t(i)})}],["$)",function(e){e.modules.define("geometry.component.findClosestPathPosition",["util.vector"],function(e,t){var n=t.length2;e(function(e,t){if(!e.length)return null;for(var i,o,s=e[0],r=[t[0]-s[0],t[1]-s[1]],a=n(r),l={position:s,vector:r,closestPointIndex:0,distance:a},c=1,u=e.length;c<u;c++)if(o=e[c],s[0]!=o[0]||s[1]!=o[1]){var h,d=[o[0]-s[0],o[1]-s[1]],g=[t[0]-s[0],t[1]-s[1]],p=(d[0]*g[0]+d[1]*g[1])/(d[0]*d[0]+d[1]*d[1]);p<0?h={position:s,vector:[s[0]-t[0],s[1]-t[1]],closestPointIndex:c-1}:p>1?h={position:o,vector:[o[0]-t[0],o[1]-t[1]],closestPointIndex:c}:(i=[d[0]*p-g[0],d[1]*p-g[1]],h={vector:i,prevPointIndex:c-1,nextPointIndex:c}),h.distance=h.vector[0]*h.vector[0]+h.vector[1]*h.vector[1],h.distance<a&&(a=h.distance,l=h),s=o}if(l.nextPointIndex){i=l.vector,s=e[l.prevPointIndex],o=e[l.nextPointIndex];var m=[t[0]+i[0],t[1]+i[1]],f=[m[0]-s[0],m[1]-s[1]],_=[m[0]-o[0],m[1]-o[1]];l.position=m,l.closestPointIndex=n(f)<n(_)?l.prevPointIndex:l.nextPointIndex}return l.distance=Math.sqrt(l.distance),l})})}],["$@",function(e){e.modules.define("geometry.component.pixelContains",[],function(e){e(function(e,t){var n=e.getMap();if("undefined"==typeof n)throw new Error("geometry.component.pixelContains: Для рассчета вхождения точки геометрия должна быть добавлена на карту.");for(var i=e.getPixelGeometry({simplification:!1,pixelRendering:"static",geodesic:e.options.get("geodesic")}),o=256*Math.pow(2,n.getZoom()),s=i.getBounds(),r=[[Math.floor(s[0][0]/o),Math.floor(s[0][1]/o)],[Math.floor(s[1][0]/o),Math.floor(s[1][1]/o)]],a=e.options.get("projection"),l=a.isCycled(),c=l[0]?1:0,u=l[1]?1:0,h=a.toGlobalPixels(t,n.getZoom()),d=r[0][0];d<=r[1][0];d++)for(var g=r[0][1];g<=r[1][1];g++)if(i.contains([h[0]+c*d*o,h[1]+u*g*o]))return!0;return!1})})}],[",G",function(e){e.modules.define("geometry.component.pixelGeometryGeodesic.circle",["geometry.component.pixelGeometryGeodesic.storage","geometry.pixel.Polygon","geometry.component.ShortestPath"],function(t,n,i,o){function s(t,n,s){var r,a,l=[],c=s.projection.getCoordSystem(),u=2*Math.PI,h=Math.PI/40;if(e.env.debug&&"function"!=typeof c.solveDirectProblem)throw new Error("geometry.component.pixelGeometryGeodesic.circle: Отсутствует обязательный метод solveDirectProblem у координатной системы.");for(var d=0;d<=u;d+=h)a="latlong"==e.env.coordinatesOrder?[Math.cos(d),Math.sin(d)]:[Math.sin(d),Math.cos(d)],r=c.solveDirectProblem(t,a,n),l.push(s.projection.toGlobalPixels(r.endPoint,0));return l=(new o).calculate(l,s.projection.isCycled()),new i([l],"nonZero")}n.add("Circle",s),t(s)})}],[",H",function(e){e.modules.define("geometry.component.pixelGeometryGeodesic.lineString",["geometry.component.pixelGeometryGeodesic.storage","geometry.component.ShortestPath","util.math.cycleRestrict"],function(t,n,i,o){function s(t,n){var o=n.getCoordSystem(),s=t.getCoordinates(),a=t.getMetaData().originalIndexes||[],l=new i;if(!s.length)return t;if(e.env.debug&&"function"!=typeof o.solveDirectProblem)throw new Error("geometry.component.pixelGeometryGeodesic.lineString: Отсутствует обязательный метод solveDirectProblem у координатной системы.");for(var c,u,h,d,g=n.fromGlobalPixels(s[0],0),p={pixelPath:[s[0]],indexes:[a[0]||0]},m=n.isCycled(),f=1,_=s.length;f<_;f++){c=n.fromGlobalPixels(s[f],0),u=m[0]&&Math.abs(s[f][0]-s[f-1][0])>128||m[1]&&Math.abs(s[f][1]-s[f-1][1])>128,h=r(o,g,c,u),d=[];for(var M=1,v=h.length,y=v-1;M<v;M++)d.push(n.toGlobalPixels(h[M],0)),p.indexes.push(M<y?-1:a[f]||f);u||(d.unshift(s[f-1]),d=l.calculate(d,m,{unbounded:!0}),d.shift()),p.pixelPath=p.pixelPath.concat(d),g=c}return t.clone(p.pixelPath,{originalIndexes:p.indexes})}function r(e,t,n,i){for(var o=e.solveInverseProblem(t,n,i),s=[t],r=0,l=3;r<l;r++)s=s.concat(a(o.pathFunction,r/l,(r+1)/l,0==r?{point:o.startPoint,direction:o.startDirection}:null,r==l-1?{point:o.endPoint,direction:o.endDirection}:null));return s}function a(t,n,i,s,r){s=s||t(n),r=r||t(i);var l,c,u,h=Math.PI/60,d=Math.PI/4,g=[],p=Math.abs(o(Math.atan2(s.direction[0],s.direction[1])-Math.atan2(r.direction[0],r.direction[1]),-Math.PI,Math.PI)),m=0;if(Math.abs(p-Math.PI)<1e-10){var f,_;"latlong"==e.env.coordinatesOrder?(f=[90*s.direction[0],s.point[1]],_=[90*s.direction[0],r.point[1]]):(f=[s.point[0],90*s.direction[1]],_=[r.point[0],90*s.direction[1]]),g.push(f,_,r.point)}else if(p>h)if(c=Math.ceil(p/h),c<d/h){l=(i-n)/c;for(var M=1;M<=c;M++)g.push(t(n+l*M).point)}else l=(i-n)/2,m=n+l,u=t(m),g=g.concat(a(t,n,m,s,u)),g=g.concat(a(t,m,i,u,r));else g.push(r.point);return g}n.add("LineString",s),t(s)})}],[",K",function(e){e.modules.define("geometry.component.pixelGeometryGeodesic.polygon",["geometry.component.pixelGeometryGeodesic.lineString","geometry.component.pixelGeometryGeodesic.storage","geometry.pixel.LineString"],function(e,t,n,i){function o(e,t){for(var n,i=e.getCoordinates(),o=e.getMetaData().originalIndexes||[],a={pixelPaths:[],indexes:[]},l=0,c=i.length;l<c;l++)n=s(new r(i[l],{originalIndexes:o[l]||[]}),t),a.pixelPaths.push(n.getCoordinates()),a.indexes.push(n.getMetaData().originalIndexes);return e.clone(a.pixelPaths,null,{originalIndexes:a.indexes})}var s=t,r=i;n.add("Polygon",o),e(o)})}],[",L",function(e){e.modules.define("geometry.component.pixelGeometryGeodesic.rectangle",["geometry.component.pixelGeometryGeodesic.lineString","geometry.component.pixelGeometryGeodesic.storage","geometry.pixel.LineString","geometry.pixel.Polygon"],function(e,t,n,i,o){function s(e,n){var s=e.getBounds(),r=new i([s[0],[s[1][0],s[0][1]],s[1],[s[0][0],s[1][1]],s[0]]),a=t(r,n);return new o([a.getCoordinates()])}n.add("Rectangle",s),e(s)})}],[",M",function(e){e.modules.define("geometry.component.pixelGeometryGeodesic.storage",["util.Storage"],function(e,t){e(new t)})}],["$q",function(e){e.modules.define("geometry.component.PixelGeometryShift",["util.pixelBounds","geometry.component.anchor"],function(e,t,n){function i(e,t,i,o,s,r){var a=n.getAnchor(e,t,r),l=a-e,c=s-(o+l),u=Math.ceil(i/r)||1,h=Math.round(c/(u*r)),d=Math.round(l/r);return h&&(d+=h*u),d}function o(e,t){for(var n,i=1/0,o=0;o<4;++o){var s=[t[0]-e[o][0],t[1]-e[o][1]],r=s[0]*s[0]+s[1]*s[1];r<i&&(i=r,n=o)}return n}var s=function(){};s.prototype={calculateShift:function(e,n,s){var r=e.getBounds(),a=n.isCycled(),l=[0,0];if(r&&(a[0]||a[1])){var c=t.getCenter(r),u=t.getSize(r),h=s.getGlobalPixelCenter(),d=h,g=c,p=Math.pow(2,8+s.getZoom());if(this.lastPosition&&(u[0]>0||u[1]>0)){var m=[[r[0][0]+this.lastPosition[0]*p,r[0][1]+this.lastPosition[1]*p],[r[1][0]+this.lastPosition[0]*p,r[1][1]+this.lastPosition[1]*p]],f=[[m[0][0],m[0][1]],[m[1][0],m[0][1]],[m[1][0],m[1][1]],[m[0][0],m[1][1]]],_=[[r[0][0],r[0][1]],[r[1][0],r[0][1]],[r[1][0],r[1][1]],[r[0][0],r[1][1]]],M=o(f,h);d=f[M],g=_[M]}l=[a[0]?i(g[0],d[0],u[0],c[0],h[0],p):0,a[1]?i(g[1],d[1],u[1],c[1],h[1],p):0]}return this.lastPosition=l,l}},e(s)})}],[",N",function(e){e.modules.define("geometry.component.pixelGeometrySimplification.lineString",["graphics.generator.simplify2","geometry.component.pixelGeometrySimplification.storage"],function(e,t,n){var i={prepare:function(e){var n=e.getCoordinates(),i=e.getMetaData().originalIndexes||[];return e.clone(null,{simplificatorCache:t(n,i)})},apply:function(e,t,n){var i=e.getMetaData(),o=i.simplificatorCache,s=t.simplification||1,r=1/Math.pow(2,n+(s===!0?1:s)),a=o(r);return e.clone(a.points,null,{originalIndexes:a.indexes})}};n.add("LineString",i),e(i)})}],[",O",function(e){e.modules.define("geometry.component.pixelGeometrySimplification.polygon",["graphics.generator.simplify2","geometry.component.pixelGeometrySimplification.storage"],function(e,t,n){var i={prepare:function(e,n){for(var i=e.getCoordinates(),o=[],s=e.getMetaData().originalIndexes||[],r=n.simplificationFixedPoints||[],a=0,l=i.length;a<l;a++)o[a]=t(i[a],s[a],r[a]);return e.clone(null,null,{simplificatorCache:o})},apply:function(e,t,n){for(var i=e.getMetaData(),o=i.simplificatorCache||[],s=t.simplification||1,r=1/Math.pow(2,n+(s===!0?1:s)),a=[],l=[],c=0,u=o.length;c<u;c++){var h=o[c](r);a[c]=h.points,l[c]=h.indexes}return e.clone(a,null,{originalIndexes:l})}};n.add("Polygon",i),e(i)})}],[",P",function(e){e.modules.define("geometry.component.pixelGeometrySimplification.storage",["util.Storage"],function(e,t){e(new t)})}],["$i",function(e){e.modules.define("geometry.component.pixelGetClosest",[],function(e){e(function(e,t){var n=e.getMap();if("undefined"==typeof n)throw new Error("geometry.component.pixelGetClosest: Для нахождения ближайшей точки геометрия должна быть добавлена на карту.");for(var i=e.getPixelGeometry({simplification:!1,pixelRendering:"static",geodesic:e.options.get("geodesic")}),o=256*Math.pow(2,n.getZoom()),s=e.options.get("projection"),r=s.isCycled(),a=s.toGlobalPixels(t,n.getZoom()),l=[[r[0]?-1:0,r[1]?-1:0],[r[0]?1:0,r[1]?1:0]],c=null,u=null,h=l[0][0];h<=l[1][0];h++)for(var d=l[0][1];d<=l[1][1];d++)u=i.getClosest([a[0]+h*o,a[1]+d*o]),(!c||u.distance<c.distance)&&(c=u);return c})})}],["$z",function(e){e.modules.define("geometry.component.pointInPolygon",[],function(e){function t(e,t){for(var i,o,s,r,a=t[t.length-1],l=0,c=t.length;l<c;l++)if(s=r,i=o||[e[0]-a[0],e[1]-a[1]],o=[e[0]-t[l][0],e[1]-t[l][1]],(i[0]!=o[0]||i[1]!=o[1])&&(r=n(i,o),r!=s&&"undefined"!=typeof s))return!1;return!0}function n(e,t){return e[0]*t[1]-e[1]*t[0]>0}function i(e,t,n){for(var i=0,o=0,s=t.length;o<s;o++)if(t[o][0]==e[0]&&t[o][1]==e[1])return 1;var r=t[s-1];for(o=0;o<s;o++){var a=t[o];if(r[1]==a[1]&&r[1]==e[1]&&e[0]>Math.min(r[0],a[0])&&e[0]<Math.max(r[0],a[0]))return 1;if(e[1]>Math.min(r[1],a[1])&&e[1]<=Math.max(r[1],a[1])&&e[0]<=Math.max(r[0],a[0])&&r[1]!=a[1]){var l=(e[1]-r[1])*(a[0]-r[0])/(a[1]-r[1])+r[0];if(l==e[0])return 1;(r[0]==a[0]||e[0]<=l)&&(i+=n?a[1]-r[1]<0?-1:1:i?-1:1)}r=a}return i}e(function(e,n,o,s){for(var r=!1,a=s?t:i,l="nonZero"==o,c=0,u=n.length;c<u&&!(a(e,n[c],l)&&(r=!r,r&&l));c++);return r})})}],["@2",function(e){e.modules.define("geometry.component.renderFlow.stageGeodesic",["geometry.component.pixelGeometryGeodesic.storage"],function(t,n){t(function(t,i){if(!i.geodesic)return t;if(!this._geodesic&&(this._geodesic=n.get(t.getType()),e.env.debug&&!this._geodesic))throw new Error("geometry.component.renderFlow.stageGeodesic: Не найден перобразователь для геометрии "+t.getType());return this._geodesic(t,i.projection)})})}],["@3",function(e){e.modules.define("geometry.component.renderFlow.stageScale",[],function(e){e({onActionEnd:function(e){return e.get("target").getZoom()!=this._lastZoom},apply:function(e,t,n){var i=this.getMap().getZoom(),o=e;return i>0&&(o=e.scale(Math.pow(2,i))),n||(this._lastZoom=i),o}})})}],["@4",function(e){e.modules.define("geometry.component.renderFlow.stageShift",["geometry.component.PixelGeometryShift"],function(e,t){function n(e,n){return this._shiftCalculator=this._shiftCalculator||new t,this._shiftCalculator.calculateShift(e,n,this.getMap())}e({onActionEnd:function(e,t,i){if("static"==i.pixelRendering)return!1;var o=this._tmpShift=n.call(this,t,i.projection);return o[0]!=this._lastShift[0]||o[1]!=this._lastShift[1]},apply:function(e,t,i){var o=[0,0],s=e;if("static"!=t.pixelRendering&&(o=this._tmpShift,o&&!i||(o=n.call(this,e,t.projection)),this._tmpShift=null,o[0]||o[1])){var r=Math.pow(2,8+this.getMap().getZoom());s=e.shift([o[0]*r,o[1]*r])}return i||(this._lastShift=o),s}})})}],["@5",function(e){e.modules.define("geometry.component.renderFlow.stageSimplification",["geometry.component.pixelGeometrySimplification.storage"],function(t,n){function i(t,i){if(!i.simplification)return o;if(!t._simplificator&&(t._simplificator=n.get(t.getType()),e.env.debug&&!t._simplificator))throw new Error("geometry.component.renderFlow.stageSimplification: Не найден симплификатор для геометрии "+t.getType());return t._simplificator}t({prepare:function(e,t){return i(e,t).prepare(e,t)},apply:function(e,t){return i(e,t).apply(e,t,this.getMap().getZoom())}});var o={prepare:function(e){return e},apply:function(e){return e}}})}],["$Q",function(e){e.modules.define("geometry.component.renderFlowManager",["util.id","option.Manager"],function(e,t,n){var i={},o={},s={add:function(e,n,i,r){var a={geometry:e,pixelGeometryChangeCallback:r,ignoreCacheFrom:0,optionsByStage:{},observingOptions:{},stages:[],cache:[],removed:!1};o[t.get(e)]=a,e.events.add("optionschange",s._onOptionsChange);for(var l=0,c=n.length;l<c;l++){var u=n[l],h=u.options,d=u.event;if(a.stages.push(u.stage),h){for(var g=0,p=h.length;g<p;g++){var m=h[g];s._parseOption(a,m,i[m],l)}a.optionsByStage[l]=h}d&&s._setupEvent(a,d,l)}s._run(a)},remove:function(e,n){var i=o[t.get(e)];i.removed=!0,o[t.get(e)]=null,e.events.remove("optionschange",s._onOptionsChange);for(var r=0,a=n.length;r<a;r++){var l=n[r].event;l&&s._clearEvent(i,l)}},getPixelGeometry:function(e,i){var r=o[t.get(e)],a=r?r.pixelGeometry:null;return"object"==typeof i&&(r.tmpOptions=new n(i,r.geometry.options),s._useChangedOptions(e,r.tmpOptions)&&(a=s._run(r)),r.tmpOptions.setParent(null),r.tmpOptions=null),a},_onOptionsChange:function(e){var n=e.get("target");s._useChangedOptions(n)&&s._runAndFire(o[t.get(n)])},_useChangedOptions:function(e,n){n=n||e.options;var i=o[t.get(e)],r=i.observingOptions,a=!1;for(var l in r)if(r.hasOwnProperty(l)){var c=r[l],u=n.get(l,c.defaultValue);c.cached!=u&&(i.tmpOptions||(c.cached=u),s._setIgnoreCacheFrom(i,c.affectsStage),a=!0)}return a},_parseOption:function(e,t,n,i){e.observingOptions[t]?e.observingOptions[t].affectsStage>i&&(e.observingOptions[t].affectsStage=i):e.observingOptions[t]={cached:e.geometry.options.get(t,n),defaultValue:n,affectsStage:i}},_run:function(e){for(var t=e.ignoreCacheFrom,n=e.stages,i=e.geometry,o=e.cache,r=[],a=0,l=n.length;a<l;a++)r[a]=o[a]&&a<t?o[a]:n[a].call(i,r[a-1],s._getAffectingOptions(e,a),e.tmpOptions);return e.tmpOptions||(e.cache=r,e.pixelGeometry=r[l-1]),e.ignoreCacheFrom=l,r[a-1]},_setupEvent:function(e,n,o){var r="map"==n.target?e.geometry.getMap():e.geometry,a=n.event,l={callback:n.callback,geometry:e.geometry,phase:o},c=t.get(r)+a;i[c]?i[c].push(l):(i[c]=[l],r.events.add(a,s._eventHandler))},_clearEvent:function(e,n){var o="map"==n.target?e.geometry.getMap():e.geometry,r=t.get(o)+n.event,a=i[r],l=a.length;if(a){for(var c=-1,u=0;u<l;u++){var h=a[u];if(h.geometry==e.geometry){c=u;break}}c>-1&&(1==l?(a.pop(),o.events.remove(n.event,s._eventHandler),delete i[r]):a.splice(c,1))}},_eventHandler:function(e){var n,r,a=e.get("target"),l=t.get(a)+e.get("type"),c=i[l],u=[];if(c)for(n=0,r=c.length;n<r;n++){var h=c[n],d=h.geometry,g=o[t.get(d)],p=h.phase;g.updating||h.callback&&!h.callback.call(d,e,g.cache[p-1],s._getAffectingOptions(g,p))||(s._setIgnoreCacheFrom(g,p),g.updating||(g.updating=1,u.push(g)))}for(n=0,r=u.length;n<r;++n)u[n].removed||(u[n].updating=0,s._runAndFire(u[n]))},_setIgnoreCacheFrom:function(e,t){e.ignoreCacheFrom>t&&(e.ignoreCacheFrom=t)},_runAndFire:function(e){s._run(e),e.pixelGeometryChangeCallback.call(e.geometry,e.pixelGeometry)},_getAffectingOptions:function(e,t){var n={},i=e.optionsByStage[t];if(i)for(var o=0,s=i.length;o<s;o++){var r=i[o];n[r]=e.tmpOptions?e.tmpOptions.get(r,e.observingOptions[r].defaultValue):e.observingOptions[r].cached}return n}};e(s)})}],["$I",function(e){e.modules.define("geometry.component.ShortestPath",["geometry.component.anchor","util.math.cycleRestrict"],function(e,t,n){var i=function(){this.basePoint=null,this.baseWorld=null};i.prototype={reset:function(){this.basePoint=null,this.baseWorld=null},calculate:function(e,i,o){o=o||{};for(var s,r,a=[],l=[0,0],c=this.baseWorld,u=this.basePoint,h=o.worldSize||256,d=0,g=e.length;d<g;++d)r=o.unbounded?e[d]:[i[0]?n(e[d][0],0,h):e[d][0],i[1]?n(e[d][1],0,h):e[d][1]],s=[r[0],r[1]],u&&(l=[i[0]?c[0]+t.getShortestPathWorld(s[0],u[0],h):0,i[1]?c[1]+t.getShortestPathWorld(s[1],u[1],h):0],l[0]&&(s[0]+=l[0]*h),l[1]&&(s[1]+=l[1]*h)),a[d]=s,u=r,c=l;return this.basePoint=u,this.baseWorld=c,a}},e(i)})}],["-b",function(e){e.modules.define("geometry.defaultOptions",["projection.wgs84Mercator"],function(e,t){e({projection:t,coordRendering:"shortestPath",geodesic:!1,simplification:!0,pixelRendering:"jumpy"})})}],["-c",function(e){e.modules.define("geometry.LineString",["util.defineClass","util.coordinates.encode","util.coordinates.decode","option.Manager","geometry.base.LineString","geometry.pixel.LineString","geometry.component.renderFlowManager","geometry.component.renderFlow.stageGeodesic","geometry.component.renderFlow.stageScale","geometry.component.renderFlow.stageSimplification","geometry.component.renderFlow.stageShift","geometry.component.pixelGeometryGeodesic.lineString","geometry.component.pixelGeometrySimplification.lineString","geometry.component.ShortestPath","geometry.component.boundsFromPixels","geometry.component.pixelGetClosest","geometry.defaultOptions","util.matrix.2d","Event"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y){function j(){this.events.fire("optionschange")}function b(e){this._bounds=null,this.events.fire("pixelgeometrychange",new y({pixelGeometry:e,type:"pixelgeometrychange",target:this}))}function I(t,n){if(e.env.debug&&!n.projection)throw new Error("geometry.LineString._renderingStageBasePixels: значение опции projection не определено");var i;if("straightPath"==n.coordRendering)i=C(t,n.projection);else if("shortestPath"==n.coordRendering)i=L(t,n.projection);else if(e.env.debug)throw new Error("geometry.LineString._renderingStageBasePixels: неизвестное значение опции coordRendering");return new a(i)}function L(e,t){return(new m).calculate(C(e,t),t.isCycled())}function C(e,t){for(var n=[],i=0,o=e.length;i<o;++i)n[i]=t.toGlobalPixels(e[i],0);return n}var x=function(e,t){x.superclass.constructor.call(this,e),this.options=new s(t),this.options.events.add("change",j,this)};x.fromEncodedCoordinates=function(e,t){return new x(o(e),t)},x.toEncodedCoordinates=function(t){if(e.env.debug&&"LineString"!=t.getType())throw new Error("geometry.LineString.toEncodedCoordinates: неверный тип геометрии: "+t.getType());return i(t.getCoordinates())},n(x,r,{getBounds:function(){return this._bounds||(this._bounds=f.get(this))},getPixelGeometry:function(t){if(e.env.debug&&!this._map)throw new Error("geometry.main.LineString.getPixelGeometry: Не задана карта.");return this._map?l.getPixelGeometry(this,t):null},setMap:function(e){var t=this._map;t&&this._clearRenderFlow(),this._map=e,e&&this._setupRenderFlow(),this.events.fire("mapchange",new y({newMap:this._map,oldMap:t,target:this,type:"mapchange"}))},getMap:function(){return this._map},getClosest:function(t){var n=_(this,t),i=this.options.get("projection");if(e.env.debug&&"object"!=typeof i)throw new Error("geometry.LineString.getClosest: В опциях геометрии не определена проекция.");return n&&(n.position=i.fromGlobalPixels(n.position,this._map.getZoom()),
n.distance=i.getCoordSystem().getDistance(t,n.position)),n},getDistance:function(t,n){if(t=t||0,n=n||this.getLength()-1,e.env.debug){if(!this.getMap())throw new Error("geometry.LineString: геометрия должна быть добавлена на карту.");if(t<0||n>this.getLength()-1)throw new Error("geometry.LineString: выход за пределы массива точек")}for(var i=this.getMap().options.get("projection").getCoordSystem(),o=this.getCoordinates(),s=0,r=t;r<n;r++)s+=i.getDistance(o[r],o[r+1]);return s},applyProjectedTransformation:function(e){var t=this.options.get("projection"),n=this.getMap().action.getCurrentState().zoom,i=Math.pow(2,n),o=this.options.get("coordRendering"),s=this.getCoordinates(),r=[],a=[];r="shortestPath"==o?L(s,t):C(s,t),"function"==typeof e&&(e=e({type:"LineString",pixels:r}));for(var l=0,c=r.length;l<c;l++){var u=[r[l][0]*i,r[l][1]*i];e&&v.applyToPoint(u,u,e),a[l]=t.fromGlobalPixels(u,n)}this.setCoordinates(a)},_setupRenderFlow:function(){w[0].stage=this.getCoordinates,l.add(this,w,M,b)},_clearRenderFlow:function(){l.remove(this,w)}});var w=[{stage:null,event:{target:"self",event:"change"}},{stage:I,options:["projection","coordRendering"]},{stage:c,options:["projection","geodesic"]},{stage:h.prepare,options:["simplification"]},{stage:h.apply,options:["simplification"],event:{target:"map",event:"actionend",callback:u.onActionEnd}},{stage:u.apply,event:{target:"map",event:"actionend",callback:u.onActionEnd}},{stage:d.apply,options:["projection","pixelRendering"],event:{target:"map",event:"actionend",callback:d.onActionEnd}}];t(x)})}],["-m",function(e){e.modules.define("geometry.pixel.Circle",["util.extend","geometry.component.commonMethods.circle"],function(e,t,n){var i=function(e,t,n){this._coordinates=e||null,this._radius=t||null,this._metaData=n||{},this._bounds=null};i.prototype={getType:function(){return"Circle"},getCoordinates:function(){return this._coordinates},getCenter:function(){return this._coordinates},getMetaData:function(){return this._metaData},getRadius:function(){return this._radius},getBounds:function(){return this._bounds||(this._bounds=this._calculateBounds())},clone:function(e,n,o){return new i(e||this._coordinates,n||this._radius,o?t({},this._metaData,o):this._metaData)},scale:function(e){return this.clone(this._coordinates?[this._coordinates[0]*e,this._coordinates[1]*e]:null,this._radius?this._radius*e:null)},shift:function(e){return this.clone(this._coordinates?[this._coordinates[0]+e[0],this._coordinates[1]+e[1]]:null)},contains:function(e){return n.contains(this._coordinates,this._radius,e)},getClosest:function(e){return n.getClosest(this._coordinates,this._radius,e)},equals:function(e){if(this.getType()!=e.getType()||this._radius!=e.getRadius())return!1;var t=e.getCoordinates();return this._coordinates&&t?this._coordinates[0]==t[0]&&this._coordinates[1]==t[1]:this._coordinates==t},_calculateBounds:function(){return n.calculateBounds(this._coordinates,this._radius)}},e(i)})}],["-n",function(e){e.modules.define("geometry.pixel.LineString",["util.extend","util.pixelBounds","geometry.component.findClosestPathPosition","util.math.areEqualPaths"],function(e,t,n,i,o){var s=function(e,t){this._coordinates=e,this._metaData=t||{},this._bounds=null};s.prototype={getType:function(){return"LineString"},getCoordinates:function(){return this._coordinates},getMetaData:function(){return this._metaData},getLength:function(){return this._coordinates.length},getBounds:function(){return this._coordinates?this._bounds||(this._bounds=n.fromPoints(this._coordinates)):null},getClosest:function(e){return i(this._coordinates,e)},clone:function(e,n){return new s(e||this._coordinates,n?t({},this._metaData,n):this._metaData)},scale:function(e){for(var t=[],n=0,i=this._coordinates.length;n<i;n++){var o=this._coordinates[n];t[n]=[o[0]*e,o[1]*e]}return this.clone(t)},shift:function(e){for(var t=[],n=0,i=this._coordinates.length;n<i;n++){var o=this._coordinates[n];t[n]=[o[0]+e[0],o[1]+e[1]]}return this.clone(t)},equals:function(e){return this.getType()==e.getType()&&o(this._coordinates,e.getCoordinates(),0)}},e(s)})}],["-p",function(e){e.modules.define("geometry.pixel.MultiPolygon",["util.extend","geometry.pixel.Polygon","util.pixelBounds","util.math.areEqualPaths"],function(e,t,n,i,o){var s=function(e,t,n){this._coordinates=e,this._fillRule=t,this._convex=n&&n.convex,this._metaData=n||{},this._polygons=null,this._bounds=null};s.prototype={getType:function(){return"MultiPolygon"},getCoordinates:function(){return this._coordinates},getMetaData:function(){return this._metaData},getFillRule:function(){return this._fillRule},getBounds:function(){if(!this._bounds){this._polygons||this._createPolygons();for(var e=[],t=0,n=this._polygons.length;t<n;t++){var o=this._polygons[t].getBounds();o&&e.push(o)}e.length&&(this._bounds=i.fromBounds(e))}return this._bounds},contains:function(e){this._polygons||this._createPolygons();for(var t=0,n=this._polygons.length;t<n;t++)if(this._polygons[t].contains(e))return!0;return!1},getClosest:function(e){this._polygons||this._createPolygons();for(var t=null,n=0,i=this._coordinates.length;n<i;n++){var o=this._polygons[n].getClosest(e);o&&(!t||o.distance<t.distance)&&(t=o,t.polygonIndex=n)}return t},clone:function(e,n,i){return new s(e||this._coordinates,n||this._fillRule,i?t({},this._metaData,i):this._metaData)},scale:function(e){for(var t=[],n=0,i=this._coordinates.length;n<i;n++){t[n]=[];for(var o,s=0,r=this._coordinates[n].length;s<r;s++){t[n][s]=o=[];for(var a=0,l=this._coordinates[n][s].length,c=this._coordinates[n][s];a<l;a++)o[a]=[c[a][0]*e,c[a][1]*e]}}return this.clone(t)},shift:function(e){for(var t=[],n=0,i=this._coordinates.length;n<i;n++){t[n]=[];for(var o,s=0,r=this._coordinates[n].length;s<r;s++){t[n][s]=o=[];for(var a=0,l=this._coordinates[n][s].length,c=this._coordinates[n][s];a<l;a++)o[a]=[c[a][0]+e[0],c[a][1]+e[1]]}}return this.clone(t)},equals:function(e){return this.getType()==e.getType()&&this._fillRule==e.getFillRule()&&o(this._coordinates,e.getCoordinates(),2)},_createPolygons:function(){this._polygons=[];for(var e=0,t=this._coordinates.length;e<t;e++)this._polygons.push(new n(this._coordinates[e],this._fillRule,{convex:this._convex}))}},e(s)})}],["-r",function(e){e.modules.define("geometry.pixel.Point",["util.extend"],function(e,t){var n=function(e,t){this._position=e||null,this._metaData=t||{},this._bounds=null};n.prototype={getType:function(){return"Point"},getCoordinates:function(){return this._position},getMetaData:function(){return this._metaData},getBounds:function(){return this._position?this._bounds||(this._bounds=[this._position.slice(),this._position.slice()]):null},clone:function(e,i){return new n(e||this._position,i?t({},this._metaData,i):this._metaData)},scale:function(e){return this.clone(this._position?[this._position[0]*e,this._position[1]*e]:null)},shift:function(e){return this.clone(this._position?[this._position[0]+e[0],this._position[1]+e[1]]:null)},equals:function(e){if(this.getType()!=e.getType())return!1;var t=e.getCoordinates();return this._coordinates&&t?this._coordinates[0]==t[0]&&this._coordinates[1]==t[1]:this._coordinates==t}},e(n)})}],["-s",function(e){e.modules.define("geometry.pixel.Polygon",["util.extend","geometry.component.commonMethods.polygon","util.math.areEqualPaths"],function(e,t,n,i){var o=function(e,t,n){this._coordinates=e,this._fillRule=t,this._convex=n&&n.convex,this._metaData=n||{},this._bounds=null};o.prototype={getType:function(){return"Polygon"},getCoordinates:function(){return this._coordinates},getMetaData:function(){return this._metaData},getFillRule:function(){return this._fillRule},getLength:function(){return this._coordinates.length},getBounds:function(){return this._bounds||(this._bounds=n.calculateBounds(this._coordinates))},contains:function(e){return n.contains(this._coordinates,e,this._fillRule)},getClosest:function(e){return n.getClosest(this._coordinates,e)},clone:function(e,n,i){return new o(e||this._coordinates,n||this._fillRule,i?t({},this._metaData,i):this._metaData)},scale:function(e){for(var t,n=[],i=0,o=this._coordinates.length;i<o;i++){n[i]=t=[];for(var s=0,r=this._coordinates[i].length,a=this._coordinates[i];s<r;s++)t[s]=[a[s][0]*e,a[s][1]*e]}return this.clone(n)},shift:function(e){for(var t,n=[],i=0,o=this._coordinates.length;i<o;i++){n[i]=t=[];for(var s=0,r=this._coordinates[i].length,a=this._coordinates[i];s<r;s++)t[s]=[a[s][0]+e[0],a[s][1]+e[1]]}return this.clone(n)},equals:function(e){return this.getType()==e.getType()&&this._fillRule==e.getFillRule()&&i(this._coordinates,e.getCoordinates(),1)}},e(o)})}],["-u",function(e){e.modules.define("geometry.pixel.Rectangle",["util.extend","geometry.component.commonMethods.rectangle"],function(e,t,n){var i=n,o=function(e,t){this._coordinates=e||null,this._metaData=t||{},this._bounds=null};o.prototype={getType:function(){return"Rectangle"},getCoordinates:function(){return this._coordinates},getMetaData:function(){return this._metaData},getBounds:function(){return this._bounds||(this._bounds=i.calculateBounds(this._coordinates))},clone:function(e,n){return new o(e||this._coordinates,n?t({},this._metaData,n):this._metaData)},scale:function(e){return this.clone(this._coordinates?[[this._coordinates[0][0]*e,this._coordinates[0][1]*e],[this._coordinates[1][0]*e,this._coordinates[1][1]*e]]:null)},shift:function(e){return this.clone(this._coordinates?[[this._coordinates[0][0]+e[0],this._coordinates[0][1]+e[1]],[this._coordinates[1][0]+e[0],this._coordinates[1][1]+e[1]]]:null)},getClosest:function(e){return i.getClosest(this._coordinates,e)},contains:function(e){return i.contains(this._coordinates,e)},equals:function(e){if(this.getType()!=e.getType())return!1;var t=this._coordinates,n=e.getCoordinates();return t&&n?t[0][0]==n[0][0]&&t[0][1]==n[0][1]&&t[1][0]==n[1][0]&&t[1][1]==n[1][1]:t==n}},e(o)})}],["-e",function(e){e.modules.define("geometry.Point",["util.defineClass","option.Manager","geometry.base.Point","geometry.pixel.Point","geometry.component.renderFlowManager","geometry.component.renderFlow.stageScale","geometry.component.renderFlow.stageShift","Event","util.matrix.2d","geometry.defaultOptions"],function(t,n,i,o,s,r,a,l,c,u,h){function d(){this.events.fire("optionschange",new c({type:"optionschange",target:this}))}function g(e){this.events.fire("pixelgeometrychange",new c({pixelGeometry:e,type:"pixelgeometrychange",target:this}))}function p(t,n){if(e.env.debug&&!n.projection)throw new Error("geometry.Point._renderingStageBasePixels: значение опции projection не определено");return new s(t?n.projection.toGlobalPixels(t,0):null)}var m=function(e,t){m.superclass.constructor.call(this,e),this.options=new i(t),this.options.events.add("change",d,this)};n(m,o,{getPixelGeometry:function(t){if(e.env.debug&&!this._map)throw new Error("geometry.main.Point.getPixelGeometry: Не задана карта.");return this._map?r.getPixelGeometry(this,t):null},setMap:function(e){var t=this._map;t&&this._clearRenderFlow(),this._map=e,e&&this._setupRenderFlow(),this.events.fire("mapchange",new c({newMap:this._map,oldMap:t,target:this,type:"mapchange"}))},getMap:function(){return this._map},applyProjectedTransformation:function(e){var t=this.options.get("projection"),n=this.getMap().action.getCurrentState().zoom,i=t.toGlobalPixels(this.getCoordinates(),n);"function"==typeof e&&(e=e({type:"Point",pixels:i})),e&&u.applyToPoint(i,i,e),this.setCoordinates(t.fromGlobalPixels(i,n))},_setupRenderFlow:function(){var e=f;e[0].stage=this.getCoordinates,r.add(this,e,h,g)},_clearRenderFlow:function(){r.remove(this,f)}});var f=[{stage:null,event:{target:"self",event:"change"}},{stage:p,options:["projection"]},{stage:a.apply,event:{target:"map",event:"actionend",callback:a.onActionEnd}},{stage:l.apply,options:["projection","pixelRendering"],event:{target:"map",event:"actionend",callback:l.onActionEnd}}];t(m)})}],["-f",function(e){e.modules.define("geometry.Polygon",["util.defineClass","util.coordinates.encode","geometry.component.closedPathDecode","option.Manager","geometry.base.Polygon","geometry.pixel.Polygon","geometry.component.renderFlowManager","geometry.component.renderFlow.stageGeodesic","geometry.component.pixelGeometryGeodesic.polygon","geometry.component.renderFlow.stageShift","geometry.component.renderFlow.stageSimplification","geometry.component.pixelGeometrySimplification.polygon","geometry.component.renderFlow.stageScale","geometry.component.ShortestPath","geometry.defaultOptions","geometry.component.boundsFromPixels","geometry.component.pixelGetClosest","geometry.component.pixelContains","util.matrix.2d","Event"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j){function b(){this.events.fire("optionschange")}function I(e){this._bounds=null,this.events.fire("pixelgeometrychange",new j({pixelGeometry:e,type:"pixelgeometrychange",target:this}))}function L(t,n){if(e.env.debug&&!n.projection)throw new Error("geometry.Polygon._renderingStageBasePixels: значение опции projection не определено");var i;if("straightPath"==n.coordRendering)i=x(t,n.projection);else if("shortestPath"==n.coordRendering)i=C(t,n.projection);else if(e.env.debug)throw new Error("geometry.Polygon._renderingStageBasePixels: неизвестное значение опции coordRendering");return new a(i,this.getFillRule())}function C(e,t){for(var n=x(e,t),i=new m,o=0,s=e.length;o<s;o++)n[o]=i.calculate(n[o],t.isCycled());return n}function x(e,t){for(var n,i=[],o=0,s=e.length;o<s;o++){i[o]=n=[];for(var r=0,a=e[o].length,l=e[o];r<a;r++)n[r]=t.toGlobalPixels(l[r],0)}return i}var w=function(e,t,n){w.superclass.constructor.call(this,e,t),this.options=new s(n),this.options.events.add("change",b,this)};w.fromEncodedCoordinates=function(e,t){for(var n=e.split(";"),i=[],s=0,r=n.length;s<r;s++)i.push(o(n[s]));return new w(i,t)},w.toEncodedCoordinates=function(t){if(e.env.debug&&"Polygon"!=t.getType())throw new Error("Неверный тип геометрии. Ожидался: Polygon, получен: "+t.getType());for(var n=[],o=0,s=t.getLength();o<s;o++)n.push(i(t.get(o)));return n.join(";")},n(w,r,{getBounds:function(){return this._bounds||(this._bounds=_.get(this))},getPixelGeometry:function(t){if(e.env.debug&&!this._map)throw new Error("geometry.main.Polygon.getPixelGeometry: Не задана карта.");return this._map?l.getPixelGeometry(this,t):null},setMap:function(e){var t=this._map;t&&this._clearRenderFlow(),this._map=e,e&&this._setupRenderFlow(),this.events.fire("mapchange",new j({newMap:this._map,oldMap:t,target:this,type:"mapchange"}))},getMap:function(){return this._map},contains:function(e){return v(this,e)},getClosest:function(t){var n=M(this,t),i=this.options.get("projection");if(e.env.debug&&"object"!=typeof i)throw new Error("geometry.Polygon.getClosest: В опциях геометрии не определена проекция.");return n&&(n.position=i.fromGlobalPixels(n.position,this._map.getZoom()),n.distance=i.getCoordSystem().getDistance(t,n.position)),n},applyProjectedTransformation:function(e){var t=this.options.get("projection"),n=this.getMap().action.getCurrentState().zoom,i=Math.pow(2,n),o=this.options.get("coordRendering"),s=this.getCoordinates(),r=[],a=[];r="shortestPath"==o?C(s,t):x(s,t);for(var l=0,c=r.length;l<c;l++)for(var u=r[l],h=0,d=u.length;h<d;h++)u[h]=[u[h][0]*i,u[h][1]*i];"function"==typeof e&&(e=e({type:"Polygon",pixels:r}));for(var l=0,c=r.length;l<c;l++){for(var u=r[l],g=[],h=0,d=u.length-1;h<d;h++){var p=u[h];e&&y.applyToPoint(p,p,e),g[h]=t.fromGlobalPixels(p,n)}a[l]=g}this.setCoordinates(a)},_setupRenderFlow:function(){l.add(this,N,f,I)},_clearRenderFlow:function(){l.remove(this,N)}});var N=[{stage:w.prototype.getCoordinates,event:{target:"self",event:"change"}},{stage:L,options:["projection","coordRendering"]},{stage:c,options:["projection","geodesic"]},{stage:d.prepare,options:["simplification","simplificationFixedPoints"]},{stage:d.apply,options:["simplification"],event:{target:"map",event:"actionend",callback:p.onActionEnd}},{stage:p.apply,event:{target:"map",event:"actionend",callback:p.onActionEnd}},{stage:h.apply,options:["projection","pixelRendering"],event:{target:"map",event:"actionend",callback:h.onActionEnd}}];t(w)})}],["-h",function(e){e.modules.define("geometry.Rectangle",["util.defineClass","option.Manager","geometry.base.Rectangle","geometry.pixel.Rectangle","geometry.component.renderFlowManager","geometry.component.renderFlow.stageGeodesic","geometry.component.pixelGeometryGeodesic.rectangle","geometry.component.renderFlow.stageScale","geometry.component.renderFlow.stageShift","geometry.component.ShortestPath","geometry.component.anchor","geometry.defaultOptions","geometry.component.boundsFromPixels","geometry.component.pixelGetClosest","geometry.component.pixelContains","util.matrix.2d","Event"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M){function v(){this.events.fire("optionschange")}function y(e){this._bounds=null,this.events.fire("pixelgeometrychange",new M({pixelGeometry:e,type:"pixelgeometrychange",target:this}))}function j(t,n){if(e.env.debug&&!n.projection)throw new Error("geometry.Rectangle._renderingStageBasePixels: значение опции projection не определено");if(!t)return new s;var i;if("straightPath"==n.coordRendering)i=I(t,n.projection,0);else if("shortestPath"==n.coordRendering)i=b(t,n.projection,0);else if("boundsPath"==n.coordRendering)i=L(t,n.projection,0);else if(e.env.debug)throw new Error("geometry.Rectangle.getPixelGeometry: неизвестное значение опции coordRendering");return new s(i)}function b(e,t,n){return(new h).calculate(I(e,t,n),t.isCycled())}function I(e,t,n){for(var i=[],o=0,s=e.length;o<s;++o)i[o]=t.toGlobalPixels(e[o],n);return i}function L(e,t,n){var i,o=I(e,t,n),s=256*Math.pow(2,n);return o[1][0]<o[0][0]&&(i=d.getAnchor(o[1][0],o[0][0],s),o[1][0]=i<o[0][0]?i+=s:i),o[1][1]>o[0][1]&&(i=d.getAnchor(o[1][1],o[0][1],s),o[1][1]=i>o[0][1]?i-=s:i),o}var C=function(e,t){C.superclass.constructor.call(this,e),this.options=new i(t),this.options.events.add("change",v,this)};n(C,o,{getBounds:function(){return this._bounds||(this._bounds=p.get(this))},getPixelGeometry:function(t){if(e.env.debug&&!this._map)throw new Error("geometry.main.Rectangle.getPixelGeometry: Не задана карта.");return this._map?r.getPixelGeometry(this,t):null},setMap:function(e){var t=this._map;t&&this._clearRenderFlow(),this._map=e,e&&this._setupRenderFlow(),this.events.fire("mapchange",new M({newMap:this._map,oldMap:t,type:"mapchange",target:this}))},getMap:function(){return this._map},contains:function(e){return f(this,e)},getClosest:function(t){var n=m(this,t),i=this.options.get("projection");if(e.env.debug&&"object"!=typeof i)throw new Error("geometry.Rectangle.getClosest: В опциях геометрии не определена проекция.");return n&&(n.position=i.fromGlobalPixels(n.position,this._map.getZoom()),n.distance=i.getCoordSystem().getDistance(t,n.position)),n},applyProjectedTransformation:function(e){var t=this.options.get("projection"),n=this.getMap().action.getCurrentState().zoom,i=Math.pow(2,n),o=this.options.get("coordRendering"),s=this.getCoordinates(),r=[];r="shortestPath"==o?b(s,t,0):I(s,t,0),r[0][0]*=i,r[0][1]*=i,r[1][0]*=i,r[1][1]*=i,"function"==typeof e&&(e=e({type:"Rectangle",pixels:r})),e&&(_.applyToPoint(r[0],r[0],e),_.applyToPoint(r[1],r[1],e)),this.setCoordinates([t.fromGlobalPixels(r[0],n),t.fromGlobalPixels(r[1],n)])},_setupRenderFlow:function(){var e=x;e[0].stage=this.getCoordinates,r.add(this,e,g,y)},_clearRenderFlow:function(){r.remove(this,x)}});var x=[{stage:null,event:{target:"self",event:"change"}},{stage:j,options:["projection","coordRendering"]},{stage:a,options:["projection","geodesic"]},{stage:c.apply,event:{target:"map",event:"actionend",callback:c.onActionEnd}},{stage:u.apply,options:["projection","pixelRendering"],event:{target:"map",event:"actionend",callback:u.onActionEnd}}];t(C)})}],[",R",function(e){e.modules.define("geometryEditor.Base",["util.defineClass","event.Manager","data.Manager","option.Manager","geometryEditor.options.mapper","Monitor","util.objectKeys","util.cancelableCallback","vow","geometryEditor.Frame","theme.islands.geometryEditor.meta"],function(t,n,i,o,s,r,a,l,c,u,h){function d(e,t){this.geometry=e,this.options=new s(t,null,"editor",r),this.state=new o(this.initialState),this.events=new i({context:this}),this._viewDeferred=null,this._modelDeferred=null,this._editingDeferred=null,this._drawingDeferred=null,this._stateEventData={},this._stateEventMonitor=new a(this.state),this._stateEventMonitor.add(l(this.initialState),y,this),this.state.events.add("change",v,this),this.options.events.add("change",M,this),this._stateActionMonitor=new a(this.state),this._stateActionMonitor.add("drawing",f,this).add("editing",g,this).add("framing",_,this)}function g(t,n){if(t){if(e.env.debug&&!this.geometry.getMap())throw new Error("geometryEditor.Base: геометрия не имеет ссылки на карту.");this.state.get("framing")&&this.state.set("framing",!1),this._modelDeferred=u.defer(),this._viewDeferred=u.defer(),this._loadModulesCallback=c.create(p,this),this.getModelClass().done(this._loadModulesCallback)}else this.state.get("drawing",!1)&&this.state.set("drawing",!1),null!=this._model&&(this._model.destroy(),this._model=null),null!=this._view&&(this._view.destroy(),this._view=null),this._loadModulesCallback?(this._loadModulesCallback.cancel(),this._loadModulesCallback=null,this._modelDeferred.reject(d.EditorCanceledError()),this._viewDeferred.reject(d.EditorCanceledError()),this._editingDeferred&&this._editingDeferred.reject(d.EditorCanceledError())):this.events.fire("editingstop"),this._viewDeferred=null,this._modelDeferred=null,this._editingDeferred=null}function p(e){this._model=new e(this.geometry,this),this._modelDeferred.resolve(this._model),this._loadModulesCallback=c.create(m,this),u.all({viewClass:this.getViewClass(this._model),controllerClass:this.getControllerClass()}).done(this._loadModulesCallback)}function m(e){this._loadModulesCallback=null,this._view=new e.viewClass(this._model,this),this._view.setController(new e.controllerClass),this._viewDeferred.resolve(this._view),this._editingDeferred||(this._editingDeferred=u.defer()),this._editingDeferred.resolve(),this._drawingDeferred||(this._drawingDeferred=u.defer()),this._drawingDeferred.resolve(),this.events.fire("editingstart"),this.state.get("drawing",!1)&&this.events.fire("drawingstart")}function f(e,t){e?(this.state.get("framing")&&this.state.set("framing",!1),this.state.get("editing")||this.state.set("editing",!0),null==this._loadModulesCallback&&this.events.fire("drawingstart")):null==this._loadModulesCallback?this.events.fire("drawingstop"):(this._drawingDeferred&&this._drawingDeferred.reject(d.EditorCanceledError()),this._drawingDeferred=null)}function _(e){e?(this.state.get("editing")&&this.state.set("editing",!1),this._frameEditor=new h(this.geometry,this),this.events.fire("framingstart")):this._frameEditor&&(this._frameEditor.stop(),this.events.fire("framingstop"))}function M(){this.events.fire("optionschange")}function v(){var e=this._stateEventData;this._stateEventData={},this.events.fire("statechange",e)}function y(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=j(n,"old"),o=j(n,"new");"undefined"==typeof this._stateEventData[i]&&(this._stateEventData[i]=t[n]),this._stateEventData[o]=e[n]}}function j(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}d.EditorCanceledError=function(){return new Error("Canceled")},d.EditorWasNotStartedError=function(){return new Error("Editor wasn't started")},n(d,{initialState:{drawing:!1,editing:!1,framing:!1},getModel:function(){return this._modelDeferred?this._modelDeferred.promise():u.reject(d.EditorWasNotStartedError())},getModelSync:function(){return this._model},getView:function(){return this._viewDeferred?this._viewDeferred.promise():u.reject(d.EditorWasNotStartedError())},getViewSync:function(){return this._view},startEditing:function(){return this.state.set("editing",!0),this._editingDeferred||(this._editingDeferred=u.defer()),this._editingDeferred.promise()},stopEditing:function(){this.state.set("editing",!1)},startDrawing:function(){return this.state.set("drawing",!0),this._drawingDeferred||(this._drawingDeferred=u.defer()),this._drawingDeferred.promise()},stopDrawing:function(){this.state.set("drawing",!1)},startFraming:function(){this.state.set("framing",!0)},stopFraming:function(){return this.state.set("framing",!1),u.resolve()},destroy:function(){this.state.set("editing",!1),this.state.set("framing",!1),this._stateActionMonitor.destroy(),this.options.events.remove("change",M,this),this.state.events.remove("change",v,this),this._stateEventMonitor.destroy()}}),t(d)})}],["-K",function(e){e.modules.define("geometryEditor.component.SubEntityManager",["util.defineClass","util.extend"],function(e,t,n){function i(e,t,i){this._callbacks=t,i="string"==typeof i?{keyFieldName:i}:i,this._params=n({},o,i),this._subEntities=this._buildSubEntities(e,null)}var o={keyFieldName:"",reuse:!1};t(i,{update:function(e){var t=this._buildSubEntities(e,this._subEntities),n=this._callbacks.change;t!=this._subEntities&&(this._subEntities=t,n&&n.callback.call(n.context))},getSubEntities:function(){return this._subEntities},destroy:function(){for(var e=this._callbacks.destroy,t=0,n=this._subEntities.length;t<n;t++){var i=this._subEntities[t];e&&e.callback.call(e.context,i)}},_buildSubEntities:function(e,t){var n=t?this._updateSubEntities(e,t):this._createSubEntities(e),i=this._callbacks.process;return i&&i.callback.call(i.context,n,e),n},_createSubEntities:function(e){for(var t=[],n=this._callbacks.create,i=0,o=e.length;i<o;i++){var s=n.callback.call(n.context,e[i],i,e);s&&t.push(s)}return t},_updateSubEntities:function(e,t){var n,i,o,s,r,a=t,l=this._callbacks.create,c=this._callbacks.found,u=this._callbacks.reuse,h=this._callbacks.compare,d=this._callbacks.destroy,g=0,p=[],m=[],f=!1,_=t.length;for(o=0,r=e.length;o<r;o++){var M=e[o];for(n=null,s=a==t?g:0;s<_;s++)if(i=t[s]){var v=h?h.callback.call(h.context,i,M,o,e):i[this._params.keyFieldName]==M;if(v){g=s+1,n=i,c&&c.callback.call(c.context,n,M,o,e);break}}a==t&&(!n||n&&s!=o)&&(a=o?t.splice(0,o):[],s-=o),a!=t&&(n?t[s]=null:this._params.reuse?(p.push(M),m.push(o)):(n=l.callback.call(l.context,M,o,e),n||(f=!0)),a.push(n))}if(a==t&&_!=r&&(a=t.splice(0,o)),a!=t){if(this._params.reuse)for(o=0,r=p.length;o<r;o++){var y=p[o],j=m[o];for(n=null,s=0;s<_;s++)if(i=t[s]){n=i,t[s]=null,u&&u.callback.call(u.context,n,y,j,e);break}n||(n=l.callback.call(l.context,y,j,e)),a[j]=n}if(d)for(o=0,r=t.length;o<r;o++)i=t[o],i&&d.callback.call(d.context,i);if(f){var b=[];for(o=0,r=a.length;o<r;o++)a[o]&&b.push(a[o]);a=b}}return a}}),e(i)})}],["-E",function(e){e.modules.define("geometryEditor.Frame",["util.defineClass","option.Manager","option.Mapper","util.matrix.2d","geometry.Polygon","geometry.Point","GeoObject","GeoObjectCollection","geometry.component.findClosestPathPosition","system.nextTick","util.vector","util.pixelBounds","event.Manager","Monitor","geometry.component.ShortestPath","util.math.cycleRestrict","geometryEditor.options.frameMapping"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_){function M(e,t){this.options=new i({},t.options,"frame"),this.events=new p,this.events.setParent(t.events),this._map=e.getMap(),this._editor=t,this._tailUpdate=0,this._init(e),this._spawnGeometry(),this._setupObject(),this._updating=0,this._shortestPath=new f,e.events.add("change",this._onGeometryChange,this)}function v(e){function t(){return e.state.get("drag")?"editorFrame#DragPreset":e.state.get("hover")?"editorFrame#HoverPreset":""}var n=new m(e.state);n.add("hover",function(n){e.options.set("preset",n?"editorFrame#HoverPreset":t())}),e.events.add("mousedown",function(){e.options.set("preset","editorFrame#DragPreset")}).add("mouseup",function(){e.options.set("preset",t())}),n.add("drag",function(n){e.options.set("preset",n?"editorFrame#DragPreset":t())})}function y(e,t,n){var i=s.identity();e.getMap().action.getCurrentState().zoom,e.applyProjectedTransformation(function(e){var t=g.fromPoints(e.pixels[0]),o=[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2];return s.translate(i,i,[o[0],o[1]]),s.rotate(i,i,n),s.translate(i,i,[-o[0],-o[1]]),i})}function j(e){return new e.constructor(JSON.parse(JSON.stringify(e.getCoordinates())))}function b(e,t){var n=e[0],i=e[1],o=d.sub(n,i),s=d.sub(n,t),r=d.length(o),a=d.length(s);if(r<1e-10||a<1)return!1;var l=d.scale(o,1/r),c=d.scale(s,1/a),u=d.cross(l,c);return[l[1]*a*u,-l[0]*a*u]}function I(e,t){for(var n=[],i=Math.pow(2,-t),o=Math.pow(2,t),s=0,r=e.length;s<r;++s)n.push([e[s][0]*i,e[s][1]*i]);e=(new f).calculate(n,[!0,!0],{unbounded:!0}),n=[];for(var s=0,r=e.length;s<r;++s)n.push([e[s][0]*o,e[s][1]*o]);return n}function L(e,t,n,i){var o=I([n._projectionToGlobalPixels(e[0],i),n._projectionToGlobalPixels(e[1],i),n._projectionToGlobalPixels(e[2],i),n._projectionToGlobalPixels(e[3],i)],i),s=(4+t-1)%4,r=(t+1)%4,a=(t+2)%4,l=d.sub(o[t],o[s]),c=[l[1],-l[0]],u=b([o[t],o[s]],o[a]),h=b([o[t],d.sub(o[t],c)],o[a]);if(!u||!h)return e;var g=d.sub(o[a],u),p=d.sub(o[a],h);return o[s]=g,o[r]=p,e=[n._projectionFromGlobalPixels(o[0],i),n._projectionFromGlobalPixels(o[1],i),n._projectionFromGlobalPixels(o[2],i),n._projectionFromGlobalPixels(o[3],i)],e[4]=e[0],e}function C(e){var t=d.sub(e[1],e[0]),n=d.sub(e[1],e[2]),i=d.length(t),o=d.length(n);return i>1e-4&&o>1e-4}function x(e){for(var t=0,n=0,i=e.length-1;n<i;++n)t+=(e[n][0]-e[n+1][0])*(e[n][1]+e[n+1][1])*.5;return t>0?1:-1}var w=30,N=e.env.coordinatesOrder;n(M,{_init:function(e){this._lastMatrix=s.identity(),this._bounds=e.getBounds(),this._geometry=e,this._clone=j(e)},stop:function(){this.collection.removeAll(),this.collection.setParent(null),this.collection.options.setParent(null),this._frameGeometry.setMap(null);for(var e=0;e<9;e++)this._points[e].setMap(null),this._points[e].options.setParent(null);this._points=0},_spawnGeometry:function(){var e=this._bounds;this._frameGeometry=new r([[[e[0][0],e[0][1]],[e[1][0],e[0][1]],[e[1][0],e[1][1]],[e[0][0],e[1][1]],[e[0][0],e[0][1]]],[[0,0],[0,0],[0,0]]],"nonZero"),this._points=[new a([0,0]),new a([0,0]),new a([0,0]),new a([0,0]),new a([0,0]),new a([0,0]),new a([0,0]),new a([0,0]),new a([0,0])],this._frameGeometry.events.add("pixelgeometrychange",this.updatePoints,this),this._frameGeometry.setMap(this._map),this._frameGeometry.options.setParent(this._map.options),this._frameGeometry.options.set("coordRendering","shortestPath");for(var t=0;t<9;t++)this._points[t].setMap(this._map),this._points[t].options.setParent(this._frameGeometry.options);this.updatePoints()},_setupObject:function(){var e,t,n=this.collection=new c;n.options.setMapper(S),n.options.setParent(this.options),n.add(t=new l({geometry:this._frameGeometry})),t.options.setName("contour"),t.events.add("dragstart",this._startUpdating,this),t.events.add("beforedrag",this._beforeDrag,this),t.events.add("dragend",this._stopUpdating,this);for(var i=0;i<8;i++)n.add(e=new l({geometry:this._points[i],properties:{index:i}})),e.events.add("dragstart",this._vertexDragStart,this),e.events.add("dragend",this._vertexDragEnd,this),e.events.add("beforedrag",this._vertexDrag,this),e.options.setName(i%2?"vertex":"edge"),v(e);n.add(e=new l({geometry:this._points[8],properties:{index:8}},{useAutoPanInDragging:!1})),e.options.setName("edge"),v(e),e.events.add("dragstart",this._rotatePointStart,this),e.events.add("dragend",this._rotatePointEnd,this),e.events.add("beforedrag",this._rotatePointDrag,this),n.setParent(this._map.geoObjects)},_onGeometryChange:function(e){this._updating||this._tailUpdate||!this._points||(this.stop(),this._init(e.get("target")),this._spawnGeometry(),this._setupObject())},_rotatePointStart:function(){this._frameBounds=0,this._rotating=1,this._startUpdating(),this._updatePoints()},_rotatePointEnd:function(){this._rotating=0,this._updatePoints(),this._stopUpdating()},_rotatePointDrag:function(e){if(e.preventDefault(),!this._tailUpdate){var t=this._frameGeometry.getMap().getZoom(),n=e.get("position"),i=this._points[8].getCoordinates(),o=this._projectionToGlobalPixels(i,t);this._frameBounds.position||(this._frameBounds.position=[n[0],n[1]],this._frameBounds.start=[o[0],o[1]]);
var s=this._frameBounds.start,r=this._frameBounds.position,a=[n[0]-r[0],n[1]-r[1]],l=[s[0]+a[0],s[1]+a[1]],c=this._frameBounds.bounds,u=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=256*(1<<t),g=[_(u[0],0,h),_(u[1],0,h)],p=this._frameGeometry.options.get("projection"),m=this._shortestPath.calculate([g,o,l],p.isCycled(),{worldSize:256*(1<<t)}),f=d.normalize(d.sub(m[0],m[1])),M=d.normalize(d.sub(m[0],m[2])),v=d.cross(f,M);y(this._frameGeometry,c,Math.asin(v)),this._frameGeometry.getPixelGeometry(),this._updatePoints()}},_vertexDragStart:function(){this._startUpdating()},_vertexDragEnd:function(){this._frameGeometry.getPixelGeometry(),this._updatePoints(),this._stopUpdating()},_beforeDrag:function(){this._tailUpdate=0,this._updatePoints()},_vertexDrag:function(e){if(e.preventDefault(),!this._tailUpdate){var t=this._frameGeometry.getMap().getZoom(),n=e.get("target"),i=e.get("pixelOffset"),o=n.properties.get("index"),s=Math.floor(o/2),r=this._frameGeometry.getChildGeometry(0),a=r.getCoordinates(),l=[i[0]+this._tmpOffset[0],i[1]+this._tmpOffset[1]];if(this._tmpOffset[0]+=i[0],this._tmpOffset[1]+=i[1],l[0]||l[1]){if(o%2==1){var c=a[s],u=a[s+1],h=this._projectionToGlobalPixels(c,t),g=this._projectionToGlobalPixels(u,t),p=[.5*(h[0]+g[0]),.5*(h[1]+g[1])],m=[p[0]+l[0],p[1]+l[1]],f=b([h,g],m);if(!f)return;if(c=[h[0]+f[0],h[1]+f[1]],u=[g[0]+f[0],g[1]+f[1]],!C([c,u,a[(s+2)%4]]))return;a[s]=this._projectionFromGlobalPixels(c,t),a[s>2?0:s+1]=this._projectionFromGlobalPixels(u,t)}else{var _=s>0?s-1:3,M=s>2?0:s+1,c=a[_],v=a[s],u=a[M],h=this._projectionToGlobalPixels(c,t),p=this._projectionToGlobalPixels(v,t),g=this._projectionToGlobalPixels(u,t),m=[p[0]+l[0],p[1]+l[1]],y=b([p,h],m),j=b([p,g],m);if(!y||!j)return;var I=y,x=j,w=d.length(I),N=d.length(x),S=d.add(y,j);if(w<1&&N<1)return;var c=[h[0]+I[0],h[1]+I[1]],u=[p[0]+S[0],p[1]+S[1]],D=[g[0]+x[0],g[1]+x[1]];if(!C([c,u,D]))return;if(a[_]=this._projectionFromGlobalPixels(c,t),a[s]=this._projectionFromGlobalPixels(u,t),a[M]=this._projectionFromGlobalPixels(D,t),a=L(a,s,this,t),!a)return}this._tmpOffset=[0,0],r.freeze(),a[4]=a[0],r.setCoordinates(a),r.unfreeze(),this._frameGeometry.getPixelGeometry(),this._updatePoints()}}},updatePoints:function(){if(!this._tailUpdate){var e=this;h(function(){e._frameGeometry.getMap()&&e._updatePoints()})}},_updatePoints:function(){this._shortestPath.reset();var e=this._frameGeometry.getMap();this._rotating&&this._frameBounds&&this._frameBounds.zoom==e.getZoom()||(this._frameBounds={zoom:e.getZoom(),bounds:g.fromPoints(this._frameGeometry.getPixelGeometry().getCoordinates()[0])});var t=this._frameGeometry.getCoordinates()[0],n=this._frameGeometry.getMap().getZoom(),i=[];t=L(t,0,this,n);for(var o=0;o<4;o++){var s=t[o],r=t[o+1],a=this._projectionToGlobalPixels(s,n),l=this._projectionToGlobalPixels(r,n);i.push(a),this._points[2*o].setCoordinates(s),this._points[2*o+1].setCoordinates(this._projectionFromGlobalPixels([(a[0]+l[0])/2,(a[1]+l[1])/2],n))}i.push(i[0]);var c="longlat"==N?4:2,u=1,s=this._points[c].getCoordinates(),h=this._points[c+1].getCoordinates(),r=this._points[c+2].getCoordinates(),a=this._projectionToGlobalPixels(s,n),d=this._projectionToGlobalPixels(h,n),l=this._projectionToGlobalPixels(r,n),p=[l[0]-a[0],l[1]-a[1]],m=Math.sqrt(p[0]*p[0]+p[1]*p[1]),f=[p[0]/m,p[1]/m],_=[f[1],-f[0]],M=u*x(i),v=[d[0]+_[0]*w*M,d[1]+_[1]*w*M],y=this._projectionFromGlobalPixels(v,n),j=this._projectionFromGlobalPixels(d,n);this._points[8].setCoordinates(y),this._tailUpdate=1,this._frameGeometry.getChildGeometry(1).setCoordinates([j,y,j]),this._applyTransformation(this._getTransformation()),this._tailUpdate=0},_getTransformation:function(){function e(e){return n._projectionToGlobalPixels(e,t)}this._shortestPath.reset();var t=this._frameGeometry.getMap().getZoom(),n=this,i=s.identity(),o=this._bounds,r=[e(o[0]),e(o[1])],a=[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2],l=[r[1][0]-r[0][0],r[1][1]-r[0][1]],c=d.sub([r[1][0],r[0][1]],r[0]),u=this._frameGeometry.options.get("projection"),h=this._shortestPath.calculate(this._frameGeometry.getPixelGeometry().getCoordinates()[0],u.isCycled(),{worldSize:256*(1<<t)}),g=this._frameBounds.bounds,p=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],m=[a[0]-p[0],a[1]-p[1]],f="longlat"==N?1:0,_="longlat"==N?-1:1,M=d.sub(h[f+1],h[f]),v=d.sub(h[f+2],h[f+1]),y=[d.length(v),-d.length(M)],j=[y[0]/l[0],_*y[1]/l[1]];Math.abs(l[0])<1e-6||Math.abs(l[1])<1e-6||Math.abs(y[0])<1.5||Math.abs(y[1])<1.5;var b=1e-4;Math.abs(j[0])<b&&(j[0]=j[0]>0?b:-b),Math.abs(j[1])<b&&(j[1]=j[1]>0?b:-b);var I=Math.abs(j[0]/j[1]);if(!(I<b||I>1/b)){c=d.normalize(c),M=d.normalize(M),v=d.normalize(v);var L=d.cross(c,v),C=d.cross(c,M)*_,w=x(h);return L=_*Math.asin(L),C>0&&(L=Math.PI-L),w<0&&(L=-L,j[0]*=-1),s.translate(i,i,[a[0],a[1]]),s.translate(i,i,[-m[0],-m[1]]),s.rotate(i,i,L),s.scale(i,i,j),s.translate(i,i,[-a[0],-a[1]]),i}},_startUpdating:function(){this._shortestPath.reset(),this._updating=1,this._tmpOffset=[0,0],this.events.fire("framingbegin")},_stopUpdating:function(){this.events.fire("framingend"),this._updating=0},_applyTransformation:function(e){if(e&&this._updating){var t=s.determinant(e),n=s.determinant(this._lastMatrix),i=1;Math.abs(t-n)>1e-19&&(i=1),i&&(this._lastMatrix=e,this._geometry.freeze(),this._geometry.setCoordinates(j(this._clone).getCoordinates()),this._geometry.applyProjectedTransformation(e),this._geometry.unfreeze())}},_projectionFromGlobalPixels:function(e,t){var n=this._frameGeometry.options.get("projection"),i=256*(1<<t),o=[_(e[0],0,i),_(e[1],0,i)];return n.fromGlobalPixels(o,t)},_projectionToGlobalPixels:function(e,t){var n=this._frameGeometry.options.get("projection"),i=this._shortestPath.calculate([n.toGlobalPixels(e,0)],n.isCycled())[0],o=1<<t;return[i[0]*o,i[1]*o]}});var S=new o("prefixed");S.setRule({key:["projection"],rule:"plain"}),t(M)})}],["-x",function(e){e.modules.define("geometryEditor.LineString",["util.defineClass","util.extend","geometryEditor.Base","geometryEditor.storage","vow"],function(t,n,i,o,s,r){var a={model:null,view:null,controller:null},l=function(e,t){l.superclass.constructor.call(this,e,t)};n(l,o,{initialState:i({},o.prototype.initialState,{drawingFrom:"end"}),getModelClass:function(){if(null!=a.model)return r.resolve(a.model);var t=r.defer();return e.modules.require(["geometryEditor.model.RootLineString","geometryEditor.view.Path","geometryEditor.controller.LineString"],function(e){a.model=e,t.resolve(e)},this),t.promise()},getViewClass:function(t){if(null!=a.view)return r.resolve(a.view);var n=r.defer();return e.modules.require(["geometryEditor.view.Path"],function(e){a.view=e,n.resolve(e)},this),n.promise()},getControllerClass:function(){if(null!=a.controller)return r.resolve(a.controller);var t=r.defer();return e.modules.require(["geometryEditor.controller.LineString"],function(e){a.controller=e,t.resolve(e)},this),t.promise()}}),t(l),s.add("LineString",l)})}],[",T",function(e){e.modules.define("geometryEditor.options.frameMapping",["geometryEditor.options.mapper","option.Mapper","option.presetStorage"],function(e,t,n,i){t.setRule({name:"frame",key:["projection"],rule:"plain"}).setRule({name:"frame",rule:n.addOptionalPrefixForBalloonHint}),i.add("editorFrame#HoverPreset",{iconRadius:8}),i.add("editorFrame#DragPreset",{iconFillColor:"FFD943"}),e(!0)})}],[",V",function(e){e.modules.define("geometryEditor.options.mapper",["option.Mapper"],function(e,t){e(new t)})}],["-y",function(e){e.modules.define("geometryEditor.Point",["util.defineClass","geometryEditor.Base","geometryEditor.storage","vow"],function(t,n,i,o,s){var r={model:null,view:null,controller:null},a=function(e,t){a.superclass.constructor.call(this,e,t)};n(a,i,{getModelClass:function(){if(null!=r.model)return s.resolve(r.model);var t=s.defer();return e.modules.require(["geometryEditor.model.RootVertex","geometryEditor.view.Point","geometryEditor.controller.Point"],function(e){r.model=e,t.resolve(e)},this),t.promise()},getViewClass:function(t){if(null!=r.view)return s.resolve(r.view);var n=s.defer();return e.modules.require(["geometryEditor.view.Point"],function(e){r.view=e,n.resolve(e)},this),n.promise()},getControllerClass:function(){if(null!=r.controller)return s.resolve(r.controller);var t=s.defer();return e.modules.require(["geometryEditor.controller.Point"],function(e){r.controller=e,t.resolve(e)},this),t.promise()}}),t(a),o.add("Point",a)})}],["-B",function(e){e.modules.define("geometryEditor.Polygon",["util.defineClass","util.extend","geometryEditor.Base","geometryEditor.storage","vow"],function(t,n,i,o,s,r){var a={model:null,view:null,controller:null},l=function(e,t){l.superclass.constructor.call(this,e,t)};n(l,o,{initialState:i({},o.prototype.initialState,{drawingFrom:"end",drawingPath:0}),getModelClass:function(){if(null!=a.model)return r.resolve(a.model);var t=r.defer();return e.modules.require(["geometryEditor.model.RootPolygon","geometryEditor.view.MultiPath","geometryEditor.controller.Polygon"],function(e){a.model=e,t.resolve(e)},this),t.promise()},getViewClass:function(t){if(null!=a.view)return r.resolve(a.view);var n=r.defer();return e.modules.require(["geometryEditor.view.MultiPath"],function(e){a.view=e,n.resolve(e)},this),n.promise()},getControllerClass:function(){if(null!=a.controller)return r.resolve(a.controller);var t=r.defer();return e.modules.require(["geometryEditor.controller.Polygon"],function(e){a.controller=e,t.resolve(e)},this),t.promise()}}),t(l),s.add("Polygon",l)})}],["-C",function(e){e.modules.define("geometryEditor.storage",["util.Storage"],function(e,t){e(new t)})}],["4f",function(e){e.modules.define("GeoObject",["util.defineClass","geoObject.abstract.GeoObject","event.globalize","Event","geoObject.metaOptions","theme.islands.geoObject.meta.full"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t),this.events.addController(r),this.events.fire("create",new o({type:"create",target:this}))}var r=i(s);t(s,n),e(s)})}],["$k",function(e){e.modules.define("geoObject.abstract.GeoObject",["util.defineClass","geoObject.component.castGeometry","geoObject.component.castProperties","data.Manager","option.Manager","geoObject.optionMapper","event.Manager","geoObject.component.ObjectImplementation","Event"],function(e,t,n,i,o,s,r,a,l,c){function u(e,t){this.geometry=n(e&&e.geometry),this.properties=i(e&&e.properties),this.state=new o,this.options=new s(t,null,"geoObject",r),this.events=new a({context:this}),this._geoObjectComponent=this.createGeoObjectComponent()}t(u,{setParent:function(e){return this._geoObjectComponent.setParent(e),this},getParent:function(){return this._geoObjectComponent.getParent()},getMap:function(){return this._geoObjectComponent.getMap()},getOverlay:function(){return this._geoObjectComponent.getOverlay()},getOverlaySync:function(){return this._geoObjectComponent.getOverlaySync()},getOverlays:function(){return this._geoObjectComponent.getOverlays()},getOverlaysSync:function(){return this._geoObjectComponent.getOverlaysSync()},createGeoObjectComponent:function(){return new l(this,this.geometry,this.properties,this.options,this.events,this.state,{onParentChange:{callback:this.parentChangeCallback,context:this},onMapChange:{callback:this.mapChangeCallback,context:this}})},parentChangeCallback:function(e,t){this.events.fire("parentchange",new c({type:"parentchange",target:this,oldParent:e,newParent:t}))},mapChangeCallback:function(e,t){this.events.fire("mapchange",new c({type:"mapchange",target:this,oldMap:e,newMap:t}))}}),e(u)})}],["$l",function(e){e.modules.define("geoObject.abstract.Sequence",["util.defineClass","geoObject.abstract.GeoObject","geoObject.component.BoundsAggregator","component.array.ParentArray","event.Mapper","geoObject.EventMappingTable"],function(e,t,n,i,o,s,r){function a(e,t){a.superclass.constructor.call(this,e,t),this._boundsAggregator=null,this._collectionComponent=this.createCollectionComponent(e&&e.children||[])}t(a,n,{get:function(e){return this._collectionComponent.get(e)},getLength:function(){return this._collectionComponent.getLength()},each:function(e,t){return this._collectionComponent.each(e,t),this},getIterator:function(){return this._collectionComponent.getIterator()},indexOf:function(e){return this._collectionComponent.indexOf(e)},getPixelBounds:function(){return this._boundsAggregator?this._boundsAggregator.getPixelBounds():null},getBounds:function(){return this._boundsAggregator?this._boundsAggregator.getBounds():null},createCollectionComponent:function(e){return new o(e,this,{},new s(this.events,new r(this)))},toArray:function(){return this._collectionComponent.toArray()},mapChangeCallback:function(e,t){e&&(this._boundsAggregator.destroy(),this._boundsAggregator=null),a.superclass.mapChangeCallback.call(this,e,t),t&&(this._boundsAggregator=new i(this,{onPixelBoundsChange:{callback:this._pixelBoundsChangeCallback,context:this},onGeoBoundsChange:{callback:this._geoBoundsChangeCallback,context:this}}))},_pixelBoundsChangeCallback:function(){this.events.fire("pixelboundschange")},_geoBoundsChangeCallback:function(){this.events.fire("boundschange")}}),e(a)})}],["$m",function(e){e.modules.define("geoObject.addon.balloon",["GeoObject","popup.addonBuilder","geoObject.Balloon"],function(e,t,n,i){e(n.build({type:"balloon",metaEventManager:t.getMetaEventManager(),defaultManager:i,lazyInit:!0,initEvents:["clickdefaultaction"]}))})}],["$o",function(e){e.modules.define("geoObject.addon.editor",["GeoObject","Event","util.Associate","util.extend","util.defineProperty","geometryEditor.storage","geoObject.optionMapper","util.EventPropagator","option.Mapper","geometryEditor.LineString","geometryEditor.Point","geometryEditor.Polygon"],function(t,n,i,o,s,r,a,l,c,u){function h(e){if(!("editor"in e)){var t,n;r(e,"editor",function(){return n?n:(t||(t=d(e)),t)},function(e){n=e})}}function d(e){var t,n=a.get(e.geometry.getType());return n&&(t=new n(e.geometry,{}),t.options.setParent(e.options),t.options.set("geoObject",e),e.getOverlay().then(function(e){f(t,e)}),t.events.add("statechange",g,e),e.events.add("mapchange",p,e).add("overlaychange",m,e),new c(t.events,["beforevertexadd","vertexadd","beforevertexdraw","vertexdraw","beforeedgedragstart","edgedragstart","beforeedgedrag","edgedrag","edgedragend","beforevertexdragstart","vertexdragstart","beforevertexdrag","vertexdrag","vertexdragend"],e.events,function(e){return"editor"+e},{callback:function(t,n,o){return new i({type:o,target:e},t)},context:this})),t}function g(e){this.events.fire("editorstatechange",{originalEvent:e})}function p(){this.editor.state.get("editing")&&this.editor.stopEditing(),this.editor.state.get("framing")&&this.editor.stopFraming()}function m(e){f(this.editor,e.get("overlay"))}function f(e,t){e.options.set(t?{pointOverlay:t,guideLinesOverlay:t}:{pointOverlay:null,guideLinesOverlay:null})}var _=e.env.browser.oldIE,M=new o(function(e){return this.create(e),e.editor});s(M,{create:function(e){e.geometry&&(_?e.editor=d(e):h(e))}}),l.setRule({name:"editor",rule:u.addOptionalPrefixForBalloonHint}).setRule({name:"editor",key:["projection"],rule:"plain"}),n.getMetaEventManager().add("create",function(e){M.create(e.get("target"))}),t(M)})}],["$p",function(e){e.modules.define("geoObject.addon.hint",["GeoObject","popup.addonBuilder","geoObject.Hint"],function(e,t,n,i){e(n.build({type:"hint",metaEventManager:t.getMetaEventManager(),defaultManager:i,lazyInit:!0,initEvents:["mouseenterdefaultaction"]}))})}],["4c",function(e){e.modules.define("geoObject.Balloon",["util.defineClass","component.sharedEntity.captor.Balloon","Balloon","event.Manager","map.addon.balloon","geoObject.balloonPositioner.storage","geoObject.optionMapper","option.Manager","Monitor","projection.idle","util.component","util.preset","vow","popup.managerStorage","popup.component.checkEmptiness","balloon.component.getBalloonMode","geoObject.balloonPositioner.circle","geoObject.balloonPositioner.point","geoObject.balloonPositioner.polygon","geoObject.balloonPositioner.lineString","geoObject.balloonPositioner.rectangle"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_){function M(e){this._geoObject=e,this.events=new s({context:this}),this._panelModeMonitor=null,this._setupCaptor(),this._setupListeners()}var v={visible:!1},y={autoPan:!1};n(M,d.createProxyMethods(function(){return this._captor},["close","isOpen","getOverlay","getOverlaySync","autoPan","getOwner","getPosition","getData","getOptions"]),{destroy:function(){this._clearListeners(),this._clearCaptor()},isEmpty:function(e,t,n){var i=this.specifyData(t);return i.options=new c(n||{},this._geoObject.options,"balloon"),f(this._geoObject.getMap(),"balloon",this._specifyPosition(e,n&&n.projection),i)},open:function(e,t,n){return this._captor.open(this._specifyPosition(e,n&&n.projection),this.specifyData(t),n)},setPosition:function(e){return this._captor.setPosition(this._specifyPosition(e))},setData:function(e){return this._captor.setData(this.specifyData(e))},setOptions:function(e){return this._captor.setOptions(this._specifyOptions(e))},_setupCaptor:function(){var e=this._geoObject.getMap(),t=e&&r.get(e);this._captor=new i(this,this._geoObject,"balloon",t),this._captor.events.add("open",this._onOpen,this).add("close",this._onClose,this)},_clearCaptor:function(){this._captor.destroy(),this._captor=null},_setupListeners:function(){this._geoObject.events.add("clickdefaultaction",this._onClickDefault,this).add("mapchange",this._onMapChange,this)},_clearListeners:function(){this._geoObject.events.remove("clickdefaultaction",this._onClickDefault,this).remove("mapchange",this._onMapChange,this)},_onClickDefault:function(e){var t=this._geoObject,n=t.options,i={projection:h,panelMode:"panel"==_(t.getMap(),t.options.get("balloonPanelMaxMapArea"))},o=e.get("originalEvent"),s=o.get("globalPixels");if(n.get("openBalloonOnClick",!0))if(this.isOpen()&&"Point"==t.geometry.getType())this.close();else if(n.get("openEmptyBalloon",!1))this.open(s,null,i);else{var r=this._geoObject.getMap().action.getCurrentState().zoom;this.isEmpty(s,null,i).then(function(e){if(!e){var t=this._geoObject.getMap().action.getCurrentState().zoom,n=Math.pow(2,t-r);1!=n&&(s=[s[0]*n,s[1]*n]),this.open(s,null,i)}},this)}},_specifyPosition:function(t,n){var i=this._geoObject,o=i.geometry.getPixelGeometry(),s=t?(n||i.options.get("projection")).toGlobalPixels(t,i.getMap().getZoom()):i.getMap().getGlobalPixelCenter();if(e.env.debug&&!o)throw new Error("geoObject.Balloon._specifyPosition: У геообъекта отсутствует пиксельная геометрия.");return this._anchorPixels=a.get(o.getType()).calculatePosition(o,s)},specifyData:function(e){var t=this._geoObject;return{geometry:t.geometry,properties:t.properties,state:t.state,geoObject:t,userData:e}},_onOpen:function(){var e=this._geoObject,t=this._captor.getPopup().getOverlaySync();e.state.set("active",!0),e.events.add("beforedrag",this._onBeforeDrag,this).add("dragstart",this._disableAutoPan,this).add("dragend",this._enableAutoPan,this),e.geometry.events.add("pixelgeometrychange",this._onGeoObjectPixelGeometryChange,this),this._geoObjectMap=e.getMap(),this._geoObjectMap.events.add("boundschange",this._onMapBoundsChange,this),"Point"==e.geometry.getType()&&e.options.get("hideIconOnBalloonOpen")&&(this._panelModeMonitor=new u(t.options).add("panelMode",this._toggleIcon,this),t.options.get("panelMode")||this._toggleIcon())},_onClose:function(){var e=this._geoObject;"Point"==e.geometry.getType()&&(this._showIcon(),this._panelModeMonitor&&(this._panelModeMonitor.removeAll(),this._panelModeMonitor=null)),this._geoObjectMap&&this._geoObjectMap.events.remove("boundschange",this._onMapBoundsChange,this),e.geometry.events.remove("pixelgeometrychange",this._onGeoObjectPixelGeometryChange,this),e.events.remove("dragend",this._enableAutoPan,this).remove("dragstart",this._disableAutoPan,this).remove("beforedrag",this._onBeforeDrag,this),e.state.set("active",!1)},_disableAutoPan:function(){g.addTo(this.getOptions(),y)},_enableAutoPan:function(){g.removeFrom(this.getOptions(),y)},_hideIcon:function(){g.addTo(this._geoObject.options,v)},_showIcon:function(){g.removeFrom(this._geoObject.options,v)},_onGeoObjectPixelGeometryChange:function(e){if(this.isOpen()){var t=this._geoObject.geometry.getPixelGeometry();if(!t.getCoordinates().length)return void this.close();this._disableAutoPan(),this._anchorPixels=a.get(t.getType()).calculatePosition(t,this._anchorPixels),this._captor.setPosition(this._anchorPixels),this._enableAutoPan()}},_onBeforeDrag:function(e){var t=e.get("pixelOffset"),n=this._anchorPixels;this._anchorPixels=[n[0]+t[0],n[1]+t[1]]},_onMapBoundsChange:function(e){var t=e.get("oldZoom"),n=e.get("newZoom");if(t!=n){var i=Math.pow(2,n-t),o=this._anchorPixels;this._anchorPixels=[o[0]*i,o[1]*i]}},_toggleIcon:function(e){e?this._showIcon():this._hideIcon()},_onMapChange:function(){this._geoObject.getMap()?this._setupSharingManager():this.close()},_setupSharingManager:function(){this._captor.setSharingManager(r.get(this._geoObject.getMap()))}}),m.add("geoObject#balloon",M),l.setRule({name:"balloon",rule:"prefixed"}).setRule({name:"balloon",key:["projection"],rule:"plain"}),t(M)})}],["$r",function(e){e.modules.define("geoObject.balloonPositioner.circle",["geoObject.balloonPositioner.storage"],function(e,t){var n={calculatePosition:function(e,t){var n=e.getCoordinates(),i=e.getRadius(),o=[t[0]-n[0],t[1]-n[1]],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return s<i?t:[n[0]+o[0]*i/s,n[1]+o[1]*i/s]}};t.add("Circle",n),e(n)})}],["$t",function(e){e.modules.define("geoObject.balloonPositioner.lineString",["geoObject.balloonPositioner.storage","geometry.component.findClosestPathPosition"],function(e,t,n){var i={calculatePosition:function(e,t){var i=n(e.getCoordinates(),t);return i?i.position:null}};t.add("LineString",i),e(i)})}],["$u",function(e){e.modules.define("geoObject.balloonPositioner.point",["geoObject.balloonPositioner.storage"],function(e,t){var n={calculatePosition:function(e){return e.getCoordinates()}};t.add("Point",n),e(n)})}],["$w",function(e){e.modules.define("geoObject.balloonPositioner.polygon",["geoObject.balloonPositioner.storage","geometry.component.pointInPolygon"],function(e,t,n){var i={calculatePosition:function(e,t){if(n(t,e.getCoordinates(),e.getFillRule()))return t;var i=e.getClosest(t);return i?i.position:null}};t.add("Polygon",i),e(i)})}],["$x",function(e){e.modules.define("geoObject.balloonPositioner.rectangle",["geoObject.balloonPositioner.storage","geometry.component.findClosestPathPosition","util.pixelBounds"],function(e,t,n,i){var o={calculatePosition:function(e,t){var o=e.getBounds();return i.containsPoint(o,t)?t:n([o[0],[o[0][0],o[1][1]],o[1],[o[1][0],o[0][1]],o[0]],t).position}};t.add("Rectangle",o),e(o)})}],["$y",function(e){e.modules.define("geoObject.balloonPositioner.storage",["util.Storage"],function(e,t){var n=new t;e(n)})}],["$C",function(e){e.modules.define("geoObject.component.BoundsAggregator",["util.defineClass","util.bind","util.bounds","util.pixelBounds","util.math.areEqual"],function(t,n,i,o,s,r){function a(e,t){this._geoObjectCollection=e,this._callbacks=t;for(var n,i=this._geoObjectCollection.getIterator();(n=i.getNext())!=i.STOP_ITERATION;)this._processChild(n,"add");this._geoObjectCollection.events.add("add",this._onCollectionAdd,this).add("remove",this._onCollectionRemove,this).add("set",this._onCollectionSet,this),this._pixelBounds=c,this._geoBounds=this._calculateGeoBounds(),this._oldGeoBounds=c,this._timeoutId=null}function l(e,t){return!e&&!t||e&&t&&r(e[0],t[0],0)&&r(e[1],t[1],0)}var c={};n(a,{getPixelBounds:function(){return this._pixelBounds==c&&(this._pixelBounds=this._calculatePixelBounds()),this._pixelBounds},getBounds:function(){return this._geoBounds==c&&(this._geoBounds=this._calculateGeoBounds()),this._geoBounds},destroy:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._geoObjectCollection.events.remove("add",this._onCollectionAdd,this).remove("remove",this._onCollectionRemove,this).remove("set",this._onCollectionSet,this);for(var e,t=this._geoObjectCollection.getIterator();(e=t.getNext())!=t.STOP_ITERATION;)this._processChild(e,"remove")},_onCollectionAdd:function(e){e.get("target")==this._geoObjectCollection&&(this._processChild(e.get("child"),"add"),this._processBoundsChange())},_onCollectionRemove:function(e){e.get("target")==this._geoObjectCollection&&(this._processChild(e.get("child"),"remove"),this._processBoundsChange())},_onCollectionSet:function(e){e.get("target")==this._geoObjectCollection&&(this._processChild(e.get("prevChild"),"remove"),this._processChild(e.get("child"),"add"),this._processBoundsChange())},_processChild:function(e,t){e&&("function"==typeof e.getPixelBounds?e.events[t]("pixelboundschange",this._onPixelBoundsChange,this):e.geometry&&e.geometry.events[t]("pixelgeometrychange",this._onPixelGeometryChange,this))},_onPixelBoundsChange:function(){this._processBoundsChange()},_onPixelGeometryChange:function(){this._processBoundsChange()},_processBoundsChange:function(){this._oldGeoBounds==c&&(this._oldGeoBounds=this._geoBounds),this._geoBounds=c,this._pixelBounds=c;var e=this._callbacks.onPixelBoundsChange;e.callback.call(e.context),this._timeoutId||(this._timeoutId=setTimeout(this._timeoutHandler||(this._timeoutHandler=i(this._onTimeoutExpired,this)),0))},_onTimeoutExpired:function(){this._timeoutId=null;var e=this._oldGeoBounds;this._oldGeoBounds=c;var t=this.getBounds();if(!l(t,e)){var n=this._callbacks.onGeoBoundsChange;n.callback.call(n.context,t,e)}},_calculatePixelBounds:function(){for(var e,t=this._geoObjectCollection.getIterator(),n=this._geoObjectCollection.geometry?this._geoObjectCollection.geometry.getPixelGeometry().getBounds():null;(e=t.getNext())!=t.STOP_ITERATION;){var i=null;e&&("function"==typeof e.getPixelBounds?i=e.getPixelBounds():e.geometry&&(i=e.geometry.getPixelGeometry().getBounds())),i&&(n=n?s.fromBounds([n,i]):i)}return n},_calculateGeoBounds:function(){var t=this._geoObjectCollection.options.get("projection");if(e.env.debug&&!t)throw new Error("geoObject.component.BoundsAggregator: значение опции projection не определено");var n=this.getPixelBounds();return n?o.fromGlobalPixelBounds(n,this._geoObjectCollection.getMap().getZoom(),t):null}}),t(a)})}],["$D",function(e){e.modules.define("geoObject.component.castGeometry",["geoObject.geometryFactory"],function(e,t){var n=function(e){return e?"function"==typeof e.getType?e:t.createGeometry(e):null};e(n)})}],["$F",function(e){e.modules.define("geoObject.component.castProperties",["data.Manager"],function(e,t){var n=function(e){return e&&"function"==typeof e.get?e:new t(e)};e(n)})}],["$G",function(e){e.modules.define("geoObject.component.ObjectImplementation",["Event","geoObject.View","vow","component.child.MapChild"],function(e,t,n,i,o){function s(e,t,n,i,s,r,a){this._context=e,this._geometry=t,this._properties=n,this._options=i,this._events=s,this._state=r,this._callbacks=a,this._mapItem=new o({onMapChange:{callback:this._mapChangeCallback,context:this},onParentChange:this._callbacks.onParentChange}),t&&(t.options.setParent(i),t.events.add("change",this._onGeometryChange,this)),n&&n.events.add("change",this._onPropertiesChange,this),i.events.add("change",this._onOptionsChange,this)}s.WasNotAddedToMapError=function(){return new Error("GeoObject wasn't added to map")},s.prototype={setParent:function(e){this._mapItem.setParent(e)},getParent:function(){return this._mapItem.getParent()},getMap:function(){return this._mapItem.getMap()},getOverlay:function(){return this._view?this._view.getOverlay():i.reject(s.WasNotAddedToMapError())},getOverlaySync:function(){return this._view?this._view.getOverlaySync():null},getOverlays:function(){return this._view?this._view.getOverlays():i.reject(s.WasNotAddedToMapError())},getOverlaysSync:function(){return this._view?this._view.getOverlaysSync():[]},_mapChangeCallback:function(e,t){e&&this._clearView(),this._geometry&&this._geometry.setMap(t),t&&this._setupView();var n=this._callbacks.onMapChange;n&&(n.context?n.callback.call(n.context,e,t):n.callback(e,t))},_onOptionsChange:function(){this._events.fire("optionschange",new t({type:"optionschange",target:this._context}))},_onPropertiesChange:function(){this._events.fire("propertieschange",new t({type:"propertieschange",target:this._context}))},_onGeometryChange:function(e){this._events.fire("geometrychange",new t({type:"geometrychange",target:this._context,originalEvent:e}))},_setupView:function(){this._view=new n(this._context,this._geometry,this._properties,this._options,this._events,this._state,this.getMap())},_clearView:function(){this._view.destroy(),this._view=null}},e(s)})}],["3J",function(e){e.modules.define("geoObject.EventMappingTable",["util.defineClass","MapEvent"],function(e,t,n){function i(e){this._geoObject=e,this.parentchange=!1,this.mapchange=!1,this.optionschange=!1,this.boundschange=!1,this.pixelboundschange=!1,this["*"]=this._defaultMapping}t(i,{_defaultMapping:function(e){return new n({currentTarget:this._geoObject},e)}}),e(i)})}],["4m",function(e){e.modules.define("geoObject.geometryFactory",["util.Storage","geometry.Point","geometry.LineString","geometry.Polygon","geometry.Rectangle","geometry.Circle"],function(t,n,i,o,s,r,a){var l=new n;l.createGeometry=function(t){var n=this.get(t.type);if(e.env.debug&&!n)throw new Error("geoObject.geometryFactory: неизвестный тип геометрии "+t.type);return n(t)},t(l),l.add("Point",function(e){return new i(e.coordinates)}),l.add("LineString",function(e){return new o(e.coordinates)}),l.add("Polygon",function(e){return new s(e.coordinates,e.fillRule)}),l.add("Rectangle",function(e){return new r(e.coordinates)}),l.add("Circle",function(e){return new a(e.coordinates,e.radius)})})}],["4p",function(e){e.modules.define("geoObject.Hint",["util.defineClass","Hint","event.Manager","geoObject.optionMapper","component.sharedEntity.captor.Popup","option.Manager","projection.idle","map.addon.hint","util.component","util.preset","util.pixelBounds","util.extend","vow","popup.managerStorage","popup.component.checkEmptiness"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){function f(e){this._geoObject=e,this.events=new i({context:this}),this._setupCaptor(),this._setupListeners()}t(f,c.createProxyMethods(function(){return this._captor},["close","isOpen","getOverlay","getOverlaySync","autoPan","getOwner","getPosition","getData","setOptions","getOptions"]),{destroy:function(){this._clearListeners(),this._clearCaptor()},isEmpty:function(e,t,n){var i=this._specifyData(t);return i.options=new r(n||{},this._geoObject.options,"hint"),m(this._geoObject.getMap(),"hint",this._specifyPosition(e,n&&n.projection),i)},open:function(e,t,n){return this._captor.open(this._specifyPosition(e,n&&n.projection),this._specifyData(t),n)},setPosition:function(e){return this._captor.setPosition(this._specifyPosition(e))},setData:function(e){return this._captor.setData(this._specifyData(e))},_setupCaptor:function(){var e=this._geoObject.getMap(),t=e&&l.get(e);this._captor=new s(this,this._geoObject,"hint",t),this._captor.events.add("capture",function(){this.close(!0)},this)},_clearCaptor:function(){this._captor.destroy(),this._captor=null},_setupListeners:function(){this._geoObject.events.add("mapchange",this._onMapChange,this).add("mouseenterdefaultaction",this._onGeoObjectMouseEnter,this).add(["dragstart","balloonopen"],this._disable,this).add(["dragend","balloonclose"],this._enable,this)},_clearListeners:function(){this._geoObject.events.remove(["dragend","balloonclose"],this._enable,this).remove(["dragstart","balloonopen"],this._disable,this).remove("mouseenterdefaultaction",this._onGeoObjectMouseEnter,this).remove("mapchange",this._onMapChange,this)},_onGeoObjectMouseEnter:function(e){this._openAndHandleMouse(e.get("originalEvent").get("globalPixels"))},_onGeoObjectMouseMove:function(e){return this._captor.setPosition(this._specifyPosition(e.get("globalPixels"),a))},_onGeoObjectMouseLeave:function(e){this._closeAndUnhandleMouse()},_openAndHandleMouse:function(e){this._tryOpenOnHover(e).then(function(){this._geoObject.events.add("mousemove",this._onGeoObjectMouseMove,this).add("mouseleave",this._onGeoObjectMouseLeave,this);
},this)},_closeAndUnhandleMouse:function(e){this.close(e),this._geoObject.events.remove("mousemove",this._onGeoObjectMouseMove,this).remove("mouseleave",this._onGeoObjectMouseLeave,this)},_disable:function(){this._disabled=!0,this._closeAndUnhandleMouse(!0)},_enable:function(e){var t=this._geoObject;t.state.get("active")||t.state.get("drag")||(this._disabled=!1,t.getMap()&&this._openAndHandleMouse())},_onMapChange:function(){this._geoObject.getMap()?this._setupSharingManager():this.close(!0)},_setupSharingManager:function(){this._captor.setSharingManager(l.get(this._geoObject.getMap()))},_tryOpenOnHover:function(e){var t=g.defer(),n=g.defer(),i={projection:a};return this._disabled||!this._geoObject.options.get("openHintOnHover",!0)?t.reject():this._geoObject.options.get("openEmptyHint",!1)?t.resolve():this.isEmpty(e,null,i).then(function(e){e?t.reject():t.resolve()},t.reject,t),t.promise().then(function(){this._geoObject.state.get("hover")?(n.resolve(),this.open(e,null,i)):n.reject()},this),n.promise()},_specifyPosition:function(e,t){return e?(t||this._geoObject.options.get("projection")).toGlobalPixels(e,this._geoObject.getMap().getZoom()):h.getCenter(this._geoObject.geometry.getPixelGeometry().getBounds())},_specifyData:function(e){var t=this._geoObject;return{geometry:t.geometry,properties:t.properties,state:t.state,geoObject:t,userData:e}}}),p.add("geoObject#hint",f),o.setRule({name:"hint",rule:"prefixed"}).setRule({name:"hint",key:["projection"],rule:"plain"}),e(f)})}],["4t",function(e){e.modules.define("geoObject.metaOptions",["interactivityModel.geoObject","map.metaOptions"],function(e,t,n){n.set("geoObjectInteractivityModel",t.geoObject),e({})})}],["4w",function(e){e.modules.define("geoObject.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["4A",function(e){e.modules.define("geoObject.View",["util.defineClass","vow","util.array","util.bind","util.callbackChunker","util.cancelableCallback","constants.zIndex","option.Manager","option.Mapper","Monitor","geoObject.view.component.Dragger","geoObject.view.overlayMapping","overlay.storage","event.Mapper","geoObject.view.component.OverlayEventMappingTable"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){function f(e,t,n,i,o,r,l){this._geoObject=e,this._geometry=t,this._properties=n,this._options=i,this._events=o,this._state=r,this._map=l,this._overlays=[],this._oldOverlay=this._overlays[0]||null,this._overlayData=null,this._overlayOptionManager=null,this._overlayRequireCallback=null,this._overlayDeferred=null,this._overlaysDeferred=null,this._chunker=s.get(l),this._chunkerCallbackId=NaN;var c=t&&"Point"==t.getType();this._optionMonitor=i.getMonitor({visible:!0,draggable:!1,interactiveOptions:c,interactiveZIndex:c,zIndex:a.overlay,zIndexActive:c?a.activePoint:a.active,zIndexDrag:a.drag,zIndexHover:a.hover}),this._zIndexOptionName="",t?(this._setupVisible(),this._optionMonitor.get("visible")&&this._initOverlayListeners(),this._startOverlayCreating()):this._overlayRejectMessageFunc=f.GeoObjectIsHiddenError}f.GeoObjectIsHiddenError=function(){return new Error("GeoObject is not visible")},f.GeoObjectRemovedFromMapError=function(){return new Error("GeoObject was removed from map")},f.OverlayWasntFoundError=function(){return new Error("Overlay wasn't found")},t(f,{getOverlay:function(){return this._overlayDeferred||(this._overlayDeferred=n.defer(),this._overlayRejectMessageFunc?this._overlayDeferred.reject(this._overlayRejectMessageFunc()):this._overlays.length>0&&this._overlayDeferred.resolve(this._overlays[0])),this._overlayDeferred.promise()},getOverlaySync:function(){return this._overlays[0]||null},getOverlays:function(){return this._overlaysDeferred||(this._overlaysDeferred=n.defer(),this._overlayRejectMessageFunc?this._overlaysDeferred.reject(this._overlayRejectMessageFunc()):this._overlays.length>0&&this._overlaysDeferred.resolve(this._overlays)),this._overlaysDeferred.promise()},getOverlaysSync:function(){return this._overlays.slice()},destroy:function(){this._geometry&&(this._clearDraggable(),this._clearPixelGeometryChangeListener(),this._rejectOverlayDeferreds(f.GeoObjectRemovedFromMapError),this._clearOverlays(),this._clearInteractiveOptions(),this._clearOverlayOptionManager(),this._overlayData=null,this._clearZIndex(),this._clearVisible(),this._clearOverlayClassListener())},_initOverlayListeners:function(){this._overlayListenersInited||(this._overlayListenersInited=!0,this._pixelGeometry=this._geometry.getPixelGeometry(),this._setupOverlayClassListener(),this._setupPixelGeometryChangeListener())},_startOverlayCreating:function(){this._overlayDeferred=null,this._overlaysDeferred=null,this._constructOverlays()},_clearOverlays:function(){this._overlayDeferred=null,this._overlaysDeferred=null;for(var e=0,t=this._overlays.length;e<t;e++)this._clearOverlay(this._overlays[e]);this._overlays=[],t>0&&this._fireOverlayChange()},_constructOverlays:function(){if(!this._geometry.getBounds()||!this._optionMonitor.get("visible"))return void this._rejectOverlayDeferreds(f.GeoObjectIsHiddenError);this._overlayRejectMessageFunc=null;var e=this._getOverlayOptionKey(this._pixelGeometry.getType()),t=this._options.get(e);if("string"==typeof t){var n=t;if(t=g.get(n),"undefined"==typeof t)return this._overlayRequireCallback=r.create(function(e){this._overlayRequireCallback=null,this._createOverlay(e)},this),void g.require([n]).spread(this._overlayRequireCallback,function(){this._rejectOverlayDeferreds(f.OverlayWasntFoundError)},this)}this._createOverlay(t)},_createOverlay:function(e){this._overlayClass=e,this._options.get("syncOverlayInit",!1)?this._setupOverlay():this._chunkerCallbackId=this._chunker.addCallback(function(){this._chunkerCallbackId=NaN,this._setupOverlay()},this)},_resolveOverlayDeferreds:function(){this._overlayDeferred&&this._overlayDeferred.resolve(this._overlays[0]),this._overlaysDeferred&&this._overlaysDeferred.resolve(this._overlays)},_rejectOverlayDeferreds:function(e){this._clearAsyncOperations(),this._overlayRejectMessageFunc=e,this._overlayDeferred&&this._overlayDeferred.reject(e()),this._overlaysDeferred&&this._overlaysDeferred.reject(e())},_clearAsyncOperations:function(){this._overlayRequireCallback&&(this._overlayRequireCallback.cancel(),this._overlayRequireCallback=null),this._chunkerCallbackId&&(this._chunker.removeCallback(this._chunkerCallbackId),this._chunkerCallbackId=NaN)},_setupOverlay:function(){var e=new this._overlayClass(this._geometry.getPixelGeometry(),this._getOverlayData());this._setupDraggable(),e.options.set("zIndex",this._getZIndex()),this._setupOverlayOptionManager();var t=e.options.getName();this._overlayOptionNames.hasOwnProperty(t)||(this._overlayOptionNames[t]=null,d.setupMapping(this._overlayOptionMapper,t,e.getGeometry().getType())),this._setupInteractiveOptions(),e.options.setParent(this._overlayOptionManager),e.setMap(this._map),e.events.setParent(new p(this._events,new m(this._geoObject))),this._overlays.push(e),this._resolveOverlayDeferreds(),this._fireOverlayChange()},_clearOverlay:function(e){e.events.setParent(null),e.setMap(null),e.options.setParent(null)},_getOverlayData:function(){return this._overlayData||(this._overlayData={geometry:this._geometry,properties:this._properties,state:this._state,geoObject:this._geoObject})},_getOverlayOptionKey:function(e){return e.charAt(0).toLowerCase()+e.substring(1)+"Overlay"},_fireOverlayChange:function(){var e=this._oldOverlay,t=this._overlays[0]||null;this._oldOverlay=t,this._events.fire("overlaychange",{overlay:t,oldOverlay:e})},_setupInteractiveOptions:function(){this._optionMonitor.add("interactiveOptions",this._onInteractiveOptionsChange,this),this._optionMonitor.get("interactiveOptions")&&(this._setupStateMonitor(this._updateStateMapping),this._setupStateMapping())},_clearInteractiveOptions:function(){this._optionMonitor.get("interactiveOptions")&&(this._clearStateMapping(),this._clearStateMonitor(this._updateStateMapping)),this._optionMonitor.remove("interactiveOptions",this._onInteractiveOptionsChange,this)},_onInteractiveOptionsChange:function(e){e?(this._setupStateMonitor(this._updateStateMapping),this._setupStateMapping()):(this._clearStateMapping(),this._clearStateMonitor(this._updateStateMapping))},_setupStateMapping:function(){this._stateOptionMapper=new c,this._stateOptionManager=new l(null,this._options,"stateMapping",this._stateOptionMapper),this._overlayOptionManager.setParent(this._stateOptionManager),this._stateOptionMapper.setRule({name:"overlayMapping",rule:o(this._stateMappingRule,this)})},_clearStateMapping:function(){this._overlayOptionManager&&(this._overlayOptionManager.setParent(this._options),this._overlayOptionManager=null),this._stateOptionMapper=null,this._stateOptionManager=null},_stateMappingRule:function(e){var t=[];return this._stateMonitor.get("active")&&t.push(c.addPrefix("active",e)),this._stateMonitor.get("drag")&&t.push(c.addPrefix("drag",e)),this._stateMonitor.get("hover")&&t.push(c.addPrefix("hover",e)),t.length?(t.push(e),t):e},_updateStateMapping:function(){this._stateOptionMapper&&this._stateOptionMapper.fireChange()},_setupVisible:function(){this._optionMonitor.add("visible",this._onVisibleChange,this)},_clearVisible:function(){this._optionMonitor.remove("visible",this._onVisibleChange,this)},_onVisibleChange:function(e){e?(this._initOverlayListeners(),this._startOverlayCreating()):(this._rejectOverlayDeferreds(f.GeoObjectIsHiddenError),this._clearOverlays())},_setupOverlayClassListener:function(){this._overlayClassOptionKey=this._getOverlayOptionKey(this._pixelGeometry.getType()),this._optionMonitor.add(this._overlayClassOptionKey,this._onOverlayClassChange,this)},_clearOverlayClassListener:function(){this._overlayListenersInited&&this._overlayClassOptionKey&&this._optionMonitor.remove(this._overlayClassOptionKey,this._onOverlayClassChange,this)},_onOverlayClassChange:function(){this._clearAsyncOperations(),this._clearOverlays(),this._clearOverlayOptionManager(),this._startOverlayCreating()},_setupPixelGeometryChangeListener:function(){this._geometry.events.add("pixelgeometrychange",this._onPixelGeometryChange,this)},_clearPixelGeometryChangeListener:function(){this._overlayListenersInited&&this._geometry.events.remove("pixelgeometrychange",this._onPixelGeometryChange,this)},_onPixelGeometryChange:function(){if(this._optionMonitor.get("visible")){var e=this._geometry.getPixelGeometry(),t=this._geometry.getBounds(),n=e.getType()!=this._pixelGeometry.getType();if(!t)return this._rejectOverlayDeferreds(f.GeoObjectIsHiddenError),void this._clearOverlays();if(n)return this._rejectOverlayDeferreds(f.GeoObjectIsHiddenError),this._clearOverlays(),this._clearOverlayClassListener(),this._pixelGeometry=this._geometry.getPixelGeometry(),this._startOverlayCreating(),void this._setupOverlayClassListener();if(!this._overlays.length)return void(this._overlayRequireCallback||this._chunkerCallbackId||(this._rejectOverlayDeferreds(f.GeoObjectIsHiddenError),this._startOverlayCreating()));for(var i=0,o=this._overlays.length;i<o;i++)this._overlays[i].setGeometry(e)}},_setupOverlayOptionManager:function(){this._overlayOptionManager||(this._overlayOptionNames={},this._overlayOptionMapper=new c,this._overlayOptionManager=new l(null,this._options,"overlayMapping",this._overlayOptionMapper))},_clearOverlayOptionManager:function(){this._overlayOptionManager&&(this._overlayOptionManager.setParent(null),this._overlayOptionManager=null)},_setupDraggable:function(){this._draggableInited||(this._draggableInited=!0,this._optionMonitor.add("draggable",this._onDraggableChange,this),this._optionMonitor.get("draggable")&&this._setupDragger())},_clearDraggable:function(){this._draggableInited&&(this._optionMonitor.get("draggable")&&this._clearDragger(),this._optionMonitor.remove("draggable",this._onDraggableChange,this))},_onDraggableChange:function(e){e?this._setupDragger():this._clearDragger()},_setupDragger:function(){this._draggerComponent=new h(this._geoObject,this._events,this._state,this._geometry,{onDragStart:this._onDragStart,onDragStop:this._onDragStop,context:this})},_clearDragger:function(){this._draggerComponent&&this._draggerComponent.destroy()},_onDragStart:function(){var e=this._overlays;if(e)for(var t=0,n=e.length;t<n;t++)e[t].options.set("cursor","grabbing")},_onDragStop:function(){var e=this._overlays;if(e)for(var t=0,n=e.length;t<n;t++)e[t].options.unset("cursor")},_setupZIndex:function(){this._optionMonitor.add("interactiveZIndex",this._onInteractiveZIndexChange,this),this._optionMonitor.get("interactiveZIndex")&&this._setupStateMonitor(this._updateZIndexOptionName),this._setupZIndexOptionName(this._getZIndexOptionName())},_clearZIndex:function(){this._zIndexOptionName&&(this._clearZIndexOptionName(),this._optionMonitor.get("interactiveZIndex")&&this._clearStateMonitor(this._updateZIndexOptionName),this._optionMonitor.remove("interactiveZIndex",this._onInteractiveZIndexChange,this))},_onInteractiveZIndexChange:function(e){e?this._setupStateMonitor(this._updateZIndexOptionName):this._clearStateMonitor(this._updateZIndexOptionName),this._updateZIndexOptionName()},_setupStateMonitor:function(e){this._stateMonitor||(this._stateMonitor=new u(this._state),this._stateMonitor.add(["active","drag","hover"],this._onStateChange,this),this._stateMonitorListeners=[]),this._stateMonitorListeners.push(e)},_clearStateMonitor:function(e){var t=i.indexOf(this._stateMonitorListeners,e);t!=-1&&this._stateMonitorListeners.splice(t,1),!this._stateMonitorListeners.length&&this._stateMonitor&&(this._stateMonitor.destroy(),this._stateMonitor=null)},_onStateChange:function(){for(var e=0,t=this._stateMonitorListeners.length;e<t;e++)this._stateMonitorListeners[e].call(this)},_updateZIndexOptionName:function(){var e=this._getZIndexOptionName();this._zIndexOptionName!=e&&(this._clearZIndexOptionName(),this._setupZIndexOptionName(e),this._updateOverlaysZIndex())},_setupZIndexOptionName:function(e){this._zIndexOptionName=e,this._optionMonitor.add(e,this._updateOverlaysZIndex,this)},_clearZIndexOptionName:function(){this._optionMonitor.remove(this._zIndexOptionName,this._updateOverlaysZIndex,this),this._zIndexOptionName=null},_updateOverlaysZIndex:function(){if(this._overlays)for(var e=this._getZIndex(),t=0,n=this._overlays.length;t<n;t++)this._overlays[t].options.set("zIndex",e)},_getZIndex:function(){return this._zIndexDefaults={zIndex:a.overlay,zIndexActive:"Point"==this._geometry.getType()?a.activePoint:a.active,zIndexDrag:a.drag,zIndexHover:a.hover},this._setupZIndex(),this._getZIndex=this._zIndexGetter,this._zIndexGetter()},_zIndexGetter:function(){return this._optionMonitor.get(this._zIndexOptionName)},_getZIndexOptionName:function(){if(this._stateMonitor){if(this._stateMonitor.get("active"))return"zIndexActive";if(this._stateMonitor.get("drag"))return"zIndexDrag";if(this._stateMonitor.get("hover"))return"zIndexHover"}return"zIndex"}}),e(f)})}],[",o",function(e){e.modules.define("geoObject.view.component.Dragger",["util.fireWithBeforeEvent","util.DraggerWithAutoPan","util.Dragger","Event","util.matrix.2d"],function(e,t,n,i,o,s){function r(e,t,o,s,r){this._geoObject=e,this._events=t,this._state=o,this._geometry=s,this._options=r,this._geoObjectListener=this._geoObject.events.group().add("mousedown",a,this),this._geoObject.options.get("useAutoPanInDragging",!0)?this._dragger=new n({disableBrowserBehavior:!0,useMapMargin:this._geoObject.options.get("useMapMarginInDragging",!0)},e.getMap()):this._dragger=new i({disableBrowserBehavior:!0}),this._draggerEvents=this._dragger.events.group().add("start",l,this).add("move",h,this).add("stop",g,this)}function a(e){var t=e.get("domEvent");e.get("target")==this._geoObject&&0==t.get("button")&&(this._dragger.start(t),e.preventDefault())}function l(e){t(this._events,{type:"dragstart",target:this._geoObject,domEvent:e.get("domEvent"),position:e.get("position")},{context:this,successCallback:c,preventCallback:u})}function c(e){this._state.set("drag",!0),this._options.onDragStart&&this._options.onDragStart.call(this._options.context),this._events.fire(e.type,e)}function u(e){this._dragger.stop(e.domEvent)}function h(e){t(this._events,{type:"drag",target:this._geoObject,pixelOffset:e.get("delta"),domEvent:e.get("domEvent"),position:e.get("position")},{context:this,successCallback:d,mutableFields:["pixelOffset"]})}function d(e){this._geometry.applyProjectedTransformation(s.translate([],s.identity(),e.pixelOffset)),this._events.fire(e.type,e)}function g(e){this._state.get("drag")&&(this._state.unset("drag"),this._options.onDragStop&&this._options.onDragStop.call(this._options.context),this._events.fire("dragend",new o({type:"dragend",target:this._geoObject,domEvent:e.get("domEvent"),position:e.get("position")})))}r.prototype={destroy:function(){this._geoObjectListener.removeAll(),this._draggerEvents.removeAll(),this._dragger.stop()}},e(r)})}],[",p",function(e){e.modules.define("geoObject.view.component.hoverDispatcher",["util.defineClass","util.Associate","MapEvent"],function(e,t,n,i){function o(e){this._map=e,this._object=null}t(o,{setObject:function(e,t){this._object&&this._unhoverObject(t),this._object=e,t.get("domEvent").get("propagatedData").processedByHoverDispatcher=!0,this._object&&this._hoverObject(t)},setLastEvent:function(e){e.get("domEvent").get("propagatedData").processedByHoverDispatcher=!0},_hoverObject:function(e){this._object.state.set("hover",!0),this._object.events.fire("hover",new i({type:"hover",target:this._object,map:this._map},e)),this._map.container.events.add(["mouseenter","mousemove"],this._onContainerMouseEvent,this)},_unhoverObject:function(e){this._object.state.set("hover",!1),this._object.events.fire("unhover",new i({type:"unhover",target:this._object,map:this._map},e)),this._map.container.events.remove(["mouseenter","mousemove"],this._onContainerMouseEvent,this)},_onContainerMouseEvent:function(e){e.get("domEvent").get("propagatedData").processedByHoverDispatcher||(this._unhoverObject(e),this._object=null)}}),e(new n(function(e){return new o(e)}))})}],[",r",function(e){e.modules.define("geoObject.view.component.OverlayEventMappingTable",["util.defineClass","MapEvent","geoObject.view.component.hoverDispatcher"],function(e,t,n,i){function o(e){this._geoObject=e}function s(e){var t=i.get(this._geoObject.getMap());return t.setObject(this._geoObject,e),this._defaultMapping(e)}function r(e){return i.get(this._geoObject.getMap()).setLastEvent(e),this._defaultMapping(e)}function a(e){return i.get(this._geoObject.getMap()).setObject(null,e),this._defaultMapping(e)}function l(e){return new n({type:e.get("type"),target:this._geoObject,map:this._geoObject.getMap(),domEvent:e.get("domEvent"),originalEvent:e},e)}t(o,{geometrychange:!1,propertieschange:!1,optionschange:!1,datachange:!1,mapchange:!1,emptinesschange:!1,shapechange:!1,mouseenter:s,mousemove:r,mouseleave:a,"*":l,_hoverMapping:s,_defaultMapping:l}),e(o)})}],["$R",function(e){e.modules.define("geoObject.view.overlayMapping",["util.extend","util.Storage"],function(e,t,n){function i(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}function o(e,t){return[i(e,t),e]}var s=new n,r={key:["projection"],rule:"plain"},a=["icons","cursor","interactivityModel","pane","eventsPane","shadowsPane","interactive"];s.setupMapping=function(e,n,i){var o=this.get(i);if(o)for(var s=0,r=o.length;s<r;s++)e.setRule(t({name:n},o[s]))},s.add("Point",[r,{rule:function(e){return i(e,"icon")}},{key:a,rule:function(e){return o(e,"icon")}}]),e(s)})}],["$B",function(e){e.modules.define("GeoObjectArray",[],function(e){function t(){throw new Error("Класс GeoObjectArray не поддерживается (соответствующая функциональность доступна в GeoObjectCollection)")}e(t)})}],["4k",function(e){e.modules.define("GeoObjectCollection",["util.defineClass","geoObject.abstract.Sequence","event.globalize","component.array.ParentArray","event.Mapper","geoObject.EventMappingTable","Event"],function(t,n,i,o,s,r,a,l){function c(e,t){c.superclass.constructor.call(this,e,t),this.events.addController(u),this.events.fire("create",new l({type:"create",target:this}))}var u=o(c);n(c,i,{set:function(e,t){return this._collectionComponent.set(e,t),this},add:function(e,t){return this._collectionComponent.add(e,t),this},remove:function(t){if(e.env.debug&&this._collectionComponent.indexOf(t)==-1)throw new Error("GeoObjectCollection.remove: удаляемый объект не найден");return this._collectionComponent.remove(t),this},removeAll:function(){return this._collectionComponent.removeAll(),this},splice:function(e,t){return new c({children:this._collectionComponent.splice.apply(this._collectionComponent,arguments)})},createCollectionComponent:function(e){return this._collectionComponent=new s(e,this,{onAdd:{callback:this._onAdd,context:this},onRemove:{callback:this._onRemove,context:this},onSet:{callback:this._onSet,context:this}},new r(this.events,new a(this)))},_onAdd:function(e,t){this.events.fire("add",new l({type:"add",target:this,index:e,child:t}))},_onRemove:function(e,t){this.events.fire("remove",new l({type:"remove",target:this,index:e,child:t}))},_onSet:function(e,t,n){this.events.fire("set",new l({type:"set",target:this,index:e,prevChild:t,child:n}))}}),t(c)})}],["0M",function(e){e.modules.define("geoQuery",["GeoQueryResult","yandex.counter"],function(e,t,n){function i(e){return n.countByKey("modulesUsage","geoQuery"),new t(e)}e(i)})}],["4C",function(ym){ym.modules.define("GeoQueryResult",["util.extend","util.List","vow","util.ArrayIterator","Clusterer","util.array","util.bounds","geoQueryResult.component.search","geoQueryResult.component.contain","geoQueryResult.component.distance","geoQueryResult.component.intersect","geoQueryResult.component.util","geoQueryResult.component.geometryPicker","GeoObject"],function(provide,extend,List,vow,ArrayIterator,Clusterer,utilArray,utilBounds,searchComponent,containComponent,distanceComponent,intersectComponent,utilComponent,geometryPicker,GeoObject){var getFieldValue=utilComponent.getFieldValue,notReadyError="данные запроса еще обрабатываются. Вызовите метод в функции-обработчике метода then.",GeoQueryResult=function(e,t){if(this._parent=t||null,this._objects=[],this._map=null,this._cachedBounds=null,this._lastPromise=vow.resolve(),this._resultReady=!0,e){var n=this._isPromise(e),i=this._isGeoQuery(e)&&!e.isReady();if(n||i){this._resultReady=!1;var o=vow.defer();e.then(function(t){this._objects=this._getObjects(i?e:t.geoObjects?t.geoObjects:t),this._resultReady=!0,o.resolve()},function(){o.reject()},this),this._lastPromise=o.promise()}else this._objects=this._getObjects(e)}};GeoQueryResult.prototype={getIterator:function(){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getIterator: "+notReadyError);return new ArrayIterator(this._objects)},getParent:function(){return this._parent},add:function(e){return this._createNewResultWhenReady(function(t){var n=this._isPromise(e),i=this._isGeoQuery(e)&&!e.isReady();if(n||i)return t||(t=vow.defer()),e.then(function(n){var o=this._getObjects(i?e:n.geoObjects?n.geoObjects:n);t.resolve([].concat(this._objects,o))},function(){t.reject()},this),t.promise();var o=this._getObjects(e);return[].concat(this._objects,o)},this)},remove:function(e){return this._createNewResultWhenReady(function(t){var n=this._isPromise(e),i=this._isGeoQuery(e)&&!e.isReady();if(n||i)return t||(t=vow.defer()),e.then(function(n){var o=this._removeObjects(this._objects,i?e:n.geoObjects?n.geoObjects:n);t.resolve(o)},function(){t.reject()},this),t.promise();var o=this._removeObjects(this._objects,e);return t?(t.resolve(o),t.promise()):o},this)},getLength:function(){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getLength: "+notReadyError);return this._objects.length},then:function(e,t,n){return this._lastPromise.then(e,t,n),this},isReady:function(){return this._resultReady},addToMap:function(e){return this._callMethod(function(){for(var t=e.geoObjects,n=0,i=this._objects.length;n<i;n++)this._objects[n].getMap()!=e&&t.add(this._objects[n])},arguments),this},removeFromMap:function(e){return this._callMethod(function(){for(var t=e.geoObjects,n=0,i=this._objects.length;n<i;n++)this._objects[n].getMap()==e&&t.remove(this._objects[n])},arguments),this},addTo:function(e){return this._callMethod(function(){for(var t=0,n=this._objects.length;t<n;t++)e.add(this._objects[t])},arguments),this},removeFrom:function(e){return this._callMethod(function(){for(var t=0,n=this._objects.length;t<n;t++)e.remove(this._objects[t])},arguments),this},getBounds:function(){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getBounds: "+notReadyError);return this._cachedBounds||(this._cachedBounds=this._calculateBounds()),this._cachedBounds},getGlobalPixelBounds:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getGlobalPixelBounds: "+notReadyError);return utilBounds.toGlobalPixelBounds(this.getBounds(),e.getZoom(),e.options.get("projection"))},getGlobalPixelCenter:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getGlobalPixelCenter: "+notReadyError);var t=this.getGlobalPixelBounds(e);return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},getCenter:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getCenter: "+notReadyError);var t=this.getGlobalPixelCenter(e);return e.options.get("projection").fromGlobalPixels(t,e.getZoom())},getMaxZoom:function(e,t){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getMaxZoom: "+notReadyError);var n={inscribe:!0,preciseZoom:!0};t&&t.hasOwnProperty("useMapMargin")&&!t.useMapMargin||(n.margin=e.margin.getMargin());var i=utilBounds.getCenterAndZoom(this.getBounds(),e.container.getSize(),e.options.get("projection"),n);return i.zoom},applyBoundsToMap:function(e,t){t=extend({useMapMargin:!0},t);var n=vow.defer(),i=function(){var i=this.getBounds();i&&(this._resultReady=!1,e.setBounds(i,t).then(function(e){this._resultReady=!0,e?n.reject(e):n.resolve()},this))};return this._resultReady?i.call(this):this.then(i,this),this._lastPromise=n.promise(),this},slice:function(e,t){return this._createNewResultWhenReady(function(n){var i=this._objects.slice(e,t);return n?(n.resolve(i),n.promise()):i},this)},reverse:function(){return this._createNewResultWhenReady(function(e){var t=this._objects.slice(0).reverse();return e?(e.resolve(t),e.promise()):t},this)},intersect:function(e){if(e.isReady()&&this.isReady())return new GeoQueryResult(this._getIntersection(e),this);var t=vow.defer();return e.then(function(){this.then(function(){t.resolve({geoObjects:this._getIntersection(e)})},function(){t.reject()},this)},function(){t.reject()},this),new GeoQueryResult(t.promise(),this)},clusterize:function(e){var t=new Clusterer(e);return this._callMethod(function(){for(var e=[],n=0,i=this._objects.length;n<i;n++)"Point"==this._objects[n].geometry.getType()&&e.push(this._objects[n]);t.add(e)}),t},get:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.get: "+notReadyError);return this._objects[e]},indexOf:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.indexOf: "+notReadyError);return utilArray.indexOf(this._objects,e)},each:function(e,t){return this._callMethod(function(){utilArray.each(this._objects,e,t)}),this},map:function(e,t){return this._createNewResultWhenReady(function(n){var i=utilArray.map(this._objects,e,t);return n?(n.resolve(i),n.promise()):i},this)},addEvents:function(e,t,n){return this._callMethod(function(){for(var i=0,o=this._objects.length;i<o;i++)this._objects[i].events.add(e,t,n)}),this},removeEvents:function(e,t,n){return this._callMethod(function(){for(var i=0,o=this._objects.length;i<o;i++)this._objects[i].events.remove(e,t,n)}),this},setProperties:function(e,t){return this._callMethod(function(){for(var n=0,i=this._objects.length;n<i;n++)this._objects[n].properties.set(e,t)}),this},unsetProperties:function(e){return this._callMethod(function(){for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].properties.unset(e)}),this},setOptions:function(e,t){return this._callMethod(function(){for(var n=0,i=this._objects.length;n<i;n++)this._objects[n].options.set(e,t)}),this},unsetOptions:function(e){return this._callMethod(function(){for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].options.unset(e)}),this},getCentralObject:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getCentralObject: "+notReadyError);return distanceComponent.getCentralObject(this,e)},getExtreme:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getExtreme: "+notReadyError);return distanceComponent.getExtreme(this,e)},getExtremeObject:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getExtremeObject: "+notReadyError);return distanceComponent.getExtremeObject(this,e)},getClosestTo:function(e){if(ym.env.debug&&!this._resultReady)throw new Error("GeoQueryResult.getClosestTo: "+notReadyError);return distanceComponent.getClosestTo(this,e)},search:function(e){return this._createNewResultWhenReady(function(t){var n=searchComponent(this,e);return t?(t.resolve(n),t.promise()):n},this)},searchInside:function(e){var t=geometryPicker(e);return this._createNewResultWhenReady(function(e){var n=searchComponent(this,function(e){return t!=e.geometry&&containComponent(t,e.geometry)});return e?(e.resolve(n),e.promise()):n},this)},searchContaining:function(e){var t=geometryPicker(e);return this._createNewResultWhenReady(function(e){var n=searchComponent(this,function(e){return t!=e.geometry&&containComponent(e.geometry,t)});return e?(e.resolve(n),e.promise()):n},this)},searchIntersect:function(e,t){t=extend({considerOccurance:!0},t);var n=geometryPicker(e);return this._createNewResultWhenReady(function(e){var i=searchComponent(this,function(e){return n!=e.geometry&&intersectComponent(e.geometry,n,t)});return e?(e.resolve(i),e.promise()):i},this)},sort:function(e){var t;if("string"==typeof e){var n=e.split(" "),i=n[0],o=n[1]?n[1]:"asc";t=function(e,t){return"asc"==o?getFieldValue(e,i)<getFieldValue(t,i)?-1:1:getFieldValue(t,i)<getFieldValue(e,i)?-1:1}}else t=e;return this._createNewResultWhenReady(function(e){var n=this._objects.concat(),i=n.sort(t);return e?(e.resolve(i),e.promise()):i},this)},sortByDistance:function(e){var t=geometryPicker(e),n=function(e,n){return distanceComponent.getDistance(e.geometry,t)-distanceComponent.getDistance(n.geometry,t)};return this._createNewResultWhenReady(function(e){var t=this._objects.concat(),i=t.sort(n);return e?(e.resolve(i),e.promise()):i},this)},_callMethod:function(e,t){var n=vow.defer();this._resultReady?(e.apply(this,t||[]),n.resolve()):(this.then(function(){e.apply(this,t||[]),n.resolve()},function(){n.reject()},this),this._lastPromise=n.promise())},_createNewResultWhenReady:function(e,t){if(this._resultReady)return new GeoQueryResult(e.call(t),this);var n=vow.defer();return this.then(function(){n.resolve(e.call(t))},function(){n.reject()},this),new GeoQueryResult(n.promise(),this)},_calculateBounds:function(){if(this._objects.length){for(var e=this._objects[0].getMap(),t=e?e.options.get("projection"):null,n=[],i=0,o=this._objects.length;i<o;i++){var s=this._objects[i].geometry.getBounds();n.push(s[0],s[1])}return 0==n.length?null:utilBounds.fromPoints(n,t)}return null},_getObjects:function(e){var t=[];if(this._isGeoQuery(e))for(var n,i=e.getIterator();(n=i.getNext())!=i.STOP_ITERATION;)t.push(n);else if(this._isJson(e))t=this._createObjectsFromJson(e);else for(var o=[].concat(e),s=0,r=o.length;s<r;s++){var a=o[s];if(this._isJsonGeometry(a)&&t.push(new GeoObject({geometry:a})),this._isGeoObject(a)&&t.push(a),this._isCollection(a))for(var n,i=a.getIterator();(n=i.getNext())!=i.STOP_ITERATION;)t=t.concat(this._getObjects(n))}return t},_removeObjects:function(e,t){var n=[];if(this._isGeoQuery(t))for(var i,o=t.getIterator();(i=o.getNext())!=o.STOP_ITERATION;)n.push(i);else n=[].concat(t);return n.length?(this._cachedBounds=null,"number"==typeof n[0]?this._removeByIndexes(e,n):this._removeByValues(e,n)):this._objects;
},_removeByIndexes:function(e,t){t.sort();for(var n=0,i=0,o=[];n<e.length;)n<t[i]||i==t.length?(o.push(e[n]),n++):n>t[i]?i++:(n++,i++);return o},_removeByValues:function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){for(var s=!0,r=0,a=t.length;r<a&&s;r++)t[r]==e[i]&&(s=!1);s&&n.push(e[i])}return n},_getIntersection:function(e){for(var t=e.getIterator(),n=[],i=[];(n=t.getNext())!=t.STOP_ITERATION;)i.push(n);for(var e=[],o=0,s=this._objects.length;o<s;o++)for(var r=!0,a=0,l=i.length;a<l&&r;a++)i[a]==this._objects[o]&&(e.push(this._objects[o]),r=!1);return e},_createObjectsFromJson:function(json){return"string"==typeof json&&(json=!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(json.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+json+")")),json?"Feature"==json.type?[this._createObjectFromJsonFeature(json)]:this._createObjectsFromJsonFeatureCollection(json):[]},_createObjectsFromJsonFeatureCollection:function(e){for(var t=[],n=0,i=e.features.length;n<i;n++)"Feature"==e.features[n].type?t.push(this._createObjectFromJsonFeature(e.features[n])):t=t.concat(this._createObjectsFromJsonFeatureCollection(e.features[n]));return t},_createObjectFromJsonFeature:function(e){return new GeoObject({geometry:e.geometry,properties:e.properties},e.options)},_isJsonGeometry:function(e){return!(!e.type||!e.coordinates)},_isGeoObject:function(e){return!!e.geometry},_isCollection:function(e){return!!e.getIterator},_isPromise:function(e){return!!e.then&&!e.getIterator},_isGeoQuery:function(e){return!!e.then&&!!e.getIterator},_isJson:function(e){return"string"==typeof e||"Feature"==e.type||"FeatureCollection"==e.type}},provide(GeoQueryResult)})}],[",s",function(e){e.modules.define("geoQueryResult.component.contain",["projection.wgs84Mercator","util.bounds","coordSystem.geo","geometry.component.pointInPolygon","util.math.calculateLineIntersection"],function(e,t,n,i,o,s){function r(e,t){switch(e.getType()){case"Point":var n=e.getCoordinates(),i=t.getCoordinates();return n[0]==i[0]&&n[1]==i[1];case"LineString":return e.getClosest(t.getCoordinates()).distance<u;case"Polygon":case"Rectangle":case"Circle":case"LinearRing":return e.contains(t.getCoordinates());default:return!1}}function a(e,t){if(!e.contains)return!1;if(!e.contains(t[0]))return!1;switch(e.getType()){case"Circle":case"Rectangle":for(var n=1,i=t.length;n<i;n++)if(!e.contains(t[n]))return!1;return!0;case"LinearRing":return l(e.getCoordinates(),t);case"Polygon":for(var o=e.getCoordinates(),n=0,i=o.length;n<i;n++)if(!l(o[n],t))return!1;return!0;default:return!1}}function l(e,t){for(var n=1,i=e.length;n<i;n++)for(var r=1,a=t.length;r<a;r++){var l=s(e[n],e[n-1],t[r],t[r-1]);if(l){if(!(l.b<u||1-l.b<u))return!1;var c=[(t[r][0]+t[r-1][0])/2,(t[r][1]+t[r-1][1])/2];if(!o(c,[e]))return!1}}return!0}function c(e){var t=e.getCoordinates();return[t[0],[t[0][0],t[1][1]],t[1],[t[1][0],t[0][1]],t[0]]}var u=.01,h=function(e,o){var s=e.options.get("projection")||o.options.get("projection");if("Point"!=e.getType()&&"Point"!=o.getType()&&!n.areIntersecting(e.getBounds(),o.getBounds(),s||t))return!1;switch(o.getType()){case"Point":return r(e,o);case"LineString":case"LinearRing":return a(e,o.getCoordinates());case"Rectangle":if(!e.contains)return!1;for(var l=c(o),u=0,h=l.length;u<h;u++)if(!e.contains(l[u]))return!1;return!0;case"Polygon":if(!e.contains)return!1;for(var l=o.getCoordinates(),u=0,h=l.length;u<h;u++)if(!a(e,l[u]))return!1;return!0;case"Circle":if(!e.contains||!e.contains(o.getCenter()))return!1;var d=e.getClosest(o.getCenter()),s=o.options.get("projection"),g=s?s.getCoordSystem():i,p=g.getDistance(d.position,o.getCenter());return p>=o.getRadius();default:return!1}};e(h)})}],[",t",function(e){e.modules.define("geoQueryResult.component.distance",["util.bind","util.vector","util.math.calculateLineIntersection","util.array","geometry.component.findClosestPathPosition","geoQueryResult.component.geometryPicker","coordSystem.geo","geometry.LineString"],function(t,n,i,o,s,r,a,l,c){function u(e,t){switch(t.getType()){case"Point":return f(e,t.getCoordinates(),t.options.get("projection"));case"Circle":case"Polygon":case"Rectangle":return t.contains(e)?0:t.getClosest(e).distance;case"LineString":return t.getClosest(e).distance;default:return null}}function h(e,t){var n=u(e.getCenter(),t),i=e.getRadius();return n<=i?0:n-i}function d(e,t){var n=e.getCoordinates(),i=new c(n[0]);i.options.setParent(e.options),i.setMap(e.getMap());for(var o=p(i,t),s=1,r=n.length;s<r;s++){i.setCoordinates(n[1]);var a=p(i,t);a<o&&(o=a)}return o}function g(e,t){var n=e.getCoordinates(),i=new c([n[0],[n[0][0],n[1][1]],n[1],[n[1][0],n[0][1]],n[0]]);return i.options.setParent(e.options),i.setMap(e.getMap()),p(i,t)}function p(e,t){switch(t.getType()){case"Point":return u(t.getCoordinates(),e);case"Circle":return h(t,e);case"Polygon":return d(t,e);case"Rectangle":case"LineString":var n=m(e.getPixelGeometry().getCoordinates(),_(t)),i=t.options.get("projection")||e.options.get("projection"),o=t.getMap()||e.getMap();return f(i.fromGlobalPixels(n[0],o.getZoom()),i.fromGlobalPixels(n[1],o.getZoom()),i);default:return null}}function m(e,t){for(var n=y(t,e[0]),i=n.distance,o=[n.position,e[0]],s=1,r=e.length;s<r;s++)n=y(t,e[s]),n.distance<i&&(i=n.distance,o=[n.position,e[s]]);for(var s=0,r=t.length;s<r;s++)n=y(e,t[s]),n.distance<i&&(i=n.distance,o=[n.position,t[s]]);return o}function f(e,t,n){var i=n?n.getCoordSystem():l;return i.getDistance(e,t)}function _(e){var t=e.getPixelGeometry(),n=t.getCoordinates();return"Rectangle"==t.getType()&&(n=[n[0],[n[0][0],n[1][1]],n[1],[n[1][0],n[0][1]],n[0]]),n}var M,v,y=r;s.isArray,"latlong"==e.env.coordinatesOrder?(M=0,v=1):(M=1,v=0);var j={getCentralObject:function(e,t){if(!e.getLength())return null;var n=t.getCenter(),i=function(e){return u(n,e.geometry)};return this._getClosestObject(e,i)},getExtreme:function(e,t){var n=e.getBounds();switch(t){case"top":return n[1][M];case"right":return n[1][v];case"bottom":return n[0][M];case"left":return n[0][v];default:throw new Error("geoQueryResult.getExtreme: неверное значение ключа.")}},getExtremeObject:function(e,t){if(!e.getLength())return null;var n,i=e.getBounds();switch(t){case"top":n=function(e){return Math.abs(i[1][M]-e.geometry.getBounds()[1][M])};break;case"right":n=function(e){return Math.abs(i[1][v]-e.geometry.getBounds()[1][v])};break;case"bottom":n=function(e){return Math.abs(i[0][M]-e.geometry.getBounds()[0][M])};break;case"left":n=function(e){return Math.abs(i[0][v]-e.geometry.getBounds()[0][v])};break;default:throw new Error("geoQueryResult.getExtremeObject: неверное значение ключа.")}return this._getClosestObject(e,n)},getClosestTo:function(e,t){var i=a(t),o=n(function(e){return i==e.geometry?-1:this.getDistance(i,e.geometry)},this);return this._getClosestObject(e,o)},getDistance:function(e,t){switch(e.getType()){case"Point":return u(e.getCoordinates(),t);case"Circle":return h(e,t);case"Polygon":return d(e,t);case"LineString":return p(e,t);case"Rectangle":return g(e,t);default:return null}},_getClosestObject:function(e,t){if(!e.getLength())return null;for(var n,i=e.getIterator(),o=i.getNext(),s=t(o);(n=i.getNext())!=i.STOP_ITERATION;){var r=t(n);r!=-1&&(s==-1||r<s)&&(s=r,o=n)}return s>-1?o:null}};t(j)})}],[",u",function(e){e.modules.define("geoQueryResult.component.geometryPicker",["geometry.Circle","geometry.Rectangle","geometry.LineString","geometry.Polygon","geometry.Point","util.array","geoObject.geometryFactory"],function(e,t,n,i,o,s,r,a){e(function(e){if(e.getZoom){var t=new n(e.getBounds(),{coordRendering:"boundsPath"});return t.options.setParent(e.options),t.setMap(e),t}return e.geometry?e.geometry:"function"==typeof e.getType?e:r.isArray(e)?r.isArray(e[0])?new n(e):new s(e):a.createGeometry(e)})})}],[",v",function(e){e.modules.define("geoQueryResult.component.intersect",["projection.wgs84Mercator","coordSystem.geo","util.bounds","util.math.calculateLineIntersection","geoQueryResult.component.distance","geoQueryResult.component.contain"],function(e,t,n,i,o,s,r){function a(e,t,n){switch(t.getType()){case"Point":var i=e.getCoordinates(),o=t.getCoordinates();return i[0]==o[0]&&i[1]==o[1];case"LineString":return t.getClosest(e.getCoordinates()).distance<v;case"LinearRing":case"Rectangle":case"Polygon":return!(!n.considerOccurance||!r(t,e))||t.getClosest(e.getCoordinates()).distance<v;case"Circle":return d(t,e,n);default:return!1}}function l(e,t,n){switch(t.getType()){case"Point":return a(t,e,n);case"LineString":case"LinearRing":return g(e.getPixelGeometry().getCoordinates(),t.getPixelGeometry().getCoordinates());case"Circle":return d(t,e,n);case"Polygon":return!(!n.considerOccurance||!r(t,e))||m(t.getPixelGeometry(),e.getPixelGeometry().getCoordinates());case"Rectangle":return!(!n.considerOccurance||!r(t,e))||g(e.getPixelGeometry().getCoordinates(),f(t));default:return!1}}function c(e,t,n){switch(t.getType()){case"Point":return a(t,e,n);case"LineString":return!(!n.considerOccurance||!r(e,t))||g(t.getPixelGeometry().getCoordinates(),e.getPixelGeometry().getCoordinates());case"LinearRing":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||g(t.getPixelGeometry().getCoordinates(),e.getPixelGeometry().getCoordinates());case"Circle":return d(t,e,n);case"Polygon":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||m(t.getPixelGeometry(),e.getPixelGeometry().getCoordinates());case"Rectangle":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||g(e.getPixelGeometry().getCoordinates(),f(t));default:return!1}}function u(e,t,n){switch(t.getType()){case"Point":return a(t,e,n);case"LineString":return!(!n.considerOccurance||!r(e,t))||g(t.getPixelGeometry().getCoordinates(),f(e));case"LinearRing":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||g(t.getPixelGeometry().getCoordinates(),f(e));case"Circle":return d(t,e,n);case"Polygon":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||m(t.getPixelGeometry(),f(e));case"Rectangle":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||g(f(t),f(e));default:return!1}}function h(e,t,n){switch(t.getType()){case"Point":return a(t,e,n);case"LineString":return!(!n.considerOccurance||!r(e,t))||m(e.getPixelGeometry(),t.getPixelGeometry().getCoordinates());case"LinearRing":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||m(e.getPixelGeometry(),t.getPixelGeometry().getCoordinates());case"Circle":return d(t,e,n);case"Polygon":if(n.considerOccurance&&(r(e,t)||r(t,e)))return!0;for(var i=t.getPixelGeometry().getCoordinates(),o=0,s=i.length;o<s;o++)if(m(e.getPixelGeometry(),i[o]))return!0;return!1;case"Rectangle":return!(!n.considerOccurance||!r(e,t)&&!r(t,e))||m(e.getPixelGeometry(),f(t));default:return!1}}function d(e,t,i){switch(t.getType()){case"Point":var o=e.options.get("projection")||t.options.get("projection"),s=o?o.getCoordSystem():n,a=s.getDistance(e.getCoordinates(),t.getCoordinates()),l=e.getRadius();return i.considerOccurance?a<=l:Math.abs(a-l)<v;case"LineString":var c=r(e,t);return c?!!i.considerOccurance:y(t,e)<v;case"LinearRing":case"Rectangle":case"Polygon":var c=r(e,t)||r(t,e);return c?!!i.considerOccurance:y(t,e)<v;case"Circle":return p(e,t,i);default:return!1}}function g(e,t){for(var n=1,i=e.length;n<i;n++)for(var s=1,r=t.length;s<r;s++)if(o(e[n],e[n-1],t[s],t[s-1]))return!0;return!1}function p(e,t,i){var o=e.options.get("projection")||t.options.get("projection"),s=o?o.getCoordSystem():n,r=s.getDistance(e.getCenter(),t.getCenter()),a=e.getRadius(),l=t.getRadius(),c=Math.abs(a-l)>=r;return c?!!i.considerOccurance:r<=a+l}function m(e,t){for(var n=e.getCoordinates(),i=0,o=n.length;i<o;i++)if(g(n[i],t))return!0;return!1}function f(e){var t=e.getPixelGeometry(),n=t.getCoordinates();return"Rectangle"==t.getType()&&(n=_(n)),n}function _(e){return[e[0],[e[0][0],e[1][1]],e[1],[e[1][0],e[0][1]],e[0]]}function M(e){return[[e[0][0]-v,e[0][1]-v],[e[1][0]+v,e[1][1]+v]]}var v=.001,y=s.getDistance,j=function(e,n,o){if(o=o||{},"Point"!=e.getType()&&"Point"!=n.getType()){var s=e.options.get("projection")||n.options.get("projection");if(!i.areIntersecting(M(e.getBounds()),M(n.getBounds()),s||t))return!1}switch(e.getType()){case"Point":return a(e,n,o);case"LineString":return l(e,n,o);case"LinearRing":return c(e,n,o);case"Rectangle":return u(e,n,o);case"Polygon":return h(e,n,o);case"Circle":return d(e,n,o);default:return!1}};e(j)})}],[",w",function(e){e.modules.define("geoQueryResult.component.search",["geoQueryResult.component.util"],function(e,t){function n(e){var t=e.match(/^([\w.]*)\s*(<|<\=|\=|\=\=|\!\=|>\=|>|rlike|regexp)\s*([\w.]*|".*"|'.*')$/i),n=t[1],o=s[t[2].toLowerCase()],r=t[3];return r='"'==r.charAt(0)||"'"==r.charAt(0)?r.slice(1,r.length-1):a[r]?a[r].value:Number(r),function(e){return o(i(e,n),r)}}var i=t.getFieldValue,o=function(e,t){for(var i="string"==typeof t?n(t):t,o=[],s=e.getIterator(),r=0,a=s.getNext();a!=s.STOP_ITERATION;)i(a,r,this)&&o.push(a),a=s.getNext(),r++;return o},s={"<":function(e,t){return null!=e&&null!=t&&e<t},"<=":function(e,t){return null!=e&&null!=t&&e<=t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},">=":function(e,t){return null!=e&&null!=t&&e>=t},">":function(e,t){return null!=e&&null!=t&&e>t},regexp:function(e,t){return e&&e.match&&null!=e.match(new RegExp(t))}};s["="]=s["=="],s.rlike=s.regexp;var r,a={"true":{value:!0},"false":{value:!1},"null":{value:null},undefined:{value:r}};e(o)})}],[",x",function(e){e.modules.define("geoQueryResult.component.util",[],function(t){var n={getFieldValue:function(e,t){if(s[t])return s[t](e);var n=t.indexOf("."),i=r[t.slice(0,n)],o=t.slice(n+1);return i(e,o)}},i="latlong"==e.env.coordinatesOrder?0:1,o=0==i?1:0,s={lat:function(e){return"Point"==e.geometry.getType()?e.geometry.getCoordinates()[i]:null},lng:function(e){return"Point"==e.geometry.getType()?e.geometry.getCoordinates()[o]:null},x:function(e){return"Point"==e.geometry.getType()?e.geometry.getPixelGeometry().getCoordinates()[0]:null},y:function(e){return"Point"==e.geometry.getType()?e.geometry.getPixelGeometry().getCoordinates()[1]:null}},r={geometry:function(e,t){var n,i=t.split("."),o=i[0];if("type"==o)n=e.geometry.getType();else if("coordinates"==o){n=e.geometry.getCoordinates();for(var s=1;s<i.length;s++)n=n[i[s]]}return n},properties:function(e,t){return e.properties.get(t)},options:function(e,t){return e.options.get(t)}};s["long"]=s.lng,t(n)})}],["4F",function(e){e.modules.define("geoXml.getJson",["util.jsonp","vow"],function(t,n,i){function o(t){return n({url:s,requestParams:{url:t,key:e.env.key},postprocessUrl:function(t){return e.env.hostConfigQuery?t+"&"+e.env.hostConfigQuery:t}})}var s=e.env.hosts.api.services.geoxml+"1.2/geoxml.xml";t(o)})}],["4K",function(e){e.modules.define("geoXml.load",["geoXml.getJson","geoXml.util","vow","yandex.counter"],function(t,n,i,o,s){function r(t){s.countByKey("modulesUsage","geoXml.load"),t=i.resolveUrl(t,window.location.href);var r=o.defer();return n(t).then(function(n){var i;n.ymaps?i=["geoXml.parser.ymapsml.geoObjects","geoXml.parser.ymapsml.MapState"]:n.gpx?i=["geoXml.parser.gpx.geoObjects"]:n.kml&&(i=["geoXml.parser.kml.geoObjects"]),e.modules.require(i,function(e,i){var o,s,a;if(n.ymaps)o=e(n.ymaps,t),n.ymaps.Representation&&n.ymaps.Representation.View&&(s=new i(n.ymaps.Representation.View));else if(n.gpx)o=e(n.gpx);else if(n.kml){var l=e(n.kml,t);o=l.collection,a=l.wait,a&&a.then(function(){r.resolve({geoObjects:o})})}a||r.resolve({geoObjects:o,mapState:s})})},function(e){r.reject(e)}),r.promise()}t(r)})}],["4M",function(e){e.modules.define("geoXml.util",["option.presetStorage"],function(e,t){var n={checkStyle:function(e){if(e&&!t.get(e)){var n={};e.replace(/^default#(?:([a-z]+)(?:Small)?|([a-zA-Z]+))(?:Point|Icon)$/,function(e,i,o){var s="islands#"+(i||o)+"Icon";t.get(s)&&(n.preset=s)}),t.add(e,n)}},resolveUrl:function(e,t){if(/^https?:\/\//.test(e))return e;for(var n,i=/^((?:[^\/]+):\/\/(?:[^\/]+))(\/(?:.*))$/.exec(t),o=i[1],s=i[2].split("/"),r=e.split("/"),a=s.slice(1,s.length-1),l=0,c=r.length;l<c;l++)switch(n=r[l]){case"":0==l?a=[]:l==c-1&&a.push(n);break;case".":break;case"..":a.pop();break;default:a.push(n)}return o+"/"+a.join("/")}};e(n)})}],["0$",function(e){e.modules.define("getZoomRange",["LayerCollection","layer.storage","mapType.storage"],function(t,n,i,o){function s(t,s,r){if(e.env.debug){if("undefined"==typeof t)throw new Error("getZoomRange: не передан параметр mapType");if("undefined"==typeof s)throw new Error("getZoomRange: не указана точка для определения диапазона масштабирования ll")}for(var a=o.get(t).getLayers(),l=new n,c=0,u=a.length;c<u;c++){var h=i.get(a[c]);l.add(new h)}r&&l.options.setParent(r.options);var d=l.getZoomRange(s);return l.options.setParent(null),d}t(s)})}],["0)",function(e){e.modules.define("graphics.constants",[],function(e){e({ZERO:0,ADDING:1,REMOVING:2,ACTIVE:3})})}],["-_",function(e){e.modules.define("graphics.generator.simplify2",[],function(e){function t(e,t,i){if(e.length<6)return function(){return{points:e,indexes:t}};var o=n(e,i);return function(n){for(var i=[],s=[],r=n*n,a=o(r),l=(e[0],0),c=e.length;l<c;l++)(a[l]>=r||0==l||l==c-1)&&(i.push(e[l]),s.push(t?t[l]:l));return{points:i,indexes:s}}}function n(e,t){function n(r,l,c,u,h){var d=0;if(!c){for(var g=-1,p=[e[l][0]-e[r][0],e[l][1]-e[r][1]],m=0,f=t.length;m<f;++m){var _=t[m];if(_>r){if(_<l){g=_,d=s;break}break}}if(g<0){if(Math.abs(p[0])>o||Math.abs(p[1])>o)for(var M=p[0]*p[0]+p[1]*p[1],v=1/M,m=r+1;m<l;++m){var y=i(e[m],e[r],e[l],p,v);y>d&&(g=m,d=y)}else g=Math.round(.5*(r+l)),d=h;a[g]=d}c={start:r,end:l,index:g,distance:d}}return c.index&&c.distance>u&&(c.index-r>=2&&(c.left=n(r,c.index,c.left,u,c.distance)),l-c.index>=2&&(c.right=n(c.index,l,c.right,u,c.distance))),c}for(var r=e.length,a=[],l=0,c=e.length;l<c;++l)a[l]=0;t||(t=[]);for(var u=0,l=0,c=t.length;l<c;++l)a[t[l]]=s;return function(e){return u=n(0,r-1,u,e,s),a}}function i(e,t,n,i,o){var s,r=+t[0],a=+t[1];s=+((e[0]-r)*i[0]+(e[1]-a)*i[1])*o,s>1?(r=+n[0],a=+n[1]):s>0&&(r+=+i[0]*s,a+=+i[1]*s);var l=+e[0]-r,c=+e[1]-a;return+l*l+c*c}e(t);var o=1/Math.pow(2,22),s=1e5;window.Uint8Array?Uint8Array:Array,window.Float32Array?Float32Array:Array})}],["49",function(e){e.modules.define("graphics.renderManager",["graphics.renderManager.pane","util.Associate"],function(t,n,i){var o=new i(function(e,t){return new n(e,t)});t({getContainer:function(t){var n=t.getMap();if(e.env.debug&&!n)throw new Error("graphics.render.sliceshape.manager: передан пустой указатель на контейнер");return o.get(t,n)}})})}],["4V",function(e){e.modules.define("graphics.renderManager.canvasTile",["util.dom.element","util.dom.style","util.pixelBounds","graphics.renderManager.constants","graphics.renderManager.functions"],function(e,t,n,i,o,s){function r(e,t,n,i){if(e.length!=t.length)return!0;for(var o=0,s=e.length;o<s;++o)if(n[e[o]].id!=i[t[o]].id)return!0;return!1}function a(e,t,n){for(var i=0,o="x"+t,s=e;i<p&&n[s+o];++s)i++;return i}function l(e,t,n){for(var i=1e3,o=0,s=[0,0],r=t,l=0;l<p;++r,++l){var c=a(e,r,n);if(0==c)break;var u=Math.min(c-1,i),h=u+l;o<h&&(s=[u,l],o=h),i=u}return s}function c(e){var t,n,i,o,s,r,a,c=[],u={};for(t=0,n=e.length;t<n;++t)u[e[t][0]]=e[t];for(t=0,n=e.length;t<n;++t){var h=e[t];if(u[h[0]]){var d=l(h[1],h[2],u),g=[];for(i=h[1],s=h[1]+d[0];i<=s;++i)for(o=h[2],r=h[2]+d[1];o<=r;++o)a=i+"x"+o,g.push(u[a]),u[a]=!1;c.push({dimension:d,items:g})}}return c}function u(e,t,n,i,o){e.drawImage(t,o*(n[0]-i[0]),o*(n[1]-i[1]))}var h,d={element:t,style:n},g=o.tileSize,p=o.renderLineLimit,m=null,f={place:function(e,t){return e.data=e.data||{},this.process(e,t),e.data=e.newData,e.data.items=e.items,e.data.element},renderGroup:function(e,t){var n,i,o,s=t.items,r=s[0],a=[[r[1]*g,r[2]*g],[(r[1]+t.dimension[0]+1)*g,(r[2]+t.dimension[1]+1)*g]],l=h,c=t.items.length;1==c&&(l=e.newData.grid[r[0]].pane);var d=[];for(o=0;o<c;++o)d=d.concat(e.newData.grid[s[o][0]].items||[]);if(m=e.items,d.sort(this._itemsSort),m=null,l=this.fillTilePane(e,d,l),l.updateClipping(a,!1,0),l.lockBoundsTo(a),l.flush(),l.removeAll(),n=l.holder(),l.margin){var p=[l.margin.left,l.margin.top],f=l.clippingOffset,_=[p[0]+f[0],p[1]+f[1]];if(1==c)e.newData.grid[r[0]].pane=l;else for(h=l,o=0;o<c;++o){var M=e.newData.grid[s[o][0]];i=M.pane=this.fillTilePane(e,M.items,M.pane),i.updateClipping([[s[o][1]*g,s[o][2]*g],[(s[o][1]+1)*g,(s[o][2]+1)*g]],!1,0),i.lockBoundsTo([[s[o][1]*g,s[o][2]*g],[(s[o][1]+1)*g,(s[o][2]+1)*g]]),i.resize(),i.removeAll(),i.prepareRender();var v=[i.margin.left,i.margin.top],y=i.clippingOffset,j=[v[0]+y[0],v[1]+y[1]],b=i.scaleFactor,I=i.getCanvas();u(I,n,_,j,b)}}},fillTilePane:function(e,t,n){for(var i=e.items,o=0,s=t.length;o<s;o++){var r=i[t[o]].shape.getGraphics();n||(n=r.createPane(),n.setPositionPolicy(!1,!0)),r.getPane()!=n&&n.addShape(r),i[t[o]].changed=0}return n},process:function(e,t){var n=t.getVisibleBounds(0),o=[[Math.floor(n[0][0]/g),Math.floor(n[0][1]/g)],[Math.floor(n[1][0]/g),Math.floor(n[1][1]/g)]];e.newData&&(i.containsBounds(e.newData.bounds,o)||(e.newData=0)),e.newData||(e.newData=this.createDataGrid(e.items,o),e.newData.element=e.data.element,e.newData.element||(e.newData.element=d.element.create()));var s,a,l,u,h,p=e.data.bounds,m=e.newData.bounds,f=0;if(e.data.grid)for(s=p[0][0];s<p[1][0];s++)for(a=p[0][1];a<p[1][1];a++)h=s+"x"+a,e.data.grid[h]&&(!e.newData.grid[h]&&e.data.grid[h].pane&&d.element.remove(e.data.grid[h].pane.holder()),e.newData.grid[h]&&(e.newData.grid[h].pane=e.data.grid[h].pane,e.newData.grid[h].changed+=e.data.grid[h].changed,r(e.data.grid[h].items,e.newData.grid[h].items,e.data.items,e.items)&&e.newData.grid[h].changed++));else e.data.grid={};var _=[],M=[];if(e.newData.grid){for(s=m[0][0];s<m[1][0];s++)for(a=m[0][1];a<m[1][1];a++)h=s+"x"+a,e.newData.grid[h]&&(s>=o[0][0]&&s<=o[1][0]&&a>=o[0][1]&&a<=o[1][1]?(_.push(h),e.data.grid[h]&&!e.newData.grid[h].changed&&e.newData.grid[h].pane||(M.push([h,s,a]),e.newData.grid[h].changed=0,e.newData.grid[h].updated=1)):e.newData.grid[h].pane&&d.element.remove(e.newData.grid[h].pane.holder()));var v=c(M);for(l=0,u=v.length;l<u;++l){var y=v[l];this.renderGroup(e,y),f++}for(l=0,u=_.length;l<u;++l){h=_[l];var j=e.newData.grid[h].pane;if(j.margin){var b=t.toClientPixels([j.margin.left,j.margin.top]),I=j.clippingOffset,L=j.holder();e.newData.grid[h].updated=0,d.style.setPosition(L,[b[0]+I[0],b[1]+I[1]]),L.parentNode!=e.newData.element&&e.newData.element.appendChild(L)}}}},createDataGrid:function(e,t){for(var n,o,s,r,a,l,c,u=[],h={},d=2,p=[[t[0][0]-d,t[0][1]-d],[t[1][0]+d,t[1][1]+d]],m=0,f=e.length;m<f;++m)if(n=e[m].shape.getGraphics().getBounds(),s=e[m]._canvas_lastBounds,o=i.getIntersection(p,[[Math.floor(n[0][0]/g),Math.floor(n[0][1]/g)],[Math.ceil(n[1][0]/g),Math.ceil(n[1][1]/g)]])){for(u.push(o),c=e[m].changed,e[m]._canvas_lastBounds=o,r=o[0][0];r<o[1][0];r++)for(a=o[0][1];a<o[1][1];a++)l=r+"x"+a,h[l]=h[l]||{items:[],changed:0},h[l].items.push(m),h[l].changed+=c;if(s)for(r=s[0][0];r<s[1][0];r++)for(a=s[0][1];a<s[1][1];a++)(r<o[0][0]||r>o[1][0]||a<o[0][1]||a>o[1][1])&&(l=r+"x"+a,h[l]&&(h[l].changed+=c))}var _=i.fromBounds(u),M=[_[1][0]-_[0][0],_[1][1]-_[0][1]];return{gridSize:M,bounds:_,grid:h}},_itemsSort:function(e,t){return-s.zIndexComparison(m[e].shape,m[t].shape)}};e(f)})}],["4Y",function(e){e.modules.define("graphics.renderManager.constants",["system.browser","util.hd"],function(t,n,i){var n=e.env.browser,o=n.isMobile||n.isTablet;if("MSIE"==n.name||"IEMobile"==n.name)t({tileSize:256,renderLineLimit:1});else{var s=i.getPixelRatio(),r=s>1?256:320;t({tileSize:r,renderLineLimit:o?1:2})}})}],["42",function(e){e.modules.define("graphics.renderManager.functions",[],function(e){function t(e,t){if(!t||!e)return 0;var n=t,i=e;if(!n||!i)return 0;var o=n.getZIndex(),s=i.getZIndex();return o!=s?o-s:n.getZOrder()-i.getZOrder()}e({zIndexComparison:t})})}],["45",function(e){e.modules.define("graphics.renderManager.NodePane",["util.dom.element","util.dom.style","graphics.renderManager.canvasTile","graphics.renderManager.functions","util.css"],function(t,n,i,o,s,r){function a(e,t){this._manager=t,this.element=n.create({parentNode:e,className:r.addPrefix("node-pane"),css:{position:"absolute",left:0,top:0,zIndex:0}}),i.patch(this.element,{selectable:!1}),this._commandsList=[],this._hasChangedOrder=0,this._clusters=[],this._items=[],this._counter=0}var l=-1,c=-2,u=-3,h=-4;a.prototype={add:function(e){this._commandsList.push([this._insert,e])},remove:function(e){this._commandsList.push([this._remove,e])},hide:function(e){this._commandsList.push([this._hide,e])},update:function(e){e.__nodePaneId&&(e.__nodePaneId.changed++,e.__nodePaneId.cluster&&e.__nodePaneId.cluster.changed++,this._hasChangedOrder++)},executeQueue:function(){var e,t;for(+new Date,e=0,t=this._commandsList.length;e<t;++e)this._commandsList[e][0].call(this,this._commandsList[e][1]);this._commandsList=[],this._hasChangedOrder&&(this.sortElements(),this.updateClusters(),this._hasChangedOrder=0),this.modifyNodes(),this.removeUnused()},sortElements:function(){this._items.sort(function(e,t){return s.zIndexComparison(e.shape,t.shape)})},updateClusters:function(){var e,t,i,o,s="",r=[],a=[],c=null;for(e=0,i=this._items.length;e<i;e++){var u=this._items[e].shape,h=u.getTechName();if(this._items[e].index>=l){var d="canvas"==h||"webgl"==h;(h!=s||u.isDynamic&&d)&&(c&&c.items.length&&r.push(c),c={tech:h,special:d,items:[],changed:0,startZIndex:u.getZIndex()}),c.items.push(this._items[e]),this._items[e].сluster=c,c.changed+=this._items[e].changed,s=u.isDynamic&&d?"":h}else a.push(this._items[e])}for(c&&c.items.length&&r.push(c),e=0,i=this._clusters.length;e<i;e++){var g=!1;for(t=0,o=r.length;t<o;++t)if(this._clusters[e].tech==r[t].tech&&!r[t].used){r[t].data=this._clusters[e].data,r[t].used=!0,r[t].topNode=this._clusters[e].topNode,g=!0;break}g||(this._clusters[e].data&&this._clusters[e].data.element&&n.remove(this._clusters[e].data.element),this._clusters[e].topNode&&n.remove(this._clusters[e].topNode))}this._clusters=r,this._unusedItems=a},_insert:function(e){if(!e.__nodePaneId){var t={shape:e,id:this._counter++,index:-1,nodeId:this,changed:0,prevElement:null};this._items.push(t),e.__nodePaneId=t}e.__nodePaneId.index<l&&(e.__nodePaneId.index=l),e.__nodePaneId.changed++,this._hasChangedOrder++},_hide:function(e){e.__nodePaneId&&(e.__nodePaneId.index=c,e.__nodePaneId.prevElement=null)},_remove:function(e){e.__nodePaneId&&(this._hide(e),e.__nodePaneId.index=h),this._hasChangedOrder++},_placeNodes:function(e,t){for(var n=0,i=0,o=t.length;i<o;++i)if(t[i].index>=l){var s=t[i].shape;s.getPane()||s.attachToContainer();var r=s.getPane(),a=r.holder();r.setPositionPolicy(!1,!0);var c=s.reposite();(t[i].changed||c)&&(r.flush(),t[i].changed=0);var u=a.parentNode==e;u||(t[i].index=l,t[i].prevElement=null),t[i].index==i&&u||(t[i].index=i,n?n!=a.nextSibling&&(e.insertBefore(a,n),t[i].prevElement=n):(t[i].prevElement=null,e.appendChild(a)),r.changed(s),r.flush()),n=a}else this._removeShape(t[i]);return n},_placeSpecial:function(e,t){var n=null;if("canvas"!=t.tech)throw new Error("graphics.renderManager.NodePane: неизвесный тип "+t.tech);return n=o.place(t,this._manager),e.appendChild(n),n},modifyNodes:function(){for(var t=null,o=null,s=0,r=this._clusters.length;s<r;++s){var a=this._clusters[s],l=a.topNode;l&&l.nextSibling==o||(l||(l=a.topNode=n.create({className:"graphics-"+a.tech}),i.css(l,{position:"absolute",transform:"translateZ(0)",left:0,top:0})),o?this.element.insertBefore(l,o):this.element.firstChild?this.element.insertBefore(l,this.element.firstChild):this.element.appendChild(l)),i.css(l,{zIndex:a.startZIndex}),e.env.debug&&i.attr(l,{itemsCount:a.items.length}),o=l,t=a.special&&a.items.length>0?this._placeSpecial(l,a):this._placeNodes(l,a.items)}},removeUnused:function(){if(this._unusedItems)for(var e=0,t=this._unusedItems.length;e<t;++e)this._removeShape(this._unusedItems[e]);this._unusedItems=null},_removeShape:function(e){var t=e.index;if(t<=c&&e.shape){var n=e.shape,i=n.getPane(),o=i?i.holder():null;o&&o.parentNode&&o.parentNode.removeChild(o),e.index=u}t==h&&this._unlinkShape(e)},_unlinkShape:function(e){var t=e.shape;t&&t.__nodePaneId&&(t.__nodePaneId.shape=null,t.__nodePaneId.nodeId=null,t.__nodePaneId.prevElement=null,t.__nodePaneId.сluster=null,t.__nodePaneId=null);for(var n=0,i=this._items.length;n<i;++n)if(this._items[n]===e){this._items.splice(n,1);break}},destroy:function(){for(var e=this._items.length-1;e>=0;--e)this.remove(this._items[e].shape);n.remove(this.element)}},t(a)})}],["47",function(e){e.modules.define("graphics.renderManager.pane",["util.defineClass","graphics.renderManager.ShapeStorage","util.scheduler.Group","util.hd","graphics.renderManager.constants","graphics.constants","vow","event.Manager"],function(t,n,i,o,s,r,a,l,c){function u(e,t){this._map=t,this._container=e,this._gl=0,this.events=new c({context:this}),this._paneEvents=e.events.group().add("viewportchange",this.scheduleUpdate,this).add("panesizechange",this._onSizeChange,this).add("actionend",this.scheduleUpdate,this).add("rendertick",this._renderGraphicsTick,this).add("rendertock",this.scheduleUpdate,this),this._storage=new i(this,e.getElement()),this._commandQueue=[],this._scheduler=new o,t.events.add("destroy",this._onMapDestroy,this)}var h,d;n(u,{add:function(e){this._commandQueue.push(["add",e]),this.scheduleUpdate()},remove:function(e){this._commandQueue.push(["remove",e]),this.scheduleUpdate()},glAdd:function(e,t){e.state!=a.ACTIVE&&(e.state=a.ADDING,this._getWebGl().then(function(n){n.addLeaf(e,t)}))},glRemove:function(e){e.state&&(e.state=a.ZERO,this._gl&&this._gl.removeLeaf(e))},scheduleUpdate:function(){!this._map||this._inRender||this._updateScheduled||this._scheduler.schedule("raf",this._beforeRenderGraphics,this),this._updateScheduled=!0},_renderGraphicsTick:function(){this._gl&&this._gl.update({render:!0}),this._renderGraphics()},_beforeRenderGraphics:function(){this._updateScheduled&&this._renderGraphics()},_renderGraphics:function(){if(this._scheduler.unschedule("raf",this._renderGraphics,this),this._inRender=!0,this._updateScheduled=!1,this._map){var e,t;for(e=0,t=this._commandQueue.length;e<t;++e)this._storage[this._commandQueue[e][0]](this._commandQueue[e][1]);this._commandQueue=[],this._render(),this._glRender(),this._inRender=!1,this._updateScheduled&&(this._updateScheduled=!1,this.scheduleUpdate())}},_glRender:function(){this._gl&&this._gl.render({render:!0})},_onSizeChange:function(){this._gl&&this._gl.resize(this.getViewport())},getViewport:function(){return this._container.getViewport()},toClientPixels:function(e){return this._container.toClientPixels(e)},getVisibleBounds:function(e){e=e||this._map.options.get("canvasViewportMargin")||r.tileSize/2;var t=this.getViewport();return this._map.action.getCurrentState().isTicking&&(e=-1),[this._container.fromClientPixels([t[0][0]-e,t[0][1]-e]),this._container.fromClientPixels([t[1][0]+e,t[1][1]+e])]},_render:function(){this._storage.process()},getZoom:function(){return this._container.getZoom()},getElement:function(){return this._container.getElement()},_onMapDestroy:function(){this._map=null,this._container=null,this._scheduler.removeAll(),this._dropWebGl(),this._paneEvents.removeAll()},_getWebGl:function(){return this._webglLoadingPromise||(this._webglLoadingPromise=l.defer(),e.modules.require(["graphics.webgl.Context","util.matrix.2d"],function(e,t){h=e,d=t,this._createWebGl(),this._onSizeChange(),this._webglLoadingPromise.resolve(this._gl)},this)),this._webglLoadingPromise.promise()},_dropWebGl:function(){this._gl&&(this._gl.events.remove("fail",this._onWebGlFail,this),this._gl.destroy()),this._webglLoadingPromise=null},_createWebGl:function(){var e=0;return this._gl=new h(this.getElement(),e={renderManager:this,spawnElement:!0,uniforms:{viewportDimension:function(){var e=this.getViewport();return[e[1][0]-e[0][0],e[1][1]-e[0][1],1]}.bind(this),projectionScale:function(t){var n=e.uniforms.viewportDimension();return[t/n[0],-t/n[1]]}.bind(this),projectionMatrix:function(t){var n=e.uniforms.projectionScale(1);return t=d.identity(t),d.scale(t,t,n),t}.bind(this),mapCamera:function(){var e=Math.pow(2,this._container.getZoom()),t=this._container.getPosition(),n=this._container.getOffset();
return{scale:e,zoom:this._container.getZoom(),center:t,offset:n}}.bind(this),modelViewMatrix:function(t){var n=(this._map,this._container.getZoom()),i=Math.pow(2,n),o=this._container.getPosition(),s=this._container.getOffset(),r=0,a=[-o[0]+s[0],-o[1]+s[1]],l=this._gl.getState().DPI,c=e.uniforms.viewportDimension(),u=r?2*l:l,h=[.5*(Math.ceil(u*c[0])%2),.5*(Math.ceil(u*c[1])%2)],g=[Math.round(a[0]*u)/u,Math.round(a[1]*u)/u],p=[(h[0]+g[0])/i,(h[1]+g[1])/i,1],m=2,f=[m*i,m*i];return t=d.identity(t),d.scale(t,t,f),d.translate(t,t,p),t}.bind(this)}}),this._gl.events.add("fail",this._onWebGlFail,this),this._gl},_onWebGlFail:function(){this.events.fire("webglfail"),this._dropWebGl()}}),t(u)})}],["4-",function(e){e.modules.define("graphics.renderManager.ShapeStorage",["graphics.renderManager.NodePane","util.List","util.id","util.pixelBounds","graphics.renderManager.constants"],function(e,t,n,i,o,s){function r(e,i){this.shapes=new n,this.wrappers={},this.manager=e,this.rendered=[],this.nodePane=new t(i,e),this.viewportBounds=null,this.viewportBoundsGen=0}function a(e){var t=e.shape.getBounds();return e.bounds=t,e.boundsCheckGen=0,e.position=o.getCenter(t),e.size=o.getSize(t),e.zIndex=e.shape.getZIndex(),e.isPersistentVisible="canvas"==e.shape.getTechName(),e}function l(e,t){var n=a({order:d++,shape:e});return n.id=i.get(n),n._wrapId=t,n}function c(){this.master.update(a(this))}function u(e,t){return e&&t&&e[0][0]==t[0][0]&&e[0][1]==t[0][1]&&e[1][0]==t[1][0]&&e[1][1]==t[1][1]}var h=s.tileSize;r.prototype={add:function(e){var t=this._wrap(e);this.shapes.insert(t),this._linkCompontents(t)},remove:function(e){var t=this._wrap(e);t.deleted=!0,this.shapes.remove(t),this._unlinkComponent(t),this.nodePane.remove(e),delete this.wrappers[t._wrapId]},update:function(e){this.nodePane.update(e.shape),this.manager.scheduleUpdate()},_wrap:function(e){var t=i.get(e);return this.wrappers[t]||(this.wrappers[t]=l(e,t))},_linkCompontents:function(e){this._unlinkComponent(e),e.master=this,e.events=e.shape.events.group().add(["geometryUpdate","geometryChanged","needRedraw","orderChange"],c,e)},_unlinkComponent:function(e){e.events&&e.events.removeAll()},process:function(){var e=this.manager.getVisibleBounds();e[0][0]=Math.floor(e[0][0]/h)*h,e[0][1]=Math.floor(e[0][1]/h)*h,e[1][0]=Math.ceil(e[1][0]/h)*h,e[1][1]=Math.ceil(e[1][1]/h)*h,u(e,this.viewportBounds)||(this.viewportBounds=e,this.viewportBoundsGen++),this.dynamicTest(),this.nodePane.executeQueue()},dynamicTest:function(){for(var e=this.shapes,t=e.first;t;){var n=t.obj;if(n.boundsCheckGen!=this.viewportBoundsGen){var i=!!n.isPersistentVisible||o.areIntersecting(this.viewportBounds,n.bounds);n.boundsCheckGen=this.viewportBoundsGen,i!=n.visible&&(i?this._showObject(n):this._hideObject(n))}if(t==e.last)break;t=t.next}},_showObject:function(e){e.visible=!0,this.nodePane.add(e.shape)},_hideObject:function(e){e.visible=!1,this.nodePane.hide(e.shape)}};var d=0;e(r)})}],["0@",function(e){e.modules.define("Hint",["util.defineClass","Popup","util.dom.style","util.dom.viewport","vow","hint.metaOptions"],function(t,n,i,o,s,r){function a(e,t){a.superclass.constructor.call(this,e,t),this.options.setName("hint"),this._setupHoverListeners()}a.UnderCursorError=function(){return new Error("Hint is under cursor and 'holdByMouse' option is activated")},n(a,i,{open:function(e,t){var n=this.isOpen(),i=a.superclass.open.call(this,e,t);return n||i.then(function(){this.isOpen()&&this.setPosition(this.getPosition())},null,null,this),i},setPosition:function(e){return a.superclass.setPosition.call(this,this.isOpen()?this._fitPane(e):e)},doClose:function(e){return!e&&this._mouseOver&&this.options.get("holdByMouse",!0)?(this.getOverlaySync().events.once("mouseleave",this.close,this),r.reject(a.UnderCursorError())):a.superclass.doClose.call(this)},_setupHoverListeners:function(){this._mouseOver=!1,this.events.add(["mouseenter","mouseleave"],function(e){this._mouseOver="mouseenter"==e.get("type")},this)},_fitPane:function(t){var n=this.getPosition(),i=t||n;if(e.env.debug&&!i)throw new Error("Hint._fitPane: Не задана позиция.");if(!this.options.get("fitPane",!0))return i;var r=this.getOverlaySync(),a=r.getLayoutSync();if(!a||!a.getShape())return i;var l,c,u,h=this.options.get("projection"),d=h.toGlobalPixels(i,this.getMap().getZoom()),g=a.getShape().getBounds(),p=[g[1][0]-g[0][0],g[1][1]-g[0][1]],m=o.getOffset(r.getElement());if(t){var f=h.toGlobalPixels(n,this.getMap().getZoom());m=[m[0]+(d[0]-f[0]),m[1]+(d[1]-f[1])]}if("visible"==this.getMap().panes.get(this.options.get("pane","outerHint")).getOverflow()){var _=r.getMap().container.getOffset(),M=s.getSize(),v=s.getScrollOffsets();l=[v,[M[0]+v[0],M[1]+v[1]]],m=[m[0]+_[0],m[1]+_[1]]}else l=[[0,0],r.getMap().container.getSize()];return m[0]<l[0][0]?d[0]-=m[0]-l[0][0]:(c=l[1][0]-(m[0]+p[0]),c<0&&(d[0]+=c)),m[1]<l[0][1]?d[1]-=m[1]-l[0][1]:(u=l[1][1]-(m[1]+p[1]),u<1&&(d[1]+=u)),h.fromGlobalPixels(d,this.getMap().getZoom())}}),t(a)})}],["0z",function(e){e.modules.define("hint.metaOptions",["map.metaOptions","map.optionMapper","constants.zIndex","interactivityModel.opaque","map.pane.helper.hint"],function(e,t,n,i,o){t.set({hintOverlay:"html#hint",hintOpenTimeout:300,hintCloseTimeout:700,hintOffset:[10,10],hintPane:"outerHint",hintZIndex:i.hint,hintInteractivityModel:o,hintLayout:"islands#hint",hintContentLayout:"default#content",hintMaxWidth:400,hintMaxHeight:400}),n.setRule({name:"hint",rule:"prefixed"}).setRule({name:"hint",key:["projection"],rule:"plain"}),e({})})}],["1a",function(e){e.modules.define("Hotspot",["util.defineClass","event.Manager"],function(e,t,n){function i(e,t){this._shape=e,this._zIndex=t||0,this._id=null,this.events=new n({context:this})}t(i,{setShape:function(e){this._shape=e,this.events.fire("shapechange")},getShape:function(){return this._shape},setZIndex:function(e){this._zIndex=e||0},getZIndex:function(){return this._zIndex},destroy:function(){this._shape=null},setId:function(e){this._id=e},getId:function(){return this._id||null}}),e(i)})}],["5d",function(e){e.modules.define("hotspot.Container",["util.defineClass","hotspot.container.Internal","event.Manager","hotspot.counter","util.id"],function(e,t,n,i,o,s){function r(e){this._internalContainers={},this._internalContainerListeners={},this._internalContainerCounter=0,this._baseSize=e||256,this.events=new i({context:this}),this._hotspotsHash={},this._hotspotListeners={},this._adding=!1}t(r,{add:function(e){this._adding=!0;for(var t={},n=0,i=e.length;n<i;n++){var r=e[n];o.setNumber(r),this._hotspotListeners[s.get(r)]=r.events.group().add("shapechange",this._onHotspotShapeChange,this);var a=this._getContainerType(r);this._hotspotsHash[s.get(r)]=a,t[a]||(t[a]=[]),t[a].push(r)}for(var n in t)t.hasOwnProperty(n)&&this._addHotspotsToContainer(t[n],n);this._adding=!1},remove:function(e){for(var t={},n=0,i=e.length;n<i;n++){var o=e[n],r=this._getContainerType(o);this._hotspotListeners[s.get(o)].removeAll(),t[r]?t[r].push(o):t[r]=[o],delete this._hotspotListeners[s.get(o)]}for(var n in t)t.hasOwnProperty(n)&&this._internalContainers[n].remove(t[n])},clear:function(){for(var e in this._internalContainers)this._internalContainers.hasOwnProperty(e)&&(this._internalContainers[e].forEach(function(e){this._hotspotListeners[s.get(e)].removeAll()},this),this._internalContainers[e]&&this._internalContainers[e].clear());this._hotspotsHash={};for(var e in this._internalContainers)this._internalContainers.hasOwnProperty(e)&&this._removeInternalContainer(e);this._hotspotListeners={}},setParent:function(){},getObjectInPosition:function(e,t,n){var i=null,s=n;for(var r in this._internalContainers)if(this._internalContainers.hasOwnProperty(r)){var a=this._internalContainers[r].getObjectInPosition(e,t);if(a){var l=a.getZIndex()||0;null==i||l>s?(i=a,s=l):l==s&&o.getNumber(a)>o.getNumber(i)&&(i=a)}}return i||null},forEach:function(e,t){for(var n in this._internalContainers)this._internalContainers.hasOwnProperty(n)&&this._internalContainers[n].forEach(e,t)},_addHotspotsToContainer:function(e,t){if(!this._internalContainers[t]){var i=new n;this._internalContainers[t]=i,this._internalContainerListeners[t]=i.events.group().add("empty",function(){this._removeInternalContainer(t)},this),this._internalContainerCounter++}this._internalContainers[t].add(e)},_removeInternalContainer:function(e){delete this._internalContainers[e],this._internalContainerListeners[e].removeAll(),delete this._internalContainerListeners[e],this._internalContainerCounter--,0==this._internalContainerCounter&&this.events.fire("empty")},_onHotspotShapeChange:function(e){if(!this._adding){var t=e.get("target"),n=this._getContainerType(t),i=this._hotspotsHash[s.get(t)];i!=n?(this._addHotspotsToContainer([t],n),this._internalContainers[i].remove([t]),this._hotspotsHash[s.get(t)]=n):this._internalContainers[i].setUnordered(t)}},_getContainerType:function(e){return 0}}),e(r)})}],["_7",function(e){e.modules.define("hotspot.container.Internal",["util.defineClass","event.Manager","hotspot.counter","util.array","util.PrTree","util.scheduler.manager","util.id"],function(e,t,n,i,o,s,r,a){function l(){this._prTree=new s,this.events=new n({context:this}),this._operations=[],this._unordered=[],this._wrappers={}}t(l,{add:function(e){this._operations.push({type:"add",hotspots:e}),this._triggerChange()},remove:function(e){this._operations.push({type:"remove",hotspots:e}),this._triggerChange()},clear:function(){this._wrappers={},this._unordered=[],this._operations=[],this._prTree.removeAll(),r.unschedule("raf",this._flatten,this)},getObjectInPosition:function(e,t,n){this._flatten();var o,s=n,r=this._prTree.search([e,e]);if(!r.length)return null;for(var a=0;a<r.length;a++){var l=r[a].hotspot;if(l.getShape().contains(e)){var c=l.getZIndex()||0;"undefined"==typeof s||c>s?(o=l,s=c):c==s&&i.getNumber(l)>i.getNumber(o)&&(o=l)}}return o||null},setUnordered:function(e){var t=a.get(e);this._wrappers[t]&&this._unordered.push(e),this._triggerChange()},forEach:function(e,t){this._flatten(),this._prTree.each(function(n){e.call(t,n.hotspot)})},_flatten:function(){if(r.unschedule("raf",this._flatten,this),this._unordered.length){this._removeHotspots(this._unordered,!0);for(var e=0;e<this._unordered.length;e++)this._getWrapper(this._unordered[e],!0);this._operations.unshift({type:"add",hotspots:this._unordered}),this._unordered=[]}var t=this._filterOperations(this._operations),n=0==this._prTree.getLength()&&0==t.added.length;this._operations=[],t.removed.length&&this._removeHotspots(t.removed),t.added.length&&this._prTree.insert(t.added),n||0!=this._prTree.getLength()||this.events.fire("empty")},_removeHotspots:function(e,t){for(var n=0,i=e.length;n<i;n++){var o=a.get(e[n]),s=this._wrappers[o];s&&(this._prTree.remove(s),t||delete this._wrappers[o])}},_triggerChange:function(){r.schedule("raf",this._flatten,this)},_filterOperations:function(e){var t=this._flattenOperations(e);return this._filterNulls(t)},_flattenOperations:function(e){for(var t=[],n=[],i={},o={},s=0,r=0,l=e.length;r<l;r++)for(var c=e[r],u="add"==c.type?i:o,h="add"==c.type?o:i,d=0,g=c.hotspots.length;d<g;d++){var p=c.hotspots[d],m=a.get(p);m in u&&delete t[u[m]],u[m]=s,m in h&&(delete t[h[m]],delete h[m]),t[s]=p,n[s]=c.type,s++}return{hotspots:t,types:n,addIndex:i,removeIndex:o}},_filterNulls:function(e){for(var t=[],n=[],i=0,o=e.hotspots.length;i<o;i++){var s=e.hotspots[i];s&&("add"==e.types[i]?t.push(this._getWrapper(s)):n.push(s))}return{added:t,removed:n}},_getWrapper:function(e,t){var n=a.get(e);return this._wrappers[n]?t&&(this._wrappers[n].bbox=e.getShape().getBounds()):this._wrappers[n]={hotspot:e,bbox:e.getShape().getBounds()},this._wrappers[n]}}),e(l)})}],["5f",function(e){e.modules.define("hotspot.counter",[],function(e){var t=new function(){this._currentNumber=-1,this._prefix="hotspotSerialNumber_"+(new Date).getTime()+Math.round(1e4*Math.random()),this.setNumber=function(e){e[this._prefix]=++this._currentNumber},this.getNumber=function(e){return e[this._prefix]}};e(t)})}],["5h",function(e){e.modules.define("hotspot.Layer",["util.defineClass","event.globalize","collection.Item","Monitor","constants.mapDomEvents","hotspot.layer.Container","hotspot.Container","hotspot.Manager","hotspot.layer.optionMapper","layer.optionMapper","util.bind","util.id","Event","vow","util.math.areEqual","theme.islands.hotspot.meta.full"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){function f(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}for(var _={},M=0,v=s.length;M<v;M++)_[s[M]]=!0;var y=function(e,t){y.superclass.constructor.call(this,t),this.events.addController(j),this.options.setName("hotspotLayer"),this.options.setMapper(c),this._objectSource=e,this._objectSourceListener=this._objectSource.events.group().add("update",this.update,this),this._container=new r(this),this._temporaryContainer=null,this._temporaryContainerState=null,this._temporaryObjectsByHotspotId={},this._temporaryContainerTileStatus=null,this._containerListener=this._container.events.group(),this._activeTileStatus=null,this._mapListener=null,this.events.fire("create"),this._cursorSet=null,this._controller={onBeforeEventFiring:h(this._onBeforeObjectEventFiring,this),onAfterEventFiring:h(this._onAfterObjectEventFiring,this)},this._objects=[],this._layerObjectsByHotspotId={},this._optionMonitor=null,this._mapActionCounter=0,this._lastDataRequest=null,this._lastObjectsRequest=null,this._lastRequestObjectsDeferred=null,this._lastObjectsLoadCallback=null},j=n(y);y.OutdatedTile=function(){return new Error("hotspot.Layer: requested tile data is outdated.")},t(y,i,{getObjectSource:function(){return this._objectSource},update:function(){this._lastRequestObjectsDeferred&&(this._lastRequestObjectsDeferred.reject(new y.OutdatedTile),this._lastRequestObjectsDeferred=null),this._lastObjectsRequest=null,this._lastObjectsLoadCallback=null,this._layerObjectsByHotspotId={},this.events.fire("update")},getObjectInPosition:function(e){var t=this.getMap();if(!t)return null;var n=t.getZoom(),i=this._getTile(e),o=this._container.getActiveTileAndZoom();return o.tile&&m(i,o.tile)&&o.zoom==n?this._getObjectFromLayerContainer(e,i,n):this._getObjectFromTemporaryContainer(e,i,n)},_getObjectFromLayerContainer:function(e,t,n){var i=p.defer();if("ready"==this._activeTileStatus)i.resolve(this._getObjectFromLayerContainerSync(e));else{var o=this._getObjectFromLayerContainerSync(e);o?i.resolve(o):this._container.events.once("dataload",function(n){m(n.get("tile"),t)?i.resolve(this._getObjectFromLayerContainerSync(e)):i.reject(new y.OutdatedTile)},this)}return i.promise()},_getObjectFromTemporaryContainer:function(e,t,n){var i=p.defer(),o=this._temporaryContainerState,s=o&&m(o.tile,t)&&o.zoom==n;return this._temporaryContainer&&s&&"ready"==this._temporaryContainerTileStatus?i.resolve(this._getObjectFromTemporaryContainerSync(e)):(this._temporaryContainer?s||(this._temporaryObjectsByHotspotId={},this._temporaryContainer.clear()):this._temporaryContainer=new a,this._temporaryContainerState={tile:t,zoom:n},this._temporaryContainerTileStatus="loading",this._requestObjects(t,n).then(function(o){var s=this._temporaryContainerState;if(this._temporaryContainerTileStatus="ready",m(t,s.tile)&&n==s.zoom){for(var r,a=[],l=0,c=o.length;l<c;l++)r=o[l].getHotspot(),this._temporaryObjectsByHotspotId[d.get(r)]=o[l],a.push(r);this._temporaryContainer.add(a),i.resolve(this._getObjectFromTemporaryContainerSync(e))}else i.reject(new y.OutdatedTile)},this)),i.promise()},_getObjectFromLayerContainerSync:function(e){var t=this.getMap(),n=this._container.getObjectInPosition(t.options.get("projection").toGlobalPixels(e,t.getZoom()),t.getZoom());return n?this._layerObjectsByHotspotId[d.get(n)]:null},_getObjectFromTemporaryContainerSync:function(e){var t=this.getMap(),n=this._temporaryContainer.getObjectInPosition(this.options.get("projection").toGlobalPixels(e,t.getZoom()),t.getZoom());return n?this._temporaryObjectsByHotspotId[d.get(n)]:null},_onBeforeObjectEventFiring:function(e,t,n){if(_[t]&&("mouseleave"==t||"mouseenter"==t)){var i,o,s=n.get("relatedTarget"),r=n.get("target");r&&r.getId&&(i=r.getId()),s&&s.getId&&(o=s.getId()),i&&i==o&&(n.stopImmediatePropagation(),n.preventDefault())}},_onAfterObjectEventFiring:function(e,t,n){if(_[t]&&!n.isImmediatePropagationStopped()){var i=e.params.context;this.events.fire(t,new g({type:t,activeObject:i,pagePixels:n.get("pagePixels"),clientPixels:n.get("clientPixels"),globalPixels:n.get("globalPixels"),coords:n.get("coords"),domEvent:n.get("domEvent"),target:this})),this.options.get("dontChangeCursor")||this._checkCursor(t)}},onAddToMap:function(e){this._containerListener.add("datarequest",this._onDataRequest,this),this._mapListener=e.events.group().add("boundschange",this._onMapBoundsChange,this).add("actionbegin",this._onMapActionBegin,this).add(["actionend","actionbreak"],this._onMapActionEnd,this),this._optionMonitor=new o(this.options).add("zIndex",this._onZIndexChange,this).add("pane",this._onPaneChange,this),this.events.fire("addtomap",{target:this,type:"addtomap"});var t=this.options.get("pane","events"),n="string"==typeof t?e.panes.get(t):t;this._containerList=l.get(n).getContainerList(),this._containerList.insert(this._container,this.options.get("zIndex",0))},onRemoveFromMap:function(e){this._containerList.remove(this._container),this._containerListener.removeAll(),this._mapListener.removeAll(),this._optionMonitor.removeAll(),this.getObjectSource().cancelLastRequest(),this._cursorSet&&(this._cursorSet.remove(),this._cursorSet=null),this._temporaryContainer&&(this._temporaryContainer.clear(),this._temporaryContainerState=null,this._temporaryContainerTileStatus=null),this._lastRequestObjectsDeferred&&(this._lastRequestObjectsDeferred.reject(new y.OutdatedTile),this._lastRequestObjectsDeferred=null),this._lastObjectsRequest=null,this._mapActionCounter=0,this._lastObjectsLoadCallback=null,this._layerObjectsByHotspotId={},this._activeTileStatus=null,this.events.fire("removefrommap",{target:this,type:"removefrommap"})},_onPaneChange:function(){this._containerList.remove(this._container);var e=this.options.get("pane","events"),t="string"==typeof e?this.getMap().panes.get(e):e;this._containerList=l.get(t).getContainerList(),this._containerList.insert(this._container)},_onZIndexChange:function(){var e=this.getMap();e&&(this.onRemoveFromMap(e),this.onAddToMap(e))},_onMapBoundsChange:function(e){e.get("newZoom")!=e.get("oldZoom")&&this.getObjectSource().cancelLastRequest()},_onMapActionBegin:function(){this._mapActionCounter++},_onMapActionEnd:function(){if(this._mapActionCounter--,this._lastDataRequest){var e="round"==this.options.get("tilesRoundingMethod","round")?Math.round(this._lastDataRequest.zoom)==Math.round(this.getMap().getZoom()):Math.floor(this._lastDataRequest.zoom)==Math.floor(this.getMap().getZoom());e&&this._loadData(this._lastDataRequest.tile,this._lastDataRequest.zoom),this._lastDataRequest=null}},_onDataRequest:function(e){this._mapActionCounter>0?this._lastDataRequest={tile:e.get("tile"),zoom:e.get("zoom")}:this._loadData(e.get("tile"),e.get("zoom"))},_loadData:function(e,t){this._activeTileStatus="loading",this._requestObjects(e,t).then(this._getLoadListener(e,t),this)},_requestObjects:function(e,t){if(!this._lastObjectsRequest||!m(this._lastObjectsRequest.tile,e)||this._lastObjectsRequest.zoom!=t){this._lastRequestObjectsDeferred&&this._lastRequestObjectsDeferred.reject(new y.OutdatedTile);var n=this._lastRequestObjectsDeferred=p.defer();this._lastObjectsRequest={tile:e,zoom:t},this.getObjectSource().requestObjects(this,e,t,h(function(e){n==this._lastRequestObjectsDeferred&&n.resolve(e)},this))}return this._lastRequestObjectsDeferred.promise()},_getLoadListener:function(e,t){var n=this._lastObjectsLoadCallback=function(i){n==this._lastObjectsLoadCallback&&this._onObjectsLoaded(e,t,i)};return n},_onObjectsLoaded:function(e,t,n){var i=this._container.getActiveTileAndZoom();if(i.tile&&m(e,i.tile)&&i.zoom==t){this._activeTileStatus="ready",this._objects=n,this._layerObjectsByHotspotId={};for(var o=0,s=n.length;o<s;o++)n[o].options.setParent(this.options),n[o].events.addController(this._controller),this._layerObjectsByHotspotId[d.get(n[o].getHotspot())]=n[o];this.events.fire("dataload",{tile:e,zoom:t,objects:this._objects})}},_checkCursor:function(e){if("mouseenter"==e)this._cursorSet||(this._cursorSet=this.getMap().cursors.push(this.options.get("cursor")||"pointer"));else if("mouseleave"==e){var t=this.getMap();t&&this._cursorSet&&(this._cursorSet.remove(),this._cursorSet=null)}},_getTile:function(e){var t=this.options.get("projection").toGlobalPixels(e,this.getMap().getZoom());return[Math.floor(t[0]/256),Math.floor(t[1]/256)]}}),u.setRule({name:"hotspotLayer",rule:function(e,t){return[f(e,t),e]}}),u.setRule({name:"hotspotLayer",key:["projection"],rule:"plain"}),e(y)})}],[":n",function(e){e.modules.define("hotspot.layer.addon.balloon",["hotspot.Layer","popup.addonBuilder","hotspot.layer.Balloon"],function(e,t,n,i){e(n.build({type:"balloon",metaEventManager:t.getMetaEventManager(),defaultManager:i}))})}],[":o",function(e){e.modules.define("hotspot.layer.addon.hint",["hotspot.Layer","popup.addonBuilder","hotspot.layer.Hint"],function(e,t,n,i){e(n.build({type:"hint",metaEventManager:t.getMetaEventManager(),defaultManager:i}))})}],["_9",function(e){e.modules.define("hotspot.layer.Balloon",["util.defineClass","Balloon","component.sharedEntity.captor.Balloon","event.Manager","map.addon.balloon","hotspot.layer.optionMapper","option.Manager","projection.idle","util.component","util.extend","util.preset","popup.managerStorage","popup.component.checkEmptiness","balloon.component.getBalloonMode"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(e){this._hotspotLayer=e,this.events=new o({context:this}),this._setupCaptor(),this._setupListeners(),this._checkMapListener(e.getMap())}var f={autoPan:!1};t(m,c.createProxyMethods(function(){return this._captor},["open","close","isOpen","getOverlay","getOverlaySync","autoPan","getOwner","setPosition","getPosition","setData","getData","setOptions","getOptions"]),{destroy:function(){this._clearListeners(),this._clearCaptor()},isEmpty:function(e,t,n){var i=this._specifyData(t),o={projection:l,panelMode:"panel"==p(this._hotspotLayer.getMap(),this._hotspotLayer.options.get("balloonPanelMaxMapArea"))};return i.options=new a(n?u(o,n):o,this._hotspotLayer.options,"balloon"),g(this._hotspotLayer.getMap(),"balloon",e,i)},open:function(e,t,n){return this._captor.open(e,this._specifyData(t),n)},setData:function(e){return this._captor.setData(this._specifyData(e))},_setupCaptor:function(){var e=this._hotspotLayer.getMap(),t=e&&s.get(e);this._captor=new i(this,this._hotspotLayer,"balloon",t)},_clearCaptor:function(){this._captor.destroy(),this._captor=null},_setupListeners:function(){this._hotspotLayer.events.add("mapchange",this._onMapChange,this).add("clickdefaultaction",this.onClickDefault,this)},_clearListeners:function(){this._hotspotLayer.events.remove("clickdefaultaction",this.onClickDefault,this).remove("mapchange",this._onMapChange,this),this._checkMapListener(null)},onClickDefault:function(e){var t=this._hotspotLayer.options;if(t.get("openBalloonOnClick",!0)){var n=e.get("originalEvent"),i=n.get("activeObject"),o=n.get("globalPixels"),s=i.getProperties();t.get("openEmptyBalloon",!1)?this.open(o,s):this.isEmpty(o,s).then(function(e){e||this.open(o,s)},this)}},_specifyData:function(e){return e||(e={}),e.layer=this._hotspotLayer,e},_onMapChange:function(){var e=this._hotspotLayer.getMap();e?this._setupSharingManager():this.close(),this._checkMapListener(e)},_checkMapListener:function(e){this._mapEventsListener&&this._mapEventsListener.removeAll(),e?(this._mapEventsListener=e.events.group().add("boundschange",this._onMapBoundsChange,this),this._oldMapZoom=e.getZoom()):this._mapEventsListener=null},_setupSharingManager:function(){this._captor.setSharingManager(s.get(this._hotspotLayer.getMap()))},_onMapBoundsChange:function(e){var t=this._oldMapZoom,n=this._hotspotLayer.getMap().getZoom();if(this._oldMapZoom=n,this.isOpen()&&t!=n){if(this._hotspotLayer.options.get("closeBalloonOnZoomChange")){var i="round"==this._hotspotLayer.options.get("tilesRoundingMethod","round")?Math.round(this._initialZoom)!=Math.round(n):Math.floor(this._initialZoom)!=Math.floor(n);if(i)return void this.close()}var o=this._captor.getPosition(),s=Math.pow(2,n-t);this._disableAutoPan(),this.setPosition([o[0]*s,o[1]*s]),this._enableAutoPan()}},_disableAutoPan:function(){h.addTo(this.getOptions(),f)},_enableAutoPan:function(){h.removeFrom(this.getOptions(),f)}}),d.add("hotspot#balloon",m),r.setRule({name:"balloon",rule:"prefixed"}),e(m)})}],["_$",function(e){e.modules.define("hotspot.layer.Container",["util.defineClass","hotspot.Container","event.Manager","util.math.cycleRestrict","util.math.areEqual"],function(t,n,i,o,s,r){function a(e,t){i.call(this,t),this.events=new o({context:this}),this._tile=null,this._zoom=null,this._missedPosition=null,this._layer=e,this._listener=e.events.group().add("dataload",this._onDataLoaded,this).add("update",this._onLayerUpdate,this).add(["addtomap","removefrommap"],this._onMapChange,this),this._location=null,this._projection=null}n(a,i,{getObjectInPosition:function(e,t,n){var i,o,s=this._convertPosition(e,t),r=this._layer.getMap().getZoom(),l="round"==this._layer.options.get("tilesRoundingMethod","round")?Math.round(r):Math.floor(r),c=l-r,u=this._toZeroWorld(s);return c&&(i=Math.pow(2,c),u=[i*u[0],i*u[1]]),r=l,o=[Math.floor(u[0]/256),Math.floor(u[1]/256)],this.setActiveTileAndZoom(o,r),a.superclass.getObjectInPosition.call(this,u,r,n)},setParent:function(e){e?(this._containerListListener=e.events.group().add("positionchange",this._onPositionChange,this),this._resolveProjection()):this._containerListListener.removeAll()},getLayer:function(){return this._layer},remove:function(){if(e.env.debug)throw new Error("hotspot.container.HotspotLayerContainer.remove: Объекты класса не поддерживают удаление элементов по одному.")},setActiveTileAndZoom:function(e,t){this._equals(e,this._tile)&&this._zoom==t?this._requestedTile&&(this._requestedTile=null):(this._zoom=t,this._equals(e,this._requestedTile)||(this._requestedTile=e,this.events.fire("datarequest",{tile:e,zoom:t})))},getActiveTileAndZoom:function(){return{tile:this._requestedTile||this._tile,zoom:this._zoom}},_onPositionChange:function(e){var t=e.get("added");if(t.length>0){var n=t[t.length-1],i=n.zoom,o=this._toZeroWorld(this._convertPosition(n.position,i)),s="round"==this._layer.options.get("tilesRoundingMethod","round")?Math.round(i):Math.floor(i),r=256*Math.pow(2,i-s),a=[Math.floor(o[0]/r),Math.floor(o[1]/r)];this.setActiveTileAndZoom(a,s)}},_onLayerUpdate:function(){this.clear();var e=this._layer.getMap();if(e){if(this._requestedTile||this._tile){this._requestedTile||(this._requestedTile=this._tile),this._tile=null;var t=this._layer.getMap().getZoom();this.events.fire("datarequest",{tile:this._requestedTile,zoom:"round"==this._layer.options.get("tilesRoundingMethod","round")?Math.round(t):Math.floor(t)})}}else this._tile=null},_onMapChange:function(){this._requestedTile=null},_onDataLoaded:function(e){var t=e.get("tile"),n=e.get("zoom");if(this._equals(t,this._requestedTile)&&n==this._zoom){this._tile=t;for(var i=e.get("objects"),o=[],s=0,r=i.length;s<r;s++)o.push(i[s].getHotspot());this.clear(),this.add(o),this._requestedTile=null,this.events.fire("dataload",{tile:t,zoom:n})}},_equals:function(e,t){return!(!e||!t)&&r(e,t)},_toZeroWorld:function(e){for(var t=this._layer.getMap(),n=t.options.get("projection").isCycled(),i=256*Math.pow(2,t.getZoom()),o=[],r=0;r<2;r++)n[r]?o[r]=s(e[r],0,i-1):o[r]=e[r];return o},_convertPosition:function(e,t){if(!this._projection.diff)return e;var n=this._projection.map.fromGlobalPixels(e,t);return this._projection.self.toGlobalPixels(n,t)},_resolveProjection:function(){var e=this._layer.options.get("projection"),t=this._layer.getMap().options.get("projection");this._projection={self:e,map:t,diff:t!=e}}}),t(a)})}],["__",function(e){e.modules.define("hotspot.layer.Hint",["util.defineClass","Hint","component.sharedEntity.captor.Popup","event.Manager","map.addon.hint","hotspot.layer.optionMapper","hotspot.Manager","option.Manager","projection.idle","util.component","util.extend","util.preset","popup.managerStorage","popup.component.checkEmptiness"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(e){this._hotspotLayer=e,this.events=new o({context:this}),this._setupCaptor(),this._setupListeners()}t(m,u.createProxyMethods(function(){return this._captor},["close","isOpen","getOverlay","getOverlaySync","getOwner","setPosition","getPosition","getData","setOptions","getOptions"]),{destroy:function(){this._clearListeners(),this._clearCaptor()},isEmpty:function(e,t,n){var i=this._specifyData(t),o={projection:c};return i.options=new l(n?h(o,n):o,this._hotspotLayer.options,"hint"),p(this._hotspotLayer.getMap(),"hint",e,i)},open:function(e,t,n){return this._captor.open(e,this._specifyData(t),n)},setData:function(e){return this._captor.setData(this._specifyData(e))},_setupCaptor:function(){var e=this._hotspotLayer.getMap(),t=e&&s.get(e);this._captor=new i(this,this._hotspotLayer,"hint",t)},_clearCaptor:function(){this._captor.destroy(),this._captor=null},_setupListeners:function(){this._hotspotLayer.events.add("mapchange",this._onMapChange,this),this._startMouseenterListening()},_clearListeners:function(){this._hotspotLayer.events.remove("mapchange",this._onMapChange,this),this._stopMouseenterListening()},_onMouseEnterDefault:function(e){var t=this._hotspotLayer;if(t.options.get("openHintOnHover",!0)){var n=e.get("originalEvent"),i=n.get("globalPixels"),o=n.get("activeObject"),s=o.getProperties();this._hotspotLayer.options.get("openEmptyHint",!1)?this.open(i,s):this.isEmpty(i,s).then(function(e){e||this.open(i,s).then(function(){var e=t.getMap(),n=t.options.get("pane","events"),i="string"==typeof n?e.panes.get(n):n;a.get(i).getActiveHotspot()!=o.getHotspot()&&this.close()},this)},this),t.events.add("mousemove",this._onHotspotLayerMouseMove,this).add("mouseleave",this._onHotspotLayerMouseLeave,this)}},_onMapChange:function(){this._hotspotLayer.getMap()?this._setupSharingManager():(this._clearHotspotEvents(),this.close(!0))},_setupSharingManager:function(){this._captor.setSharingManager(s.get(this._hotspotLayer.getMap()))},_onHotspotLayerMouseMove:function(e){this.setPosition(e.get("globalPixels"))},_clearHotspotEvents:function(){this._hotspotLayer.events.remove("mousemove",this._onHotspotLayerMouseMove,this).remove("mouseleave",this._onHotspotLayerMouseLeave,this)},_onHotspotLayerMouseLeave:function(){this.close(),this._clearHotspotEvents()},_specifyData:function(e){return e||(e={}),e.layer=this._hotspotLayer,e},_startMouseenterListening:function(){this._hotspotLayer.events.add("mouseenterdefaultaction",this._onMouseEnterDefault,this)},_stopMouseenterListening:function(){this._hotspotLayer.events.remove("mouseenterdefaultaction",this._onMouseEnterDefault,this)}}),g.add("hotspot#hint",m),r.setRule({name:"hint",rule:"prefixed"}),e(m)})}],["_!",function(e){e.modules.define("hotspot.layer.Object",["util.defineClass","option.Manager","event.Manager","Hotspot","interactivityModel.EventController","interactivityModel.layer"],function(e,t,n,i,o,s,r){function a(e,t,o){this._geometry=t.geometry,this._properties=t.properties,this.options=new n(o),this.events=new i({context:this}),this._setupHotspot(e,this.options.get("zIndex")),this._interactivityModel=this.options.get("interactivityModel",r),this._interactivityEventController=new s(this._interactivityModel),this.events.addController(this._interactivityEventController)}e(t(a,{getHotspot:function(){return this._hotspot},setGeometry:function(e){this._geometry=e},getGeometry:function(){return this._geometry},setProperties:function(e){this._properties=e},getProperties:function(){return this._properties},setId:function(e){this._id=e,this._hotspot&&this._hotspot.setId(this.getId())},getId:function(){return this._id},
destroy:function(){this._clearHotspot(),this.events.removeController(this._interactivityEventController),this._geometry=null,this._interactivityEventController=null},_setupHotspot:function(e,t){this._hotspot=new o(e,t),this._hotspot.events.setParent(this.events),this._hotspot.setId(this.getId())},_clearHotspot:function(){this._hotspot.events.setParent(null),this._hotspot.destroy(),this._hotspot=null}}))})}],["_*",function(e){e.modules.define("hotspot.layer.ObjectSource",["util.defineClass","util.Chunker","util.bind","hotspot.loader","hotspot.layer.Object","interactivityModel.storage","interactivityModel.layer","event.Manager","option.Manager","geometry.pixel.Polygon","geometry.pixel.Rectangle","geometry.pixel.MultiPolygon","shape.Polygon","shape.Rectangle","shape.MultiPolygon","vow"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_){var M={ConvexPolygon:h,Polygon:h,MultiConvexPolygon:g,MultiPolygon:g,Rectangle:d},v={Polygon:p,MultiPolygon:f,Rectangle:m},y=function(e,t,n){this._tileUrlTemplate=e,this._keyTemplate=t,this.options=new u(n),this.events=new c,this._lastRequest=null,this.options.setName("objectSource")};n(y,{getTileUrl:function(e,t){var n,i=this._tileUrlTemplate;return n="function"==typeof i?this._tileUrlTemplate(e,t):this._processTemplate(i,e,t)},getKey:function(e,t){var n=this._keyTemplate;if(!n)return null;var i;return"function"==typeof n&&(i=n(e,t)),i=this._processTemplate(n,e,t)},getTileUrlTemplate:function(){return this._tileUrlTemplate},setTileUrlTemplate:function(e){this._tileUrlTemplate=e},getKeyTemplate:function(){return this._keyTemplate},setKeyTemplate:function(e){this._keyTemplate=e},requestObjects:function(e,t,n,i){if(this.restrict(e,t,n))i([]);else{var o=this.getKey(t,n);this.cancelLastRequest();var r=this._lastRequest=s.load(this.getTileUrl(t,n),{key:o,noCache:this.options.get("noCache"),notJsonpResponse:this.options.get("notJsonpResponse"),callback:function(o){r==this._lastRequest&&this.parseResponse(e,o,i,t,n)},context:this})}},cancelLastRequest:function(){var e=this._lastRequest;if(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)e[t].abort&&e[t].abort();else e.abort&&e.abort();this._lastRequest=null}},restrict:function(e,t,n){var i=this.options.get("maxZoom",23),o=this.options.get("minZoom",0);if(n>i)return!0;if(n<o)return!0;var s=this.options.get("bounds");if(s){var r=[256*(t[0]+.5),256*(t[1]+.5)],a=e.getMap();if(!a)return!1;var l=a.options.get("projection").fromGlobalPixels(r),c=s[1],u=s[0];if(u[0]>l[0]||u[1]<l[1]||c[0]<l[0]||c[1]>l[1])return!0}return!1},parseResponse:function(e,t,n,i,o){t&&!t.error&&this._parser(e,t.data,n,i)},_processTemplate:function(t,n,i){for(var o,s=t.replace(/%x/g,n[0].toString()).replace(/%y/g,n[1].toString()).replace(/%z/g,i.toString()).replace(/%c/g,"x="+n[0]+"&y="+n[1]+"&z="+i).replace(/%l/g,"lang="+e.env.lang).replace(/{{ scale }}/g,1);o=/%d\|?(\d+)?/.exec(s);){for(var r=o&&o[1]||4,a=o&&o[0]||"%d",l=0,c=0,u=Math.ceil(Math.log(r)/Math.log(2));c<u;c++)l+=(n[(c+1)%2]>>Math.floor(c/2)&1)<<c;s=s.replace(a,(l+1).toString())}return s},_parser:function(e,t,n,s){var c=e.getMap();c||n([]);var u=[256*s[0],256*s[1]],h=e.options.get("interactivityModel")||l,d="string"==typeof h?a.get(h):h,g=[],p=new i(t.features,{timeout:0,chunkSize:30,worker:o(function(e){var t=e.properties.HotspotMetaData||{},n=t.zIndex,i=this._makePixelGeometry(t.RenderedGeometry.type,this._makeCoordinates(t.RenderedGeometry.coordinates,u)),o=new r(this._makeShape(i),e,{zIndex:n,interactivityModel:d});o.setId(t.id),g.push(o)},this)});p.start(function(){n(g)})},_makeCoordinates:function(e,t){var n=[];if(e[0].length)for(var i=0,o=e.length;i<o;i++)n[i]=this._makeCoordinates(e[i],t);else n=[e[0]+t[0],e[1]+t[1]];return n},_makePixelGeometry:function(e,t){var n=M[e],i=!1;return"MultiConvexPolygon"!=e&&"ConvexPolygon"!=e||(i=!0),new n(t,"evenOdd",{convex:i})},_makeShape:function(e){var t=v[e.getType()];return new t(e)}}),t(y)})}],["_(",function(e){e.modules.define("hotspot.layer.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["5l",function(e){e.modules.define("hotspot.loader",["util.extend","util.bind","util.jsonp","vow"],function(e,t,n,i,o){function s(e,t){if(r[e])r[e].push(t);else{r[e]=[t];var n=function(){delete r[e]};a[e]=window.setTimeout(n,24e4)}}var r={},a={},l=null,c={load:function(e,r){r=r||{};var a,l={};if(r.key&&r.key instanceof Array){for(var c=0,u=r.key.length;c<u;c++){var h={callback:r.callback[c],context:r.context[c]};l[r.key[c]]={abort:function(){h.aborted=!0,l.deferred.reject("aborted")}},s(r.key[c],h)}a=r.padding||r.key.join("_").replace(/\W/g,"_")}else{var d;if(r.key||r.id){d=r.key||r.id||Math.random();var h=t(r,{loaderUrl:e});s(d,h),l={abort:function(){h.aborted=!0,l.deferred.reject("aborted")}},a=r.padding||d.replace(/\W/g,"_")}else d=Math.random(),a=r.padding||null}if(a){var g=window[a];window[a]=n(function(e){this.onLoad(r.key,e),window[a]=g},this)}var p=i({padding:a,noCache:r.noCache,url:e}),m=o.defer();return l.deferred=m,p.then(function(e){this.onLoad(r.key,e),m.resolve(e)},function(e){m.reject(e)},this),l},onLoad:function(e,t){for(var n=[].concat(e),i=0,o=n.length;i<o;i++){var s=n[i],c=r[s];if(c){for(var u=0,h=c.length;u<h;u++)c[u].callback&&!c[u].aborted&&c[u].callback.call(c[u].context||window,t);delete a[s],delete r[s]}}l&&l.onLoad(e,t)}};e(c)})}],["5m",function(e){e.modules.define("hotspot.Manager",["util.defineClass","event.Manager","MapEvent","constants.hotspotEvents","hotspot.Container","hotspot.manager.ContainerList","hotspot.manager.EventController","util.id","util.math.areEqual","util.WeakMap"],function(e,t,n,i,o,s,r,a,l,c,u){function h(e){if(this.events=new n({context:this}),this._lastEvents={},this._activeObject=null,this._containersByZIndex={},"undefined"==typeof e)throw new Error("hotspot.Manager: Не удалось получить пейн.");this._pane=e,this._map=e.getMap(),this._mapListener=this._map.events.group().add("boundschange",this._onMapBoundsChange,this),this._containerList=new r(this,e),this._containerList.events.add("found",this._onObjectsFound,this),this._paneController=new a(e,this),e.events.addController(this._paneController),p.set(e,this)}function d(e,t){return{position:e.get("globalPixels"),zoom:t,type:e.get("type")}}function g(e){for(var t=0,n=m.length;t<n;t++)e.originalEvent[m[t]]=e.get(m[t])}var p=new u,m=["pagePixels","clientPixels","globalPixels","coords"];h.get=function(e){return p.get(e)},t(h,{destroy:function(){this._pane&&(this._pane.events.removeController(this._paneController),this._paneController=null,this._containerList.events.remove("found",this._onObjectsFound,this),this._containerList.clear(),this._containerList=null,this._mapListener.removeAll(),p.remove(this._pane),this._pane=this._map=this._activeObject=null,this._lastEvents=this._containersByZIndex={})},getContainerList:function(){return this._containerList},addHotspots:function(e,t){this.getContainerList()&&(this._containersByZIndex[t]||this._insertContainerByZIndex(t),this._containersByZIndex[t].add(e))},removeHotspots:function(e,t){this._containersByZIndex[t]&&this._containersByZIndex[t].remove(e)},focus:function(e,t){var n=this._getActiveObjectByEvent(t);if(n){var i=this._activeObject;this._activeObject=n,this._enterObject(i,t)}else t&&t.allowMapEvent()},process:function(e,t){var n=this._getActiveObjectByEvent(t);n?this._removeLastEvent(e):(this._addLastEvent(e,t),t.allowMapEvent()),this._processEvent(e,t,n)},blur:function(e,t){this._activeObject?(this._leaveObject(null,t),this._activeObject=null):t&&t.allowMapEvent(),this._clearLastEvents()},getActiveHotspot:function(){return this._activeObject},_onMapBoundsChange:function(e){e.get("oldZoom")!=e.get("newZoom")&&this._clearLastEvents()},_getActiveObjectByEvent:function(e){return this._containerList.getObjectInPosition(e.get("globalPixels"),this._map.getZoom())},_processEvent:function(e,t,n){if(this._activeObject!=n){this._activeObject?this._leaveObject(n,t):this._leaveMap(n,t);var o=this._activeObject;this._activeObject=n,this._activeObject?this._enterObject(o,t):this._enterMap(o,t)}this._activeObject&&this._activeObject.events.fire(e,new i({type:e,map:this._map,target:this._activeObject,origin:"hotspots",originalEvent:t},t))},_insertContainerByZIndex:function(e){var t=new s;t.events.once("empty",function(){this.getContainerList()&&(this.getContainerList().remove(t),this._containersByZIndex[e]=null)},this),this.getContainerList().insert(t,e),this._containersByZIndex[e]=t},_onObjectsFound:function(e){for(var t=e.get("found"),n=[],s=o.order,r=0,a=s.length;r<a;r++){var l=s[r],c=this._lastEvents[l];if(c&&t[l]){var u=t[l].activeObject;this._processEvent(l,new i({type:l,target:u,map:this._map,origin:"hotspots"},c.event),u),n.push(d(c.event,c.zoom)),delete this._lastEvents[l]}}this.events.fire("positionchange",{added:[],removed:n})},_addLastEvent:function(e,t){"mousemove"==e&&this._clearLastEvents();var n=this._lastEvents[e];g(t),this._lastEvents[e]={event:t,zoom:this._map.getZoom()},this.events.fire("positionchange",{pane:this._pane,added:[d(t,this._map.getZoom())],removed:n?[d(n.event,n.zoom)]:[]})},_removeLastEvent:function(e){var t=this._lastEvents[e];t&&(delete this._lastEvents[e],this.events.fire("positionchange",{pane:this._pane,added:[],removed:[d(t.event,t.zoom)]}))},_clearLastEvents:function(){for(var e,t,n=[],i=0,s=o.order.length;i<s;i++)e=o.order[i],t=this._lastEvents[e],t&&n.push(d(t.event,t.zoom));this._lastEvents={},this.events.fire("positionchange",{pane:this._pane,added:[],removed:n})},_leaveMap:function(e,t){this._map.events.fire("mouseleave",new i({type:"mouseleave",target:this._map,map:this._map,relatedTarget:e,origin:"hotspots"},t))},_enterObject:function(e,t){this._activeObject.events.fire("mouseenter",new i({type:"mouseenter",target:this._activeObject,map:this._map,relatedTarget:e||this._map,origin:"hotspots"},t))},_leaveObject:function(e,t){this._activeObject.events.fire("mouseleave",new i({type:"mouseleave",target:this._activeObject,map:this._map,relatedTarget:e||this._map,origin:"hotspots"},t))},_enterMap:function(e,t){this._map.events.fire("mouseenter",new i({type:"mouseenter",target:this._map,map:this._map,relatedTarget:e,origin:"hotspots"},t))}}),e(h)})}],["_,",function(e){e.modules.define("hotspot.manager.ContainerList",["util.defineClass","util.List","util.id","util.math.areEqual","event.Manager","util.extend","hotspot.counter","interactivityModel.geoObject","util.bind"],function(e,t,n,i,o,s,r,a,l,c){function u(e,t){e.events.add("positionchange",this._onPositionChange,this),this._pane=t,this._map=t.getMap(),this._list=new n,this._containerListeners={},this.events=new s({context:this}),this._loadTickTimeout=null,this._positionStack=[],this._containerZIndex={}}t(u,{clear:function(){for(var e,t=this._list.getIterator();(e=t.getNext())!=t.STOP_ITERATION;)e.clear()},getObjectInPosition:function(e,t){for(var n,o,s=this._list.getIterator(),r=null,l=null;(n=s.getNext())!=s.STOP_ITERATION;){var c=this._containerZIndex[i.get(n)];if(r&&"number"==typeof o&&o>c)return r;"number"==typeof o&&o!=c&&(l=null);var u=n.getObjectInPosition(e,t,l);if(u){var h=u.getZIndex()||0;"number"!=typeof l||h>l?(r=u,l=h,o=c):h==l&&a.getNumber(u)>a.getNumber(r)&&(r=u)}}return r||null},insert:function(e,t){this._list.insert(e,this._getNextObject(t));var n=i.get(e);this._containerZIndex[n]=t||0,this._containerListeners[n]=e.events.group().add("dataload",this._onDataLoaded,this),e.setParent(this)},remove:function(e){this._list.remove(e);var t=i.get(e);this._containerListeners[t].removeAll(),delete this._containerListeners[t],delete this._containerZIndex[t],e.setParent(null)},_onPositionChange:function(e){if(e.get("pane")==this._pane){var t,n,i=e.get("added"),o=e.get("removed"),s=[];for(t=0,n=this._positionStack.length;t<n;t++){for(var r=!1,a=0,l=o.length;a<l;a++)this._posEquals(this._positionStack[t],o[a])&&(r=!0);r||s.push(this._positionStack[t])}for(this._positionStack=s,t=0,n=i.length;t<n;t++)this._positionStack.push(i[t]);this.events.fire("positionchange",{added:i,removed:o})}},_onDataLoaded:function(e){var t=function(){for(var e,t,n={},i=this._map.getZoom(),o=0,s=this._positionStack.length;o<s;o++)e=this._positionStack[o],(t=this.getObjectInPosition(e.position,i))&&(n[e.type]=r(e,{activeObject:t}));this.events.fire("found",{found:n}),this._loadTickTimeout=null,this._positionStack=[]};this._loadTickTimeout&&window.clearTimeout(this._loadTickTimeout),this._loadTickTimeout=window.setTimeout(c(t,this),100)},_posEquals:function(e,t){return e.zoom==t.zoom&&e.type==t.type&&o(e.position,t.position)},_getNextObject:function(e){for(var t,n=this._list.getIterator();(t=n.getNext())!=n.STOP_ITERATION;)if(this._containerZIndex[i.get(t)]<=e)return t;return null}}),e(u)})}],["_:",function(e){e.modules.define("hotspot.manager.EventController",["util.defineClass","constants.hotspotEvents"],function(e,t,n){function i(e,t){this._pane=e,this._manager=t}function o(e){return e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped()}t(i,{onBeforeEventFiring:function(e,t,i){if(n.types[t]&&"hotspots"!=i.get("origin")&&!o(i)){if(this._testFiredAs(t,i))return;"mouseenter"==t?this._manager.focus(t,i):"mouseleave"==t?this._manager.blur(t,i):this._manager.process(t,i)}},_testFiredAs:function(e,t){var n=t.get("domEvent");if(n){var i=n.get("propagatedData");if(i.hotspotFiredAs||(i.hotspotFiredAs={}),i.hotspotFiredAs[e])return!0;i.hotspotFiredAs[e]=!0}return!1}}),e(i)})}],["5o",function(e){e.modules.define("hotspot.ObjectSource",["hotspot.layer.ObjectSource"],function(e,t){e(t)})}],["1d",function(e){e.modules.define("Inception",["util.defineClass","event.Manager","domEvent.manager","data.Manager","meta","util.id","util.querystring","util.extend","system.browser","yandex.counter"],function(t,n,i,o,s,r,a,l,c,u,h){function d(e,t,n){this._url=e,this._iframeReady=!1,this._setupData(t),this._options=c({initialWidth:0,initialHeight:0},n),this._createIFrame(),this._setupEvents(),h.countByKey("modulesUsage","inception."+e.substr(1).replace(/\//g,"_")+".2_1")}t(n(d,{setParentElement:function(e){this._parentElement=e,e.appendChild(this._iframe)},destroy:function(){this._clearEvents(),this._clearIFrame(),this._clearData()},_setupData:function(e){this._data="function"==typeof e.get?e:new s(e),this._data.events.add("change",this._updateData,this)},_clearData:function(){this._data.events.remove("change",this._updateData,this),this._data=null},_updateData:function(){this._iframeReady&&this._sendToIFrame("datachange",this._data.getAll())},_createIFrame:function(){var t=this._iframe=document.createElement("iframe"),n=this._iframeId=a.get(t),i=l.stringify({lang:r.languageCode+"_"+r.countryCode,iframe_id:n,url:this._url,api_version:r.version,counter_prefix:e.env.server.params.counter_prefix});t.src=e.env.hosts.api.services.inception+"?"+i,t.width=this._options.initialWidth,t.height=this._options.initialHeight,t.scrolling="no",t.style.overflow="hidden",t.frameBorder=0},_clearIFrame:function(){this._iframeReady=!1,this._iframe.src="about:blank",this._clearParentElement(),this._iframe=null},_clearParentElement:function(){this._parentElement&&(this._parentElement.removeChild(this._iframe),this._parentElement=null)},_onIframeLoad:function(){this._iframeReady=!0,this._updateData()},_setupEvents:function(){this.events=new i({context:this}),this.events.add("sizechange",this._onSizeChange,this),o.add(this._iframe,"load",this._onIframeLoad,this),o.add(window,"message",this._onPostMessage,this)},_clearEvents:function(){o.remove(window,"message",this._onPostMessage,this),o.remove(this._iframe,"load",this._onIframeLoad,this),this.events.remove("sizechange",this._onSizeChange,this),this.events=null},_onSizeChange:function(e){var t=e.get("size");this._iframe.width=t[0],this._iframe.height=t[1]},_onPostMessage:function(e){if(e.get("data")){var t=e.get("data").split("&"),n=t[0],i=t[1],o=t[2];n==this._iframeId&&this.events.fire(i,JSON.parse(decodeURIComponent(o)))}},_sendToIFrame:function(e,t){var n=this._iframe.contentWindow||this._iframe,i="function"==typeof n.postMessage||u.oldIE&&"object"==typeof n.postMessage;n&&i&&n.postMessage(e+"&"+encodeURIComponent(JSON.stringify(t)),"*")}}))})}],["5r",function(e){e.modules.define("interactivityModel.EventController",["util.defineClass","util.array","constants.mapDomEvents","interactivityModel.storage"],function(e,t,n,i,o){function s(e){this._interactivityModel=o.get(e)}for(var r={},a=0,l=i.length;a<l;a++)r[i[a]]=!0;t(s,{setInteractivityModel:function(e){this._interactivityModel=o.get(e)},getInteractivityModel:function(){return this._interactivityModel},onBeforeEventFiring:function(e,t,n){var i;if(this._interactivityModel&&r[t]){var o=this._interactivityModel[t];o&&("function"==typeof o?o(n):(o.allowMapEvent&&n.allowMapEvent(),o.stopPropagation&&n.stopPropagation(),o.cancel&&(i=!1)))}return i}}),e(s)})}],["5s",function(e){e.modules.define("interactivityModel.geoObject",["constants.mapDomEvents","interactivityModel.storage"],function(e,t,n){for(var i={},o=0,s=t.length;o<s;o++)i[t[o]]={};i.wheel.allowMapEvent=!0,i.mousedown.allowMapEvent=!0,i.contextmenu.allowMapEvent=!0,i.multitouchstart.allowMapEvent=!0,i.multitouchmove.allowMapEvent=!0,i.multitouchend.allowMapEvent=!0,i.dblclick.allowMapEvent=!0,n.add("default#geoObject",i),e(i)})}],["5u",function(e){e.modules.define("interactivityModel.layer",["constants.mapDomEvents","interactivityModel.storage"],function(e,t,n){for(var i={},o=0,s=t.length;o<s;o++)i[t[o]]={};i.wheel.allowMapEvent=!0,i.mousedown.allowMapEvent=!0,i.contextmenu.allowMapEvent=!0,i.multitouchstart.allowMapEvent=!0,i.multitouchmove.allowMapEvent=!0,i.multitouchend.allowMapEvent=!0,n.add("default#layer",i),e(i)})}],["5w",function(e){e.modules.define("interactivityModel.opaque",["interactivityModel.storage"],function(e,t){var n={};t.add("default#opaque",n),e(n)})}],["5x",function(e){e.modules.define("interactivityModel.silent",["constants.mapDomEvents","interactivityModel.storage"],function(e,t,n){for(var i={},o=0,s=t.length;o<s;o++)i[t[o]]={allowMapEvent:!0,cancel:!0};n.add("default#silent",i),e(i)})}],["5A",function(e){e.modules.define("interactivityModel.storage",["util.Storage"],function(e,t){e(new t)})}],["5C",function(e){e.modules.define("interactivityModel.transparent",["constants.mapDomEvents","interactivityModel.storage"],function(e,t,n){for(var i={},o=0,s=t.length;o<s;o++)i[t[o]]={allowMapEvent:!0};n.add("default#transparent",i),e(i)})}],["1@",function(e){e.modules.define("islets-circle-dot-icon-with-caption",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standard")]},function(e){e({})})}],["8m",function(e){e.modules.define("islets-circle-dot-icon-with-caption.standard",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-islets_circle-dot-icon-with-caption__caption-block{position:absolute;top:-13px}.ymaps-2-1-42-islets_circle-dot-icon-with-caption__caption-block .ymaps-2-1-42-islets_icon-caption{padding-left:16px}",e)})}],["1J",function(e){e.modules.define("islets-dot-icon-with-caption",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standard")]},function(e){e({})})}],["8D",function(e){e.modules.define("islets-dot-icon-with-caption.standard",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-islets_dot-icon-with-caption__caption-block{position:absolute;top:-37px}.ymaps-2-1-42-islets_dot-icon-with-caption__caption-block .ymaps-2-1-42-islets_icon-caption{padding-left:20px}",e)})}],["2k",function(e){e.modules.define("islets-icon-caption",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standard")]},function(e){e({})})}],["8$",function(e){e.modules.define("islets-icon-caption.standard",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-islets_icon-caption{white-space:nowrap;font:13px/27px Arial,sans-serif;border-radius:5px;height:27px;text-overflow:ellipsis;overflow:hidden;background:rgba(255,255,255,.85);padding:0 8px 0 0;position:absolute;margin-top:-1px}",e)})}],["1g",function(e){e.modules.define("Layer",["util.defineClass","util.bind","util.dom.element","util.hd","constants.zIndex","event.globalize","collection.Item","layer.optionMapper","layer.tileContainer.storage","layer.component.TileSource","layer.component.TilePositioner","Monitor","map.pane.helper.ground"],function(t,n,i,o,s,r,a,l,c,u,h,d,g){var p,m=function(e,t){m.superclass.constructor.call(this,t),this.options.setName("layer"),this.options.setMapper(c),this._tileUrlTemplate=s.selectValue(e),this._tileSource=new h(this),this._tilePositioner=new d(this),this.events.addController(p),this._pane=null,this._tileContainer=null,this._initialZoom=null,this._tileContainerZoom=0,this._optionMonitor=new g(this.options),this._optionMonitor.add("brightness",this._onBrightnessChange,this,{defaultValue:.5}).add("zIndex",this._onZIndexChange,this,{defaultValue:r.layer})};p=a(m),n(m,l,{update:function(e){this._pane&&this._tileContainer&&(this._tileContainer.redraw({reload:!0,animate:!0,updateBounds:e}),this.events.fire("update"))},reinitialize:function(){var e="round"==this.options.get("tilesRoundingMethod","round")?Math.round(this._pane.getZoom()):Math.floor(this._pane.getZoom());this._tileContainerZoom=e,this._tileContainer.setTileZoom(e,this.getViewport())},setTileUrlTemplate:function(e){this._tileUrlTemplate=s.selectValue(e),this.events.fire("tiletemplatechange")},getTileUrlTemplate:function(){return this._tileUrlTemplate},getTileUrl:function(e,t){var n=this._tileSource.getTileUrl(e,t);return n?s.selectValue(n):null},numberToClientBounds:function(e,t){return this._tilePositioner.numberToClientBounds(e,t)},numberToGlobalBounds:function(e,t,n){return this._tilePositioner.numberToGlobalBounds(e,t,n)},clientPixelsToNumber:function(e,t){return this._tilePositioner.clientPixelsToNumber(e,t)},getTileSize:function(e){return this.options.get("tileSize",[256,256])},restrict:function(e,t){return this._tileSource.restrict(e,t)},_ensureElementExists:function(){this._element=o.create({css:{position:"absolute"},parentNode:this._pane.getElement()})},_setWebGLPane:function(){var e=this.getMap();this._pane=this.options.get("webglPane",e.panes.get("ground-webgl")),this._pane=e.panes.get(this._pane)},onAddToMap:function(t){this._tilePositioner.onAddToMap(t),this._webglImplementation=0,this._pane=this.options.get("pane",t.panes.get("ground"));var n;this.options.get("webgl")&&this.options.get("webglEnabled")&&e.supports.graphics.hasWebGl()&&(n=this.options.get("WebglTileContainerClass"))?this._webglImplementation=1:n=this.options.get("tileContainerClass"),"string"==typeof n?u.require(n,function(e){e||(this._webglImplementation=0,e=this.options.get("tileContainerClass")),this._initializeContainer(e)},function(){this._webglImplementation=0,this._initializeContainer(this.options.get("tileContainerClass"))},this):this._initializeContainer(n),this._onZIndexChange(this._optionMonitor.get("zIndex")),this._initialZoom=this._pane.getZoom()},_initializeContainer:function(e){this._webglImplementation?this._setWebGLPane():this._ensureElementExists(),this._paneListeners=this._pane.events.group().add("actionbegin",this._onActionStart,this).add("viewportchange",this._onViewportChange,this).add("clientpixelschange",this._onClientPixelsChange,this).add("actionend",this._onActionEnd,this).add("actionrestart",this._onActionRestart,this);var t=this._tileContainer=new e(this);t.setParent(this),t.options.setParent(this.options),t.events.setParent(this.events),this._tileContainerListeners=t.events.group().add("ready",this._onTileContainerReady,this).add("fail",this._onTileContainerFail,this),this._onZIndexChange(this._optionMonitor.get("zIndex")),this.reinitialize()},onRemoveFromMap:function(e){if(this._tileContainer){var t=this._tileContainer;t.setParent(null),t.options.setParent(null),t.events.setParent(null),this._tileContainerListeners.removeAll(),this._tileContainer=null}this._paneListeners&&this._paneListeners.removeAll(),this._element&&o.remove(this._element),this._tilePositioner.onRemoveFromMap(e)},getPane:function(){return this._pane},getElement:function(){return this._element},toClientPixels:function(e){return this._pane.toClientPixels(e)},fromClientPixels:function(e){return this._pane.fromClientPixels(e)},getZoom:function(){return this._pane.getZoom()},getViewport:function(){return this._pane.getViewport()},getBrightness:function(){return this._optionMonitor.get("brightness")},_onBrightnessChange:function(e,t){this.events.fire("brightnesschange",{newBrightness:e,oldBrightness:t})},_onZIndexChange:function(e){this._element?this._element.style.zIndex=e:this._tileContainer&&this._tileContainer.setZIndex(e)},_onActionStart:function(){this.events.fire("actionstart"),this._initialZoom=this._pane.getZoom(),this._isActionStarted=!0},_onViewportChange:function(){this._isActionStarted&&!this.options.get("loadTilesInAction",!0)||(0===this._initialZoom||this._pane.getZoom()>=this._initialZoom-1)&&this._tileContainer&&this._tileContainer.setViewport(this._pane.getViewport())},_onClientPixelsChange:function(){this._tileContainer&&this._tileContainer.redraw()},_onActionEnd:function(){this.events.fire("beforeactionend"),this._isActionStarted=!1,this._updateContainer(),this._initialZoom=0,this.events.fire("actionend")},_onActionRestart:function(){this._updateContainer()},_updateContainer:function(){var e=this._pane.getZoom(),t="round"==this.options.get("tilesRoundingMethod","round")?Math.round(this._tileContainerZoom)!=Math.round(e):Math.floor(this._tileContainerZoom)!=Math.floor(e);t?this.reinitialize():this._tileContainer&&this._tileContainer.setViewport(this.getViewport())},_onTileContainerReady:function(){this.events.fire("ready")},_onTileContainerFail:function(){e.logger.error("Layer: contailer lost"),this.events.fire("fail");var t=this.getMap();this.onRemoveFromMap(t),this.onAddToMap(t)}}),t(m)})}],["_@",function(e){e.modules.define("layer.component.TilePositioner",["util.math.cycleRestrict"],function(e,t){var n=function(e){return[Math.round(e[0]),Math.round(e[1])]},i=function(e){this._layer=e,this._projections={self:null,parent:null,differ:!1}};i.prototype={numberToGlobalBounds:function(e,t,n){var i=this._layer.getTileSize(t),o=[i[0]*Math.pow(2,n-t),i[1]*Math.pow(2,n-t)],s=[e[0]*o[0],e[1]*o[1]],r=[s,[s[0]+o[0],s[1]+o[1]]];if(this._projections.differ){var a={from:this._projections.self,to:this._projections.parent};r=[this._convertGlobalPixelPoint(r[0],n,a),this._convertGlobalPixelPoint(r[1],n,a)]}return r},numberToClientBounds:function(e,t){var i=this.numberToGlobalBounds(e,t,this._layer.getZoom());return[n(this._layer.toClientPixels(i[0])),n(this._layer.toClientPixels(i[1]))]},clientPixelsToNumber:function(e,t){var n=this._layer.getTileSize(t),i=this._layer.getZoom(),o=[n[0]*Math.pow(2,i-t),n[1]*Math.pow(2,i-t)],s=this._layer.fromClientPixels(e);if(this._projections.differ){var r={from:this._projections.parent,to:this._projections.self};s=this._convertGlobalPixelPoint(s,i,r)}return[Math.floor(s[0]/o[0]),Math.floor(s[1]/o[1])]},onAddToMap:function(e){this._projections=this._resolveProjections(),this._layer.options.events.add("change",this._onOptionsChange,this)},onRemoveFromMap:function(e){this._layer.options.events.remove("change",this._onOptionsChange,this)},_resolveProjections:function(){var e=this._layer,t=e.options.get("projection"),n=e.getParent().options.get("projection");return{self:t,parent:n,differ:t!=n}},_onOptionsChange:function(){var e=this._projections,t=this._resolveProjections();e.self==t.self&&e.parent==t.parent||(this._projections=t,this._layer.update())},_convertGlobalPixelPoint:function(e,n,i){var o=Math.pow(2,n+8),s=i.to.isCycled(),r=[s[0]?Math.floor(e[0]/o)*o:0,s[1]?Math.floor(e[1]/o)*o:0],a=[s[0]?t(e[0],0,o):e[0],s[1]?t(e[1],0,o):e[1]],l=i.from.fromGlobalPixels(a,n),c=i.to.toGlobalPixels(l,n);return[c[0]+r[0],c[1]+r[1]]}},e(i)})}],["_q",function(e){e.modules.define("layer.component.TileSource",["util.hd","util.math.cycleRestrict","util.processUrlTemplate"],function(e,t,n,i){var o=function(e){this._layer=e};o.prototype={getTileUrl:function(e,t){var n=this._layer.restrict(e,t),i=n?this._renderTemplate(n,t):null;return i},restrict:function(e,t){var i=this._layer.getTileSize(t),o=[Math.ceil(Math.pow(2,t+8)/i[0]),Math.ceil(Math.pow(2,t+8)/i[1])],s=e[0],r=e[1],a=this._layer.options.get("projection").isCycled();if(s<0||s>=o[0]){if(!a[0])return null;s=n(s,0,o[0])}if(r<0||r>=o[1]){if(!a[1])return null;r=n(r,0,o[1])}return[s,r]},_renderTemplate:function(e,n){var o=this._layer.getTileUrlTemplate();if("function"==typeof o)return o(e,n);var s=t.getLimitedPixelRatio();return s=s<1?1:s,i(o,{tileNumber:e,zoom:n,scale:s})}},e(o)})}],["0t",function(e){e.modules.define("layer.domTileNotFound.css",["not-found-tile"],function(e){e({})})}],["5F",function(e){e.modules.define("layer.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["5L",function(e){e.modules.define("layer.storage",["util.Storage"],function(e,t){e(new t)})}],["_i",function(e){e.modules.define("layer.tile.CanvasTile",["event.Manager","option.Manager","util.imageLoader","util.scheduler.strategy.Processing","util.dom.element","localization.common.current","layer.tile.storage"],function(e,t,n,i,o,s,r,a){var l=r.layer.tileNotFound,c={},u=function(e,o,s){this.options=o.get&&"function"==typeof o.get?o:new n(o),this.events=new t({context:this}),this._imageSize=[0,0],this._renderOptions=s||{},this._url=e,e?(this._loadingImageUrl=e,i.load({url:e,priority:this._renderOptions.priority,channel:"tiles"},this._onLoad,this)):this._onLoad()};u.prototype={renderAt:function(e,t,n,i){this._clientPixelBounds=n,this._context=e,this._canvasSize=t,this._renderOptions.tileTransparent=this.options.get("tileTransparent"),this._renderOptions.animate=i&&this.options.get("tileAnimateOpacity"),this._loaded&&this._draw(),this._rendered=!0},destroy:function(){this._imageSource=this._image=null,this._loaded||i.cancel(this._url,this._onLoad,this),this._animation&&this._animation.stop()},isReady:function(){return this._ready},_onLoad:function(e,t){if(this._imageSource=e,!this._loaded){if(this._renderOptions.image=e,this._error=!t,this._error&&!this._renderOptions.tileTransparent){var n=this.options.get("notFoundTile");if(this._loadingImageUrl!=n&&"string"==typeof n)return this._loadingImageUrl=n,void i.load({url:n,priority:this._renderOptions.priority},this._onLoad,this);this._imageSource=this._createErrorCanvas()}if(this._loaded=!0,this._imageSource){this._imageSize=[this._imageSource.naturalWidth||this._imageSource.width,this._imageSource.naturalHeight||this._imageSource.height],this._renderOptions.imageSize=this._imageSize;var o=this.options.get("imagePreprocess");this._renderOptions.errorImage=this._createErrorCanvas(this._imageSize),this._image=o?o(this._imageSource,this._renderOptions):this._imageSource,this._rendered&&this._draw()}}},_draw:function(){if(this._animation&&(this._animation.stop(),this._animation=null),this._error&&this._renderOptions.tileTransparent)return void this._onReady();var e=this.options.get("tileAnimationDuration",350),t=0;this._renderOptions.animate&&e?(this._animation=new o(function(e){var n=e.progress,i=t?(1-n/t)/(1-1/t):n;1==n?(i=1,this._animation.stop(),this._animation=null):t=n,this._context.globalAlpha=i,this._drawImage(),1==i&&this._onReady()},this,{duration:e}),this._animation.start()):(this._context.globalAlpha=1,this._drawImage(),this._onReady())},_drawImage:function(){var e=this._getIntersection();if(e){var t=e[0],n=e[1],i=this.options.get("imageProxy"),o=i?i(this._image):this._image;this._context.drawImage(o,Math.round(t[0][0]),Math.round(t[0][1]),Math.round(t[1][0]-t[0][0]),Math.round(t[1][1]-t[0][1]),Math.round(n[0][0]),Math.round(n[0][1]),Math.round(n[1][0]-n[0][0]),Math.round(n[1][1]-n[0][1]))}},_getIntersection:function(){if(!this._clientPixelBounds)return null;var e=this._canvasSize[0]<1||this._canvasSize[1]<1||this._imageSize[0]<1||this._imageSize[1]<1,t=[this._clientPixelBounds[0].slice(),this._clientPixelBounds[1].slice()],n=t[1][0]<=0||t[1][1]<=0||t[0][0]>=this._canvasSize[0]||t[0][1]>=this._canvasSize[1];if(e||n)return null;var i=[[0,0],this._imageSize.slice()],o=[this._imageSize[0]/(t[1][0]-t[0][0]),this._imageSize[1]/(t[1][1]-t[0][1])],s=[[Math.min(t[0][0],0),Math.min(t[0][1],0)],[Math.max(t[1][0]-this._canvasSize[0],0),Math.max(t[1][1]-this._canvasSize[1],0)]];
return t[0][0]-=s[0][0],i[0][0]-=Math.round(o[0]*s[0][0]),t[0][1]-=s[0][1],i[0][1]-=Math.round(o[1]*s[0][1]),t[1][0]-=s[1][0],i[1][0]-=Math.round(o[0]*s[1][0]),t[1][1]-=s[1][1],i[1][1]-=Math.round(o[1]*s[1][1]),i[0][0]==i[1][0]||i[0][1]==i[1][1]||t[0][0]==t[1][0]||t[0][1]==t[1][1]?null:[i,t]},_createErrorCanvas:function(){var e=this.options.get("tileSize",[256,256]),t=e.join("x");if(c[t])return c[t];var n=s.create({tagName:"canvas",css:{position:"absolute"}}),i=e[0],o=e[1],r=n.getContext("2d"),a=l.split("<br/>"),u=15,h=a.length,d=Math.round((o-(h-1)*u)/2),g=Math.round(i/2);n.width=i,n.height=o,r.fillStyle="rgb(190, 190, 190)",r.font="10px Arial",r.textBaseline="middle",r.textAlign="center",r.fillRect(0,0,i,o),r.fillStyle="rgb(0, 0, 0)";for(var p=0,m=a.length;p<m;p++)r.fillText(a[p],g,d+p*u);return c[t]=n},_onReady:function(){this._ready=!0,this.events.fire("ready")}},a.add("default#canvas",u),e(u)})}],["_z",function(e){e.modules.define("layer.tile.DomTile",["util.dom.element","util.dom.style","domEvent.manager","event.Manager","Event","option.Manager","localization.common.current","util.imageLoader","layer.tile.storage","util.css","util.bind","system.browser","layer.domTileNotFound.css"],function(t,n,i,o,s,r,a,l,c,u,h,d,g){function p(e,t,n){var i,o=e[0],s=e[1],r=[Math.ceil(s[0])-Math.floor(o[0]),Math.ceil(s[1])-Math.floor(o[1])];if("css3"!=n&&"css3-3d"!=n||!v)i={size:[Math.ceil(r[0]),Math.ceil(r[1])],position:[Math.floor(o[0]),Math.floor(o[1])],css:{position:"absolute"}};else{var a=[Math.floor(o[0]),Math.floor(o[1])],l=Math.ceil(t[0]),c=Math.ceil(t[1]),u=r[0]/l,h=r[1]/c,d=u>h?1:u/h,p=u>h?h/u:1;i=g.androidBrokenBuild?{patch:{transform:{scale:[u,h]}},size:[l,c]}:{patch:{transform:{scale:[d,p]}},size:[r[0]/d,r[1]/p]},i.patch.transform.offset=a,i.patch.transform.use3D="css3-3d"==n,i.css={position:"absolute",transformOrigin:"0px 0px"}}return i}var m=e.supports,f=l.layer.tileNotFound,_=m.css.checkTransitionProperty("opacity"),M=!!_,v=!!m.css.checkProperty("transform"),y=function(e,t,n){this.options=t.get&&"function"==typeof t.get?t:new a(t),this.events=new s,this._renderOptions=n||{},e?(this._url=e,this._usedUrl="",this._loadState="loading",this._ready=!1,c.load({url:e,priority:this._renderOptions.priority,channel:"tiles"},this._onLoad,this)):(this._ready=!0,this._loadState="error")};y.prototype={renderAt:function(e,t,i){this._element&&this._element.parentNode!=e&&n.remove(this._element),this._context=e,this._clientPixelBounds=t,this._renderOptions.tileTransparent=this.options.get("tileTransparent"),this._renderOptions.animate=M&&i&&this.options.get("tileAnimateOpacity"),"loading"!=this._loadState?this._draw():this._rendered=!0},destroy:function(){this._cancelAnimation(),"loading"==this._loadState&&c.cancel(this._url,this._onLoad,this),this._element&&(n.remove(this._element),this._element=null),this._context=null},isReady:function(){return this._ready},_onLoad:function(e,t){e&&(this._imageSize=[e.naturalWidth||e.width,e.naturalHeight||e.height],this._usedUrl=e.src,this._renderOptions.imageSize=this._imageSize),this._renderOptions.image=e,"loading"==this._loadState&&(this._loadState=t?"loaded":"error",this._rendered&&this._draw())},_elementCreate:function(e){var t=this.options.get("elementPreprocess");return e=t?t(e,this._renderOptions):e,this._renderOptions.animate&&(e.css[_]=0),n.create(e)},_draw:function(){this._cancelAnimation();var e=this._renderOptions.tileTransparent,t=p(this._clientPixelBounds,this._getImageSize(),this.options.get("tilePositionEngine","css2"));if(this._element)t.patch&&i.patch(this._element,t.patch),t.size&&i.setSize(this._element,t.size),t.position&&i.setPosition(this._element,t.position),t.css[_]=void 0,i.css(this._element,t.css);else{if((t.patch||(t.patch={})).selectable=!1,t.parentNode=this._context,"loaded"==this._loadState)t.patch.scaledBackground=this._usedUrl,t.patch.printBackground=this._usedUrl.replace(/scale=\d\.?\d*/,"scale=1");else if(!e){var n=this.options.get("notFoundTile");"string"==typeof n?(t.patch.scaledBackground=n,t.patch.printBackground=n.replace(/scale=\d\.?\d*/,"scale=1")):(t.css.backgroundColor="#bebebe",t.html='<ymaps class="'+h.addPrefix("tile-not-found")+'">'+f+"</ymaps>")}this._element=this._elementCreate(t)}this._renderOptions.animate?this._applyAnimation(this.options.get("tileAnimationDuration",300)):this._onReady()},_getImageSize:function(){return"error"==this._loadState?[Math.ceil(this._clientPixelBounds[1][0])-Math.floor(this._clientPixelBounds[0][0]),Math.ceil(this._clientPixelBounds[1][1])-Math.floor(this._clientPixelBounds[0][1])]:this._imageSize},_applyAnimation:function(e){e>0?(this._ready=!1,this._transiting=!0,o.add(this._element,"transitionend",this._onTransitionEnd,this),i.css(this._element,{transitionProperty:_,transitionDuration:e+"ms"}),this._startAnimationTimeoutId=setTimeout(d(function(){this._startAnimationTimeoutId=0;var e={};e[_]=1,i.css(this._element,e)},this),32)):this._onReady()},_cancelAnimation:function(e){this._startAnimationTimeoutId>0&&(clearTimeout(this._startAnimationTimeoutId),this._startAnimationTimeoutId=0),this._transiting&&(o.remove(this._element,"transitionend",this._onTransitionEnd,this),e&&i.css(this._element,{transitionProperty:"",transitionDuration:null}),this._transiting=!1)},_onTransitionEnd:function(){this._cancelAnimation(!0),this._onReady()},_onReady:function(){this._ready=!0,this.events.fire("ready",new r({target:this}))}},u.add("default#dom",y),t(y)})}],["_Q",function(e){e.modules.define("layer.tile.storage",["util.Storage"],function(e,t){e(new t)})}],["_I",function(e){e.modules.define("layer.tileContainer.CanvasContainer",["util.defineClass","collection.Item","layer.tile.storage","layer.tileContainer.storage","layer.tile.CanvasTile","util.dom.element","util.dom.style","util.tile.Storage","util.math.areEqual","util.math.areEqualPaths","util.hd","util.pixelBounds"],function(t,n,i,o,s,r,a,l,c,u,h,d,g){var p=e.env.browser,m=p.isMobile||p.isTablet,f=m&&e.env.enterprise,_=function(e,t){_.superclass.constructor.call(this,t),this._layer=e,this._canvas=null,this._viewport=null,this.tiles=null};n(_,i,{onAddToMap:function(){this._canvas=this._createElement(),this._canvasContext=this._canvas.getContext("2d"),this._layer.getElement().appendChild(this._canvas),this.tiles&&this._viewport&&this.setTileZoom(this.tiles.getTileZoom())},onRemoveFromMap:function(e){a.remove(this._canvas),this.tiles&&(this.tiles.events.remove("ready",this._onTilesReady,this),this._freeTiles()),this._freeOldTiles(),this._canvas=null,this._canvasContext=null},setTileZoom:function(e,t){this._freeOldTiles(),t&&(this._viewport=t);var n=this.getMap();if(n&&this._setDimensions(),this.tiles){this.tiles.events.remove("ready",this._onTilesReady,this);var i=this.tiles.getTileZoom();if(n&&i!=e&&!this.options.get("tileTransparent")){this._oldTiles=this.tiles;var o=[];this._oldTiles.each(function(e,t){e.isReady()||(e.destroy(),o.push(t))});for(var s=0,r=o.length;s<r;s++)this._oldTiles.remove(o[s]);this._renderTiles(this._oldTiles,!1)}else this._freeTiles()}if(this.tiles=new c(e),this.tiles.events.add("ready",this._onTilesReady,this),n){var s,r,a=this.tiles,l=this._getTileRange(),u=this._getTilesDiff(a,l);for(s=0,r=u.added.length;s<r;s++){var h=u.added[s],d=this.getTile(h,e,h[2]);this.tiles.add(h,d),this._renderTile(d,h,e,!this.options.get("tileTransparent"))}this._setPosition()}},setViewport:function(e){var t=this._viewport;this._viewport=e;var n,i,o=this.tiles,s=this._getTileRange(),r=this._getTilesDiff(this.tiles,s);if(!h(this._viewport,t)||r.removed.length||r.added.length){for(n=0,i=r.removed.length;n<i;n++){var a=o.get(r.removed[n]);a&&(o.remove(r.removed[n]),a.destroy())}for(n=0,i=r.added.length;n<i;n++){var l=r.added[n],a=this.getTile(l,o.getTileZoom(),l[2]);o.add(l,a)}this._renderAtViewport()}},redraw:function(e){if(this.getMap()){var t,n=this.tiles.getTileZoom(),i=!1,o=!1;if(e&&(i=e.reload,o=!this.options.get("tileTransparent")&&e.animate,t=e.updateBounds?g.fromPoints(e.updateBounds):null),this._clearCanvas(),this._oldTiles&&this._renderTiles(this._oldTiles,!1),this.tiles.each(function(e,s){var r=!t||g.containsPoint(t,s);return i&&r?(this.tiles.remove(s),void e.destroy()):void this._renderTile(e,s,n,o&&r)},this),i)for(var s=this._getTilesDiff(this.tiles,this._getTileRange()),r=0,a=s.added.length;r<a;r++){var l=s.added[r],c=this.getTile(l,n,l[2]);this.tiles.add(l,c),this._renderTile(c,l,n,o)}}},_renderTiles:function(e,t){var n=e.getTileZoom();e.each(function(e,i){this._renderTile(e,i,n,t)},this)},_renderTile:function(e,t,n,i){e.renderAt(this._canvasContext,this._currentCanvasSize,this._numberToClientBounds(t,n),i)},_freeOldTiles:function(){this._oldTiles&&(this._oldTiles.each(function(e){e.destroy()}),this._oldTiles.removeAll(),this._oldTiles=null)},_renderAtViewport:function(){this._setDimensions(),this._setPosition(),this._oldTiles&&this._renderTiles(this._oldTiles,!1),this._renderTiles(this.tiles,!1)},_createElement:function(){var e=a.create({tagName:"canvas",css:{position:"absolute"}});return m&&"iOS"==p.osFamily&&(e.patch={transform:{offset:[0,0],use3D:!0}}),e},getTile:function(e,t,n){var i=this.options.get("tileClass","default#canvas"),s=this._layer.getTileUrl(e,t);return"string"==typeof i&&(i=o.get(i)),new i(s,this.options,{priority:n,tileNumber:e,tileZoom:t,restrictedTileNumber:this._layer.restrict(e,t)})},_onTilesReady:function(){this.events.fire("ready"),this._freeOldTiles()},_freeTiles:function(){this.tiles.each(function(e){e.destroy()}),this.tiles.removeAll(),this.tiles=null},_getTileRange:function(){var e=this.tiles.getTileZoom();return[this._layer.clientPixelsToNumber(this._viewport[0],e),this._layer.clientPixelsToNumber(this._viewport[1],e)]},_getTilesDiff:function(e,t){var n,i,o={added:[],removed:[]},s=t[0],r=t[1],a=r[0]-s[0],l=r[1]-s[1],c=a+l,u=c/a,h=c/l,d=Math.round(s[0]+a/2),g=Math.round(s[1]+l/2);for(n=s[0];n<=r[0];n++)for(i=s[1];i<=r[1];i++)e.get([n,i])||o.added.push([n,i,c-Math.max(u*Math.abs(d-n),h*Math.abs(g-i))]);return e.each(function(e,t){t=[parseInt(t[0]),parseInt(t[1])],(t[0]<s[0]||t[0]>r[0]||t[1]<s[1]||t[1]>r[1])&&o.removed.push(t)}),o},_numberToClientBounds:function(e,t){var n=this._viewport[0],i=this._layer.numberToClientBounds(e,t);return[[i[0][0]-n[0],i[0][1]-n[1]],[i[1][0]-n[0],i[1][1]-n[1]]]},_clearCanvas:function(){this._canvasContext.clearRect(0,0,this._currentCanvasSize[0],this._currentCanvasSize[1])},_setPosition:function(){var e=[Math.round(this._viewport[0][0]),Math.round(this._viewport[0][1])];l.setPosition(this._canvas,e)},_setDimensions:function(){var e=g.getSize(this._viewport);if(this._currentCanvasSize&&u(e,this._currentCanvasSize))this._clearCanvas();else{this._currentCanvasSize=e,l.setSize(this._canvas,this._currentCanvasSize);var t=d.getPixelRatio(),n=d.getBackingStorePixelRatio(this._canvasContext),i=t/n;i=i<1?1:i,f&&(i=1),i>1&&i<1.5&&(i=2),l.attr(this._canvas,{width:this._currentCanvasSize[0]*i,height:this._currentCanvasSize[1]*i}),1!=i&&this._canvasContext.scale(i,i)}}}),s.add("default#canvas",_),t(_)})}],["_Z",function(e){e.modules.define("layer.tileContainer.DomContainer",["util.defineClass","util.dom.element","util.dom.style","util.tile.Storage","collection.Item","layer.tile.storage","layer.tileContainer.storage","util.pixelBounds","util.css","layer.tile.DomTile"],function(e,t,n,i,o,s,r,a,l,c){function u(e,t){u.superclass.constructor.call(this,t),this._layer=e}t(u,s,{onAddToMap:function(){var e={css:{position:"absolute"},position:[0,0],parentNode:this.getParent().getElement()};this._element=n.create(e),this.tiles&&this._viewport&&this._arrange()},onRemoveFromMap:function(e){n.remove(this._element),this.tiles&&(this.tiles.events.remove("ready",this._onTilesReady,this),this._freeTiles()),this._freeOldTiles(),this._element=null},getTile:function(e,t,n){var i,o=this._layer.getTileUrl(e,t),s=this.options.get("tileClass","default#dom");if(o)i=s;else{var a=this.options.get("notFoundTile",null);"string"!=typeof a&&a?i=a:(o=a,i=s)}return"string"==typeof i&&(i=r.get(i)),new i(o,this.options,{priority:n,tileNumber:e,tileZoom:t,restrictedTileNumber:this._layer.restrict(e,t)})},_onTilesReady:function(){this.events.fire("ready"),this._freeOldTiles()},_freeTiles:function(){this.tiles.each(function(e){e.destroy()}),this.tiles.removeAll(),this.tiles=null},_freeOldTiles:function(){this._oldTiles&&(this._oldTiles.each(function(e){e.destroy()}),this._oldTiles.removeAll(),this._oldTiles=null)},setTileZoom:function(e,t){if(this._freeOldTiles(),this.tiles)if(this.tiles.events.remove("ready",this._onTilesReady,this),!this.options.get("tileTransparent")&&this.getMap()&&Math.abs(this.tiles.getTileZoom()-e)<=3){this._oldTiles=this.tiles;var n=[];this._oldTiles.each(function(e,t){e.isReady()||(e.destroy(),n.push(t))});for(var i=0,s=n.length;i<s;i++)this._oldTiles.remove(n[i]);this._drawTiles(this._oldTiles,this._element)}else this._freeTiles();t&&(this._viewport=t),this.tiles=new o(e),this.tiles.events.add("ready",this._onTilesReady,this),this.getMap()&&this._arrange(!0)},setViewport:function(e){this._viewport=e,this.getMap()&&this._arrange()},_arrange:function(e){var t,n,o=this.tiles.getTileZoom(),s=this.tiles,r=this._getTilesDiff(s,this._getTileRange()),a=this._element;if(r.removed.length||r.added.length){for(i.css(a,{visibility:"hidden"}),t=0,n=r.removed.length;t<n;t++){var l=s.get(r.removed[t]);l&&(s.remove(r.removed[t]),l.destroy())}for(t=0,n=r.added.length;t<n;t++){var c=r.added[t],l=this.getTile(c,o,c[2]);this.tiles.add(c,l),l.renderAt(a,this._layer.numberToClientBounds(c,o),e)}i.css(a,{visibility:""})}},redraw:function(e){if(this.getMap()){var t,n=this.tiles.getTileZoom(),i=!1,o=!1;if(e&&(i=e.reload,o=!this.options.get("tileTransparent")&&e.animate,t=e.updateBounds?l.fromPoints(e.updateBounds):null),this._oldTiles&&this._drawTiles(this._oldTiles,this._element,o),this.tiles.each(function(e,s){var r=!t||l.containsPoint(t,s);r&&(i?(this.tiles.remove(s),e.destroy()):e.renderAt(this._element,this._layer.numberToClientBounds(s,n),o))},this),i)for(var s=this._getTilesDiff(this.tiles,this._getTileRange()),r=0,a=s.added.length;r<a;r++){var c=s.added[r],u=this.getTile(c,n,c[2]);this.tiles.add(c,u),u.renderAt(this._element,this._layer.numberToClientBounds(c,n),o)}}},_drawTiles:function(e,t,n){var i=e.getTileZoom();e.each(function(e,o){e.renderAt(t,this._layer.numberToClientBounds(o,i),n)},this)},_getTileRange:function(){return[this._layer.clientPixelsToNumber(this._viewport[0],this.tiles.getTileZoom()),this._layer.clientPixelsToNumber(this._viewport[1],this.tiles.getTileZoom())]},_getTilesDiff:function(e,t){var n,i,o={added:[],removed:[]},s=t[0],r=t[1],a=r[0]-s[0],l=r[1]-s[1],c=a+l,u=c/a,h=c/l,d=Math.round(s[0]+a/2),g=Math.round(s[1]+l/2);for(n=s[0];n<=r[0];n++)for(i=s[1];i<=r[1];i++)e.get([n,i])||o.added.push([n,i,c-Math.max(u*Math.abs(d-n),h*Math.abs(g-i))]);return e.each(function(e,t){(t[0]<s[0]||t[0]>r[0]||t[1]<s[1]||t[1]>r[1])&&o.removed.push(t)}),o}}),a.add("default#dom",u),e(u)})}],[".b",function(e){e.modules.define("layer.tileContainer.storage",["util.AsyncStorage"],function(e,t){e(new t)})}],[".c",function(e){e.modules.define("layer.tileContainer.WebGLContainer",["layer.tileContainer.storage"],function(t,n){n.define("default#webgl",function(t){e.supports.graphics.hasWebGl()?e.modules.require("layer.tileContainer.WebGLContainerImplementation",function(e){t(e)}):t(null,"unsupported")}),t("default#webgl")})}],["5D",function(e){e.modules.define("LayerCollection",["Collection","layer.storage","util.defineClass","util.bind","vow","component.ProviderObserver","component.ZoomRangeObserver"],function(t,n,i,o,s,r,a,l){var c=function(e){c.superclass.constructor.call(this,e),this._zoomRangeObserver=new l(s(this._onZoomRangeProvidersChange,this)),this._copyrightsObserver=new a({changeEventType:"copyrightschange",changeCallback:s(function(){this.events.fire("copyrightschange")},this),makeRequest:function(e,t){return e.getCopyrights(t.center,t.zoom)}}),this._brightness=.5,this._keyLayers={}};o(c,n,{add:function(t){var n;if("string"==typeof t){var o=i.get(t);if(!o&&e.env.debug)throw new Error('LayerCollection.add: layer "'+t+'" does not exist');if(this._keyLayers.hasOwnProperty(t)){if(e.env.debug)throw new Error('LayerCollection.add: layer "'+t+'" is already in collection');return this}n=this._keyLayers[t]=new o}else n=t;return c.superclass.add.call(this,n),"function"==typeof n.getZoomRange&&this._zoomRangeObserver.addProvider(n),"function"==typeof n.getCopyrights&&this._copyrightsObserver.addProvider(n),"function"==typeof n.getBrightness&&(n.events.add("brightnesschange",this._onChildBrightnessChange,this),this._onChildBrightnessChange()),this},remove:function(t){var n;if("string"==typeof t){if(this._keyLayers.hasOwnProperty(t))n=this._keyLayers[t],delete this._keyLayers[t];else if(e.env.debug)throw new Error('LayerCollection.remove: layer "'+t+'" does not exist')}else n=t;return c.superclass.remove.call(this,n),"function"==typeof n.getZoomRange&&this._zoomRangeObserver.removeProvider(n),"function"==typeof n.getCopyrights&&this._copyrightsObserver.removeProvider(n),"function"==typeof n.getBrightness&&(n.events.remove("brightnesschange",this._onChildBrightnessChange,this),this._onChildBrightnessChange()),this},_onZoomRangeProvidersChange:function(){this.events.fire("zoomrangechange")},getCopyrights:function(){var e=r.defer();return this._copyrightsObserver.get({center:arguments[0]||this.getMap().getCenter(),zoom:arguments[1]||this.getMap().getZoom()}).then(function(t){e.resolve([].concat.apply([],t.resolved))},function(){e.resolve([])}),e.promise()},getZoomRange:function(e){return this._zoomRangeObserver.get(e||this.getMap().getCenter())},getBrightness:function(){return this._brightness},_onChildBrightnessChange:function(){var e=this._brightness,t=this._calculateBrightness();e!=t&&(this._brightness=t,this.events.fire("brightnesschange",{newBrightness:t,oldBrightness:e}))},_calculateBrightness:function(){var e=0,t=0;return this.each(function(n){"function"==typeof n.getBrightness&&(e+=n.getBrightness(),t++)}),t?e/t:.5}}),t(c)})}],[".h",function(e){e.modules.define("layout.Base",["util.defineClass","Event","event.Manager","domEvent.manager","constants.mapDomEvents"],function(e,t,n,i,o,s){function r(e,t){this._parameters=t||{},this._data=e,this._parentElement=null,this.events=new i({context:this});var n=!1;this.events.addController({onBeforeEventFiring:function(e,t){if("mouseenter"==t){if(n)return!1;n=!0}else if("mouseleave"==t){if(!n)return!1;n=!1}}})}t(r,{isEmpty:function(){return!0},setData:function(e){this._data=e,this.rebuild()},getData:function(){return this._data},getParameters:function(){return this._parameters},setParameters:function(e){this._parameters!=e&&(this.clear(),this._parameters=e,this.build())},setParentElement:function(e){if(this._parentElement!=e){var t=this._parentElement;t&&this.clear(),this._parentElement=e,this._parentElement&&this.build(),this.events.fire("parentelementchange")}},getParentElement:function(){return this._parentElement},build:function(){this._parameters.disableDomEventListening||o.add(this._parentElement,s,this.onDomEvent,this)},clear:function(){this._parameters.disableDomEventListening||o.remove(this._parentElement,s,this.onDomEvent,this)},rebuild:function(){this._parentElement&&(this.clear(),this.build())},destroy:function(){},onDomEvent:function(e){var t=e.get("type"),i=e.get("propagatedData");i.firedAs||(i.firedAs={}),i.firedAs[t]||("mouseenter"!=t&&"mouseleave"!=t&&(i.firedAs[t]=!0),this.events.fire(t,new n({type:t,target:this,domEvent:e},e)))}}),e(r)})}],["5O",function(e){e.modules.define("layout.define",["layout.storage"],function(t,n){t(function(t,i,o){function s(t){e.modules.require(o,function(e){t(e)})}n.isDefined(t)||("string"==typeof i?(o=i,n.define(t,s)):n.define(t,i,s))})})}],["5T",function(e){var t=e.modules.importImages({defaultImage:{src:"defaultImage.png"}});e.modules.define("layout.Image",["util.hd","util.dom.style","util.dom.element","domEvent.manager","Monitor","templateLayoutFactory","layout.storage","shape.Rectangle","geometry.pixel.Rectangle","util.shapeFactory","util.imageLoader","util.css"],function(n,i,o,s,r,a,l,c,u,h,d,g,p){var m=e.env.browser.oldIE,f=t.get("defaultImage"),_=l.createClass('<ymaps class="'+p.addPrefix("image")+'" style="position: absolute;left: {{ options.imageOffset.0|default:-11|raw }}px;top: {{ options.imageOffset.1|default:-38|raw }}px;width: {{ options.imageSize.0|default:34|raw }}px;height: {{ options.imageSize.1|default:41|raw }}px;opacity: {{ options.opacity|default:1|raw }};"></ymaps>',{getShape:function(){return this._shape&&!this._shapeOptionsChanged()||(this._shape=this._createShape()),this._shape},build:function(){_.superclass.build.call(this),this._monitor=new a(this.getData().options).add(["imageClipRect","imageSize","imageHref"],this._setupBackground,this,{defaultValues:{imageHref:f,imageSize:[34,41]}}),m&&(this._badIENode=s.create({css:{zIndex:-1,width:"100%",height:"100%",overflow:"hidden",position:"absolute",top:0,left:0}}),s.create({css:{position:"absolute"},parentNode:this._badIENode}),this.getElement().firstChild.appendChild(this._badIENode)),this._setupBackground()},clear:function(){_.superclass.clear.call(this),this._imageHref&&g.cancel(this._imageHref,null,this),this._monitor.destroy(),this._imageSrc=this._imageHref=null},_createShape:function(){var e=this.getData().options,t=e.get("imageShape")||e.get("shape");if(t)return t.type&&t.coordinates?d.create(t):t;var n=e.get("imageOffset",[-11,-38]),i=e.get("imageSize",[34,41]);return new u(new h([[n[0],n[1]],[n[0]+i[0],n[1]+i[1]]]))},_shapeOptionsChanged:function(){var e=["imageOffset","imageSize","shape","imageShape"],t=!1;if(this._previousShapeOptions){for(var n=0,i=e.length;n<i;n++){var o=this.getData().options.get(e[n]);this._previousShapeOptions[e[n]]!=o&&(this._previousShapeOptions[e[n]]=o,t=!0)}return t}this._previousShapeOptions={};for(var n=0,i=e.length;n<i;n++)this._previousShapeOptions[e[n]]=this.getData().options.get(e[n]);return!0},_setupBackground:function(e){var t=e?i.selectValue(e.imageHref):i.selectValue(this._monitor.get("imageHref")),n=e&&e.imageClipRect||this._monitor.get("imageClipRect"),o=e&&e.imageSize||this._monitor.get("imageSize");t!==this._imageHref?(this._imageHref&&g.cancel(this._imageHref,null,this),this._imageHref=t,g.load(t,function(e){this._imageSrc=e,this._onBackgroundImageLoaded(e,t,n,o)},this)):this._imageSrc&&this._onBackgroundImageLoaded(this._imageSrc,t,n,o)},_onBackgroundImageLoaded:function(e,t,n,i){var s=[e.width,e.height];n=n||[[0,0],s];var r=[(i||s)[0]/(n[1][0]-n[0][0]),(i||s)[1]/(n[1][1]-n[0][1])],a=[s[0]*r[0],s[1]*r[1]],l=[-n[0][0]*r[0],-n[0][1]*r[1]];if(m){var c=this._badIENode.firstChild;o.setSize(c,a),o.setPosition(c,l),o.scaledBackgroundImage(c,t)}else o.css(this.getElement().firstChild,{backgroundImage:'url("'+t+'")',backgroundSize:a[0]+"px "+a[1]+"px",backgroundPosition:l[0]+"px "+l[1]+"px"}),i||o.setSize(this.getElement().firstChild,s)}});c.add("default#image",_),n(_)})}],["5V",function(e){e.modules.define("layout.ImageWithContent",["util.defineClass","Template","layout.Image","layout.templateBased.Base","layout.storage","util.css"],function(e,t,n,i,o,s,r){function a(e){o.call(this,e)}var l,c='<ymaps class="'+r.addPrefix("image-with-content")+'" style="position: absolute;left: {{ options.imageOffset.0|default:0|raw }}px;top: {{ options.imageOffset.1|default:0|raw }}px;width: {{ options.imageSize.0|default:30|raw }}px;height: {{ options.imageSize.1|default:30|raw }}px;opacity: {{ options.opacity|default:1|raw }};"><ymaps class="'+r.addPrefix("image-with-content-content")+'" style="font: 13px Arial,sans-serif;position: absolute;text-align: center;left: {{ options.contentOffset.0|default:0|raw }}px;top: {{ options.contentOffset.1|default:0|raw }}px;width: {{ options.contentSize.0|default:10|raw }}px;height: {{ options.contentSize.1|default:10|raw }}px;">{% include options.contentLayout %}</ymaps></ymaps>';t(a,i,{},{getTemplate:function(){return l||(l=new n(c)),l}}),s.add("default#imageWithContent",a),e(a)})}],["51",function(e){e.modules.define("layout.storage",["util.AsyncStorage"],function(e,t){e(new t("layout"))})}],["5N",function(e){e.modules.define("layout.SubLayoutEventMappingTable",["util.defineClass","constants.mapDomEvents","Event","util.array"],function(e,t,n,i,o){function s(e){this._parentLayout=e,o.each(n,function(e){"mousenter"==e||"mouseleave"==e?this[e]=!1:this[e]=this._defaultMapping},this),this.parentelementchange=!1,this.emptinesschange=!1,this.shapechange=!1,this["*"]=this._defaultMapping}t(s,{_defaultMapping:function(e){return new i({type:e.get("type"),target:e.get("target"),currentTarget:this._parentLayout},e)}}),e(s)})}],[".x",function(e){e.modules.define("layout.svgIcon.canvasFactory",["util.defineClass","util.dom.svgIconBuilder","Monitor","event.Mapper","event.Manager","canvasLayout.storage"],function(t,n,i,o,s,r,a){var l=i.isSvgToCanvasSupported();(!e.supports.graphics.hasCanvas()||"MobileSafari"==e.env.browser.name&&parseInt(e.env.browser.version)<7)&&(l=!1),t({hasSupport:function(){return l},defineClass:function(e,t,n){var i=this.createClass(t,n);return i&&a.add(e,i),i},createClass:function(t,s){function a(e){this._data=e,this._pictureMonitor=null,this._stateListener=null,this._opacityMonitor=null,this.events=new r({context:this})}if(!l)return null;var c=t.options||{};return c.printable=e.supports.printPatchNeeded,c.size=c.size||t.size,n(a,{build:function(){this._setupIcon(),t.hasContent&&this._setupContent()},destroy:function(){this.clear()},clear:function(){this._clearIcon()},getData:function(){return this._data},getOffset:function(){return t.offset||[0,0]},getShape:function(){return t.shape},getSize:function(){return[t.size[0],t.size[1]]},getTemplate:function(){return this.getData().options.get("template")},isEmpty:function(){return!0},renderLayout:function(e){var n=this._picture.getImage();if(n&&n.status&&n.img.width&&e.canvasContext.drawImage(n.img,0,0,n.img.width,n.img.height,0,0,t.size[0],t.size[1]),t.hasContent){var i=this.getData().properties||{},o=i.get?i.get("iconContent"):i.iconContent,s=t.contentOffset,r=t.contentSize;o&&(e.canvasContext.fillStyle=t.textColor||"#000",e.canvasContext.textAlign="center",e.canvasContext.textBaseline="middle",e.canvasContext.font=t.font||"13px Arial,sans-serif",e.canvasContext.fillText(o,Math.round(s[0]+r[0]/2),Math.round(s[1]+r[1]/2)))}this._picture.freeImage()},_setupIcon:function(){var e=this.getData().options;this._picture=i.getTemplateData(e,this.getTemplate(),null,c),this._pictureMonitor=new o(e).add(["template"].concat(this._picture.usedValues),this._onPictureChange,this),this.getData().properties&&"undefined"!=typeof this.getData().properties.get&&(this._stateListener=new o(this.getData().properties).add(["iconContent"].concat(this._picture.usedValues),this._onContentChange,this)),this._picture.alloc(),this._picture.getImage(this._onContentChange,this)},_clearIcon:function(){this._pictureMonitor.removeAll(),this._stateListener&&this._stateListener.removeAll(),this._picture.freeImage(),this._picture.free()},_onPictureChange:function(){this._clearIcon(),this._setupIcon(),this.events.fire("update")},_onContentChange:function(){this.events.fire("update")},_setupContent:function(){},_clearContent:function(){},_onContentLayoutChange:function(){this._clearContent(),this._setupContent()}},s||{}),a}})})}],[".y",function(e){e.modules.define("layout.svgIcon.factory",["util.defineClass","layout.Base","layout.storage","util.dom.svgIconBuilder","Monitor","util.dom.style","util.dom.element","util.dom.className","event.Mapper","layout.SubLayoutEventMappingTable","util.css","util.cancelableCallback"],function(t,n,i,o,s,r,a,l,c,u,h,d,g){var p=d.addPrefix("patched-for-print");t({createClass:function(t,m){function f(e,t){f.superclass.constructor.call(this,e,t),this._contentLayout=null,this._iconElement=null,this._pictureMonitor=null,this._stateListener=null,this._opacityMonitor=null,this._picture=null,this._pictureSeq=0}var _=t.hasContent?['<ymaps class="'+d.addPrefix("svg-icon-content")+'" style="font: 13px Arial, sans-serif; position: absolute; text-align: center;',"left: ",t.contentOffset[0],"px;","top: ",t.contentOffset[1],"px;","width: ",t.contentSize[0],"px;","height: ",t.contentSize[1],"px;",'"></ymaps>'].join(""):"",M=t.options||{};return M.printable=e.supports.printPatchNeeded,M.size=M.size||t.size,n(f,i,{build:function(){f.superclass.build.call(this),this._iconElement=l.create({className:d.addPrefix("svg-icon"),position:t.offset,size:t.size,css:{position:"absolute"},html:_,parentNode:this.getParentElement()}),M.className&&c.add(this._iconElement,M.className),this._setupIcon(),t.hasContent&&this._setupContent(),this._setupOpacityMonitor(),this._setupOpacity()},clear:function(){this._clearOpacityMonitor(),this._clearIcon(),t.hasContent&&this._clearContent(),l.remove(this._iconElement),this._lastClassName=null,this._iconElement=null,f.superclass.clear.call(this)},getShape:function(){return t.shape},getTemplate:function(){return this.getData().options.get("template","islands#icon")},_setupIcon:function(){var e=this.getData().options;this._picture=s.getTemplateData(e,this.getTemplate(),null,M),this._pictureMonitor=new r(e).add(["template"].concat(this._picture.usedValues),this._onPictureChange,this),this._pictureSeq&&this._pictureSeq.cancel(),this._pictureSeq=g.create(this._onClassSetCallback,this),this._picture.alloc(this._pictureSeq,this)},_onClassSetCallback:function(){var t=this._picture;this._pictureSeq=0,t.className!=this._lastClassName&&(this._lastClassName&&c.remove(this._iconElement,this._lastClassName),c.add(this._iconElement,t.className),e.supports.printPatchNeeded&&c.add(this._iconElement,p),this._lastClassName=t.className)},_clearIcon:function(){this._pictureMonitor.removeAll(),this._pictureSeq&&(this._pictureSeq.cancel(),this._pictureSeq=0),this._picture.free()},_onPictureChange:function(){this._clearIcon(),this._setupIcon()},_setupContent:function(){var e=this.getData().options,t=e.get("contentLayout","islands#geoObjectIconContent");"string"==typeof t&&(t=o.get(t)),t&&(this._contentLayout=new t(this.getData(),this.getParameters()),this._contentLayout.events.setParent(new u(this.events,new h(this))),this._contentLayout.setParentElement(l.findByPrefixedClass(this.getParentElement(),"svg-icon-content"))),this._stateListener=new r(e),this._stateListener.add("contentLayout",this._onContentLayoutChange,this)},_clearContent:function(){this._stateListener.removeAll(),this._contentLayout&&(this._contentLayout.setParentElement(null),this._contentLayout.events.setParent(null),this._contentLayout.destroy(),this._contentLayout=null)},_onContentLayoutChange:function(){this._clearContent(),this._setupContent()},_setupOpacityMonitor:function(){this._opacityMonitor=new r(this.getData().options),this._opacityMonitor.add("opacity",this._setupOpacity,this)},_clearOpacityMonitor:function(){this._opacityMonitor.removeAll()},_setupOpacity:function(){var e=this.getData().options.get("opacity");"undefined"!=typeof e&&a.css(this._iconElement,{opacity:e})}},m||{}),f}})})}],[":p",function(e){e.modules.define("layout.templateBased.Base",["util.defineClass","layout.Base","util.dom.element","util.dom.style","util.extend","util.array","util.bind","Event","util.ContentSizeObserver","event.Manager","data.Manager","data.Aggregator","Monitor","constants.mapDomEvents","layout.storage","event.Mapper","layout.SubLayoutEventMappingTable","localization.common.current","util.shapeFactory","util.cancelableCallback"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j){function b(e,t){b.superclass.constructor.call(this,e,t),this._renderedTemplate=null,this._sublayouts=null,this._oldShape=null,this._setupTemplateDataManager(e),this._sublayoutsEmptiness=this.calculateSublayoutsEmptiness(),this._emptiness=this.calculateEmptiness(),this.init()}function I(e){this._layout=e,this._monitors={}}function L(e){this._layout=e,this._observers={},this._csoListeners={},this._layoutChangeListeners={};
}n(b,i,{init:function(){},setData:function(e){this._clearTemplateDataManager(),this._setupTemplateDataManager(e),b.superclass.setData.call(this,e)},getTemplate:function(){},createTemplateDataManager:function(e){return new g(r({localization:new d(v)},e))},destroyTemplateDataManager:function(e){e.destroy()},getSublayout:function(e){for(var t=this._getSublayouts(),n=0,i=t.length;n<i;n++)if(t[n].name==e)return t[n].instance;return null},getElement:function(){return this._element},build:function(){this._element=o.create({html:this._getRenderedTemplate().text,parentNode:this.getParentElement()}),this._appendSubnodes(),this._appendSublayouts(),b.superclass.build.call(this)},clear:function(){b.superclass.clear.call(this),this._clearSublayoutsParamsMonitorsManager(),this._clearSublayoutsSizeObserveManager(),this._clearSublayouts(),o.destroy(this._element),this._element=null},rebuild:function(){this._freezeTemplateDataManager(),this.getParentElement()&&this.clear(),this._destroySublayouts(),this._render(),this._createSublayouts(),this._updateEmptiness(),this.getParentElement()&&this.build(),this._initSublayoutsSizeObserveManager(),this._fireChange(),this.testShapeChange(),this._unfreezeTemplateDataManager()},isEmpty:function(){return this._emptiness},areSublayoutsEmpty:function(){return this._sublayoutsEmptiness},calculateEmptiness:function(){return this.isTemplateEmpty()&&this.areSublayoutsEmpty()},isTemplateEmpty:function(){return this._getRenderedTemplate().empty},calculateSublayoutsEmptiness:function(){for(var e=this._getSublayouts(),t=0,n=e.length;t<n;t++){var i=e[t];if(i.isLoaded&&!i.instance.isEmpty())return!1}return!0},_updateEmptiness:function(){var e=this._emptiness;this._emptiness=this.calculateEmptiness(),e!=this._emptiness&&(this.onEmptinessChange(),this.events.fire("emptinesschange"))},onEmptinessChange:function(){},_updateSublayoutsEmptiness:function(){var e=this._sublayoutsEmptiness;this._sublayoutsEmptiness=this.calculateSublayoutsEmptiness(),e!=this._sublayoutsEmptiness&&(this.onSublayoutsEmptinessChange(),this._updateEmptiness())},onSublayoutsEmptinessChange:function(){},getShape:function(){return this._shape&&!this._shapeOptionsChanged()||(this._shape=this._createShape()),this._shape},_shapeOptionsChanged:function(){var e=this.getData().options.get("shape");return this._previousShapeOption!=e&&(this._previousShapeOption=e,!0)},_createShape:function(){if(this.getData()&&this.getData().options){var e=this.getData().options.get("shape");if(e)return e.type&&e.coordinates?y.create(e):e}return null},onDataChange:function(){this._testValuesChanges()?this.rebuild():this._sublayouts&&this._testSublayoutChanges()},_fireChange:function(){this.events.fire("change")},onSublayoutSizeChange:function(e,t){s.css(e.instance.getParentElement(),{display:"block",width:Math.max(t.width,e.params.minWidth||0)+"px",height:Math.max(t.height,e.params.minHeight||0)+"px",overflowX:t.scrollX?"auto":"hidden",overflowY:t.scrollY?"auto":"hidden"}),this.testShapeChange()},destroy:function(){this.getParentElement()&&this.clear(),this._destroySublayouts(),this._clearTemplateDataManager()},setParentElement:function(e){this._renderedTemplate||(this._render(),this._createSublayouts()),this._freezeTemplateDataManager();var t=this._parentElement!=e;b.superclass.setParentElement.call(this,e),t&&(this._initSublayoutsSizeObserveManager(),this.testShapeChange()),this._unfreezeTemplateDataManager()},testShapeChange:function(){var e=this._oldShape,t=this.getShape();(!!e!=!!t||e&&t&&!e.equals(t))&&(this._oldShape=t,this.events.fire("shapechange"))},_clearSublayouts:function(){for(var e=this._getSublayouts(),t=0,n=e.length;t<n;t++){var i=e[t];if(i.isLoaded){var o=e[t].instance;o.getParentElement()&&o.setParentElement(null)}}},_render:function(){this._renderedTemplate=this.getTemplate().build(this._templateDataManager)},_createSublayouts:function(){var e=this._getRenderedTemplate().sublayouts;this._sublayouts=[];for(var t=0,n=e.length;t<n;t++){var i=e[t],o=i.value,s=f.get(o,this.getData()),r="undefined"!=typeof s,a={isLoaded:r,storageKey:o,key:i.key,id:i.id,name:i.name||i.id,params:i};r?(a.instance=this._createSublayoutInstance(s),a.value=s):this._createSublayoutRequest(a),this._sublayouts.push(a)}},_createSublayoutRequest:function(e){var t=j.create(function(t){e.isLoaded=!0,e.instance=this._createSublayoutInstance(t),e.value=t,this._element&&this._appendSublayout(e),this._updateSublayoutsEmptiness(),this._initSublayoutsSizeObserveManager(),this.testShapeChange(),this._fireChange()},this);f.require({keys:[e.storageKey],data:this.getData()}).spread(t).done(),e.onLoadCallback=t},_destroySublayouts:function(){if(this._sublayouts){for(var e=0,t=this._sublayouts.length;e<t;e++){var n=this._sublayouts[e];n.isLoaded?this._destroySublayoutInstance(n.instance):n.onLoadCallback.cancel()}this._sublayouts=null}},_createSublayoutInstance:function(t){if(e.env.debug&&"function"!=typeof t)throw new Error("layout.templateBased.Base._createSublayoutInstance: Не удалось получить класс вложенного макета.");var n=new t(this.getData(),this.getParameters());return n.events.setParent(new _(this.events,this.createSubLayoutEventMappingTable())).add("emptinesschange",this.onSublayoutEmptinessChange,this).add("shapechange",this.testShapeChange,this),n},_destroySublayoutInstance:function(e){e.events.remove("emptinesschange",this.onSublayoutEmptinessChange,this).remove("shapechange",this.testShapeChange,this).setParent(null),e.destroy()},createSubLayoutEventMappingTable:function(){return new M(this)},onSublayoutEmptinessChange:function(){this._updateSublayoutsEmptiness()},_appendSubnodes:function(){for(var e=this._getRenderedTemplate().subnodes,t=0,n=e.length;t<n;t++){var i=e[t],o=document.getElementById(i.parentId);o.appendChild(i.element)}},_appendSublayouts:function(){for(var e=this._getSublayouts(),t=0,n=e.length;t<n;t++){var i=e[t];i.isLoaded&&this._appendSublayout(i)}},_appendSublayout:function(e){e.instance.setParentElement(document.getElementById(e.id)),e.params.monitorValues.length&&(this._pmManager||this._setupSublayoutsParamsMonitorsManager(),this._pmManager.add(e)),e.params.observeSize&&(this._ssoManager||this._setupSublayoutsSizeObserveManager(),this._ssoManager.add(e))},_clearSublayout:function(e){this._ssoManager&&this._ssoManager.remove(e.name),this._pmManager&&this._pmManager.remove(e.name),e.instance.setParentElement(null)},_removeSublayout:function(e){this._clearSublayout(e),this._destroySublayoutInstance(e.instance)},_setupSublayoutsParamsMonitorsManager:function(){this._pmManager=new I(this)},_clearSublayoutsParamsMonitorsManager:function(){this._pmManager&&(this._pmManager.destroy(),this._pmManager=null)},_setupSublayoutsSizeObserveManager:function(){this._ssoManager=new L(this)},_clearSublayoutsSizeObserveManager:function(){this._ssoManager&&(this._ssoManager.destroy(),this._ssoManager=null)},_initSublayoutsSizeObserveManager:function(){this._ssoManager&&this._ssoManager.init()},_setupTemplateDataManager:function(e){this._templateDataManager=this.createTemplateDataManager(e),this._templateDataManager.events.add("change",this.onDataChange,this)},_clearTemplateDataManager:function(){this._templateDataManager.events.remove("change",this.onDataChange,this),this.destroyTemplateDataManager(this._templateDataManager)},_freezeTemplateDataManager:function(){this._templateDataManager&&this._templateDataManager.freeze()},_unfreezeTemplateDataManager:function(){this._templateDataManager&&this._templateDataManager.unfreeze()},_testValuesChanges:function(){if(!this._renderedTemplate)return!1;var e=this._renderedTemplate.renderedValues,t=this._templateDataManager;for(var n in e)if(e.hasOwnProperty(n)&&e[n].value!==t.get(n))return!0;return!1},_testSublayoutChanges:function(){for(var e,t,n=!1,i=this._getSublayouts(),o=0,s=i.length;o<s;o++){e=i[o];var r=this._templateDataManager.get(e.key);"undefined"!=typeof r&&(t=f.get(r,this.getData()),t?t!==e.value&&(e.isLoaded?this._removeSublayout(e):(e.onLoadCallback.cancel(),delete e.onLoadCallback),e.isLoaded=!0,e.value=t,e.instance=this._createSublayoutInstance(e.value),this._appendSublayout(e),n=!0):(e.instance&&this._removeSublayout(e),delete e.instance,delete e.value,e.isLoaded||e.onLoadCallback.cancel(),n=!0,e.isLoaded=!1,e.storageKey=r,this._createSublayoutRequest(e)))}n&&this._fireChange()},_getRenderedTemplate:function(){return this._renderedTemplate||this._render(),this._renderedTemplate},_getSublayouts:function(){return this._sublayouts||this._createSublayouts(),this._sublayouts}}),I.prototype={add:function(e){this.remove(e.name),this._monitors[e.name]=new p(this._layout._templateDataManager).add(e.params.monitorValues,this._layout.rebuild,this._layout)},remove:function(e){this._monitors[e]&&this._monitors[e].removeAll()},destroy:function(){a.each(this._monitors,function(e,t){this.remove(t)},this)}},L.prototype={init:function(){for(var e in this._observers)this._observers.hasOwnProperty(e)&&this.observe(e)},add:function(e){function t(e,t){return e="undefined"!=typeof e?e:t,isNaN(e)?t:e}var n=e.name,i=e.params;this.remove(n),this._observers[n]=new u(e.instance.getParentElement(),{maxWidth:t(i.maxWidth,1/0),maxHeight:t(i.maxHeight,1/0),scrollX:"undefined"==typeof i.scrollX||i.scrollX,scrollY:"undefined"==typeof i.scrollY||i.scrollY}),this._csoListeners[n]=this._observers[n].events.group().add("sizechange",function(t){this._layout.onSublayoutSizeChange(e,t.get("sizeByContent"))},this),this._layoutChangeListeners[n]=e.instance.events.group().add("change",function(){this.observe(n)},this)},remove:function(e){this._observers[e]&&this._observers[e].destroy(),this._csoListeners[e]&&this._csoListeners[e].removeAll(),this._layoutChangeListeners[e]&&this._layoutChangeListeners[e].removeAll()},observe:function(e){this._observers[e]&&this._observers[e].observe()},destroy:function(){a.each(this._observers,function(e,t){this.remove(t)},this)}},t(b)})}],["!K",function(e){e.modules.define("LoadingObjectManager",["util.defineClass","event.Manager","BaseObjectManager","objectManager.component.OnceLoadingDataController","objectManager.component.View","objectManager.ObjectCollection","objectManager.ClusterCollection","component.child.MapChild","objectManager.component.ObjectControllerAddon","objectManager.component.TileSource","util.extend","Event","yandex.counter"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g){var p=function(e,t){this._urlTemplate=e,this.events=new n({context:this}),this._mapChildComponent=new l({onMapChange:{callback:this._onMapChange,context:this},onParentChange:{callback:this._onParentChange,context:this}}),this._objectsEditingEventManager=new n,this._clustersEditingEventManager=new n,this.objects=new r(this,this._objectsEditingEventManager),this.clusters=new a(this,this._clustersEditingEventManager),this._tileSource=new u(this),p.superclass.constructor.call(this,t,{objects:this.objects,clusters:this.clusters,events:this.events,addDisplayedObjects:{callback:this._addObjects,context:this},removeDisplayedObjects:{callback:this._removeObjects,context:this},removeAll:{callback:this._removeAllObjects,context:this}}),this._view=null,this._dataLoadController=null,this._dataLoadControllerListener=null,this._objectControllerAddon=new c(this),g.countByKey("modulesUsage","loadingObjectManager.create")};t(p,i,{setUrlTemplate:function(e){this._urlTemplate=e},getUrlTemplate:function(){return this._urlTemplate},getTileUrl:function(e){return this._tileSource.getTileUrl(e)},getPadding:function(e){return this._tileSource.getPadding(e)},getMap:function(){return this._mapChildComponent.getMap()},getParent:function(){return this._mapChildComponent.getParent()},setParent:function(e){return this._mapChildComponent.setParent(e),this},onAddToMap:function(e){this._setupView(),this._objectControllerAddon.setMap(e),this._objectControllerAddon.events.add("statechange",this._onObjectControllerStateChange,this),this._setupDataLoadController(),p.superclass.onAddToMap.call(this,e)},onRemoveFromMap:function(e){p.superclass.onRemoveFromMap.call(this,e),this._clearDataLoadController(),this._objectControllerAddon.events.remove("statechange",this._onObjectControllerStateChange,this),this._objectControllerAddon.setMap(null),this._clearView()},getObjectState:function(e){var t=p.superclass.getObjectState.call(this,e),n=this._objectControllerAddon.getController(),i=n&&n.getObjectState(e);return i&&(t=h(t,i)),t},reloadData:function(){this._dataLoadController&&this._dataLoadController.reloadData()},getBounds:function(){return this._dataLoadController&&this.objects.getLength()?this._dataLoadController.getBounds():null},getPixelBounds:function(){return this._dataLoadController?this._dataLoadController.getPixelBounds():null},_setupDataLoadController:function(){this._dataLoadController=new o(this),this._dataLoadControllerListener=this._dataLoadController.events.group().add("statechange",this._onDataLoadControllerStateChange,this).add("pixelboundschange",this._onDataLoadControllerBoundsChange,this)},_clearDataLoadController:function(){this._dataLoadControllerListener.removeAll(),this._dataLoadController.destroy()},_onDataLoadControllerStateChange:function(e){var t=e.get("removed"),n=e.get("added");t&&this.objects.remove(t),n&&this.objects.add(n)},_onDataLoadControllerBoundsChange:function(){this.events.fire("pixelboundschange")},_setupView:function(){this._view=new s(this,this._objectsEditingEventManager,this._clustersEditingEventManager)},_clearView:function(){this._view.destroy()},_onMapChange:function(e,t){e&&this.onRemoveFromMap(e),t&&this.onAddToMap(t),this.events.fire("mapchange",{oldMap:e,newMap:t})},_onParentChange:function(e,t){t&&this.options.setParent(t.options),this.events.fire("parentchange",{oldParent:e,newParent:t}),t||this.options.setParent(null)},_addObjects:function(e){this._objectControllerAddon.getController().add(e)},_removeObjects:function(e){this._objectControllerAddon.getController().remove(e)},_removeAllObjects:function(e){this._objectControllerAddon.getController().removeAll()},_onObjectControllerStateChange:function(e){var t=e.get("removedClusters"),n=e.get("addedClusters");t&&t.length&&this._clustersEditingEventManager.fire("remove",new d({target:this,type:"remove",clusters:t})),n&&n.length&&this._clustersEditingEventManager.fire("add",new d({target:this,type:"add",clusters:n})),this._fireStateChange({added:e.get("added"),removed:e.get("removed"),addedClusters:e.get("addedClusters"),removedClusters:e.get("removedClusters"),update:e.get("update"),sync:e.get("sync")})},_fireStateChange:function(e){this.events.fire("statechange",{added:e.added||[],removed:e.removed||[],addedClusters:e.addedClusters||[],removedClusters:e.removedClusters||[],update:e.update||[],sync:e.sync})}}),e(p)})}],[".E",function(e){e.modules.define("localization.common.current",function(e){return["localization.common."+e.env.lang.substr(0,2)]},function(e,t){e(t||{})})}],[".M",function(e){e.modules.define("localization.common.ru",[],function(e){e({Balloon:{close:"Закрыть"},Control:{ListBox:{Collapse:"Свернуть",Expand:"Развернуть"},MiniMap:{hide:"Скрыть обзорную карту",show:"Показать обзорную карту"},Ruler:{close:"Удалить путь",sure:"Удалить все отметки? \\n\\n(для удаления только одной отметки\\n дважды щелкните по ней)"},Search:{clear:"Очистить",correction:"В запросе исправлена опечатка.<br/>Результаты для «%s»",error:"Сервер не смог обработать запрос",found:["Найден %d объект","Найдено %d объекта","Найдено %d объектов","Найдено %d объектов"],loadMore:["Ещё %d результат","Ещё %d результата","Ещё %d результатов","Ещё %d результатов"],next:["Следующий %d","Следующие %d","Следующие %d","Следующие %d"],noname:"Без названия",notFound:"По запросу ничего не найдено",object:["объект","объекта","объектов","объектов"],of:"из",previous:["Предыдущий %d","Предыдущие %d","Предыдущие %d","Предыдущие %d"],search:"Найти",searchLegend:"Адрес или объект",wait:"Идет запрос к серверу"},ToolBar:{drag:"Переместить карту",geolocation:"Определить Ваше местоположение",geolocationError:"Не получается определить Ваше местоположение",geolocationSuccess:"Ваше месторасположение",info:"Получить информацию",magnifier:"Увеличить",ruler:"Измерение расстояний на карте"},TypeControl:{layers:"Слои",mapType:"Тип карты",more:"Ещё"},Zoom:{city:"город",country:"страна",house:"дом",street:"улица",world:"мир"}},Copyrights:{agreement:"Условия использования",agreementCompact:"Условия",agreementLink:"http://yandex.ru/legal/maps_termsofuse/",edit:'<a href="http://n.maps.yandex.ru" style="font-weight: bold !important;" target="_blank">Редактировать Народную карту</a>',editCompact:'<a href="http://n.maps.yandex.ru" style="font-weight: bold !important;" target="_blank">Народная карта</a>',feedback:"",feedbackTemplate:"",logoLang:"ru",logoLink:"http://maps.yandex.ru",osm:'© Участники <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',yandex:'© <a href="http://maps.yandex.ru">Яндекс</a>'},DaysOfWeek:{fri:"пт",friday:"пятница",mon:"пн",monday:"понедельник",onFri:"в пт",onMon:"в пн",onSat:"в сб",onSun:"в вс",onThu:"в чт",onTue:"во вт",onWed:"в ср",sat:"сб",saturday:"суббота",sun:"вс",sunday:"воскресенье",thu:"чт",thursday:"четверг",tue:"вт",tuesday:"вторник",wed:"ср",wednesday:"среда"},Editor:{addInterior:"Добавить внутренний контур",removeInterior:"Удалить контур",removeVertex:"Удалить",startDrawing:"Продолжить",stopDrawing:"Завершить"},MapType:{hybrid:"Гибрид",map:"Схема",peoplesHybrid:"Народная + спутник",peoplesMap:"Народная карта",satellite:"Спутник"},PeopleMap:{house:"Здание",hydro:"Водоем, участок реки",locality:"Населённый пункт",noname:"Без названия",other:"Другое",phybrid:"Гибрид",pmap:"Схема",railway:"Участок железной дороги",street:"Участок дороги",vegetation:"Лес, парк"},Traffic:{address:"Адрес",archiveDataText:"На основе статистики Яндекс.Пробок",archiveProvider:"обычно",brownJam:"Движение перекрыто",chooseCity:"Выберите город ",description:"Описание",eventType0:"Дорожные работы",eventType1:"ДТП",eventType2:"Развод моста",eventType3:"Перекрытие движения",eventType4:"Камера",eventType5:"Прочее",expectedOn:"ожидается в %t",forTheNearFuture:"На ближайшее время",forecast:"Прогноз",forecastData:"На основе прогноза пробок",forecastDataText:"На основе прогноза Яндекс.Пробок",greenJam:"Свободно",inAnHour:"через час",infoLayer:"Дорожные события",jams:"Пробки",later:"потом",length:"Длина",level0:"На дорогах свободно",level1:"На дорогах свободно",level10:"Пешком быстрее",level2:"Дороги почти свободны",level3:"Местами затруднения",level4:"Местами затруднения",level5:"Движение плотное",level6:"Движение затруднено",level7:"Серьёзные пробки",level8:"Многокилометровые пробки",level9:"Город стоит",noData:"Данные о пробках недоступны",noForecastHere:"На этой территории нет прогноза пробок.",noRegion:"Нет данных о пробках в этом регионе",noStatisticsHere:"На этой территории нет статистики пробок.",noTimeZone:"Данные о пробках отсутствуют",now:"сейчас",nowOn:"сейчас, в %t",onOtherDays:"На другие дни",points:["%d балл","%d балла","%d баллов","%d баллов"],redJam:"Пробка",seeCurrentTrafficJams:"Посмотреть текущие пробки.",source:"Источник",statistics:"Статистика",statisticsData:"На основе статистики пробок",statisticsHint:"Статистика основана на информации о пробках за последние два месяца",time:"Дата",times:"Сроки",today:"Сегодня",trafficBlocked:"движение перекрыто",usuallyOn:"обычно в %s, %t",yellowJam:"Движение затруднено",zoomToWatch:'<a href="javascript:void(0)">Увеличьте масштаб</a>, чтобы увидеть пробки'},Unit:{centimetreAbbr:"см.",dayAbbr:["д.","дн.","дн.","дн."],hourAbbr:"ч.",kilometreAbbr:"км.",kmh:"км/ч",metreAbbr:"м",minuteAbbr:"мин.",secondAbbr:"с"},distribution:{badgeUpdateBrowserInfoMessage:'<a href="https://tech.yandex.ru/maps/doc/jsapi/updating-browsers/index-docpage/?from=$[from]" target="_blank">[?]</a>',badgeUpdateBrowserMessage:"Обновите браузер",badgeYaBrowserLink:'<a href="https://browser.yandex.ru/?from=link_maps___&banerid=0408000000" target="_blank">$[messages.message]</a>',badgeYaBrowserMobileAndroidCounter:"http://appmetrika.yandex.ru/serve/7778453801303976883?action=click&app_id=com.yandex.browser",badgeYaBrowserMobileAndroidLink:'<a href="market://details?id=com.yandex.browser" target="_blank">$[messages.message]</a>',badgeYaBrowserMobileIOsLink:'<a href="https://itunes.apple.com/ru/app/andeks.brauzer/id574939428?mt=8" target="_blank">$[messages.message]</a>',badgeYaBrowserTabletAndroidCounter:"http://appmetrika.yandex.ru/serve/3382077458904646597?action=click&app_id=com.yandex.browser",badgeYaBrowserTabletAndroidLink:'<a href="market://details?id=com.yandex.browser" target="_blank">$[messages.message]</a>',bandMessage:'Ваш браузер устарел. Пожалуйста, обновите браузер (<a href="https://tech.yandex.ru/maps/doc/jsapi/updating-browsers/index-docpage/?from=$[from]" target="_blank">подробнее</a>) или установите',openRoute:"Открыть маршрут",panoramas:'К сожалению, нам не удалось запустить Яндекс.Панорамы на вашем устройстве (<a href="https://tech.yandex.ru/maps/doc/jsapi/updating-browsers/index-docpage/?from=$[from]" target="_blank">подробнее</a>).',routeOpenInMaps:"Подробнее",searchInYandex:"Поискать в",unavailable:'Здесь должна быть карта.<br/>К сожалению, мы не можем отобразить её в вашем браузере.<br/>Но вы можете попытаться просмотреть её<br/>в <a href="{{ href }}" target="_blank">Мобильных Яндекс.Картах</a>.',yaBrowser:'<a class="ya-distrib-browser"  target="_blank" href="https://browser.yandex.ru/?from=link_maps___&banerid=0408000000">Яндекс.Браузер</a>',yaBrowserMobileAndroid:'<a href="market://details?id=com.yandex.browser" data-counter="http://appmetrika.yandex.ru/serve/7778453801303976883?action=click&app_id=com.yandex.browser" class="ya-distrib-browser" target="_blank">Я.Браузер</a>',yaBrowserMobileIOs:'<a href="https://itunes.apple.com/ru/app/andeks.brauzer/id574939428?mt=8" class="ya-distrib-browser" >Я.Браузер</a>',yaBrowserTabletAndroid:'<a href="market://details?id=com.yandex.browser" data-counter="http://appmetrika.yandex.ru/serve/3382077458904646597?action=click&app_id=com.yandex.browser" class="ya-distrib-browser" target="_blank">Я.Браузер</a>',yaMapsAndroidLink:"intent://maps.yandex.ru/{parameters}#Intent;scheme=http;package=ru.yandex.yandexmaps;S.browser_fallback_url={fallback_url};end",yaMapsIOsLink:"yandexmaps://maps.yandex.ru/",yaMapsIOsRouteLink:"yandexmaps://build_route_on_map/",yaMapsIOsServiceLink:"http://go.onelink.me/id313877526?pid=api-maps&c=text&af_dp={url-scheme}",yaOpenInMaps:"Открыть в Яндекс.Картах",yandexLink:"https://yandex.ru/search?text={text}&from=mapsapi"},geoXml:{Latitude:"Широта",Longitude:"Долгота",Time:"Время",Velocity:"Скорость"},geocode:{area:"",country:"",district:"",house:"",locality:"",metro:"",province:"",street:""},jsonp:{scriptError:"Ошибка при загрузке скрипта",timeoutExceeded:"Превышен интервал ожидания ответа от сервера"},layer:{tileNotFound:"Для этого участка местности нет данных.<br/>Попробуйте перейти на масштаб выше<br/>или выбрать другое место на карте."},masstransit:{"human-duration":'<i18n:dynamic>\n    <i18n:xsl>\n        <xsl:param name="duration" select="0"/>\n        <xsl:variable name="days" select="floor($duration div 86400)"/>\n        <xsl:variable name="hours" select="floor($duration mod 86400 div 3600)"/>\n        <xsl:variable name="minutes" select="ceiling($duration mod 3600 div 60)"/>\n        <xsl:if test="$days">\n            <xsl:value-of select="$days"/>\n            <xsl:choose>\n                <xsl:when test="$days = 1"> д. </xsl:when>\n                <xsl:otherwise> дн. </xsl:otherwise>\n            </xsl:choose>\n        </xsl:if>\n        <xsl:if test="$days &lt; 20 and $hours">\n            <xsl:value-of select="$hours"/>\n            <xsl:text> ч. </xsl:text>\n        </xsl:if>\n        <xsl:if test="$days = 0 and $hours &lt; 20 and $minutes">\n            <xsl:value-of select="$minutes"/>\n            <xsl:text> мин. </xsl:text>\n        </xsl:if>\n    </i18n:xsl>\n</i18n:dynamic>',quote:"<i18n:dynamic>\n    <i18n:xsl>\n        <xsl:param name=\"text\"/>\n        <xsl:value-of select=\"concat('«', re:replace($text, '&quot;([^&quot;]+)&quot;', 'g', '„$1“'), '»')\" xmlns:re=\"http://exslt.org/regular-expressions\"/>\n    </i18n:xsl>\n</i18n:dynamic>","transport-aeroexpress":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Аэроэкспресс</i18n:masculine>\n    <i18n:plural>Аэроэкспрессы</i18n:plural>\n</i18n:dynamic>',"transport-bus":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Автобус</i18n:masculine>\n    <i18n:plural>Автобусы</i18n:plural>\n</i18n:dynamic>',"transport-cable":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Канатная дорога</i18n:masculine>\n    <i18n:plural>Канатные дороги</i18n:plural>\n</i18n:dynamic>',"transport-dolmus":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Долмуш</i18n:masculine>\n    <i18n:plural>Долмуш</i18n:plural>\n</i18n:dynamic>',"transport-ferry":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Паром</i18n:masculine>\n    <i18n:plural>Паромы</i18n:plural>\n</i18n:dynamic>',"transport-funicular":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Фуникулёр</i18n:masculine>\n    <i18n:plural>Фуникулёры</i18n:plural>\n</i18n:dynamic>',"transport-historic_tram":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Трамвай</i18n:masculine>\n    <i18n:plural>Трамваи</i18n:plural>\n</i18n:dynamic>',"transport-metrobus":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Метробус</i18n:masculine>\n    <i18n:plural>Метробусы</i18n:plural>\n</i18n:dynamic>',"transport-minibus":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Маршрутка</i18n:masculine>\n    <i18n:plural>Маршрутки</i18n:plural>\n</i18n:dynamic>',"transport-number":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>№</i18n:masculine>\n    <i18n:plural>№№</i18n:plural>\n</i18n:dynamic>&#160;',"transport-railway":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Электричка</i18n:masculine>\n    <i18n:plural>Электрички</i18n:plural>\n</i18n:dynamic>',"transport-rapid_tram":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Скоростной трамвай</i18n:masculine>\n    <i18n:plural>Скоростные трамваи</i18n:plural>\n</i18n:dynamic>',"transport-suburban":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender"> <i18n:gender><i18n:param>gender</i18n:param></i18n:gender> <i18n:masculine>Электричка</i18n:masculine> <i18n:plural>Электрички</i18n:plural> </i18n:dynamic>',"transport-train":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Электричка</i18n:masculine>\n    <i18n:plural>Электрички</i18n:plural>\n</i18n:dynamic>',"transport-tramway":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Трамвай</i18n:masculine>\n    <i18n:plural>Трамваи</i18n:plural>\n</i18n:dynamic>',"transport-trolleybus":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Троллейбус</i18n:masculine>\n    <i18n:plural>Троллейбусы</i18n:plural>\n</i18n:dynamic>',"transport-underground":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Метро</i18n:masculine>\n    <i18n:plural>Метро</i18n:plural>\n</i18n:dynamic>',"transport-water":'<i18n:dynamic project="tanker" keyset="dynamic" key="gender">\n    <i18n:gender><i18n:param>gender</i18n:param></i18n:gender>\n    <i18n:masculine>Водный транспорт</i18n:masculine>\n    <i18n:plural>Водный транспорт</i18n:plural>\n</i18n:dynamic>',"travel-distance":'<i18n:dynamic>\n    <i18n:xsl>\n        <xsl:param name="text"/>\n        <xsl:param name="value"/>\n        <xsl:choose>\n            <xsl:when test="$value = 0">Переcадка</xsl:when>\n            <xsl:when test="$value &lt; 100">Менее 100 м</xsl:when>\n            <xsl:otherwise><xsl:value-of select="$text"/></xsl:otherwise>\n        </xsl:choose>\n    </i18n:xsl>\n</i18n:dynamic>',"travel-time":'около <i18n:dynamic project="maps_api" keyset="masstransit" key="human-duration">\n    <i18n:duration><i18n:param>value</i18n:param></i18n:duration>\n</i18n:dynamic><i18n:dynamic project="tanker" keyset="dynamic" key="toggle">\n    <i18n:condition><i18n:param>isMoving</i18n:param></i18n:condition>\n    <i18n:true> в пути.</i18n:true>\n    <i18n:false/>\n</i18n:dynamic>',"travel-to-berth":'До причала <i18n:dynamic project="maps_api" keyset="masstransit" key="quote">\n    <i18n:text><i18n:param>name</i18n:param></i18n:text>\n</i18n:dynamic>',"travel-to-station":'До станции <i18n:dynamic project="maps_api" keyset="masstransit" key="quote">\n    <i18n:text><i18n:param>name</i18n:param></i18n:text>\n</i18n:dynamic>',"travel-to-stop":'До остановки <i18n:dynamic project="maps_api" keyset="masstransit" key="quote">\n    <i18n:text><i18n:param>name</i18n:param></i18n:text>\n</i18n:dynamic>',"travel-transfer":'Переход на станцию <i18n:dynamic project="maps_api" keyset="masstransit" key="quote">\n    <i18n:text><i18n:param>station</i18n:param></i18n:text>\n</i18n:dynamic> (<i18n:param>line</i18n:param>)'},panorama:{close:"Закрыть",enterFullscreen:"В полноэкранный режим",error:"Что-то сломалось.<br>Но мы уже знаем об этом,<br>зайдите чуть позже.",leaveFullscreen:"В оконный режим",scale:"Масштаб",zoomIn:"Увеличить",zoomOut:"Уменьшить"},ppo:{Card:{addReview:"Оставить отзыв",addReviewLink:"{mapsHost}org/{organizationId}/?add-review&source=api-maps&utm_source=api-maps",advertLabel:"реклама",directUrl:"direct.yandex.ru",feedbackAdd:"Добавить организацию",feedbackCorrect:"Исправить неточность",feedbackEdit:"Редактировать",interaction:"Маршрут сюда",mapsUrl:"maps.yandex.ru",ratingRatings:["оценка","оценки","оценок","оценок"],ratingReviews:["отзыв","отзыва","отзывов","отзывов"],reviewsUrl:"maps.yandex.ru/org/",spravAddUrl:"{mapsHost}feedback/org/add/",spravEditUrl:"{mapsHost}feedback/org/{organization_id}/edit/?utm_source={utm_source}&utm_medium={utm_medium}",timeClosed:"Закрыто",timeClosedUntil:"Закрыто до %s",timeOpen:"Открыто",timeOpen24:"Круглосуточно",timeOpenUntil:"Открыто до %s"}},route:{back:"разворот","board ferry":"паромная переправа","enter roundabout":"круговое движение",exit:"съезд","exit back":"разворот, съезд","exit hard left":"съезд налево","exit hard right":"съезд направо","exit left":"съезд налево","exit none":"съезд","exit right":"съезд направо","exit slight left":"левее на съезд","exit slight right":"правее на съезд","hard left":"резкий поворот налево","hard right":"резкий поворот направо","leave ferry":"Конец паромной переправы","leave roundabout":"съезд с кругового движения","leave roundabout 1":"1-й съезд","leave roundabout 2":"2-й съезд","leave roundabout 3":"3-й съезд","leave roundabout 4":"4-й съезд","leave roundabout 5":"5-й съезд",
"leave roundabout 6":"6-й съезд","leave roundabout 7":"7-й съезд","leave roundabout 8":"8-й съезд","leave roundabout 9":"9-й съезд",left:"налево",merge:"въезд",none:"прямо",right:"направо",roundabout:"круговое движение","slight left":"левее","slight right":"правее",straight:"прямо"},searchSuggest:{"01-restaurant":"Где поесть","02-bar":"Бары","03-atm":"Банкоматы","04-cinema":"Кино","05-barbershop":"Красота","06-pharmacy":"Аптеки","07-shop":"Продукты","08-shopping-mall":"Торговые центры","09-fitness":"Фитнес","10-auto-repair":"Автосервис","11-gasoline":"АЗС","12-hotel":"Гостиницы"},"telegram-bot":{"cant-listen":"Я не слышу :( Пожалуйста, напишите мне!","cant-look":"Я не вижу :( Пожалуйста, напишите мне!","give-me-your-location":"Отправьте мне свою геопозицию, и я покажу.","have-not-location":"Я бы поискал, но у меня нет ваших координат. Отправьте их мне и повторите запрос.",hello:"Привет!","i-am-here":"Я в Яндексе! Москва, ул. Льва Толстого, 16а.","language-enter-lang":"Выберите язык, на котором мы будем общаться.","language-saved":"Язык успешно сохранен!","not-found":"Ничего не нашел.","route-destination-not-found":"Я не смог определить, куда хотите добраться.","route-have-not-destination":"Укажите, куда строить маршрут. Например, /route Льва Толстого, 16а.","route-have-not-location":"Пожалуйста, отправьте мне свою геопозицию для построения маршрута.","search-without-parameters":"Напишите мне, что бы вы хотели найти, например, /search кафе.\\nЧтобы найти места рядом, отправьте мне своё местоположение и спросите что-нибудь.","start-message":" Я умею находить интересные места на карте и сообщать о пробках.\\nОтправьте сообщение с /traffic Город, чтобы узнать пробки в вашем городе.\\nИли напишите мне что-нибудь чтобы найти это на карте. В групповых чатах для поиска можно использовать команду /search.\\nСообщите мне своё местоположение, чтобы получать самую точную информацию о пробках и ближайших местах.","thank-you":"Да, неплохо получилось :) Обращайтесь!","traffic-citys":'["Москва", "Санкт-Петербург", "Екатеринбург", "Новосибирск", "Краснодар"]',"traffic-enter-city":"Уточните город, для которого показать пробки. Например, /traffic Екатеринбург.","traffic-fail":"Что-то пошло не так. Пожалуйста, повторите запрос.","traffic-in":"Пробки в городе {{city}}","traffic-level":"{city} {time}. \\n{level}. {hint}.","traffic-not-found":"В вашем городе пробки не найдены.","user-already-deleted":"Я и так ничего о вас не знаю.","user-deleted":"Готово, все забыл.","where-are-you":"А вы? Отправьте мне своё местоположение.","yandex-maps":"Открыть в Яндекс.Картах","yandex-place":"Я здесь живу и работаю. Заходите в гости как-нибудь!"}})})}],["52",function(e){e.modules.define("localization.lib",[],function(e){function t(e,t){this.value=e,this.name=t}function n(e){for(var t=0;t<e.length;++t)if("+"==e.charAt(t)||"-"==e.charAt(t)||"*"==e.charAt(t)||"/"==e.charAt(t))return t;return e.length}function i(e,t){if(0===e.length)return t;if(e.charAt(0)>="0"&&e.charAt(0)<"9")return e;var o=n(e.substring(1,e.length)),s=e.substring(1,o+1);return"+"==e.charAt(0)?i(o==e.length?"":e.substring(o+1,e.length),t+parseFloat(s)):"-"==e.charAt(0)?i(o==e.length?"":e.substring(o+1,e.length),t-parseFloat(s)):"*"==e.charAt(0)?i(o==e.length?"":e.substring(o+1,e.length),t*parseFloat(s)):"/"==e.charAt(0)?i(o==e.length?"":e.substring(o+1,e.length),t/parseFloat(s)):t}function o(e,n,o){e.length>8&&"-x-local"==e.substr(e.length-8,e.length)&&(e=e.substr(e,e.length-8));var s=e.search("-"),r=e.search("_");if(-1!=s?e=e.substr(s+1,e.length):-1!=r&&(e=e.substr(r+1,e.length)),"duration"==n){var a=[],c=0;return 0!==Math.floor(o/31536e3)&&(a[c]=[],a[c].value=Math.floor(o/31536e3),a[c].name="years",++c,o%=31536e3),0!==Math.floor(o/86400)&&(a[c]=[],a[c].value=Math.floor(o/86400),a[c].name="days",++c,o%=86400),0!==Math.floor(o/3600)&&(a[c]=[],a[c].value=Math.floor(o/3600),a[c].name="hours",++c,o%=3600),0!==Math.floor(o/60)&&(a[c]=[],a[c].value=Math.floor(o/60),a[c].name="minutes",++c,o%=60),a}for(var u="System"+l.ISO[e].system,h=l.Systems[u][n].num,d=new Array(h),c=1;c<=h;++c){var g=l.Systems[u][n]["unit"+c].name,p=l.Systems[u][n]["unit"+c].factor;d[c-1]=new t(i(p,o),g)}for(var c=h-1;c>=0;--c)if(Math.abs(d[c].value)<1)return c!=h-1&&d[c+1].value<1e3?d[c+1]:d[c];return d[0]}function s(e,t,n,i){var o=e.split("\t",11),r=[];r.w=o[0],r.m=o[1],r.d=o[2],r.H=o[3],r.I=o[4],r.M=o[5],r.p=o[6],r.S=o[7],r.T=o[8],r.y=o[9],r.Y=o[10];for(var a="",c=0;c<n.length;++c)"%"==n.charAt(c)?(++c,"a"==n.charAt(c)?a+=l.ISODateTime[t].dayAbbr[r.w]:"A"==n.charAt(c)?a+=l.ISODateTime[t].dayName[r.w]:"b"==n.charAt(c)?a+=l.ISODateTime[t].monthAbbr[r.m-1]:"B"==n.charAt(c)?a+=l.ISODateTime[t].monthGenitive[r.m-1]:"d"==n.charAt(c)?a+=r.d:"e"==n.charAt(c)?a+=r.d:"H"==n.charAt(c)?a+=r.H:"I"==n.charAt(c)?a+=r.I:"m"==n.charAt(c)?a+=r.m:"M"==n.charAt(c)?a+=r.M:"p"==n.charAt(c)?a+=r.p:"S"==n.charAt(c)?a+=r.S:"T"==n.charAt(c)?a+=r.T:"X"==n.charAt(c)?i||(a+=s(e,t,l.ISODateTime[t].timeFormat,1)):"y"==n.charAt(c)?a+=r.y:"Y"==n.charAt(c)?a+=r.Y:"Z"==n.charAt(c)||(a+="%"+n.charAt(c))):a+=n.charAt(c);return a}function r(e,t,n){t.length>8&&"-x-local"==t.substr(t.length-8,t.length)&&(t=t.substr(t,t.length-8));var i=t.search("-");-1!=i&&(t=t.replace(t.charAt(i),"_")),"full"==n?n=l.ISODateTime[t].fullDateTimeFormat:"date"==n?n=l.ISODateTime[t].dateFormat:"time"==n?n=l.ISODateTime[t].timeFormat:"datetime"==n&&(n=l.ISODateTime[t].fullDateFormat);var o=a(1e3*e,"en-US","%w\t%m\t%d\t%H\t%I\t%M\t%p\t%S\t%T\t%y\t%Y"),r=s(o,t,n,0);return r}var a=function(){var e={};return e.util={},e.util.xPad=function(e,t,n){for("undefined"==typeof n&&(n=10);parseInt(e,10)<n&&n>1;n/=10)e=t.toString()+e;return e.toString()},e.locales={},e.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"},e.locales["en-US"]=e.locales.en,e.locales["en-US"].c="%a %d %b %Y %r %Z",e.locales["en-US"].x="%D",e.locales["en-US"].X="%r",e.locales["en-GB"]=e.locales.en,e.locales["en-AU"]=e.locales["en-GB"],e.formats={a:function(t){return e.locales[t.locale].a[t.getUTCDay()]},A:function(t){return e.locales[t.locale].A[t.getUTCDay()]},b:function(t){return e.locales[t.locale].b[t.getUTCMonth()]},B:function(t){return e.locales[t.locale].B[t.getUTCMonth()]},c:"toUTCString",C:function(t){return e.util.xPad(parseInt(t.getUTCFullYear()/100,10),0)},d:["getUTCDate","0"],e:["getUTCDate"," "],g:function(t){return e.util.xPad(parseInt(e.util.G(t)/100,10),0)},G:function(t){var n=t.getUTCFullYear(),i=parseInt(e.formats.V(t),10),o=parseInt(e.formats.W(t),10);return o>i?n++:0===o&&i>=52&&n--,n},H:["getUTCHours","0"],I:function(t){var n=t.getUTCHours()%12;return e.util.xPad(0===n?12:n,0)},j:function(t){var n=t-new Date(""+t.getUTCFullYear()+"/1/1 GMT");n+=6e4*t.getTimezoneOffset();var i=parseInt(n/6e4/60/24,10)+1;return e.util.xPad(i,0,100)},m:function(t){return e.util.xPad(t.getUTCMonth()+1,0)},M:["getUTCMinutes","0"],p:function(t){return e.locales[t.locale].p[t.getUTCHours()>=12?1:0]},P:function(t){return e.locales[t.locale].P[t.getUTCHours()>=12?1:0]},S:["getUTCSeconds","0"],u:function(e){var t=e.getUTCDay();return 0===t?7:t},U:function(t){var n=parseInt(e.formats.j(t),10),i=6-t.getUTCDay(),o=parseInt((n+i)/7,10);return e.util.xPad(o,0)},V:function(t){var n=parseInt(e.formats.W(t),10),i=new Date(""+t.getUTCFullYear()+"/1/1").getUTCDay(),o=n+(i>4||i<=1?0:1);return 53==o&&new Date(""+t.getUTCFullYear()+"/12/31").getUTCDay()<4?o=1:0===o&&(o=e.formats.V(new Date(""+(t.getUTCFullYear()-1)+"/12/31"))),e.util.xPad(o,0)},w:"getUTCDay",W:function(t){var n=parseInt(e.formats.j(t),10),i=7-e.formats.u(t),o=parseInt((n+i)/7,10);return e.util.xPad(o,0,10)},y:function(t){return e.util.xPad(t.getUTCFullYear()%100,0)},Y:"getUTCFullYear",z:function(t){var n=t.getTimezoneOffset(),i=e.util.xPad(parseInt(Math.abs(n/60),10),0),o=e.util.xPad(n%60,0);return(n>0?"-":"+")+i+o},Z:function(e){return e.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(e){return"%"}},e.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},e.aggregates.z=e.formats.z(new Date),e.aggregates.Z=e.formats.Z(new Date),e.unsupported={},function(t,n,i){n=n||"",i=i||"";var o=new Date(t);o.locale=n,n in e.locales||(n=n.replace(/-[a-zA-Z]+$/,"")in e.locales?n.replace(/-[a-zA-Z]+$/,""):"en-GB");for(;i.match(/%[cDhnrRtTxXzZ]/);)i=i.replace(/%([cDhnrRtTxXzZ])/g,function(t,n){var i=e.aggregates[n];return"locale"==i?e.locales[o.locale][n]:i});var s=i.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(t,n){var i=e.formats[n];return"string"==typeof i?o[i]():"function"==typeof i?i.call(o,o):"object"==typeof i&&"string"==typeof i[0]?e.util.xPad(o[i[0]](),i[1]):n});return o=null,s}}(),l={ISO:{AD:{system:2},AE:{system:2},AF:{system:2},AG:{system:2},AI:{system:2},AL:{system:2},AM:{system:2},AO:{system:2},AR:{system:2},AT:{system:2},AU:{system:2},AW:{system:2},AZ:{system:2},BA:{system:2},BB:{system:2},BD:{system:2},BE:{system:2},BF:{system:2},BG:{system:2},BH:{system:2},BI:{system:2},BJ:{system:2},BM:{system:2},BN:{system:2},BO:{system:2},BR:{system:2},BS:{system:2},BT:{system:2},BW:{system:2},BY:{system:2},BZ:{system:2},CA:{system:2},CC:{system:2},CD:{system:2},CF:{system:2},CG:{system:2},CH:{system:2},CI:{system:2},CK:{system:2},CL:{system:2},CM:{system:2},CN:{system:2},CO:{system:2},CR:{system:2},CU:{system:2},CV:{system:2},CY:{system:2},CZ:{system:2},DE:{system:2},DJ:{system:2},DK:{system:2},DM:{system:2},DO:{system:2},DZ:{system:2},EC:{system:2},EE:{system:2},EG:{system:2},EH:{system:2},ER:{system:2},ES:{system:2},ET:{system:2},FI:{system:2},FJ:{system:2},FK:{system:2},FM:{system:2},FR:{system:2},GA:{system:2},GB:{system:1},GD:{system:2},GE:{system:2},GF:{system:2},GH:{system:2},GI:{system:2},GL:{system:2},GM:{system:2},GN:{system:2},GP:{system:2},GQ:{system:2},GR:{system:2},GT:{system:2},GU:{system:2},GW:{system:2},GY:{system:2},HK:{system:2},HN:{system:2},HR:{system:2},HT:{system:2},HU:{system:2},ID:{system:2},IE:{system:2},IL:{system:2},IN:{system:2},IQ:{system:2},IR:{system:2},IS:{system:2},IT:{system:2},JM:{system:2},JO:{system:2},JP:{system:2},KE:{system:2},KG:{system:2},KH:{system:2},KI:{system:2},KM:{system:2},KN:{system:2},KP:{system:2},KR:{system:2},KW:{system:2},KY:{system:2},KZ:{system:2},LA:{system:2},LB:{system:2},LC:{system:2},LI:{system:2},LK:{system:2},LR:{system:1},LS:{system:2},LT:{system:2},LU:{system:2},LV:{system:2},LY:{system:2},MA:{system:2},MC:{system:2},MD:{system:2},ME:{system:2},MG:{system:2},MH:{system:2},MK:{system:2},ML:{system:2},MM:{system:1},MN:{system:2},MQ:{system:2},MR:{system:2},MS:{system:2},MT:{system:2},MU:{system:2},MV:{system:2},MW:{system:2},MX:{system:2},MY:{system:2},MZ:{system:2},NA:{system:2},NC:{system:2},NE:{system:2},NF:{system:2},NG:{system:2},NI:{system:2},NL:{system:2},NO:{system:2},NP:{system:2},NR:{system:2},NU:{system:2},NZ:{system:2},OM:{system:2},PA:{system:2},PE:{system:2},PF:{system:2},PG:{system:2},PH:{system:2},PK:{system:2},PL:{system:2},PR:{system:2},PS:{system:2},PT:{system:2},PW:{system:2},PY:{system:2},QA:{system:2},RE:{system:2},RO:{system:2},RS:{system:2},RU:{system:2},RW:{system:2},SA:{system:2},SB:{system:2},SC:{system:2},SD:{system:2},SE:{system:2},SG:{system:2},SI:{system:2},SK:{system:2},SL:{system:2},SM:{system:2},SN:{system:2},SO:{system:2},SR:{system:2},ST:{system:2},SV:{system:2},SY:{system:2},SZ:{system:2},TC:{system:2},TD:{system:2},TG:{system:2},TH:{system:2},TJ:{system:2},TL:{system:2},TM:{system:2},TN:{system:2},TO:{system:2},TR:{system:2},TT:{system:2},TV:{system:2},TW:{system:2},TZ:{system:2},UA:{system:2},UG:{system:2},US:{system:1},UY:{system:2},UZ:{system:2},VA:{system:2},VC:{system:2},VE:{system:2},VG:{system:2},VI:{system:2},VN:{system:2},VU:{system:2},WS:{system:2},YE:{system:2},YT:{system:2},ZA:{system:2},ZM:{system:2}},Systems:{System1:{distance:{unit1:{name:"miles",factor:"*0.00062"},unit2:{name:"feet",factor:"*3.281"},unit3:{name:"inches",factor:"*39.37"},num:3},temperature:{unit1:{name:"fahrenheits",factor:"*1.8+32"},num:1},velocity:{unit1:{name:"miles per hour",factor:"*2.237"},num:1}},System2:{distance:{unit1:{name:"kilometers",factor:"*0.001"},unit2:{name:"meters",factor:"*1"},unit3:{name:"centimeters",factor:"*100"},num:3},temperature:{unit1:{name:"celsiuses",factor:"*1"},num:1},velocity:{unit1:{name:"kilometers per hour",factor:"*3.6"},num:1}}},ISODateTime:{en_NZ:{monthAbbr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},monthGenitive:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dayAbbr:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},dayName:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeFormat:"%H:%M:%S",dateFormat:"%d/%m/%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"am",pmFormat:"pm",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},tr_TR:{monthAbbr:{0:"Oca",1:"Şub",2:"Mar",3:"Nis",4:"May",5:"Haz",6:"Tem",7:"Ağu",8:"Eyl",9:"Eki",10:"Kas",11:"Ara"},monthGenitive:{0:"Ocak",1:"Şubat",2:"Mart",3:"Nisan",4:"Mayıs",5:"Haziran",6:"Temmuz",7:"Ağustos",8:"Eylül",9:"Ekim",10:"Kasım",11:"Aralık"},dayAbbr:{0:"Paz",1:"Pts",2:"Sal",3:"Çar",4:"Per",5:"Cum",6:"Cts"},dayName:{0:"Pazar",1:"Pazartesi",2:"Salı",3:"Çarşamba",4:"Perşembe",5:"Cuma",6:"Cumartesi"},timeFormat:"%H:%M:%S",dateFormat:"%d/%m/%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"AM",pmFormat:"PM",fullDateTimeFormat:"%e %b %Y %a %Z %X",monthNominative:{0:"Ocak",1:"Subat",2:"Mart",3:"Nisan",4:"Mayis",5:"Haziran",6:"Temmuz",7:"Agustos",8:"Eylul",9:"Ekim",10:"Kasim",11:"Aralik"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},uk_UA:{monthAbbr:{0:"січ",1:"лют",2:"бер",3:"кві",4:"тра",5:"чер",6:"лип",7:"сер",8:"вер",9:"жов",10:"лис",11:"гру"},monthGenitive:{0:"січня",1:"лютого",2:"березня",3:"квітня",4:"травня",5:"червня",6:"липня",7:"серпня",8:"вересня",9:"жовтня",10:"листопада",11:"грудня"},dayAbbr:{0:"нд",1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб"},dayName:{0:"неділя",1:"понеділок",2:"вівторок",3:"середа",4:"четвер",5:"п'ятниця",6:"субота"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"",pmFormat:"",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"січень",1:"лютий",2:"березень",3:"квітень",4:"травень",5:"червень",6:"липень",7:"серпень",8:"вересень",9:"жовтень",10:"листопад",11:"грудень"},dmFormat:"dm",twelveTimeFormat:""},ru_UA:{monthAbbr:{0:"янв",1:"фев",2:"мар",3:"апр",4:"май",5:"июн",6:"июл",7:"авг",8:"сен",9:"окт",10:"ноя",11:"дек"},monthGenitive:{0:"января",1:"февраля",2:"марта",3:"апреля",4:"мая",5:"июня",6:"июля",7:"августа",8:"сентября",9:"октября",10:"ноября",11:"декабря"},dayAbbr:{0:"вс",1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб"},dayName:{0:"воскресенье",1:"понедельник",2:"вторник",3:"среда",4:"четверг",5:"пятница",6:"суббота"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%Y",fullDateFormat:"%A, %e %B %Y г. %X",amFormat:"",pmFormat:"",fullDateTimeFormat:"%A, %e %B %Y г. %X (%Z)",monthNominative:{0:"январь",1:"февраль",2:"март",3:"апрель",4:"май",5:"июнь",6:"июль",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь",11:"декабрь"},dmFormat:"dm",twelveTimeFormat:""},kk_KZ:{monthAbbr:{0:"қаң",1:"ақп",2:"нау",3:"сәу",4:"мам",5:"мау",6:"шіл",7:"там",8:"қыр",9:"қаз",10:"қар",11:"жел"},monthGenitive:{0:"қаңтар",1:"ақпан",2:"наурыз",3:"сәуір",4:"мамыр",5:"маусым",6:"шілде",7:"тамыз",8:"қыркүйек",9:"қазан",10:"қараша",11:"желтоқсан"},dayAbbr:{0:"жк",1:"дс",2:"сс",3:"ср",4:"бс",5:"жм",6:"сн"},dayName:{0:"жексенбі",1:"дүйсенбі",2:"сейсенбі",3:"сәрсенбі",4:"бейсенбі",5:"жұма",6:"сенбі"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%Y",fullDateFormat:"%A, %e %B %Y ж. %X",amFormat:"",pmFormat:"",fullDateTimeFormat:"%A, %e %B %Y ж. %X (%Z)",monthNominative:{0:"қантар",1:"ақпан",2:"наурыз",3:"сәуір",4:"мамыр",5:"маусым",6:"шілде",7:"тамыз",8:"қыркүйек",9:"қазан",10:"қараша",11:"желтоқсан"},dmFormat:"dm",twelveTimeFormat:""},uk_RU:{monthAbbr:{0:"січ",1:"лют",2:"бер",3:"кві",4:"тра",5:"чер",6:"лип",7:"сер",8:"вер",9:"жов",10:"лис",11:"гру"},monthGenitive:{0:"січня",1:"лютого",2:"березня",3:"квітня",4:"травня",5:"червня",6:"липня",7:"серпня",8:"вересня",9:"жовтня",10:"листопада",11:"грудня"},dayAbbr:{0:"нд",1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб"},dayName:{0:"неділя",1:"понеділок",2:"вівторок",3:"середа",4:"четвер",5:"п'ятниця",6:"субота"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"",pmFormat:"",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"січень",1:"лютий",2:"березень",3:"квітень",4:"травень",5:"червень",6:"липень",7:"серпень",8:"вересень",9:"жовтень",10:"листопад",11:"грудень"},dmFormat:"dm",twelveTimeFormat:""},en_US:{monthAbbr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},monthGenitive:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dayAbbr:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},dayName:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeFormat:"%H:%M:%S",dateFormat:"%m/%d/%Y",fullDateFormat:"%a %b %e %X %Y",amFormat:"AM",pmFormat:"PM",fullDateTimeFormat:"%a %b %e %X %Z %Y",monthNominative:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dmFormat:"md",twelveTimeFormat:"%I:%M:%S %p"},be_BY:{monthAbbr:{0:"сту",1:"лют",2:"сак",3:"кра",4:"тра",5:"чэр",6:"ліп",7:"жні",8:"вер",9:"кас",10:"ліс",11:"сне"},monthGenitive:{0:"студзеня",1:"лютага",2:"сакавіка",3:"красавіка",4:"траўня",5:"чэрвеня",6:"ліпеня",7:"жніўня",8:"верасня",9:"кастрычніка",10:"лістапада",11:"снежня"},dayAbbr:{0:"нд ",1:"пн ",2:"аў ",3:"ср ",4:"чц ",5:"пт ",6:"сб "},dayName:{0:"нядзеля",1:"панядзелак",2:"аўторак",3:"серада",4:"чацвер",5:"пятніца",6:"субота"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%y",fullDateFormat:"%a %e %b %X %Y",amFormat:"am",pmFormat:"pm",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"студзень",1:"люты",2:"сакавік",3:"красавік",4:"травень",5:"чэрвень",6:"ліпень",7:"жнівень",8:"верасень",9:"кастрычнік",10:"лістапад",11:"снежань"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},tt_RU:{monthAbbr:{0:"гыйнв",1:"фев",2:"мар",3:"апр",4:"май",5:"июн",6:"июл",7:"авг",8:"сен",9:"окт",10:"ноя",11:"дек"},monthGenitive:{0:"гыйнвар",1:"февраль",2:"март",3:"апрель",4:"май",5:"июнь",6:"июль",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь",11:"декабрь"},dayAbbr:{0:"яб",1:"дб",2:"сб",3:"чб",4:"пб",5:"җ",6:"сб"},dayName:{0:"якшәмбе",1:"дүшәмбе",2:"сишәмбе",3:"чәршәмбе",4:"пәнҗешәмбе",5:"җомга",6:"шимбә"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%Y",fullDateFormat:"%A, %e %B %Y г. %X",amFormat:"",pmFormat:"",fullDateTimeFormat:"%A, %e %B %Y г. %X (%Z)",monthNominative:{0:"гыйнвар",1:"февраль ",2:"март",3:"апрель",4:"май ",5:"июнь ",6:"июль ",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь ",11:"декабрь"},dmFormat:"dm",twelveTimeFormat:""},ru_RU:{monthAbbr:{0:"янв",1:"фев",2:"мар",3:"апр",4:"май",5:"июн",6:"июл",7:"авг",8:"сен",9:"окт",10:"ноя",11:"дек"},monthGenitive:{0:"января",1:"февраля",2:"марта",3:"апреля",4:"мая",5:"июня",6:"июля",7:"августа",8:"сентября",9:"октября",10:"ноября",11:"декабря"},dayAbbr:{0:"вс",1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб"},dayName:{0:"воскресенье",1:"понедельник",2:"вторник",3:"среда",4:"четверг",5:"пятница",6:"суббота"},timeFormat:"%H:%M:%S",dateFormat:"%d.%m.%Y",fullDateFormat:"%A, %e %B %Y г. %X",amFormat:"",pmFormat:"",fullDateTimeFormat:"%A, %e %B %Y г. %X (%Z)",monthNominative:{0:"январь",1:"февраль",2:"март",3:"апрель",4:"май",5:"июнь",6:"июль",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь",11:"декабрь"},dmFormat:"dm",twelveTimeFormat:""},en_CA:{monthAbbr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},monthGenitive:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dayAbbr:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},dayName:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeFormat:"%H:%M:%S",dateFormat:"%d/%m/%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"am",pmFormat:"pm",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},en_GB:{monthAbbr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},monthGenitive:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dayAbbr:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},dayName:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeFormat:"%H:%M:%S",dateFormat:"%d/%m/%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"am",pmFormat:"pm",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},en_IE:{monthAbbr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},monthGenitive:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dayAbbr:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},dayName:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeFormat:"%H:%M:%S",dateFormat:"%d/%m/%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"am",pmFormat:"pm",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},en_AU:{monthAbbr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},monthGenitive:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dayAbbr:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},dayName:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeFormat:"%H:%M:%S",dateFormat:"%d/%m/%Y",fullDateFormat:"%a %e %b %X %Y",amFormat:"am",pmFormat:"pm",fullDateTimeFormat:"%a %e %b %Y %X %Z",monthNominative:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"},cs_CZ:{monthAbbr:{0:"led",1:"úno",2:"bře",3:"dub",4:"kvě",5:"črv",6:"čvc",7:"srp",8:"zář",9:"říj",10:"lis",11:"pro"},monthGenitive:{0:"ledna",1:"února",2:"března",3:"dubna",4:"května",5:"června",6:"července",7:"srpna",8:"září",9:"října",10:"listopadu",11:"prosince"},dayAbbr:{0:"ne",1:"po",2:"út",3:"st",4:"čt",5:"pá",6:"so"},dayName:{0:"neděle",1:"pondělí",2:"úterý",3:"středa",4:"čtvrtek",5:"pátek",6:"sobota"},timeFormat:"%H:%M:%S",dateFormat:"%Y/%m/%d",fullDateFormat:"%a %e %b %X %Y",amFormat:"dp",pmFormat:"od",fullDateTimeFormat:"%a %e. %B %Y %X %Z",monthNominative:{0:"leden",1:"únor",2:"březen",3:"duben",4:"květen",5:"červen",6:"červenec",7:"srpen",8:"září",9:"říjen",10:"listopad",11:"prosinec"},dmFormat:"dm",twelveTimeFormat:"%I:%M:%S %p"}}};e({UnitsTransform:o,FormatDatetime:r})})}],[".W",function(e){e.modules.define("localization.units.current",function(e){return["localization.units."+e.env.lang.substr(0,2)]},function(e,t){e(t||{})})}],[".5",function(e){e.modules.define("localization.units.ru",[],function(e){e({distance:{centimeters:"%d&#160;см","centimeters full":["%d&#160;сантиметр","%d&#160;сантиметра","%d&#160;сантиметров","%d&#160;сантиметров"],feet:["%d&#160;фут","%d&#160;фута","%d&#160;футов","%d&#160;футов"],"feet full":["%d&#160;фут","%d&#160;фута","%d&#160;футов","%d&#160;футов"],inches:["%d&#160;дюйм","%d&#160;дюйма","%d&#160;дюймов","%d&#160;дюймов"],"inches full":["%d&#160;дюйм","%d&#160;дюйма","%d&#160;дюймов","%d&#160;дюймов"],kilometers:"%d&#160;км","kilometers full":["%d&#160;километр","%d&#160;километра","%d&#160;километров","%d&#160;километров"],meters:"%d&#160;м","meters full":["%d&#160;метр","%d&#160;метра","%d&#160;метров","%d&#160;метров"],miles:["%d&#160;миля","%d&#160;мили","%d&#160;миль","%d&#160;миль"],"miles full":["%d&#160;миля","%d&#160;мили","%d&#160;миль","%d&#160;миль"]},duration:{days:"%d&#160;д","days full":["%d&#160;день","%d&#160;дня","%d&#160;дней","%d&#160;дней"],hours:"%d&#160;ч","hours full":["%d&#160;час","%d&#160;часа","%d&#160;часов","%d&#160;часов"],minutes:"%d&#160;мин","minutes full":["%d&#160;минута","%d&#160;минуты","%d&#160;минут","%d&#160;минут"],seconds:"%d&#160;сек","seconds full":["%d&#160;секунда","%d&#160;секунды","%d&#160;секунд","%d&#160;секунд"],years:["%d&#160;год","%d&#160;года","%d&#160;лет","%d&#160;лет"],"years full":["%d&#160;год","%d&#160;года","%d&#160;лет","%d&#160;лет"]},temperature:{celsiuses:"%d°C",fahrenheits:"%d°F"},velocity:{"kilometers per hour":"%d&#160;км/ч","kilometers per hour full":["%d&#160;километр в&#160;час","%d&#160;километра в&#160;час","%d&#160;километров в&#160;час","%d&#160;километров в&#160;час"],"miles per hour":["%d&#160;миля/ч","%d&#160;мили/ч","%d&#160;миль/ч","%d&#160;миль/ч"],"miles per hour full":["%d&#160;миля в&#160;час","%d&#160;мили в&#160;час","%d&#160;миль в&#160;час","%d&#160;миль в&#160;час"]}})})}],["1m",function(e){e.modules.define("Map",["util.defineClass","map.Container","map.Converter","map.Copyrights","map.ZoomRange","map.metaOptions","map.event.Manager","map.behavior.Manager","map.pane.Manager","map.action.Manager","map.layer.Manager","pane.EventsPane","data.Manager","domEvent.manager","constants.paneZIndex","MapEvent","event.Mapper","event.globalize","mapType.storage","map.action.Single","map.action.Sequence","map.action.AreaRestrictionManager","map.margin.Manager","option.Manager","map.optionMapper","hotspot.Manager","LayerCollection","layer.storage","constants.zIndex","util.bounds","util.requireCenterAndZoom","util.coordinates.getClosestPixelPosition","util.animation.getFlyingTicks","util.math.areEqual","util.dom.element","vow","getZoomRange","map.GeoObjects","util.id","control.Manager","yandex.state.component.Map","yandex.state.component.MapGeoObjects","yandex.counter","yandex.counterStorage","util.margin","system.browser"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j,b,I,L,C,x,w,N,S,D,T,E,P,z,A,O,k,G,Z,R,B,Y,F,U,W,H,X){function Q(t,n,_){if(e.env.debug){if(!t)throw new Error("Map.constructor: the map container is specified incorrectly");if(!n)throw new Error("Map.constructor: не переданы параметры")}this.options=new C(_,a,"map",x),this.options.events.add("change",this._onOptionsChange,this),this.events=new l({controllers:[V],context:this}),this.state=new p({margin:[0,0,0,0]}),this.container=new i(t,this),this.container.events.setParent(new M(this.events,this.createEventMappingTable())),this.container.events.add("sizechange",this._onContainerSizeChange,this),this._containerSize=this.container.getSize(),this._containerEventListener=m.group(this.container.getElement()).add("mousedown",this._onContainerMouseDown,this,!0),this.converter=new o(this),this.margin=new L(this),this.margin.events.add("change",this._onMarginChange,this);var v,y,j,b=this.options.get("avoidFractionalZoom",!1),N=this.options.get("minZoom"),S=this.options.get("maxZoom");n.bounds&&(j=T.getCenterAndZoom(n.bounds,this.container.getSize(),this.options.get("projection"),{preciseZoom:b,inscribe:!0})),j?(v=j.zoom,y=j.center):(v=n.zoom,y=n.center),this._zoom=Math.max(Math.min(Number(v),S),N),b&&(this._zoom=Math.round(this._zoom)),this._type="undefined"!=typeof n.type?n.type:this.options.get("defaultMapType"),this._projection=this.options.get("projection"),this._globalPixelCenter=this._projection.toGlobalPixels(y,this._zoom),this._bounds=this.getBounds(),this.panes=new u(this);var D=new g(this,{zIndex:f.events});this.panes.append("events",D),this._hotspotManager=new w(D),this.cursors=D.cursors,this.action=new h(this),this.action.events.add("statechange",this._onActionChange,this).add(["begin","tick","tickcomplete","break","end","render"],this._onAction,this),this.layers=new d(this),this._type&&this._addType(),this.zoomRange=new r(this,["undefined"==typeof N?0:N,"undefined"==typeof S?23:S]),this.zoomRange.addProvider(this.layers),this.copyrights=new s(this),this.copyrights.addProvider(this.layers),this.behaviors=new c(this,n.behaviors||"default"),this._restrictMapArea=new I(this),this.zoomRange.addProvider(this._restrictMapArea,!0),this.action.setupRestrictArea(this._restrictMapArea),this.geoObjects=new Z(this),this.controls=new B(this,n&&n.controls||this.options.get("defaultControls"),{states:["small","medium","large"],margin:10}),this._yandexState=new Y(this),this._yandexStateGeoObjects=new F(this.geoObjects),U.countByKey("map",[X.platform,U.versionPrefix].join(".")),this.events.fire("create",{map:this,state:n})}var V;Q.TypeNotChangedError=function(){return new Error("Type has not changed")},V=v(Q),n(Q,{getCenter:function(e){return this._projection.fromGlobalPixels(this.getGlobalPixelCenter(e),this._zoom)},setCenter:function(e,t,n){n=n||{};var i="undefined"==typeof t?this._zoom:Number(t),o=this._projection.toGlobalPixels(e,i);return this.setGlobalPixelCenter(o,i,n)},panTo:function(e,t){t=t||{};for(var n=k.defer(),i=e[0].length?e:[e],o=[],s=this.container.getSize(),r=[2*s[0],2*s[1]],a="undefined"==typeof t.flying||t.flying,l="undefined"==typeof t.safe||t.safe,c=0,u=i.length;c<u;c++)o.push({center:i[c],delay:c>0?"undefined"==typeof t.delay?1e3:t.delay:0,zoom:this._zoom,duration:"undefined"==typeof t.duration?500:t.duration,checkZoomRange:t.checkZoomRange,useMapMargin:t.useMapMargin,timingFunction:t.timingFunction||"ease-in-out"});for(var h=this._globalPixelCenter,c=0,u=o.length;c<u;c++){var d=o[c],g=this._projection.toGlobalPixels(d.center,this._zoom);if(d.globalPixelCenter=P(h,g,this._zoom,this._projection),!a&&l){var p=[Math.abs(d.globalPixelCenter[0]-h[0]),Math.abs(d.globalPixelCenter[1]-h[1])];(p[0]>r[0]||p[1]>r[1])&&(d.duration=0)}h=d.globalPixelCenter}a&&(o=z(o,this));var m=new b(o,{callback:this._createActionEndCallback(n)});return m.begin(this.action),n.promise()},getBounds:function(e){var t=this.getGlobalPixelCenter(e),n=this.container.getSize();if(e&&e.useMapMargin){var i=this.margin.getMargin();n=[n[0]-(i[1]+i[3]),n[1]-(i[0]+i[2])]}var o=[[t[0]-.5*n[0],t[1]-.5*n[1]],[t[0]+.5*n[0],t[1]+.5*n[1]]];return T.fromGlobalPixelBounds(o,this.getZoom(),this._projection)},setBounds:function(e,t){if(t=t||{},t.zoomMargin&&(t.margin=t.zoomMargin,this.options.get("avoidFractionalZoom",!1)&&(t.preciseZoom=!1)),t.useMapMargin&&(t.margin=H.sum([t.margin||0,this.margin.getMargin()]),t.useMapMargin=!1),t.projection=this._projection,t.checkZoomRange){var n=k.defer();return E(this.zoomRange,e,this.container.getSize(),t).then(function(e){n.resolve(this.setCenter(e.center,e.zoom,t))},function(e){n.reject(e)},this),n.promise()}var i=T.getCenterAndZoom(e,this.container.getSize(),this._projection,t);return this.setCenter(i.center,i.zoom,t)},getGlobalPixelCenter:function(e){var t=this._globalPixelCenter.slice();
if(e&&e.useMapMargin){var n=this.margin.getMargin();t[0]+=(n[3]-n[1])/2,t[1]+=(n[0]-n[2])/2}return t},setGlobalPixelCenter:function(e,t,n){n=n||{};var i=k.defer();return this.action.execute(new j({globalPixelCenter:e.slice(),zoom:"undefined"!=typeof t?t:this._zoom,duration:n.duration||0,callback:this._createActionEndCallback(i),checkZoomRange:n.checkZoomRange,useMapMargin:n.useMapMargin,timingFunction:n.timingFunction})),i.promise()},getZoom:function(){return this._zoom},setZoom:function(e,t){e=Math.min(Math.max(e,this.options.get("minZoom",0)),this.options.get("maxZoom",23));var n=this.getGlobalPixelCenter(t),i=Math.pow(2,e-this.getZoom());return n=[n[0]*i,n[1]*i],this.setGlobalPixelCenter(n,e,t)},_onContainerSizeChange:function(e){var t=this._bounds,n=e.get("oldOffset"),i=e.get("oldSize");this._containerSize=this.container.getSize(),this.events.fire("sizechange",{map:this,oldSize:i,newSize:e.get("newSize")});var o=this._zoom,s=this.getCenter(),r=this._globalPixelCenter;if(e.get("preservePixelPosition")){this.action.stop(),r=this._globalPixelCenter;var a=[n[0]+i[0]/2,n[1]+i[1]/2],l=this.converter.globalToPage(this._globalPixelCenter),c=a[0]-l[0],u=a[1]-l[1];this.setGlobalPixelCenter([r[0]-c,r[1]-u])}else{this._bounds=this.getBounds();var h=this.getCenter(),d=this._globalPixelCenter;this.events.fire("boundschange",{map:this,oldZoom:o,newZoom:o,oldCenter:s,newCenter:h,oldGlobalPixelCenter:r,newGlobalPixelCenter:d,oldBounds:t,newBounds:this._bounds})}},getType:function(){return this._type},setType:function(e,t){var n=this._type;if(n==e)return k.reject(Q.TypeNotChangedError());var i=t&&t.checkZoomRange,o=k.defer();return i?G(e,this.getCenter(),this.layers).then(function(t){var n=this.getZoom();this._setMapType(e,t[0]>n?t[0]:t[1]<n?t[1]:n),o.resolve()},this):(this._setMapType(e),o.resolve()),o.promise()},_setMapType:function(e,t){"undefined"!=typeof t&&this.getZoom()!=t&&this.setZoom(t);var n=this._type;n&&this._removeType(),this._type=e,e&&this._addType(),this.events.fire("typechange",{map:this})},_addType:function(){for(var e="string"==typeof this._type?y.get(this._type):this._type,t=new N({zIndex:D.mapTypeLayer,tilesRoundingMethod:this.options.get("tilesRoundingMethod")}),n=e.getLayers(),i=0,o=n.length;i<o;i++){var s="string"==typeof n[i]?S.get(n[i]):n[i],r=new s;t.add(r)}this._layerCollection=t,this.layers.add(t)},_removeType:function(){this._layerCollection&&(this._layerCollection.removeAll(),this.layers.remove(this._layerCollection),this._layerCollection=null)},_onOptionsChange:function(){this.events.fire("optionschange")},_onAction:function(e){var t="action"+e.get("type");this.events.fire(t,{map:this,action:e.get("action"),tick:e.get("tick")})},_onActionChange:function(e){var t,n=this.getCenter(),i=this._bounds,o=this._zoom,s=this._containerSize,r=this.container.getSize(),a=this._globalPixelCenter,l=e.get("globalPixelCenter"),c=e.get("zoom"),u=Math.pow(2,c-this.options.get("maxZoom"));o==c&&A(s,r)&&A(a,l,u)||(this._globalPixelCenter=l,this._zoom=c,this._bounds=this.getBounds(),this._containerSize=r,t=this.getCenter(),this.events.fire("boundschange",{map:this,oldCenter:n,newCenter:t,oldGlobalPixelCenter:a,newGlobalPixelCenter:this._globalPixelCenter,oldZoom:o,newZoom:this._zoom,oldBounds:i,newBounds:this._bounds}))},_createActionEndCallback:function(e){return function(t){t?e.reject(t):e.resolve()}},createEventMappingTable:function(){return{_map:this,"*":function(e){var t=null;return e.isMapEventAllowed()&&(t=new _({type:e.get("type"),target:this._map,map:this._map},e)),t},sizechange:!1}},destroy:function(){this._containerEventListener.removeAll(),this._type&&this._removeType(),this._restrictMapArea.destroy(),this.action.events.remove("statechange",this._onActionChange,this).remove(["begin","tick","tickcomplete","break","end"],this._onAction,this),this._hotspotManager.destroy(),this.panes.destroy(),this.margin.events.remove("change",this._onMarginChange,this),this.margin.destroy(),this.container.events.setParent(null),this.container.events.remove("sizechange",this._onContainerSizeChange,this),this.container.destroy(),this.options.events.remove("change",this._onOptionsChange,this),this._yandexState&&this._yandexState.destroy(),this._yandexStateGeoObjects&&this._yandexStateGeoObjects.destroy(),this._yandexState=null,this._yandexStateGeoObjects=null,this.events.fire("destroy",{map:this}),this.options.setParent(null)},_onContainerMouseDown:function(e){if(this.options.get("mapAutoFocus",!0)){var t=document.activeElement;e.get("target")!=t&&(t!=document.body&&O.isHTMLElement(t)&&t.blur(),X.isIE&&window.focus())}},_onMarginChange:function(e){this.events.fire("marginchange")}}),t(Q)})}],["_.",function(e){e.modules.define("map-copyrights-promo",["system.provideCss"],function(e,t){t("@media print{.ymaps-2-1-42-map-copyrights-promo{visibility:hidden}}",e)})}],["_)",function(e){e.modules.define("map-css",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-map{position:relative;z-index:0;display:block;margin:0!important;padding:0!important;text-align:left!important;font-weight:400!important;line-height:normal;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-print-color-adjust:exact;-webkit-transform:translate3d(0,0,0)}.ymaps-2-1-42-map ymaps,.ymaps-2-1-42-map ymaps:after,.ymaps-2-1-42-map ymaps:before{-moz-box-sizing:content-box;box-sizing:content-box}.ymaps-2-1-42-map,a .ymaps-2-1-42-map{text-decoration:none!important;color:#000;font-style:normal!important}.ymaps-2-1-42-fullscreen{overflow:hidden!important}.ymaps-2-1-42-touch-action-none{-ms-touch-action:none;touch-action:none}.ymaps-2-1-42-user-selection-none,.ymaps-2-1-42-user-selection-none *{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.ymaps-2-1-42-display-none{display:none!important}ymaps,ymaps canvas,ymaps i,ymaps input{max-width:none;max-height:none}.ymaps-2-1-42-areas-pane,.ymaps-2-1-42-balloon-pane,.ymaps-2-1-42-controls-pane,.ymaps-2-1-42-controls__bottom,.ymaps-2-1-42-controls__toolbar,.ymaps-2-1-42-events-pane,.ymaps-2-1-42-ground-pane,.ymaps-2-1-42-map-copyrights-promo,.ymaps-2-1-42-panel-pane,.ymaps-2-1-42-places-pane,.ymaps-2-1-42-ruler-balloon-pane,.ymaps-2-1-42-ruler-line-pane,.ymaps-2-1-42-searchpanel-pane{left:0}.ymaps-2-1-42-controls-pane *,.ymaps-2-1-42-searchpanel-pane *{text-align:left}@media print{.ymaps-2-1-42-patched-for-print{background:0 0!important;display:list-item!important;list-style-position:inside!important}}.ymaps-2-1-42-patched-for-print-preload .ymaps-2-1-42-patched-for-print{background:0 0!important;display:list-item!important;list-style-position:inside!important}",e)})}],["_J",function(e){e.modules.define("map-pane-manager",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-inner-panes,.ymaps-2-1-42-outer-panes{display:block;position:absolute;padding:0!important;margin:0!important}.ymaps-2-1-42-inner-panes{overflow:hidden;width:100%;height:100%}.ymaps-2-1-42-outer-panes{width:0;height:0}",e)})}],["3*",function(e){e.modules.define("map-ru-css",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standards")]},function(e){e({})})}],[".e",function(e){e.modules.define("map-ru-css.standards",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-map-bg-ru{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAzIiBoZWlnaHQ9IjgxIiB2aWV3Qm94PSIwIDAgMjAzIDgxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0zMy41OS4xMkgyMi44M0MxMi4yOC4xMiAzLjMyIDguMTYgMy4zMiAyMy43N2MwIDkuMzcgNC4zNCAxNi4yNyAxMi4wNyAxOS42OEwuOTYgNjkuNTVjLS40Ny44NSAwIDEuNTEuNzUgMS41MWg2LjdjLjU2IDAgLjk0LS4xOCAxLjEzLS42NmwxMy4xLTI1LjYzaDQuNzJWNzAuNGMwIC4yOS4yOS42Ni42Ni42Nmg1Ljg1Yy41NyAwIC43NS0uMjguNzUtLjc1VjEuMDdjMC0uNjYtLjM3LS45NS0xLjAzLS45NXptLTYuMjMgMzguNkgyMy40Yy02LjIyIDAtMTIuMjYtNC41NS0xMi4yNi0xNS45QzExLjE0IDExIDE2LjggNi4xOCAyMi41NSA2LjE4aDQuODF2MzIuNTR6bTAgMCIgZmlsbD0iI0ZGNEM0QyIvPjxwYXRoIGQ9Ik02OS4wMyAyMy42NGgtNS44NWMtLjQ3IDAtLjc1LjM4LS43NS42NnYxOC4wN0g1MS41OFYyNC4zYzAtLjQ3LS4xOC0uNjYtLjY2LS42NmgtNS44NGMtLjQ3IDAtLjc2LjI4LS43Ni42NnY0NS45N2MwIC40OC4yLjc2LjY2Ljc2aDUuOTRjLjM4IDAgLjY2LS4yOS42Ni0uNzZWNDguMzNoMTAuODV2MjEuOTRjMCAuNDguMjguNzYuNzUuNzZoNS44NWMuNDcgMCAuNjYtLjM4LjY2LS43NlYyNC4zYS42NC42NCAwIDAgMC0uNjYtLjY2ek0yMDIuNSA2OGwtLjc1LTMuMjFjLS4xLS4yOS0uMTktLjM4LS40Ny0uMzgtLjQ3IDAtMy4wMiAxLjA0LTYuNyAxLjA0LTcuMTYgMC0xMC42NS02LjktMTAuNjUtMTcuODggMC05LjY1IDIuOTItMTkuMiA3LjgzLTE5LjIgMS4zMiAwIDIuOTIuMzggNS40NiAyLjc0LjI5LjI5LjQ4LjM4Ljc2LjM4cy41Ni0uMTkuODUtLjY2bDIuNTQtNC4xNmMuMi0uMjkuMjktLjU3LjI5LS44NiAwLS4zOC0uMzgtLjY2LS45NS0uOTQtMy44Ni0xLjk5LTYuNS0yLjM3LTguNzctMi4zNy04Ljg2IDAtMTUuNzUgMTAuNi0xNS43NSAyNy4xNSAwIDE0LjI4IDYuNiAyMi41MSAxNi4wNCAyMi41MSAzLjk2IDAgOC4yLTEuODkgOS45LTMuMTIuMzctLjI4LjQ3LS42Ni4zNy0xLjA0em0tNDAuOTgtMjIuOThsMTEuMzItMjAuNzJjLjE5LS4yOC4wOS0uNjYtLjI5LS42NkgxNjdjLTEuNiAwLTIuMTcuNTctMi43MyAxLjhsLTguNSAxNy42OWMtLjQ2IDEuMDQtLjkzIDEuNy0xLjQgMS45OFYyNC4zYzAtLjM4LS4yLS42Ni0uNTctLjY2aC02LjEzYy0uMjggMC0uNTYuMjgtLjU2LjY2djQ2LjA3YzAgLjI4LjE4LjY2LjU2LjY2aDYuMTNjLjM4IDAgLjU3LS4yOC41Ny0uNjZWNDYuNjJjLjI4LjIuNDcuNDguNjYuODZsMTAuNzUgMjIuMTNjLjU2IDEuMTMgMS40MSAxLjQyIDIuNjQgMS40Mmg2LjAzYy4zOCAwIC40Ny0uMzguMjgtLjY2TDE2MS41MyA0NXpNMTA3LjUgNjUuMDZoLTEuMTNjLTEuNDIgMC0xLjgtLjU3LTEuOC0xLjdWMjQuM2MwLS40Ny0uMTgtLjY2LS41Ni0uNjZIODUuMTVjLS40NyAwLS43NS4yOC0uNzUuNjZ2My40YzAgMTEuNDUtLjY2IDI2LjItNi43IDM3LjM3aC0yLjA3Yy0uNTcgMC0uNzYuMjgtLjc2Ljc2djEzLjhjMCAuNDguMzguNjcuNjYuNjdoNC41M2MxLjAzIDAgMS40MS0uNzYgMS40MS0xLjQydi03Ljg1aDIwLjE4djguNmMwIC4zOC4yOC42Ny42Ni42N2g0LjgxYy41NyAwIDEuMTMtLjQ3IDEuMTMtMS40MlY2NS44M2MwLS40Ny0uMjgtLjc2LS43NS0uNzZ6bS0xMC4xOCAwSDgzLjY0YzQuODEtOC4yMyA2LjctMTcuNSA3LjM2LTI4Ljg1LjE5LTIuNDYuMjgtNS4wMS4yOC02LjYyaDYuMDR2MzUuNDd6bTI5LjQyLTQyLjU2Yy0xMC4xOSAwLTE0LjcxIDEyLjg2LTE0LjcxIDI2Ljg2IDAgMTQuMjggNi40IDIyLjggMTUuODQgMjIuOCA0LjYyIDAgOC42Ny0xLjggMTAuNzUtMy4xMy4zOC0uMTkuNDctLjQ3LjM4LS44NWwtLjc2LTMuMjFjLS4xLS4zOC0uMjgtLjU3LS43NS0uNTctLjM4IDAtMy4xMSAxLjA0LTYuOTggMS4wNC03LjI2IDAtMTAuNjYtNi4zNC0xMC42Ni0xNC42NnYtMi4yNHMzLjY4LjQ0IDUuODUuNDRoMTMuNzd2LTMuOTdjMC0xNC42Ni01LjItMjIuNTEtMTIuNzMtMjIuNTF6bS0xLjA0IDIwLjUyYy0yLjE3IDAtNS41Ni4zOC01LjU2LjM4czAtMS40Mi4xOS0yLjkzYy44NC04LjA0IDIuODItMTIuMSA2LjEyLTEyLjEgMy4wMiAwIDQuOSA0LjE1IDUuMzggMTEuNDQuMSAxLjUuMSAzLjIxLjEgMy4yMWgtNi4yM3ptMCAwIiBmaWxsPSIjNTk1OTU5Ii8+PC9zdmc+) #fafafa center no-repeat}",e)})}],[".$",function(e){e.modules.define("map.action.AreaRestrictionManager",["util.defineClass","event.Manager","map.action.Single","util.bounds","util.array","Monitor","vow"],function(e,t,n,i,o,s,r,a){var l=function(e){this._map=e,this.events=new n,this._restrictBounds=null,this._minZoom=null,this._calculate(),this._setupListeners()};t(l,{getArea:function(){return this._restrictBounds},getZoomRange:function(){var e=this._map.options,t=e.get("minZoom",0);return t=Math.max(t,this._minZoom),a.resolve([t,e.get("maxZoom")])},correctTick:function(e){if(this._restrictBounds){var t=this._map.container.getSize(),n=o.toGlobalPixelBounds(this._restrictBounds,e.zoom,this._map.options.get("projection")),i=[t[0]/2,t[1]/2],s=[[e.globalPixelCenter[0]-i[0],e.globalPixelCenter[1]-i[1]],[e.globalPixelCenter[0]+i[0],e.globalPixelCenter[1]+i[1]]],r=[0,0];n[0][0]>s[0][0]?r[0]=n[0][0]-s[0][0]:n[1][0]<s[1][0]&&(r[0]=n[1][0]-s[1][0]),n[0][1]>s[0][1]?r[1]=n[0][1]-s[0][1]:n[1][1]<s[1][1]&&(r[1]=n[1][1]-s[1][1]),(r[0]||r[1])&&(e.globalPixelCenter[0]+=r[0],e.globalPixelCenter[1]+=r[1])}},fixZoom:function(e){if(this._restrictBounds){var t=this._map.options,n=o.getCenterAndZoom(this._restrictBounds,this._map.container.getSize(),t.get("projection"),{inscribe:!1,preciseZoom:!0});t.get("avoidFractionalZoom")&&(n.zoom=Math.ceil(n.zoom)),e<n.zoom&&(e=n.zoom);var i=Math.ceil(n.zoom);this._minZoom!=i&&(this._minZoom=i)}return e},destroy:function(){this._clearListeners(),this._restrictBounds=null,this._minZoom=null},_setupListeners:function(){this._mapOptionsMonitor=new r(this._map.options).add("restrictMapArea",this._onRestrictOptionsChange,this),this._mapListeners=this._map.events.group().add(["sizechange","create"],this._runAction,this)},_clearListeners:function(){this._mapOptionsMonitor.destroy(),this._mapListeners.removeAll()},_calculate:function(){var e=this._map.options.get("restrictMapArea",!1);if(e){if(s.isArray(e))this._restrictBounds=e;else if(!this._restrictBounds){var t=this._map.getBounds();this._restrictBounds=[[t[0][0]-1e-6,t[0][1]-1e-6],[t[1][0]+1e-6,t[1][1]+1e-6]]}}else this._restrictBounds=null,this._minZoom=this._map.options.get("minZoom",0)},_runAction:function(){this._restrictBounds&&this._map.action.execute(new i({globalPixelCenter:this._map.getGlobalPixelCenter(),zoom:this._map.getZoom()}))},_onRestrictOptionsChange:function(){this._calculate(),this._restrictBounds&&this._runAction()}}),e(l)})}],[":r",function(e){e.modules.define("map.action.Base",["event.Manager"],function(e,t){function n(){this.events=new t({context:this}),this._actionManager=null}n.prototype={isActive:function(){return!!this._actionManager},begin:function(e){this._actionManager=e,this.events.fire("begin")},end:function(){this._actionManager=null,this.events.fire("end")},getActionManager:function(){return this._actionManager},fixTick:function(e,t){var n=t.getCurrentState(),i=n.zoom,o="undefined"==typeof e.zoom?i:Number(e.zoom),s=e.globalPixelCenter;if(!s)if(!e.pixelOffset&&e.center)s=t.getMap().options.get("projection").toGlobalPixels(e.center,o);else{var r=n.globalPixelCenter.slice(),a=Math.pow(2,o-i);if(e.pixelOffset){var l=e.pixelOffset;s=r,s[0]-=l[0],s[1]-=l[1]}else s=r;s[0]*=a,s[1]*=a}return{zoom:o,globalPixelCenter:s,duration:Number(e.duration)||0,timingFunction:e.timingFunction||"linear"}}},e(n)})}],["._",function(e){e.modules.define("map.action.Continuous",["util.defineClass","map.action.Base","Event"],function(e,t,n,i){function o(){o.superclass.constructor.call(this)}t(o,n,{begin:function(e){return o.superclass.begin.call(this,e),this},tick:function(e){return this._fireTick(this.fixTick(e,this.getActionManager())),this},end:function(){return o.superclass.end.call(this),this},_fireTick:function(e){this.events.fire("tick",new i({type:"tick",target:this,tick:e}))}}),e(o)})}],["..",function(e){e.modules.define("map.action.Manager",["util.defineClass","event.Manager","Event","util.bind","util.extend","util.coordinates.scaleInvert","util.math.cubicBezier","util.scheduler.timescheduler","util.scheduler.manager","util.scheduler.world"],function(e,t,n,i,o,s,r,a,l,c,u){var h=function(e){this.events=new n({context:this}),this._map=e,this._globalPixelCenter=e.getGlobalPixelCenter(),this._zoom=e.getZoom(),this._userCorrection=null,this._restrictMapArea=null,this._action=null,this._actionTick=null,this._actionListeners=null,this._delayedActionsQueue=[],this._mapListener=this._map.events.group().add("destroy",this._onDestroy,this)};t(h,{execute:function(e){this._actionEnds?this._delayedActionsQueue.push(e):(this.stop(),u.smoothMode(!0),this._action=e,this._actionListeners=e.events.group().add("tick",this._onActionTick,this).add("end",this._onActionEnd,this).add("break",this.breakTick,this),this.events.fire("begin",new i({type:"begin",target:this,action:e})),e.begin(this))},stop:function(){this._action&&(this._actionListeners.removeAll(),this._action.end(),this._onActionEnd())},breakTick:function(){this._actionTick&&this._stopTick()},_onActionTick:function(e){var t=e.get("target"),n=e.get("tick"),s=this._getCorrectedTick(n);(this._actionTick||t!=this._action)&&this._stopTick();var r=Math.abs(s.duration)<1e-7;r?(this._globalPixelCenter=s.globalPixelCenter,this._zoom=s.zoom):this._actionTick={startTime:l.getSelfTime(),timeout:window.setTimeout(o(function(){this._actionTick=null,this._globalPixelCenter=s.globalPixelCenter,this._zoom=s.zoom,this.events.fire("tickcomplete",{action:this._action,tick:s})},this),s.duration),shedulerProcess:c.schedule("processing",function(){},this,{duration:s.duration}),data:s},this.events.fire("tick",new i({type:"tick",target:this,action:this._action,tick:s})),this._renderTick(),r&&this.events.fire("tickcomplete",new i({type:"tickcomplete",target:this,action:this._action,tick:s}))},getMap:function(){return this._map},setupRestrictArea:function(e){this._restrictMapArea=e},getCurrentState:function(){var e=this._getCurrentTick();return{isTicking:!!this._actionTick,tickProgress:e.tickProgress,zoom:e.zoom,globalPixelCenter:e.globalPixelCenter}},_onActionEnd:function(){if(this._action){this._actionEnds=!0;var e=this._action;if(this._actionListeners.removeAll(),this._stopTick(),this._map.options.get("avoidFractionalZoom")&&this._roundZoom(),this._action=null,this._applyBounds(),this.events.fire("end",new i({type:"end",target:this,action:e})),u.smoothMode(!1),this._renderTick(),this._actionEnds=!1,this._delayedActionsQueue.length)for(var t;t=this._delayedActionsQueue.shift();)this.execute(t),this._delayedActionsQueue.length&&this.stop()}},_stopTick:function(e){if(this._actionTick){var t=this._getCurrentTick();this._globalPixelCenter=t.globalPixelCenter,this._zoom=t.zoom,window.clearTimeout(this._actionTick.timeout),this._actionTick.shedulerProcess.stop(),this._actionTick=null}},_renderTick:function(){this.events.fire("render",new i({type:"render",target:this}))},_getCurrentTick:function(){if("undefined"==typeof this._zoom&&(this._zoom=this._map.getZoom()),!this._actionTick)return{tickProgress:null,zoom:this._zoom,globalPixelCenter:this._globalPixelCenter};var e,t=this._actionTick,n=t.data,i=a(n.timingFunction).getValue(Math.min(Math.max(l.getSelfTime()-t.startTime,0)/n.duration,1)),o=this._zoom,s=this._globalPixelCenter,c=n.zoom,u=n.globalPixelCenter,h=c-o,d=o+i*h;if(Math.abs(h)>1e-7){var g=Math.pow(2,h),p=Math.pow(2,d-o),m=[u[0]/g,u[1]/g],f=r.centerToFixed(s,m,g),_=[f[0]/g,f[1]/g];e=r.fixedToCenter(s,_,p)}else e=[s[0]+i*(u[0]-s[0]),s[1]+i*(u[1]-s[1])];return{tickProgress:i,zoom:d,globalPixelCenter:e}},_applyBounds:function(){this.events.fire("statechange",new i({type:"statechange",target:this,globalPixelCenter:this._globalPixelCenter,zoom:this._zoom}))},_roundZoom:function(){var e=Math.round(this._zoom);if(this._zoom!=e){var t=Math.pow(2,e-this._zoom),n=[this._globalPixelCenter[0]*t,this._globalPixelCenter[1]*t];this._globalPixelCenter=n,this._zoom=e}},setCorrection:function(e){this._userCorrection=e},_zoomAndDelayCorrection:function(e){var t=e.zoom,n=this._map.options,i=n.get("maxZoom",23),o=n.get("minZoom",0),s=Math.max(Math.min(t,i),o),r=n.get("maxAnimationZoomDifference",5),a=Math.abs(s-this._map.getZoom())<r?e.duration:0;if(this._restrictMapArea&&(s=this._restrictMapArea.fixZoom(s)),Math.abs(e.zoom-s)>1e-7||a!=e.duration){var l=Math.pow(2,s-t);e.globalPixelCenter=[e.globalPixelCenter[0]*l,e.globalPixelCenter[1]*l],e.zoom=s,e.duration=a}},_getCorrectedTick:function(e){var t=s({},e);return this._zoomAndDelayCorrection(t),this._restrictMapArea&&this._restrictMapArea.correctTick(t),this._userCorrection&&(t=this._userCorrection(s({},t))),t},_onDestroy:function(){this._mapListener.removeAll()}}),e(h)})}],[".!",function(e){e.modules.define("map.action.Sequence",["util.extend","map.action.Single","util.bind"],function(e,t,n,i){function o(e,t){this.options=t||{},this._ticks=e,this._active=!1,this._actionManager=null}o.prototype={begin:function(e){return this._actionManager=e,this._active=!0,this._executeAction(0),this},end:function(){this._clearCurrentAction(),this._end()},isActive:function(){return this._active},_clearCurrentAction:function(){this._currentAction&&(this._currentAction.end(),this._currentAction=null)},_executeAction:function(e){this._currentAction=new n(t({},this._ticks[e],{callback:this._getCallback(e,e==this._ticks.length-1)})),this._currentAction.end=i(function(){this._currentAction&&(n.prototype.end.call(this._currentAction),this._currentAction=null,this._end())},this),this._actionManager.execute(this._currentAction)},_getCallback:function(e,t){return i(function(n){if(this._active)if(this._currentAction=null,n)this.options.callback&&this.options.callback(n);else if(this._ticks[e].callback&&this._ticks[e].callback.call(n),t)this._end();else{var i=this._ticks[e];if(!i.globalPixelCenter){var o=this._actionManager.getMap().options.get("projection");i.globalPixelCenter=o.toGlobalPixels(i.center,i.zoom)}this._executeAction(e+1)}},this)},_end:function(){this._active&&(this._active=!1,this.options.callback&&this.options.callback(null))}},e(o)})}],[".(",function(e){e.modules.define("map.action.Single",["util.bind","util.defineClass","map.action.Base","Event"],function(e,t,n,i,o){function s(e){s.superclass.constructor.call(this),this._originalTick=e,this._activeTick=null,this._tickDelayTimeoutID=0,this._zoomRangeChecking=!1,this._tickFiring=!1}n(s,i,{begin:function(e){s.superclass.begin.call(this,e);var n=this._originalTick;if(n.checkZoomRange){this._zoomRangeChecking=!0;var i=this._getActiveTick(),o=e.getMap();o.zoomRange.get(o.options.get("projection").fromGlobalPixels(i.globalPixelCenter,i.zoom)).then(this._zoomRangeGetCallback,this)}else n.useMapMargin&&this._applyMargin();return"number"==typeof n.delay&&(this._tickDelayTimeoutID=window.setTimeout(t(this._onTickDelayTimeout,this),n.delay)),this._fireTick(),this},end:function(){return this._tickDelayTimeoutID&&(window.clearTimeout(this._tickDelayTimeoutID),this._tickDelayTimeoutID=0),this._completeTick(),this},_getActiveTick:function(){return this._activeTick||(this._activeTick=this.fixTick(this._originalTick,this.getActionManager()))},_zoomRangeGetCallback:function(e){this._zoomRangeChecking=!1,this.isActive()&&(this._correctZoom(e[0],e[1]),this._originalTick.useMapMargin&&this._applyMargin(),this._fireTick())},_onTickDelayTimeout:function(){this._tickDelayTimeoutID=0,this._fireTick()},_fireTick:function(){this._zoomRangeChecking||this._tickDelayTimeoutID||(this.getActionManager().events.add("tickcomplete",this._onTickComplete,this),this._tickFiring=!0,this.events.fire("tick",new o({type:"tick",target:this,tick:this._getActiveTick()})))},_onTickComplete:function(e){e.get("action")==this&&this._completeTick()},_completeTick:function(){this._tickFiring&&(this._tickFiring=!1,this.getActionManager().events.remove("tickcomplete",this._onTickComplete,this)),this._activeTick=null,s.superclass.end.call(this),this._originalTick.callback&&this._originalTick.callback(null)},_correctZoom:function(e,t){var n=this._getActiveTick(),i=Math.min(t,Math.max(e,n.zoom));if(i!=n.zoom){var o=Math.pow(2,i-n.zoom);n.globalPixelCenter[0]*=o,n.globalPixelCenter[1]*=o,n.zoom=i}},_applyMargin:function(){var e=this.getActionManager().getMap(),t=e.margin.getMargin(),n=this._getActiveTick();this._correctZoom(e.options.get("minZoom",0),e.options.get("maxZoom",23)),n.globalPixelCenter[0]-=(t[3]-t[1])/2,n.globalPixelCenter[1]-=(t[0]-t[2])/2}}),e(s)})}],[".)",function(e){e.modules.define("map.addon.balloon",["Map","popup.addonBuilder","map.Balloon"],function(e,t,n,i){e(n.build({type:"balloon",metaEventManager:t.getMetaEventManager()}))})}],[".:",function(e){e.modules.define("map.addon.hint",["Map","popup.addonBuilder","map.Hint"],function(e,t,n,i){e(n.build({type:"hint",metaEventManager:t.getMetaEventManager()}))})}],[".;",function(e){e.modules.define("map.associate.serviceGeoObjects",["util.Associate","map.GeoObjects"],function(t,n,i){var o=new n(function(e){return new i(e)});t({get:function(t){if(e.env.debug&&!t)throw new Error("map.associate.serviceGeoObjects: передан пустой указатель на карту");return o.get(t)}})})}],[".q",function(e){e.modules.define("map.associate.serviceLayers",["util.Associate","map.layer.Manager"],function(t,n,i){var o=new n(function(e){return new i(e)});t({get:function(t){if(e.env.debug&&!t)throw new Error("map.associate.serviceLayers: передан пустой указатель на карту");return o.get(t)}})})}],["54",function(e){e.modules.define("map.Balloon",["util.defineClass","Balloon","component.sharedEntity.manager.Popup","sharedEntity.proxy.Balloon","event.Manager","map.optionMapper","option.Manager","option.Router","util.component","vow","popup.managerStorage"],function(e,t,n,i,o,s,r,a,l,c,u,h){function d(e){this._map=e,this.events=new s({context:this}),this._balloon=new n(e),this._balloon.options.setParent(this._map.options),this._sharingManager=new i(this,this._balloon,this._map,o),this._forkOptions=new a}t(d,c.createProxyMethods(function(){return this._sharingManager},["capture","open","close","isOpen","getOverlay","getOverlaySync","autoPan","getOwner","setPosition","getPosition","setData","getData","setOptions","getOptions"]),{destroy:function(){this.capture(null),this._balloon.destroy()},capture:function(e){var t=this._sharingManager.capture(e);return t.then(this._reset,this),t},open:function(e,t,n){e=e||this._map.getCenter();var i=u.defer(),o=function(e){i.reject(e)};return this._sharingManager.perform("open",[e,t,n],this,function(e){u.resolve(!e[2]||this.setOptions(e[2])).then(function(){i.resolve(this._sharingManager.getEntity().open(e[0],e[1]))},o,this)},o),i.promise()},setOptions:function(e){var t=u.defer();return this._sharingManager.perform("setOptions",[e],this,function(e){this._addForkOptions(),this._forkOptions.freeze().unsetAll().set(e[0]).unfreeze(),t.resolve()},function(e){t.reject(e)}),t.promise()},getOptions:function(){return this._sharingManager.perform("getOptions",null,this,function(){return this._addForkOptions(),this._forkOptions})},autoPan:function(){return this._sharingManager.perform("autoPan")},_addForkOptions:function(){var e=this._balloon.options.getParent();e&&"function"==typeof e.spliceParents?e.indexOfParent(this._forkOptions)==-1&&e.spliceParents(0,0,this._forkOptions):this._balloon.options.setParent(new l(this._forkOptions,e))},_reset:function(){this.getOwner()==this._map&&this._balloon.options.setParent(this._map.options),this._forkOptions.unsetAll()}}),h.add("map#balloon",d),e(d)})}],[".j",function(e){e.modules.define("map.behavior.Manager",["util.defineClass","behavior.storage","map.behavior.optionMapper","map.GeneralCollection","component.collection.ParentCollection","error","map.behavior.metaOptions"],function(e,t,n,i,o,s,r){var a=function(e,t,n){a.superclass.constructor.call(this,e,n,"behaviors",i),this._parentCollection=new s(this,{onAdd:{callback:this._onAdd,context:this},onRemove:{callback:this._onRemove,context:this}}),this._behaviors={};for(var o=[].concat(t),r=0,l=o.length;r<l;r++)for(var c=this._resolveBehaviors(o[r]),u=0,h=c.length;u<h;u++)c[u].enable()};t(a,o,{enable:function(e){"string"==typeof e&&(e=[e]);for(var t=0,n=e.length;t<n;t++){var i=this._resolveBehavior(e[t]);i&&i.enable()}return this},disable:function(e){"string"==typeof e&&(e=[e]);for(var t=0,n=e.length;t<n;t++){var i=this._resolveBehavior(e[t]);i&&i.disable()}return this},isEnabled:function(e){var t=this._resolveBehavior(e);return t&&t.isEnabled()},get:function(e){return this._resolveBehavior(e)},_resolveBehaviors:function(e){var t,n=[];if("default"==e)for(var i=this.getMap().options.get("defaultBehaviors")||[],o=0,s=i.length;o<s;o++)t=this._resolveBehavior(i[o]),t&&n.push(t);else t=this._resolveBehavior(e),t&&n.push(t);return n},_resolveBehavior:function(e){var t=this._behaviors[e];if(!t){var i=n.get(e);i?(t=this._behaviors[e]=new i,this._parentCollection.add(t)):r.warn("Warning",'map.Behaviors: behavior "'+e+'" does not exist')}return t},_onAdd:function(e){this.events.fire("add",{child:e})},_onRemove:function(e){this.events.fire("remove",{child:e})}}),e(a)})}],[".i",function(e){e.modules.define("map.behavior.metaOptions",["map.metaOptions","behavior.DblClickZoom","behavior.Drag","behavior.LeftMouseButtonMagnifier","behavior.MultiTouch","behavior.RightMouseButtonMagnifier","behavior.ScrollZoom"],function(e,t){t.set({defaultBehaviors:["drag","rightMouseButtonMagnifier","dblClickZoom","multiTouch","scrollZoom"],dragCursor:"grab",dragActionCursor:"grabbing"}),e(!0)})}],[".Q",function(e){e.modules.define("map.behavior.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["56",function(e){e.modules.define("map.Container",function(e){var t=e.env.lang.slice(0,2);return["util.defineClass","event.Manager","domEvent.manager","Monitor","util.bind","util.math.areEqual","util.fireWithBeforeEvent","util.dom.style","util.dom.element","util.dom.viewport","util.dom.className","util.css","util.hd","system.browser","meta","yandex.counter","util.scheduler.strategy.Asap","map.css","ru"==t||"uk"==t?"map.ru.css":"map.en.css"]},function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M){function v(t,n){if("string"==typeof t&&(t=document.getElementById(t)),e.env.debug&&(!t||1!=t.nodeType))throw new Error("map.Container.constructor: Не удалось получить HTML-элемент контейнера.");this._parentElement=t,this._map=n,this._mapOptionsMonitor=new s(n.options),this.events=new i({context:this});var r=this._mapOptionsMonitor;r.add("autoFitToViewport",this._onAutoFitModeChange,this).add("autoFitToViewportDelay",this._onAutoFitDelayChange,this).add("backgroundVisible",this._onBackgroundVisibleChange,this,{defaultValue:!0}),this._size=c.getSize(t);var a=[g.addPrefix("map"),g.addPrefix("i-ua_js_yes")];if(r.get("backgroundVisible")&&a.push(C),"pointer"==m.eventMapper&&a.push(g.addPrefix("touch-action-none")),a.push(g.addPrefix("islets_map-lang-"+I)),this._element=u.create({parentNode:t,className:a.join(" "),size:this._size}),this._offset=c.getOffset(this._element,!0),this._isFullscreen=!1,this._fullscreenElement=null,this._sizeBeforeFullscreen=null,this._setupAutoFit(),this._oldWindowSize=h.getSize(),m.oldIE&&(this._oldWindowScroll=h.hasScroll()),this._windowListeners=o.group(window),this._documentListeners=o.group(document),this._windowListeners.add("resize",this._onWindowResize,this),e.supports.printPatchNeeded){var l=g.addPrefix("patched-for-print-preload");this._windowListeners.add("beforeprint",function(){d.add(this._element,l),new M(function(){d.remove(this._element,l)},this).start()},this)}_.countByKey("modulesUsage",["mapDpr",Math.round(p.getPixelRatio()),m.platform,_.versionPrefix].join("."))}function y(e,t){e.appendChild(t)}function j(e){e.parentNode.removeChild(e)}function b(e){return e.toString().replace(/\./g,"_")}var I=f.languageCode,L="ru"==I||"uk"==I?"ru":"en",C=g.addPrefix("map-bg-")+L;n(v,{getElement:function(){return this._element},getSize:function(){return this._size},getOffset:function(){return this._offset=c.getOffset(this._element,!0),this._offset},fitToViewport:function(e){var t=this._size,n=this._offset,i=c.getSize(this._element.parentNode),o=c.getOffset(this._element,!0);a(t,i)||(this._isNullSize&&(this._isNullSize=!1,this._logSize()),c.setSize(this._element,i),this._size=i,this._offset=o,this.events.fire("sizechange",{oldSize:t,newSize:i,oldOffset:n,newOffset:o,preservePixelPosition:e}))},enterFullscreen:function(){this._isFullscreen||(this._moveContainerToFullscreen(),this._isFullscreen=!0,this.events.fire("fullscreenenter"),this.fitToViewport(),_.countByKey("modulesUsage","fullscreen.enter"))},exitFullscreen:function(){this._isFullscreen&&l(this.events,{type:"fullscreenexit",target:this},{successCallback:this._onFullScreenExitSuccess,context:this})},isFullscreen:function(){return this._isFullscreen},destroy:function(){this._windowListeners.removeAll(),this._documentListeners.removeAll(),this._isFullscreen&&this._moveContainerFromFullscreen(),u.remove(this._element),this._mapOptionsMonitor.destroy(),this._clearAutoFit()},_onFullScreenExitSuccess:function(t){this._moveContainerFromFullscreen(),this._isFullscreen=!1,this.fitToViewport(),e.env.browser.oldIE&&(this._element.className+=""),this.events.fire(t.type,t)},_fullscreenReposition:function(){var e=this._map.options.get("fullscreenMargin",[[0,0],[0,0]]),t=this._fullscreenElement,n=this,i=h.getScrollOffsets(),o=h.getSize();c.css(t,{left:i[0]+e[0][0]+"px",top:i[1]+e[0][1]+"px",width:o[0]-e[1][0]-e[0][0]+"px",height:o[1]-e[1][1]-e[1][1]+"px"}),n.fitToViewport()},_moveContainerToFullscreen:function(){this._sizeBeforeFullscreen=this._size,this._fullscreenElement=u.create({css:{position:"absolute",left:0,top:0,width:0,height:0,zIndex:this._map.options.get("fullscreenZIndex")}}),d.add(document.body,g.addPrefix("fullscreen")),
y(document.body,this._fullscreenElement),y(this._fullscreenElement,this._element),d.add(this._element,g.addPrefix("fullscreen-mode")),this._fullscreenReposition(),this._windowListeners.add(["resize","scroll","orientationchange"],this._fullscreenReposition,this),this._map.options.get("exitFullscreenByEsc")&&this._documentListeners.add("keyup",this._onKeyUp,this)},_moveContainerFromFullscreen:function(){c.setSize(this._element,this._sizeBeforeFullscreen),y(this._parentElement,this._element),j(this._fullscreenElement),d.remove(document.body,g.addPrefix("fullscreen")),d.remove(this._element,g.addPrefix("fullscreen-mode")),this._documentListeners.remove("keyup",this._onKeyUp,this),this._windowListeners.remove(["resize","scroll","orientationchange"],this._fullscreenReposition,this)},_onKeyUp:function(e){"27"!=e.get("charCode")&&"27"!=e.get("keyCode")||this.exitFullscreen()},_setupAutoFit:function(){var e=this._mapOptionsMonitor.get("autoFitToViewport"),t=this.getSize(),n=a(t,[0,0]);n&&(this._isNullSize=!0),this._logSize(),(n&&"ifNull"==e||"always"==e)&&(this._autoFitIntervalID=setInterval(r(function(){this._checkAutoFit()},this),this._mapOptionsMonitor.get("autoFitToViewportDelay")))},_onAutoFitModeChange:function(e){this._clearAutoFit(),"none"!=e&&this._setupAutoFit()},_onAutoFitDelayChange:function(){this._clearAutoFit(),this._setupAutoFit()},_clearAutoFit:function(){this._autoFitIntervalID&&(clearInterval(this._autoFitIntervalID),this._autoFitIntervalID=null)},_checkAutoFit:function(){this.fitToViewport(),a(this.getSize(),[0,0])||"ifNull"!=this._mapOptionsMonitor.get("autoFitToViewport")||this._clearAutoFit()},_onWindowResize:function(){var e=h.getSize();if(m.oldIE){var t=h.hasScroll(),n=!a(t,this._oldWindowScroll);if(this._oldWindowScroll=t,n)return}a(e,this._oldWindowSize)||(this._oldWindowSize=e,this.fitToViewport())},_onBackgroundVisibleChange:function(e){e?d.add(this._element,C):d.remove(this._element,C)},_logSize:function(){_.countByKey("modulesUsage",["mapSize",b(this._size[0])+"x"+b(this._size[1]),m.platform,_.versionPrefix].join("."))}}),t(v)})}],["57",function(e){e.modules.define("map.Converter",[],function(e){var t=function(e){this._map=e,this._listeners=e.events.group().add("destroy",this._onDestroy,this)};t.prototype={_onDestroy:function(){this._listeners.removeAll()},pageToGlobal:function(e){var t=this._map.container.getOffset(),n=this._map.container.getSize(),i=[n[0]/2,n[1]/2],o=this._map.action.getCurrentState().globalPixelCenter;return[o[0]+e[0]-t[0]-i[0],o[1]+e[1]-t[1]-i[1]]},globalToPage:function(e){var t=this._map.container.getOffset(),n=this._map.container.getSize(),i=[n[0]/2,n[1]/2],o=this._map.action.getCurrentState().globalPixelCenter;return[e[0]-o[0]+t[0]+i[0],e[1]-o[1]+t[1]+i[1]]}},e(t)})}],["59",function(e){e.modules.define("map.Copyrights",["component.ProviderObserver","map.copyrights.StaticProvider","map.copyrights.Layout","map.copyrights.Promo","event.Manager","data.Manager","projection.wgs84Mercator","projection.sphericalMercator","vow","util.bind","util.dom.element","util.math.differ","Monitor","util.defineClass"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){var f=.499999,_=400,M=function(e){this._map=e,this.events=new r({context:this}),this._copyrightsObserver=new n({changeEventType:"copyrightschange",changeCallback:h(this._updateCopyrights,this),makeRequest:function(e,t){return e.getCopyrights(t.center,t.zoom)}});var t=e.options;this._dataSet=new a({copyrights:[],bright:e.layers.getBrightness()>f,"float":t.get("copyrightFloat","right"),logo:this._isLogoVisible()}),this._state=new a({size:e.container.getSize()[0]>_?"large":"small",copyrightsWidth:null}),this._layout=null,this._actualRequest=null,this._mapListeners=null,this._mapLayerListeners=null,this._mapOptionsMonitor=null,this._stateMonitor=null,this._promoBlock=null,this._setupLayout(),this._setupPromo(),this._setupListeners(),this.get()};m(M,{addProvider:function(t){if(e.env.debug&&"function"!=typeof t.getCopyrights)throw new Error("map.Copyrights.addProvider: parameter doesn't implement ICopyrightsProvider interface");return this._copyrightsObserver.addProvider(t),this},removeProvider:function(e){return this._copyrightsObserver.removeProvider(e),this},add:function(e){var t=new i(e,this);return this.addProvider(t),t},get:function(e,t){var n=u.defer(),i=this._map;return this._copyrightsObserver.get({center:e||i.getCenter({useMapMargin:i.options.get("coverageUseMapMargin",!1)}),zoom:"undefined"==typeof t?i.getZoom():t}).then(function(e){n.resolve([].concat.apply([],e.resolved))},function(){n.resolve([])}),n.promise()},getMap:function(){return this._map},getState:function(){return this._state},getPromoLink:function(){return this._promoBlock.getLink()},_setupListeners:function(){var e=this._map;this._mapListeners=e.events.group().add("boundschange",this._onBoundsChange,this).add("destroy",this._onMapDestroy,this).add("sizechange",this._onMapSizeChange,this),this._mapLayerListeners=e.layers.events.group().add("brightnesschange",this._onBrightnessChange,this),this._mapOptionsMonitor=new p(e.options).add("copyrightFloat",this._onCopyrightsFloatChange,this).add(["copyrightLogoVisible","suppressMapOpenBlock"],this._setCopyrightsLogoVisibleState,this)},_clearListeners:function(){this._mapLayerListeners.removeAll(),this._mapListeners.removeAll(),this._mapOptionsMonitor.destroy()},_setupPromo:function(){var e=this._layout.getParentElement();this._promoBlock=new s(e,this)},_clearPromo:function(){this._promoBlock.destroy(),this._promoBlock=null},_onMapDestroy:function(){this._clearPromo(),this._clearListeners(),this._clearLayout(),this._actualRequest=null,this._copyrightsObserver.destroy()},_onMapSizeChange:function(e){var t=e.get("newSize")[0]>_?"large":"small";this._state.set("size",t)},_setupLayout:function(){var e=this._map;this._layout=new o({data:this._dataSet,state:this._state,map:e}),this._layout.setParentElement(e.panes.get("copyrights").getElement())},_clearLayout:function(){this._layout.destroy()},_updateCopyrights:function(){var e=this._actualRequest=this.get();e.then(function(t){e==this._actualRequest&&this._onCopyrightsReady(e,t)},this)},_onCopyrightsReady:function(e,t){var n=this._dataSet.get("copyrights"),i=g(t,n);i&&this._onCurrentCopyrightsChange(n,t)},_onCurrentCopyrightsChange:function(e,t){this._dataSet.set("copyrights",t),this.events.fire("change",{oldCopyrights:e.slice(),newCopyrights:t.slice()})},_onBoundsChange:function(){this._updateCopyrights()},_onBrightnessChange:function(){this._dataSet.set("bright",this._map.layers.getBrightness()>f)},_onCopyrightsFloatChange:function(e){this._dataSet.set("float",e)},_setCopyrightsLogoVisibleState:function(){this._dataSet.set("logo",this._isLogoVisible())},_isLogoVisible:function(){var e=this._map.options,t=e.get("copyrightLogoVisible",!0),n=e.get("suppressMapOpenBlock",!1),i=e.get("projection"),o=!n&&(i==l||i==c);return t&&!o}}),t(M)})}],[".J",function(e){e.modules.define("map.copyrights.counter",["util.id"],function(e,t){var n={},i={};e({create:function(e,t){var o,s=!!i[e];if(i[e]=t,s)for(var r in n)n.hasOwnProperty(r)&&(o=n[r][e],o&&o.copyrights.setCopyrights(t))},increment:function(e,o,s){var r,a=t.get(o);s=s||1,n[a]=n[a]||{},r=n[a],r[e]?r[e].counter+=s:r[e]={counter:s,copyrights:o.copyrights.add(i[e])}},decrement:function(e,i,o){var s,r=t.get(i),a=n[r];o=o||1,a&&a[e]&&(s=a[e],s.counter-=o,s.counter<=0&&(s.copyrights.remove(),delete n[r][e]))}})})}],[".Z",function(e){e.modules.define("map.copyrights.Layout",["templateLayoutFactory","copyright.layout.html","Monitor","domEvent.manager","localization.common.current","util.array","util.nodeSize","util.dom.element","util.dom.className","util.dom.style","util.css","meta","yandex.state.associate"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g){function p(e,t,n){t?c.add(e,n):c.remove(e,n)}var m={FOG:h.addPrefix("copyright_fog_yes"),WHITE_THEME:h.addPrefix("copyright_color_white"),EN_LOGO:h.addPrefix("copyright__logo_lang_en"),POSITION_LEFT:h.addPrefix("copyright_float_left"),VISIBLE_NO:h.addPrefix("copyright_logo_no"),PROVIDES_VISIBLE_NO:h.addPrefix("copyright_providers_no"),UA_VISIBLE_NO:h.addPrefix("copyright_ua_no")},f=t.createClass(n,{build:function(){f.superclass.build.call(this);var e=this.getParentElement(),t=this.getData(),n=d.languageCode;this._copyrightsElement=l.findByPrefixedClass(e,"copyright"),this._logoLinkElement=l.findByPrefixedClass(e,"copyright__logo"),this._legendElement=l.findByPrefixedClass(e,"copyright__text"),this._yandexState=g.get(t.map),this._update(),"ru"!=n&&"uk"!=n&&c.add(this._logoLinkElement,m.EN_LOGO),u.patch(this._logoLinkElement,{printBackground:u.value(this._logoLinkElement,"backgroundImage",!0).replace(/^\s*url\(['"]?/,"").replace(/['"]?\)$/,"")}),this._setupListeners()},clear:function(){this._clearListeners(),f.superclass.clear.call(this)},_setupListeners:function(){var e=this.getData(),t=e.data,n=e.map;this._monitor=new i(t).add("copyrights",this._updateCopyrights,this).add("bright",this._updateColor,this).add("logo",this._updateLogoVisible,this).add("float",this._updatePosition,this),this._mapListener=n.events.group().add("sizechange",this._updateView,this),this._mapOptionsMonitor=new i(n.options).add("copyrightProvidersVisible",this._updateProvidersVisible,this).add("copyrightUaVisible",this._updateUaVisible,this),this._logoLinkListeners=o.group(this._logoLinkElement).add(["mouseenter","click"],this._setLogoLink,this)},_clearListeners:function(){this._monitor.destroy(),this._mapOptionsMonitor.destroy(),this._mapListener.removeAll(),this._logoLinkListeners.removeAll()},_update:function(){var e=this.getData(),t=e.data,n=e.map.options;this._updateCopyrights(t.get("copyrights")),this._updateColor(t.get("bright")),this._updatePosition(t.get("float")),this._updateLogoVisible(t.get("logo")),this._updateProvidersVisible(n.get("copyrightProvidersVisible",!0)),this._updateUaVisible(n.get("copyrightUaVisible",!0))},_updateCopyrights:function(e){var t="";r.isArray(e)?e.length>0&&(t=e.join(", ")):"string"==typeof e&&(t=e),l.html(this._legendElement,t),this._updateView()},_updateLogoVisible:function(e){p(this._copyrightsElement,!e,m.VISIBLE_NO)},_updateProvidersVisible:function(e){p(this._copyrightsElement,!e,m.PROVIDES_VISIBLE_NO)},_updateUaVisible:function(e){p(this._copyrightsElement,!e,m.UA_VISIBLE_NO)},_updateColor:function(e){p(this._copyrightsElement,!e,m.WHITE_THEME)},_updatePosition:function(e){p(this._copyrightsElement,"left"==e,m.POSITION_LEFT)},_updateView:function(e){u.css(this._copyrightsElement,{width:null});var t=this._copyrightsElement,n=a.computeByContent(t),i=n.width,o=i,s=this._getParentOffset(),r="undefined"==typeof e?this.getData().map.container.getSize()[0]:e.get("newSize")[0];i>=r&&(o=Math.max(0,r-s),u.css(t,{width:o+"px"})),p(t,i>=r,m.FOG),this.getData().state.set("copyrightsWidth",o)},_getParentOffset:function(){var e=this.getParentElement(),t=u.values(e,["left","right"]),n=0;if("auto"!=t.left||"auto"!=e.right)for(var i in t)if(t.hasOwnProperty(i)){var o=parseInt(t[i],10);isNaN(o)||(n+=o)}return n},_setLogoLink:function(){this._logoLinkElement.href=this._yandexState.buildLink()}});e(f)})}],["!a",function(e){e.modules.define("map.copyrights.Promo",["data.Manager","Monitor","Inception","projection.wgs84Mercator","projection.sphericalMercator","yandex.state.associate","util.defineClass","util.dom.element","util.css","error","vow","map.copyrights.promo.css"],function(e,t,n,i,o,s,r,a,l,c){function u(e,t){this._parentElement=e,this._copyrightsManager=t,this._map=t.getMap(),this._inception=null,this._copyrightsStateMonitor=null,this._mapContainerListeners=null,this._setupData(),this._setupListeners(),this._setupPromoBlock(),this._lastLink=null}var h=20,d="suppressMapOpenBlock",g="copyrightsVisible",p="copyrightsPosition",m="copyrightsFloat";a(u,{destroy:function(){this._clearPromoBlock(),this._clearListeners(),this._clearData(),this._map=null,this._parentElement=null,this._inception=null},getLink:function(){return this._lastLink},_getElement:function(){return this._element||(this._element=l.create({className:c.addPrefix("map-copyrights-promo"),css:{position:"absolute",bottom:"-4px"},parentNode:this._parentElement}))},_setupData:function(){this._yandexState=r.get(this._map),this._data=new t({mapState:this._yandexState.getAll()}),this._yandexState.events.add("change",this._onMapStateChange,this)},_clearData:function(){this._data.destroy(),this._data=null,this._yandexState.events.remove("change",this._onMapStateChange,this),this._yandexState=null},_onMapStateChange:function(){this._data.set("mapState",this._yandexState.getAll())},_setupListeners:function(){this._mapOptionsMonitor=new n(this._map.options).add([g,p,m],this._updateVisible,this,{defaultValue:!1}).add(d,this._onMapBlockSuppressOptionsChange,this)},_clearListeners:function(){this._mapOptionsMonitor.destroy()},_onMapBlockSuppressOptionsChange:function(){this._clearPromoBlock(),this._setupPromoBlock()},_setupPromoBlock:function(){var e=this._map.options.get(d,!1),t=this._map.options.get("projection");e||t!=o&&t!=s||(this._setupSizeChangeListeners(),this._setAvailWidth(),this._inception=new i("/map",this._data),this._inception.setParentElement(this._getElement()),this._inception.events.add("linkchange",this._onLinkChange,this))},_clearPromoBlock:function(){this._inception&&(this._inception.events.remove("linkchange",this._onLinkChange,this),this._inception.destroy(),this._inception=null,this._clearSizeChangeListeners())},_onLinkChange:function(e){this._lastLink=e.get("link")},_setupSizeChangeListeners:function(){this._mapContainerListeners=this._map.container.events.group().add("sizechange",this._setAvailWidth,this),this._copyrightsStateMonitor=new n(this._copyrightsManager.getState()).add("copyrightsWidth",this._setAvailWidth,this)},_clearSizeChangeListeners:function(){this._mapContainerListeners.removeAll(),this._copyrightsStateMonitor.destroy()},_updateVisible:function(){var e=this._mapOptionsMonitor;e.get(g)||e.get(p)||e.get(m)?this._inception&&this._clearPromoBlock():this._inception||this._setupPromoBlock()},_getAvailWidth:function(){return this._map.container.getSize()[0]-(this._copyrightsStateMonitor.get("copyrightsWidth")+h)},_setAvailWidth:function(){this._data.set("availWidth",this._getAvailWidth())}}),e(u)})}],["0y",function(e){e.modules.define("map.copyrights.promo.css",["map-copyrights-promo"],function(e){e({})})}],["!c",function(e){e.modules.define("map.copyrights.StaticProvider",["util.defineClass","event.Manager","util.math.differ","vow"],function(e,t,n,i,o){var s=function(e,t){this._copyrights=[].concat(e),this._manager=t,this.events=new n({context:this})};t(s,{getCopyrights:function(){return o.resolve(this._copyrights)},setCopyrights:function(e){var t=[].concat(e);i(t,e)&&(this._copyrights=t,this.events.fire("copyrightschange"))},remove:function(){this._manager.removeProvider(this)}}),e(s)})}],["0F",function(e){e.modules.define("map.css",["map-css"],function(e){e({})})}],["5_",function(e){e.modules.define("map.event.Manager",["util.defineClass","event.Manager","MapEvent","util.extend"],function(e,t,n,i,o){function s(e){s.superclass.constructor.call(this,e)}t(s,n,{createEventObject:function(e,t,n){return new i(o({type:e,target:n,map:n},t))}}),e(s)})}],["5-",function(e){e.modules.define("map.GeneralCollection",["util.defineClass","option.Manager","event.Manager"],function(e,t,n,i){function o(e,t,o,s){this.events=new i({context:this}),this.options=new n(t||{},e.options,o,s),this._map=e,this._map.events.add("destroy",this.onMapDestroy,this)}t(o,{getMap:function(){return this._map},onMapDestroy:function(){this._map.events.remove("destroy",this.onMapDestroy,this),this.events.fire("mapchange",{oldMap:this._map,newMap:null}),this.options.setParent(null)}}),e(o)})}],["5!",function(e){e.modules.define("map.GeoObjects",["util.defineClass","map.GeneralCollection","geoObject.component.BoundsAggregator","GeoObjectCollection","map.optionMapper","geoObject.optionMapper","component.array.ParentArray","event.Mapper","geoObject.EventMappingTable","Event","option.Mapper","error"],function(e,t,n,i,o,s,r,a,l,c,u,h,d){function g(e,t){g.superclass.constructor.call(this,e,t,"geoObject",r),this._parentArray=new a([],this,{onAdd:{callback:this._onAdd,context:this},onRemove:{callback:this._onRemove,context:this},onSet:{callback:this._onSet,context:this}},new l(this.events,new c(this))),this._boundsAggregator=new i(this,{onPixelBoundsChange:{callback:this._pixelBoundsChangeCallback,context:this},onGeoBoundsChange:{callback:this._geoBoundsChangeCallback,context:this}})}function p(e,t){return 0==e.indexOf("editor")?h.addOptionalPrefix(e,t):h.addOptionalPrefixForBalloonHint(e,t)}t(g,n,{get:function(e){return this._parentArray.get(e)},set:function(e,t){return this._parentArray.set(e,t),this},add:function(e,t){return this._parentArray.add(e,t),this},remove:function(e){return this._parentArray.indexOf(e)==-1?d.warn("OveruseWarning","map.GeoObjects.remove: удаляемый объект не найден"):this._parentArray.remove(e),this},removeAll:function(){return this._parentArray.removeAll(),this},splice:function(e,t){return new o({children:this._parentArray.splice.apply(this._parentArray,arguments)})},getLength:function(){return this._parentArray.getLength()},each:function(e,t){return this._parentArray.each(e,t),this},getIterator:function(){return this._parentArray.getIterator()},indexOf:function(e){return this._parentArray.indexOf(e)},getPixelBounds:function(){return this._boundsAggregator.getPixelBounds()},getBounds:function(){return this._boundsAggregator.getBounds()},onMapDestroy:function(e){this._boundsAggregator.destroy(),g.superclass.onMapDestroy.call(this,e)},_pixelBoundsChangeCallback:function(){this.events.fire("pixelboundschange")},_geoBoundsChangeCallback:function(){this.events.fire("boundschange")},_onAdd:function(e,t){this.events.fire("add",new u({index:e,child:t,type:"add",target:this}))},_onRemove:function(e,t){this.events.fire("remove",new u({index:e,child:t,type:"remove",target:this}))},_onSet:function(e,t,n){this.events.fire("set",new u({index:e,prevChild:t,child:n,type:"set",target:this}))}}),s.setRule({name:"geoObject",rule:p}),s.setRule({name:"geoObject",key:["projection"],rule:"plain"}),e(g)})}],["5(",function(e){e.modules.define("map.Hint",["util.defineClass","Hint","component.sharedEntity.manager.Popup","event.Manager","map.optionMapper","option.Manager","option.Router","util.component","vow","popup.managerStorage"],function(e,t,n,i,o,s,r,a,l,c,u){function h(e){this._map=e,this.events=new o({context:this}),this._hint=new n(e),this._hint.options.setParent(this._map.options),this._sharingManager=new i(this,this._hint,this._map),this._forkOptions=new r,this._setupListeners()}t(h,l.createProxyMethods(function(){return this._sharingManager},["capture","open","close","isOpen","getOverlay","getOverlaySync","getOwner","setPosition","getPosition","setData","getData","setOptions","getOptions"]),{destroy:function(){this._clearListeners(),this.capture(null),this._hint.destroy()},capture:function(e){var t=this._sharingManager.capture(e);return t.then(this._reset,this),t},open:function(e,t,n){e=e||this._map.getCenter();var i=c.defer(),o=function(e){i.reject(e)};return this._sharingManager.perform("open",[e,t,n],this,function(e){c.resolve(!e[2]||this.setOptions(e[2])).then(function(){i.resolve(this._sharingManager.getEntity().open(e[0],e[1]))},o,this)},o),i.promise()},setOptions:function(e){return this._sharingManager.perform("setOptions",[e],this,function(e){this._addForkOptions(),this._forkOptions.freeze().unsetAll().set(e[0]).unfreeze()})},getOptions:function(){return this._sharingManager.perform("getOptions",null,this,function(){return this._addForkOptions(),this._forkOptions})},_setupListeners:function(){this._actionListeners=this._map.events.group().add(["actionbegin","actiontick"],this._onAction,this)},_clearListeners:function(){this._actionListeners.removeAll()},_onAction:function(){this.isOpen()&&this.capture(null)},_addForkOptions:function(){var e=this._hint.options.getParent();e&&"function"==typeof e.spliceParents?e.indexOfParent(this._forkOptions)==-1&&e.spliceParents(0,0,this._forkOptions):this._hint.options.setParent(new a(this._forkOptions,e))},_reset:function(){this.getOwner()==this._map&&this._hint.options.setParent(this._map.options),this._forkOptions.unsetAll()}}),u.add("map#hint",h),e(h)})}],["!d",function(e){e.modules.define("map.layer.Manager",["util.defineClass","LayerCollection","layer.optionMapper","option.Manager","map.optionMapper"],function(t,n,i,o,s,r){function a(e,t){if(0==e.indexOf("hotspotLayer"))return e;var n="layer"+e.slice(0,1).toUpperCase()+e.slice(1);return 0==e.indexOf("balloon")||0==e.indexOf("hint")?[n,e]:n}var l=function(e,t){l.superclass.constructor.call(this,t),this.options=new s({},e.options,"layerManager",o),this._map=e,this._mapListeners=this._map.events.group().add("destroy",this._onMapDestroy,this)};n(l,i,{setParent:function(){if(e.env.debug)throw new Error("map.layer.Manager: невозможно выполнить операцию setParent")},getMap:function(){return this._map},_onMapDestroy:function(){this._mapListeners.removeAll(),this._map=null,this.removeAll(),this.options.setParent(null)}}),r.setRule({name:"layerManager",rule:a}),r.setRule({name:"layerManager",key:["projection"],rule:"plain"}),t(l)})}],["!e",function(e){e.modules.define("map.margin.Accessor",["event.Manager"],function(e,t){function n(e,t){return e.left==t.left&&e.right==t.right&&e.top==t.top&&e.bottom==t.bottom&&e.width==t.width&&e.height==t.height}var i=function(e){this.events=new t({context:this}),this.setArea(e)};i.prototype={setArea:function(e){return this._screenArea&&n(this._screenArea,e)||(this._screenArea=e,this.events.fire("change")),this},getArea:function(){return this._screenArea},remove:function(){return this.events.fire("remove"),this}},e(i)})}],["!g",function(e){e.modules.define("map.margin.Manager",["event.Manager","map.margin.Accessor","util.array","map.margin.util.findLargestFreeArea"],function(e,t,n,i,o){function s(e,t){return[Math.round(e[0][1]),Math.round(t[0]-e[1][0]),Math.round(t[1]-e[1][1]),Math.round(e[0][0])]}function r(e,t){var n,i,o=t[0],s=t[1],r=a(e.width,o),l=a(e.height,s),c=null;return n=e.hasOwnProperty("left")?a(e.left,o):e.hasOwnProperty("right")?o-a(e.right,s)-r:0,i=e.hasOwnProperty("top")?a(e.top,s):e.hasOwnProperty("bottom")?s-a(e.bottom,s)-l:0,r>0&&l>0&&(c=[[n,i],[n+r,i+l]]),c}function a(e,t){if("string"==typeof e){var n=e[e.length-1];e="%"==n?Number(e.replace("%",""))/100*t:"x"==n?Number(e.replace("px","")):Number(e)}return e}function l(e,t){return e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]}var c=function(e){this._mapContainer=e.container,this._margin=[0,0,0,0],this._accessors=[],this.events=new t({context:this}),this._setupMapListener()};c.prototype={getMargin:function(){return this._margin},addArea:function(e){var t=new n(e);return t.events.add("change",this._recalculateMargin,this).add("remove",this._onAccessorRemoved,this),this._accessors.push(t),this._recalculateMargin(),t},destroy:function(){return this._teardownMapListener(),this},_onAccessorRemoved:function(e){var t=e.get("target");t.events.remove("change",this._recalculateMargin,this).remove("remove",this._onAccessorRemoved,this),i.remove(this._accessors,t),this._recalculateMargin()},_recalculateMargin:function(){var e=[],t=this._mapContainer.getSize();i.each(this._accessors,function(n){var i=r(n.getArea(),t);i&&e.push(i)},this);var n=[0,0,0,0];if(e.length>0){var a=o(e,t);a&&(n=s(a,t))}l(n,this._margin)||(this._margin=n,this.events.fire("change"))},_setupMapListener:function(){this._mapContainer.events.add("sizechange",this._recalculateMargin,this)},_teardownMapListener:function(){this._mapContainer.events.remove("sizechange",this._recalculateMargin,this)}},e(c)})}],[":s",function(e){e.modules.define("map.margin.util.findLargestFreeArea",["util.array"],function(e,t){function n(e,t){for(var n=e.hLines,s=e.vLines,r=e.pixelBoundsArray,a=null,l=0,c=s.length-1;l<c;l++){var u=o(r,s[l],n[t],s[l+1],n[t+1]);u?(null!=a&&i(e,a,l,t),a=null):null==a&&(a=l)}null!=a&&i(e,a,l,t)}function i(e,t,n,i){for(var o=e.hLines,s=e.vLines,r=e.pixelBoundsArray,a=s[t],l=s[n],c=o[0],u=o[o.length-1],h=o[i],d=o[i+1],g=0,p=r.length;g<p;g++){var m=r[g];m[0][0]<=a&&m[1][0]<=a||m[0][0]>=l&&m[1][0]>=l||(c<m[1][1]&&h>=m[1][1]&&(c=m[1][1]),u>m[0][1]&&d<=m[0][1]&&(u=m[0][1]))}var f=(l-a)*(u-c);e.maxArea<f&&(e.maxArea=f,e.result=[[a,c],[l,u]])}function o(e,t,n,i,o){for(var s=!1,r=0,a=e.length;r<a;r++){var l=e[r],s=t>=l[0][0]&&i<=l[1][0]&&n>=l[0][1]&&o<=l[1][1];if(s)break}return s}var s=function(e,t){return e-t},r=function(e,i){for(var o={hLines:[0],vLines:[0],result:null,pixelBoundsArray:e,maxArea:0},r=o.hLines,a=o.vLines,l=0,c=e.length;l<c;l++){var u=e[l];t.indexOf(a,u[0][0])==-1&&a.push(u[0][0]),t.indexOf(a,u[1][0])==-1&&a.push(u[1][0]),t.indexOf(r,u[0][1])==-1&&r.push(u[0][1]),t.indexOf(r,u[1][1])==-1&&r.push(u[1][1])}r.sort(s),a.sort(s),r[r.length-1]!=i[1]&&r.push(i[1]),a[a.length-1]!=i[0]&&a.push(i[0]);for(var l=0,c=r.length-1;l<c;l++)n(o,l);return o.result};e(r)})}],["5,",function(e){e.modules.define("map.metaOptions",["option.Manager","option.Mapper","projection.wgs84Mercator","meta.internal"],function(t,n,i,o,s){var r=new i,a=new n({},null,null,r),l=s.suppressDistribution;a.mapper=r,a.set({projection:o,dragInertia:!0,minZoom:e.env.restrictions&&e.env.restrictions.minZoom||0,maxZoom:23,dblClickTimeout:400,touchContextMenuTimeout:400,pointerContextMenuTimeout:1e3,avoidFractionalZoom:!0,autoFitToViewport:"ifNull",autoFitToViewportDelay:200,restrictMapArea:!1,balloonManager:"map#balloon",hintManager:"map#hint",fullscreenZIndex:1e4,exitFullscreenByEsc:!0,suppressMapOpenBlock:l}),t(a)})}],["5:",function(e){e.modules.define("map.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],[":t",function(e){e.modules.define("map.pane.helper.areas",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("areas",function(e){return new t(e,{zIndex:n.areas})}),e({})})}],[":u",function(e){e.modules.define("map.pane.helper.balloon",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("balloon",function(e){return new t(e,{zIndex:n.balloon})}),e({})})}],[":v",function(e){e.modules.define("map.pane.helper.controls",["pane.StaticPane","constants.paneZIndex","map.pane.helper.storage","pane.controls.css"],function(e,t,n,i){i.add("controls",function(e){return new t(e,{zIndex:n.controls,css:{width:"100%"}})}),e({})})}],[":w",function(e){e.modules.define("map.pane.helper.copyrights",["pane.StaticPane","constants.paneZIndex","Monitor","map.pane.helper.storage","util.dom.style","util.extend"],function(e,t,n,i,o,s,r){function a(e){for(var t in e)e.hasOwnProperty(t)&&"auto"!=e[t]&&(e[t]+="px");return e}o.add("copyrights",function(e){function o(){var t,n={left:"auto",right:"auto",top:"auto",bottom:"auto"},i=e.options.get("copyrightPosition"),o=e.state.get("margin");return"undefined"!=typeof i?(i=r({},n,i),t=i):t=r({},n,{bottom:o[2]+5,right:o[1]+3,left:o[3]+10}),a(t)}var l=new t(e,{zIndex:n.copyrights,css:r(o(),{height:0})}),c=function(){s.css(l.getElement(),o())},u=new i(e.state).add("margin",c),h=new i(e.options).add("copyrightPosition",c);return e.events.once("destroy",function(){u.destroy(),h.destroy()}),l}),e({})})}],[":x",function(e){e.modules.define("map.pane.helper.editor",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("editor",function(e){return new t(e,{zIndex:n.editor})}),e({})})}],[":y",function(e){e.modules.define("map.pane.helper.editorActiveVertex",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("editorActiveVertex",function(e){return new t(e,{zIndex:n.editorActiveVertex})}),e({})})}],[":A",function(e){e.modules.define("map.pane.helper.editorMenu",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("editorMenu",function(e){return new t(e,{overflow:"visible",zIndex:n.editorMenu})}),e({})})}],[":B",function(e){e.modules.define("map.pane.helper.ground",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage","map.metaOptions","theme.browser.current"],function(e,t,n,i,o){i.add("ground",function(e){return new t(e,{zIndex:n.ground,margin:o.get("groundPaneViewportMargin",128)})}),e({})})}],[":C",function(e){e.modules.define("map.pane.helper.ground-webgl",["pane.movable.TransformPane","constants.paneZIndex","map.pane.helper.storage","map.metaOptions","theme.browser.current"],function(e,t,n,i,o){i.add("ground-webgl",function(e){return new t(e,{zIndex:n.ground,margin:0})}),e({})})}],[":D",function(e){e.modules.define("map.pane.helper.hint",["pane.StaticPane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("hint",function(e){return new t(e,{zIndex:n.hint,checkContextMenu:!0})}),e({})})}],[":E",function(e){e.modules.define("map.pane.helper.outerBalloon",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("outerBalloon",function(e){return new t(e,{overflow:"visible",zIndex:n.outerBalloon})}),e({})})}],[":F",function(e){e.modules.define("map.pane.helper.outerHint",["pane.StaticPane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("outerHint",function(e){return new t(e,{overflow:"visible",zIndex:n.outerHint,checkContextMenu:!0})}),e({})})}],[":G",function(e){e.modules.define("map.pane.helper.overlaps",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("overlaps",function(e){return new t(e,{zIndex:n.overlaps})}),e(!0)})}],[":H",function(e){e.modules.define("map.pane.helper.panel",["pane.StaticPane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("panel",function(e){return new t(e,{zIndex:n.controls+1,css:{bottom:0,top:void 0,width:"100%"}})}),e({})})}],[":K",function(e){e.modules.define("map.pane.helper.places",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("places",function(e){return new t(e,{zIndex:n.places})}),e({})})}],[":L",function(e){e.modules.define("map.pane.helper.shadows",["pane.MovablePane","constants.paneZIndex","map.pane.helper.storage"],function(e,t,n,i){i.add("shadows",function(e){return new t(e,{zIndex:n.shadows})}),e({})})}],[":M",function(e){e.modules.define("map.pane.helper.storage",["util.Storage"],function(e,t){e(new t)})}],["!h",function(e){e.modules.define("map.pane.Manager",["util.defineClass","util.array","util.dom.element","util.dom.style","util.dom.className","map.pane.helper.storage","util.css","map.pane.helper.areas","map.pane.helper.balloon","map.pane.helper.controls","map.pane.helper.copyrights","map.pane.helper.editor","map.pane.helper.ground","map.pane.helper.ground-webgl","map.pane.helper.hint","map.pane.helper.outerBalloon","map.pane.helper.outerHint","map.pane.helper.overlaps","map.pane.helper.panel","map.pane.helper.places","map.pane.helper.shadows","map.paneManager.css"],function(t,n,i,o,s,r,a,l){function c(e){this._map=e,this._innerElement=null,this._outerElement=null,this._hash={},this._array=[]}n(c,{getInnerElement:function(){return this._innerElement||(this._innerElement=this._createInnerElement())},getOuterElement:function(){return this._outerElement||(this._outerElement=this._createOuterElement())},get:function(e){return this._hash[e]||this._tryToCreatePane(e),this._hash[e]?this._hash[e].pane:null},append:function(t,n){if(e.env.debug&&this._hash[t])throw new Error('map.pane.Manager.append: Для данной карты пейн с ключом "'+t+'" уже существует');this._addPane(t,n)},insertBefore:function(t,n,i){if(e.env.debug){if(this._hash[t])throw new Error('map.pane.Manager.insertBefore: Для данной карты пейн с ключом "'+t+'" уже существует');if(!this._hash[i])throw new Error('map.pane.Manager.insertBefore: Для данной карты пейн с ключом "'+i+'" отсутствует')}this._addPane(t,n,i)},remove:function(t){for(var n=null,i=0,s=this._array.length;i<s;i++)if(this._array[i].pane==t){
n=this._array[i];break}if(n){t.events.setParent(null);var a=t.getElement();o.remove(a),r.remove(a,l.addPrefix(n.key+"-pane")),n.listeners.removeAll(),this._array.splice(i,1),delete this._hash[n.key],this._refreshZIndexes()}else if(e.env.debug)throw new Error("map.pane.Manager.remove: Для данной карты пейн отсутствует")},getUpper:function(){return this._findPane(0==arguments.length?this._array:this._keysToPanes(arguments),!0)},getLower:function(){return this._findPane(0==arguments.length?this._array:this._keysToPanes(arguments),!1)},destroy:function(){for(var e=0,t=this._array.length;e<t;e++){var n=this._array[e];n.listeners.removeAll(),n.pane.destroy()}this._innerElement&&o.remove(this._innerElement),this._outerElement&&o.remove(this._outerElement)},_createInnerElement:function(){var e=this._map.container;return o.create({parentNode:e.getElement(),className:l.addPrefix("inner-panes")})},_createOuterElement:function(){var e=this._map.container;return o.create({parentNode:e.getElement(),className:l.addPrefix("outer-panes")})},_tryToCreatePane:function(e){var t=a.get(e);t&&this._addPane(e,t(this._map))},_addPane:function(e,t,n){var o={key:e,pane:t,zIndex:0,listeners:t.events.group().add("zindexchange",this._onZIndexChange,this).add("overflowchange",this._onOverflowChange,this)};this._hash[e]=o,n?this._array.splice(i.indexOf(this._array,this._hash[n]),0,o):this._array.push(o),this._refreshZIndexes();var s=t.getElement();r.add(s,l.addPrefix(e+"-pane")),this._overflowToElement(t.getOverflow()).appendChild(s),t.events.setParent(this._map.container.events)},_findPane:function(e,t){for(var n=null,i=0,o=e.length;i<o;i++){var s=e[i];n&&!(t?n.zIndex<s.zIndex:n.zIndex>s.zIndex)||(n=s)}return n?n.key:null},_onZIndexChange:function(){this._refreshZIndexes()},_onOverflowChange:function(e){var t=e.get("target");this._overflowToElement(t.getOverflow()).appendChild(t.getElement())},_refreshZIndexes:function(){for(var e=0,t=this._array.length;e<t;e++){var n=this._array[e];n.zIndex=n.pane.getElement().style.zIndex=n.pane.getZIndex()*t+e}},_overflowToElement:function(t){if("visible"==t)return this.getOuterElement();if("hidden"==t)return this.getInnerElement();if(e.env.debug)throw new Error('map.pane.Manager: Неверный результат getOverflow(): "'+t+'"');return null},_keysToPanes:function(t){for(var n=[],i=0,o=t.length;i<o;i++){var s=t[i];if(this._hash[s]||this._tryToCreatePane(s),n[i]=this._hash[s],e.env.debug&&!n[i])throw new Error('map.pane.Manager: Пейн с именем "'+s+'" не найден')}return n}}),t(c)})}],["0U",function(e){e.modules.define("map.paneManager.css",["map-pane-manager"],function(e){e({})})}],["02",function(e){e.modules.define("map.ru.css",["map-ru-css"],function(e){e({})})}],["5@",function(e){e.modules.define("map.ZoomRange",["util.defineClass","component.ZoomRangeObserver","event.Manager","util.bind","util.math.areEqual","Monitor","vow"],function(e,t,n,i,o,s,r,a){var l=function(e,t){this._map=e,this._mapListeners=e.events.group().add("actionend",this._onActionEnd,this).add("destroy",this._onMapDestroy,this),this._mapOptionsMonitor=new r(this._map.options),this._mapOptionsMonitor.add(["minZoom","maxZoom"],this._onConstraintsChange,this),this._zoomRange=this._constraints=t,this._providersZoomRange=null,this._error=null,this._zoomRangeObserver=new n(o(this._onProviderChange,this)),this.events=new i};t(l,{get:function(e){var t=a.defer();return e||(e=this._map.getCenter({useMapMargin:this._map.options.get("coverageUseMapMargin",!1)}),this._lastDeferred=t),this._zoomRangeObserver.get(e).then(function(n){this._onReady(null,n,e,t)},function(n){this._onReady(n,null,e,t)},this),t.promise()},_onReady:function(e,t,n,i){var o;if(o=e?"noProvider"==e?this._constraints.slice():this._zoomRange:[Math.max(this._constraints[0],t[0]),Math.min(this._constraints[1],t[1])],this._lastDeferred==i&&s(n,this._map.getCenter(),1e-7)){var r=this._zoomRange;this._providersZoomRange=t,this._error=e,this._zoomRange=o.slice(),r[0]==o[0]&&r[1]==o[1]||this.events.fire("change",{oldZoomRange:r,newZoomRange:o})}i.resolve(o)},getCurrent:function(){return this._zoomRange.slice()},_onActionEnd:function(){this.get()},_onMapDestroy:function(){this._mapListeners.removeAll(),this._mapOptionsMonitor.destroy(),this._zoomRangeObserver.destroy()},_onConstraintsChange:function(){var e=this._zoomRange,t=this._map,n=this._providersZoomRange;this._constraints=[t.options.get("minZoom"),t.options.get("maxZoom")],n?this._zoomRange=[Math.max(this._constraints[0],n[0]),Math.min(this._constraints[1],n[1])]:this._zoomRange=this._constraints.slice(),e[0]==this._zoomRange[0]&&e[1]==this._zoomRange[1]||this.events.fire("change",{oldZoomRange:e,newZoomRange:this._zoomRange.slice()})},_onProviderChange:function(){this.get()},addProvider:function(e,t){return"function"==typeof e.getZoomRange&&this._zoomRangeObserver.addProvider(e,t),this},removeProvider:function(e){return"function"==typeof e.getZoomRange&&this._zoomRangeObserver.removeProvider(e),this}}),e(l)})}],["1o",function(e){e.modules.define("MapEvent",["util.defineClass","Event","mapEvent.overrideStorage","component.event.Cacher"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t),this._cache={},this._cacher=new o(this,this._cache,i)}t(s,n,{get:function(e){var t=this._cacher.get(e);return"undefined"==typeof t&&this.getSourceEvent()&&(t=this.getSourceEvent().get(e)),t},callMethod:function(e){var t=this._cacher.get(e);return"undefined"==typeof t&&this.getSourceEvent()?this.getSourceEvent().callMethod.apply(this.getSourceEvent(),arguments):t.apply(this.originalEvent,Array.prototype.slice.call(arguments,1))},clone:function(e){return new s(e,this.getSourceEvent())}}),e(s)})}],["5i",function(e){e.modules.define("mapEvent.override.common",["mapEvent.overrideStorage"],function(t,n){function i(e){return e.originalEvent.position?e.originalEvent.position:o(e,"page")}function o(t,n){var i=t.get("domEvent");if(e.env.debug&&!i)throw new Error("MapEvent.getDomEventPixels: Не удалось получить DOM-событие");return[i.get(n+"X"),i.get(n+"Y")]}n.add("coords",function(t){var n=t.get("map"),i=t.get("target"),o=(i.options||n.options).get("projection");if(e.env.debug){if(!o)throw new Error("MapEvent.coordsOverride: Не удалось получить проекцию");if(!n)throw new Error("MapEvent.coordsOverride: У события нет ссылки на карту")}return o.fromGlobalPixels(t.get("globalPixels"),n.action.getCurrentState().zoom)}),e.env.debug&&n.add("coordPosition",function(){throw new Error('MapEvent: Поле "coordPosition" не поддерживается, используйте "coords"')}),n.add("globalPixels",function(t){if(e.env.debug){if(!t.get("pagePixels"))throw new Error("MapEvent.globalPixelsOverride: У события нет пиксельных координат");if(!t.get("map"))throw new Error("MapEvent.globalPixelsOverride: У события нет ссылки на карту")}return t.get("map").converter.pageToGlobal(t.get("pagePixels"))}),n.add("globalPixelPosition",function(){throw new Error('MapEvent: Поле "globalPixelPosition" не поддерживается, используйте "globalPixels"')}),n.add("position",i),n.add("pagePixels",i),n.add("clientPixels",function(e){return o(e,"client")}),t(!0)})}],["5j",function(e){e.modules.define("mapEvent.overrideStorage",["util.Storage"],function(e,t){e(new t)})}],["1r",function(e){e.modules.define("MapType",[],function(e){var t=function(e,t){this._name=e,this._layers=t};t.prototype={getLayers:function(){return this._layers},getName:function(e){return this._name}},e(t)})}],["5Q",function(e){e.modules.define("mapType.storage",["util.Storage"],function(e,t){e(new t)})}],["1v",function(e){e.modules.define("meta",[],function(t){t({version:e.env.version,coordinatesOrder:e.env.coordinatesOrder,mode:e.env.debug?"debug":"release",languageCode:e.env.languageCode,countryCode:e.env.countryCode,ns:e.ns,isEnterprise:!!e.env.enterprise})})}],["5I",function(e){e.modules.define("meta.internal",["meta"],function(e,t){var n=window.location.hostname,i=!!n.match(/(yandex|яндекс)\.(ru|com|by|ua|com\.tr|com\.ua|kz|рф)$/i),o=!!n.match(/tech\.yandex\.(ru|com|by|ua|com\.tr|com\.ua|kz|рф)$/i),s="RU"==t.countryCode&&(o||!i),r=!o&&(t.isEnterprise||i);e({meta:t,isYandex:i,isYandexTech:o,displayAdvert:s,suppressDistribution:r})})}],["1x",function(e){e.modules.define("Monitor",["util.extend","util.bind","util.array"],function(t,n,i,o){function s(e){this._dataManager=e,this._groups=[],this._names={},this._values={},this._oldValues=null,this._cleanTimeoutId=0,this._clearGroupsCallback=i(function(){this._cleanTimeoutId=0,this._clearGroups()},this)}function r(e,t,n,i){var o={names:"string"==typeof e?[e]:e.slice(),singleName:"string"==typeof e,changeCallback:t,context:n,resolveCallbacks:{},compareCallbacks:{},defaultValues:{},deleted:!1};if(i)for(var s=o.names,r=o.resolveCallbacks,a=o.compareCallbacks,l=o.defaultValues,c=0,u=s.length;c<u;c++)e=s[c],r[e]=i.resolveCallbacks&&i.resolveCallbacks[e]||i.resolveCallback,a[e]=i.compareCallbacks&&i.compareCallbacks[e]||i.compareCallbacks,l[e]=i.defaultValues&&"undefined"!=typeof i.defaultValues[e]?i.defaultValues[e]:i.defaultValue;return o}n(s.prototype,{add:function(t,n,i,o){this._groups.length||this._dataManager.events.add("change",this._onChange,this);var s=r(t,n,i,o);if(e.env.debug)for(var a=0,l=s.names.length;a<l;a++)if(this._names[s.names[a]])throw new Error('Monitor.add: name "'+s.names[a]+'" has already been added.');for(var a=0,l=s.names.length;a<l;a++)t=s.names[a],this._names[t]=s,this._values[t]=this._resolveName(t);return this._groups.push(s),this},remove:function(e){if("string"==typeof e)this._removeField(e);else for(var t=0,n=e.length;t<n;t++)this._removeField(e[t]);return this._groups.length||this._dataManager.events.remove("change",this._onChange,this),this},removeAll:function(){return this._values={},this._names={},this._groups=[],this._dataManager.events.remove("change",this._onChange,this),this},get:function(e){return this._values[e]},forceChange:function(){return this._onChange(),this},_removeField:function(t){if(e.env.debug&&!this._names[t])throw new Error('Monitor.remove: name "'+t+'" was not added.');var n=this._names[t];delete this._values[t],delete this._names[t],1==n.names.length?n.names[0]==t&&n.names.pop():n.names.splice(o.indexOf(n.names,t),1),n.names.length||(n.deleted=!0,this._cleanTimeoutId||(this._cleanTimeoutId=setTimeout(this._clearGroupsCallback,0)))},_resolveName:function(e){var t=this._names[e],n=t.resolveCallbacks[e]?t.context?t.resolveCallbacks[e].call(t.context,e,this._dataManager):t.resolveCallbacks[e](e,this._dataManager):this._dataManager.get(e);return"undefined"==typeof n?t.defaultValues[e]:n},_onChange:function(){for(var e=this._values,t=0,n=this._groups.length;t<n;t++){if(!this._groups.length)return;var i=this._groups[t];i.deleted||this._checkGroup(i,e)}},_checkGroup:function(e,t){for(var i,o,s=!1,r=0,a=e.names.length;r<a;r++){var l=e.names[r],c=this._resolveName(l),u=t[l];(e.compareCallbacks[l]?e.context?e.compareCallbacks[l].call(e.context,c,u):e.compareCallbacks[l](c,u):c!==u)&&(s||(i=e.singleName?u:n({},t),o=e.singleName?c:n({},t),s=!0),e.singleName||(i[l]=u,o[l]=c),this._values[l]=c)}s&&(e.context?e.changeCallback.call(e.context,o,i):e.changeCallback(o,i))},_clearGroups:function(){for(var e,t=0,n=this._groups.length-1;n>=0;n--)this._groups[n].deleted&&(t++,e=n,n>0)||t&&(this._groups.length==t?this._groups=[]:this._groups.splice(e,t),t=0)}}),s.prototype.destroy=s.prototype.removeAll,t(s)})}],[":q",function(e){e.modules.define("multiRoute.component.BoundsAggregator",["util.defineClass","util.bounds","util.pixelBounds","component.EventFreezer"],function(e,t,n,i,o){function s(e,t){this._collections=e,this._callbacks=t,this._boundsCache=r,this._pixelBoundsCache=r,this._freezer=new o(this._freezerCallback,this);for(var n=0,i=e.length;n<i;n++)e[n].events.add("boundschange",this._onBoundsChange,this).add("pixelboundschange",this._onPixelBoundsChange,this).add("mapchange",this._onMapChange,this)}var r={};t(s,{freeze:function(){this._freezer.freeze()},unfreeze:function(){this._freezer.unfreeze()},isFrozen:function(){return this._freezer.isFrozen()},getBounds:function(){return this._boundsCache!=r?this._boundsCache:this._boundsCache=this._calcBounds()},getPixelBounds:function(){return this._pixelBoundsCache!=r?this._pixelBoundsCache:this._pixelBoundsCache=this._calcPixelBounds()},destroy:function(){for(var e=0,t=this._collections.length;e<t;e++)this._collections[e].events.remove("mapchange",this._onMapChange,this).remove("pixelboundschange",this._onPixelBoundsChange,this).remove("boundschange",this._onBoundsChange,this)},_freezerCallback:function(e){if(e.newBounds){var t=this._callbacks.boundsChange;t.callback.call(t.context)}if(e.newPixelBounds){var n=this._callbacks.pixelBoundsChange;n.callback.call(n.context)}},_onPixelBoundsChange:function(){this._pixelBoundsCache=r,this._freezer.fire("PixelBounds",null,!0)},_onBoundsChange:function(){this._boundsCache=r,this._freezer.fire("Bounds",null,!0)},_onMapChange:function(){this._boundsCache=r,this._pixelBoundsCache=r,this._freezer.freeze(),this._freezer.fire("Bounds",null,!0),this._freezer.fire("PixelBounds",null,!0),this._freezer.unfreeze()},_calcBounds:function(){for(var e=null,t=0,i=this._collections.length;t<i;t++){var o=this._collections[t],s=o.getBounds();s&&(e=e?n.fromBounds([e,s],o.options.get("projection")):s)}return e},_calcPixelBounds:function(){for(var e=null,t=0,n=this._collections.length;t<n;t++){var o=this._collections[t],s=o.getPixelBounds();s&&(e=e?i.fromBounds([e,s]):s)}return e}}),e(s)})}],["!m",function(e){e.modules.define("multiRoute.component.DecoratorEventMapper",["util.defineClass","event.Mapper","Event","util.extend","util.bind"],function(e,t,n,i,o,s){function r(e,t){r.superclass.constructor.call(this,e,o({"*":s(this._defaultEventMapping,this)},t))}t(r,n,{_defaultEventMapping:function(e){return new i({target:this.getTargetEventManager().params.context},e)}}),e(r)})}],[":j",function(e){e.modules.define("multiRoute.component.EventMappingTable",["util.defineClass","geoObject.EventMappingTable"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e),this.update=!1}t(i,n),e(i)})}],[":U",function(e){e.modules.define("multiRoute.model.common.emptyJson",[],function(e){e({type:"FeatureCollection",features:[{type:"FeatureCollection",features:[],properties:{name:"waypoints"}},{type:"FeatureCollection",features:[],properties:{name:"viapoints"}},{type:"FeatureCollection",features:[],properties:{name:"routes"}}],properties:{}})})}],[":3",function(e){e.modules.define("multiRoute.model.component.RequestQuery",["util.defineClass","util.id","util.cancelableCallback"],function(e,t,n,i){function o(e,t,n){this._requestCallback=e,this._cancelCallback=t,this._context=n,this._requests=[]}t(o,{push:function(e,t,o,s){var r=n.gen(),a=i.create(function(){this._finalizeRequest(r),t.apply(s,arguments)},this),l=i.create(function(){this._finalizeRequest(r),o.apply(s,arguments)},this);this._requestCallback.call(this._context,e,a,l),this._requests.push({id:r,requestData:e,successHandler:a,errorHandler:l})},clear:function(){for(var e=0,t=this._requests.length;e<t;e++)this._cancelRequest(this._requests[e]);this._requests=[]},_finalizeRequest:function(e){for(var t=0,n=0,i=this._requests.length;n<i;n++){var o=this._requests[n];if(t++,o.id==e)break;this._cancelRequest(o)}this._requests.splice(0,t)},_cancelRequest:function(e){e.successHandler.cancel(),e.errorHandler.cancel(),this._cancelCallback.call(this._context,e.requestData)}}),e(o)})}],[":4",function(e){e.modules.define("multiRoute.model.component.RequestSieve",["util.defineClass","util.bind"],function(e,t,n){function i(e,t,i){this._timeout=e,this._callback=t,this._context=i,this._lastRequest=null,this._timeoutId=NaN,this._bindedTimeoutCallback=n(this._timeoutCallback,this)}t(i,{process:function(){this._lastRequest=arguments,this._timeoutId||(this._timeoutId=setTimeout(this._bindedTimeoutCallback,0))},setTimeout:function(e){this._timeout=e},getTimeout:function(){return this._timeout},stop:function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=NaN)},_timeoutCallback:function(){if(this._timeoutId=NaN,this._lastRequest){var e=this._lastRequest;this._lastRequest=null,this._timeoutId=setTimeout(this._bindedTimeoutCallback,this._timeout),this._callback.apply(this._context,e)}}}),e(i)})}],[":*",function(e){e.modules.define("multiRouter.base.LeafView",["util.defineClass","multiRouter.base.View"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t)}t(i,n,{setupModelListeners:function(){this.model.events.add("jsonchange",this.onModelJsonChange,this)},clearModelListeners:function(){this.model.events.remove("jsonchange",this.onModelJsonChange,this)},onModelJsonChange:function(){this.geometry.setCoordinates(this.model.geometry.getCoordinates()),this.events.fire("update")}}),e(i)})}],[":(",function(e){e.modules.define("multiRouter.base.ParentView",["util.defineClass","multiRouter.base.View","component.array.ParentArray","event.Mapper","multiRoute.component.EventMappingTable","multiRoute.component.BoundsAggregator"],function(e,t,n,i,o,s,r){function a(e,t){a.superclass.constructor.call(this,e,t);var n=this.createSubCollections();this._parentComponent=new i(n,this,{},new o(this.events,new s(this))),this.boundsAggregator=new r(n,{pixelBoundsChange:{callback:this._pixelBoundsChangeCallback,context:this},boundsChange:{callback:this._boundsChangeCallback,context:this}})}t(a,n,{getBounds:function(){return this.boundsAggregator.getBounds()},getPixelBounds:function(){return this.boundsAggregator.getPixelBounds()},destroy:function(){this.boundsAggregator.destroy(),a.superclass.destroy.call(this)},_pixelBoundsChangeCallback:function(){this.events.fire("pixelboundschange")},_boundsChangeCallback:function(){this.events.fire("boundschange")}}),e(a)})}],[":)",function(e){e.modules.define("multiRouter.base.Path",["util.defineClass","multiRouter.base.ParentView","GeoObjectCollection","geometryEditor.component.SubEntityManager","component.array.ParentArray","option.Mapper","util.array","util.math.cycleRestrict","geometry.component.findClosestPathPosition"],function(e,t,n,i,o,s,r,a,l,c){function u(e,t){u.superclass.constructor.call(this,e,t),this._segmentsManager=new o(e.getSegments(),{create:{callback:this.segmentCreateCallback,context:this},destroy:{callback:this.segmentDestroyCallback,context:this}},"model")}function h(e,t){return t[0]>=e[0][0]&&t[1]<=e[0][1]&&t[0]<=e[1][0]&&t[1]>=e[1][1]}t(u,n,{createSubCollections:function(){return this._segmentsCollection=new i,[this._segmentsCollection]},getSegments:function(){return this._segmentsCollection},destroy:function(){this._segmentsManager.destroy(),u.superclass.destroy.call(this)},setupModelListeners:function(){this.model.events.add("jsonchange",this._onModelJsonChange,this)},clearModelListeners:function(){this.model.events.remove("jsonchange",this._onModelJsonChange,this)},_onModelJsonChange:function(e){this.boundsAggregator.freeze(),e.get("segmentsChange")&&this._segmentsManager.update(this.model.getSegments()),this.boundsAggregator.unfreeze(),this.events.fire("update")},findSegment:function(e){for(var t=this.getMap(),n=t.options.get("projection"),i=t.getZoom(),o=n.isCycled()[0],s=Math.pow(2,i+8)/2,r=function(t){var r=n.toGlobalPixels(t,i);return o&&(r[0]=l(r[0],e[0]-s,e[0]+s)),r},u=this.options.get("strokeWidth")/2,d=[],g=this.getSegments(),p=0,m=g.length;p<m;p++){var f=g[p],_=f.properties.get("boundedBy"),M=[r(_[0]),r(_[1])],v=[[M[0][0]-u,M[0][1]+u],[M[1][0]+u,M[1][1]-u]];h(v,e)&&d.push(f)}if(1==d.length)return d[0];for(var y,p=0,m=d.length,j=1/0;p<m;p++){var f=d[p],b=c(a.map(f.getCoordinates(),r),e).distance;b<j&&(j=b,y=f)}return y}}),e(u)})}],[":,",function(e){e.modules.define("multiRouter.base.Point",["util.defineClass","multiRouter.base.LeafView","geometry.Point"],function(e,t,n,i){function o(e,t){o.superclass.constructor.call(this,e,t),this._captured=!1}t(o,n,{createGeoObjectFeature:function(e){return{geometry:new i(e.geometry.getCoordinates()),properties:e.properties}},capture:function(){this._captured=!0},release:function(){this._captured=!1},isCaptured:function(){return this._captured},onModelJsonChange:function(){this.isCaptured()||o.superclass.onModelJsonChange.call(this)}}),e(o)})}],["::",function(e){e.modules.define("multiRouter.base.Route",["util.defineClass","multiRouter.base.ParentView","GeoObjectCollection","geometryEditor.component.SubEntityManager","multiRouter.preset"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t),this._pathsManager=new o(e.getPaths(),{create:{callback:this._pathCreateCallback,context:this},destroy:{callback:this._pathDestroyCallback,context:this}},"model")}t(s,n,{createSubCollections:function(){return this._pathsCollection=new i,[this._pathsCollection]},getPaths:function(){return this._pathsCollection},destroy:function(){this._pathsManager.destroy(),s.superclass.destroy.call(this)},setupModelListeners:function(){this.model.events.add("jsonchange",this._onModelJsonChange,this)},clearModelListeners:function(){this.model.events.remove("jsonchange",this._onModelJsonChange,this)},_onModelJsonChange:function(e){this.boundsAggregator.freeze(),e.get("pathsChange")&&this._pathsManager.update(this.model.getPaths()),this.boundsAggregator.unfreeze(),this.events.fire("update")},_pathCreateCallback:function(e,t){var n=this.createSubPath(e,t);return this._pathsCollection.add(n,t),n},_pathDestroyCallback:function(e){this._pathsCollection.remove(e),e.destroy()}}),e(s)})}],[":;",function(e){e.modules.define("multiRouter.base.Segment",["util.defineClass","multiRouter.base.LeafView","geometry.LineString"],function(e,t,n,i){function o(e,t){o.superclass.constructor.call(this,e,t)}t(o,n,{createGeoObjectFeature:function(e){return{geometry:new i(e.geometry.getCoordinates()),properties:e.properties}}}),e(o)})}],[":@",function(e){e.modules.define("multiRouter.base.View",["util.defineClass","geoObject.abstract.GeoObject"],function(e,t,n){function i(e,t){this.model=e,i.superclass.constructor.call(this,this.createGeoObjectFeature(e),t),this.setupModelListeners()}t(i,n,{createGeoObjectFeature:function(e){return e},destroy:function(){this.clearModelListeners()}}),e(i)})}],[":z",function(e){e.modules.define("multiRouter.component.PointsDragController",["util.defineClass","geometryEditor.component.SubEntityManager","event.Manager"],function(e,t,n,i){function o(e,t){this._wayPointsManager=new n(e.getWayPoints().toArray(),{create:{callback:this._pointCreateCallback,context:this},compare:{callback:this._pointIdentificationCallback,context:this},destroy:{callback:this._pointDestroyCallback,context:this}}),this._viaPointsManager=new n(e.getViaPoints().toArray(),{create:{callback:this._pointCreateCallback,context:this},compare:{callback:this._pointIdentificationCallback,context:this},destroy:{callback:this._pointDestroyCallback,context:this}}),e.events.add("update",this._onJsonViewUpdate,this),this.multiRouteJsonView=e,this._callbacks=t}o.staticEvents=new i,t(o,{destroy:function(){this.multiRouteJsonView.events.remove("update",this._onJsonViewUpdate,this),this._wayPointsManager.destroy(),this._viaPointsManager.destroy()},_onJsonViewUpdate:function(){this._wayPointsManager.update(this.multiRouteJsonView.getWayPoints().toArray()),this._viaPointsManager.update(this.multiRouteJsonView.getViaPoints().toArray())},_pointIdentificationCallback:function(e,t){return e.view==t},_pointCreateCallback:function(e){return{view:e,listeners:e.events.group().add("dragstart",this._onDragStart,this).add("drag",this._onDrag,this).add("dragend",this._onDragEnd,this)}},_pointDestroyCallback:function(e){e.listeners.removeAll()},_onDragStart:function(e){var t=this._callbacks.dragStart;t.callback.call(t.context,e.get("target"),e)},_onDrag:function(e){var t=this._callbacks.drag;t.callback.call(t.context,e.get("target"),e)},_onDragEnd:function(e){var t=this._callbacks.dragEnd;t.callback.call(t.context,e.get("target"),e)}}),e(o)})}],[":Q",function(e){e.modules.define("multiRouter.component.RouteBalloon",["util.defineClass","Balloon","geometry.LineString","util.scheduler.strategy.Raf","util.Associate"],function(e,t,n,i,o,s){function r(e){this._route=e,this._map=e.getMap(),this._route.events.add("mapchange",this._onMapChange,this),this._routeGeometryController=new a(e,{callback:this._routeGeometryCallback,context:this})}function a(e,t){this._route=e,this._callback=t,this._geometry=null,e.events.add("geometrychange",this._onRouteGeometryChange,this)}t(r,{open:function(e){this._balloon||(this._balloon=new n(this._map),this._balloon.options.setParent(this._route.options)),this._applyBalloonPosition(this._getBalloonPosition(this._routeGeometryController.getGeometry(),e))},close:function(){this._balloon&&this._balloon.isOpen()&&this._balloon.close()},destroy:function(){this._balloon&&this._balloon.isOpen()&&this._balloon.close(),this._routeGeometryController.destroy()},_getBalloonPosition:function(e,t){var n=e.getClosest(t);return n?n.position:null},_routeGeometryCallback:function(){this._balloon&&this._balloon.isOpen()&&this._balloon.close()},_applyBalloonPosition:function(e){e?this._balloon.isOpen()?this._balloon.setPosition(e):this._balloon.open(e,{properties:this._route.properties,route:this._route}):this._balloon.isOpen()&&this._balloon.close()},_onMapChange:function(){this._map=this._route.getMap(),this._map||this._balloon&&this._balloon.isOpen()&&this._balloon.close()}}),t(a,{getGeometry:function(){return this._geometry||this._createGeometry(),this._geometry},destroy:function(){this._route.events.remove("geometrychange",this._onRouteGeometryChange,this)},_createGeometry:function(){for(var e=this._route.getPaths(),t=[],n=0,o=e.getLength();n<o;n++)for(var s=e.get(n),r=s.getSegments(),a=0,l=r.getLength();a<l;a++){var c=r.get(a);t.push(c.geometry.getCoordinates())}this._geometry=new i(Array.prototype.concat.apply([],t)),this._geometry.options.setParent(this._route.options),this._geometry.setMap(this._route.getMap())},_onRouteGeometryChange:function(){this._geometry=null,this._raf&&(this._raf.stop(),this._raf=null),this._raf=new o(function(){this._raf=null,this._callback.callback.call(this._callback.context)},this),this._raf.start()}}),e(new s(function(e){return new r(e)}))})}],[":J",function(e){e.modules.define("multiRouter.driving.Path",["util.defineClass","multiRouter.base.Path","multiRouter.driving.Segment"],function(e,t,n,i){function o(e,t){o.superclass.constructor.call(this,e,t)}t(o,n,{segmentCreateCallback:function(e,t){var n=new i(e);return this.getSegments().add(n,t),n},segmentDestroyCallback:function(e){this.getSegments().remove(e),e.destroy()}}),e(o)})}],[":I",function(e){e.modules.define("multiRouter.driving.Route",["util.defineClass","multiRouter.base.Route","GeoObjectCollection","multiRouter.driving.Path","multiRouter.preset"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t)}t(s,n,{createSubPath:function(e){return new o(e)}}),e(s)})}],[":Z",function(e){e.modules.define("multiRouter.driving.Segment",["util.defineClass","multiRouter.base.Segment"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t)}t(i,n,{}),e(i)})}],["!o",function(e){e.modules.define("multiRouter.editor.addon",["util.defineClass","event.Manager","event.Mapper","Event","data.Manager","option.Manager","multiRouter.MultiRoute","util.Associate","util.cancelableCallback","data.Sync","yandex.counter"],function(t,n,i,o,s,r,a,l,c,u,h,d){function g(){this.editor.isActive()&&this.editor.stop()}function p(e){this._multiRoute=e,this.state=new r,this.events=new i({context:this}),this.options=new a({},e.options,"editorAddon"),this._editor=null,this._stateSync=null,this._editorEventMapper=new o(this.events,new m(this)),this._requireCallback=null}function m(e){this["*"]=function(t){return new s({target:e},t)}}var f=new c(function(e){return this.create(e),e.editor});f.create=function(e){"function"==typeof e.model.setReferencePoints&&(e.editor=new p(e),e.events.add("mapchange",g,e))},l.getMetaEventManager().add("create",function(e){f.create(e.get("target"))}),n(p,{start:function(t){this._editor||(this.state.setAll(t||{}),this._requireCallback=u.create(function(e){this._editor=new e(this._multiRoute,this.state.getAll()),this._editor.events.setParent(this._editorEventMapper),this._editor.options.setParent(this.options),this._stateSync=new h([this._editor.state,this.state]),this.events.fire("start")},this),e.modules.require(["multiRouter.Editor"],this._requireCallback),d.countByKey("modulesUsage","multiRoute.editor.start"))},stop:function(){this._editor?(this._stateSync.destroy(),this._editor.destroy(),this._editor=null,this.events.fire("stop")):this._requireCallback&&this._requireCallback.isActive()&&this._requireCallback.cancel()},isActive:function(){return!!this._editor}}),t(p)})}],[";a",function(e){e.modules.define("multiRouter.masstransit.Path",["util.defineClass","GeoObjectCollection","option.Mapper","multiRouter.base.Path","multiRouter.masstransit.TransferSegment","multiRouter.masstransit.TransportSegment","multiRouter.masstransit.WalkSegment","multiRouter.masstransit.SegmentMarker"],function(e,t,n,i,o,s,r,a,l){function c(e,t){c.superclass.constructor.call(this,e,t),this.options.setMapper(h)}var u=new i,h=new i,d=new i,g=i.addOptionalPrefix,p=i.addPrefix;u.setRule({name:"transferSegment",rule:function(e){return g(e,"transferSegment")}}),u.setRule({name:"transportSegment",rule:function(e){return g(e,"transportSegment")}}),u.setRule({name:"walkSegment",rule:function(e){return g(e,"walkSegment")}}),d.setRule({name:"walkMarker",rule:function(e){return[p(e,"walkMarker"),p(e,"marker"),e]}}),d.setRule({name:"transferMarker",rule:function(e){return[p(e,"transferMarker"),p(e,"marker"),e]}}),d.setRule({name:"transportMarker",rule:function(e){return[p(e,"transportMarker"),p(e,"marker"),e]}}),t(c,o,{createSubCollections:function(){var e=c.superclass.createSubCollections.call(this);return e[0].options.setMapper(u),this._markersCollection=new n,this._markersCollection.options.setMapper(d),e.push(this._markersCollection),e},getSegmentMarkers:function(){return this._markersCollection},segmentCreateCallback:function(e,t){var n=this._segmentTypeToSegmentClass[e.getType()],i=new n(e),o=new l(e);return o.options.setName(e.getType()+"Marker"),this.getSegments().add(i,t),this._markersCollection.add(o,t),{model:e,segment:i,marker:o}},segmentDestroyCallback:function(e){this.getSegments().remove(e.segment),this._markersCollection.remove(e.marker),e.segment.destroy(),e.marker.destroy()},_segmentTypeToSegmentClass:{walk:a,transport:r,transfer:s}}),e(c)})}],[";b",function(e){e.modules.define("multiRouter.masstransit.Route",["util.defineClass","multiRouter.base.Route","GeoObjectCollection","multiRouter.masstransit.Path","multiRouter.preset"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t)}t(s,n,{createSubPath:function(e){return new o(e)}}),e(s)})}],[";c",function(e){e.modules.define("multiRouter.masstransit.SegmentMarker",["util.defineClass","multiRouter.base.LeafView","geometry.Point"],function(e,t,n,i){function o(e,t){o.superclass.constructor.call(this,e,t)}t(o,n,{createGeoObjectFeature:function(e){return{geometry:new i(e.geometry.getCoordinates()[0]),properties:e.properties}},onModelJsonChange:function(){this.geometry.setCoordinates(this.model.geometry.getCoordinates()[0]),this.events.fire("update")}}),e(o)})}],[";d",function(e){e.modules.define("multiRouter.masstransit.TransferSegment",["util.defineClass","multiRouter.base.Segment"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t),this.options.setName("transferSegment")}t(i,n,{}),e(i)})}],[";e",function(e){e.modules.define("multiRouter.masstransit.TransportSegment",["util.defineClass","multiRouter.base.Segment"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t),this.options.setName("transportSegment")}t(i,n,{}),e(i)})}],[";f",function(e){e.modules.define("multiRouter.masstransit.WalkSegment",["util.defineClass","multiRouter.base.Segment"],function(e,t,n){
function i(e,t){i.superclass.constructor.call(this,e,t),this.options.setName("walkSegment")}t(i,n,{}),e(i)})}],[":0",function(e){e.modules.define("multiRouter.model.component.EmptyPointController",["util.defineClass","util.extend","util.array","util.string"],function(e,t,n,i,o){function s(e,t){this._request=this.filterRequest(e),this._paramsLength=r(this._request.params),this._json=t}function r(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t}t(s,{setJsonCache:function(e,t){this._json=e,this._request=this.filterRequest(t),this._paramsLength=r(this._request.params)},getJsonCache:function(e){e=this.filterRequest(e);var t=this._arePointsEqual(e.points)&&this._areParamsEqual(e.params);return t?this._json:null},filterRequest:function(e){for(var t,i,s,r=e.points,a=0,l=r.length;a<l;a++)t?o.trim(r[a])?t.push(r[a]):s.push(a):o.trim(r[a])||(t=r.slice(0,a),s=[a]);if(s){i=e.params.viaIndexes.slice().sort();for(var a=s.length-1;a>=0;a--){for(var c=i.length-1;i[c]>s[a];)i[c]--,c--;i[c]==s[a]&&i.splice(c,1)}}return t?{points:t,params:n({},e.params,{viaIndexes:i})}:e},completeJson:function(e,t){var s=e.features[0].features,r=e.features[1].features,a=0,l=0;s=s.slice(),r=r.slice();for(var c=0,u=t.points.length;c<u;c++){var h=t.points[c],d=i.indexOf(t.params.viaIndexes,c);if(d==-1){if(o.trim(h)){var g=s[a];s[a]=n({},g,{properties:n({},g.properties,{index:a})})}else s.splice(a,0,this._getEmptyWayPointJson(a));a++}else if("auto"==t.params.routingMode){if(o.trim(h)){var p=r[l];r[l]=n({},p,{properties:n({},p.properties,{index:l})})}else r.splice(l,0,this._getEmptyViaPointJson(l));l++}}return e=n({},e,{features:e.features.slice()}),e.features[0]=n({},e.features[0],{features:s}),e.features[1]=n({},e.features[1],{features:r}),e},_arePointsEqual:function(e){var t=this._request.points;if(e.length!=t.length)return!1;for(var n=!0,i=0,o=t.length;i<o;i++)if(e[i]!=t[i]){n=!1;break}return n},_areParamsEqual:function(e){var t=this._request.params,n=0,i=!0;for(var o in e)if(e.hasOwnProperty(o)){if(e[o]!=t[o]){i=!1;break}n++}return i&&(i=this._paramsLength==n),i},_getEmptyWayPointJson:function(e){return{type:"Feature",properties:{index:e,request:""},geometry:{type:"Point",coordinates:null}}},_getEmptyViaPointJson:function(e){return{type:"Feature",properties:{index:e},geometry:{type:"Point",coordinates:null}}}}),e(s)})}],[":2",function(e){e.modules.define("multiRouter.model.component.ReferencePointManager",["util.defineClass","multiRouter.referencePointUtils"],function(e,t,n){function i(e,t){this._referencePoints=e,this._changeCallback=t,this._requests=[],this._calcRequests(),this._setupPoints()}t(i,{setPoint:function(e,t){this._clearPoint(e),this._referencePoints[e]=t,this._calcRequest(e),this._setupPoint(e),this._callChangeCallback()},setPoints:function(e){this._clearPoints(),this._referencePoints=e,this._calcRequests(),this._setupPoints(),this._callChangeCallback()},getPoints:function(){return this._referencePoints},getRequests:function(){return this._requests},destroy:function(){this._clearPoints()},_setupPoints:function(){for(var e=0,t=this._referencePoints.length;e<t;e++)this._setupPoint(e)},_setupPoint:function(e){var t=this._referencePoints[e],i=this._getPointListeningParams(t,n.getPointType(t));i&&i.target.events.add(i.eventName,this._onPointChange,this)},_clearPoints:function(){for(var e=0,t=this._referencePoints.length;e<t;e++)this._clearPoint(e)},_clearPoint:function(e){var t=this._referencePoints[e],i=this._getPointListeningParams(t,n.getPointType(t));i&&i.target.events.remove(i.eventName,this._onPointChange,this)},_calcRequests:function(){this._requests=[];for(var e=0,t=this._referencePoints.length;e<t;e++)this._calcRequest(e)},_calcRequest:function(e){this._requests[e]=n.getPointRequest(this._referencePoints[e])},_getPointListeningParams:function(e,t){var n=null;return"geometry"==t?n={target:e,eventName:"change"}:"geoObject"==t&&(n={target:e.geometry,eventName:"change"}),n},_onPointChange:function(e){this._callChangeCallback()},_callChangeCallback:function(){this._changeCallback.callback.call(this._changeCallback.context)}}),e(i)})}],[":5",function(e){e.modules.define("multiRouter.model.component.ServiceController",["util.defineClass","util.extend","util.array","multiRouter.service","multiRouter.referencePointUtils","multiRoute.model.common.emptyJson","multiRouter.model.component.ReferencePointManager","multiRoute.model.component.RequestSieve","multiRoute.model.component.RequestQuery","multiRouter.model.component.EmptyPointController","vow"],function(t,n,i,o,s,r,a,l,c,u,h,d){function g(e,t,n){this._referencePointManager=new l(e,{callback:this._referencePointsChangeCallback,context:this}),this._params=i({},p,t),this._callbacks=n,this._oldRequest=this._createActualRequest(),this._referencePointIndexes=null,this._serviceRequestSieve=new c(333,this._sendRequestCallback,this),this._serviceRequestQuery=new u(this._makeRequestCallback,this._cancelRequestCallback,this),this._emptyPointController=new h({points:[],params:{}},a),this._prevSnap=this._params.snap,this._fireWayPointsChange=!1,this._fireViaPointsChange=!1,this._fireRoutesChange=!1,this._initFlag=!1,this._oldRequest.points.length&&(this._initFlag=!0,this._serviceRequestSieve.process())}var p={routingMode:"auto",viaIndexes:[],avoidTrafficJams:!1,results:3,searchCoordOrder:e.env.coordinatesOrder,boundedBy:null,strictBounds:!1};n(g,{setReferencePoints:function(e,t,n){"undefined"!=typeof t&&(this._params.viaIndexes=t),n&&(this._serviceRequestQuery.clear(),this._serviceRequestSieve.stop()),this._referencePointManager.setPoints(e)},setReferencePoint:function(e,t){this._referencePointManager.setPoint(e,t)},getReferencePoints:function(){return this._referencePointManager.getPoints()},getReferencePointIndexes:function(){return this._referencePointIndexes||(this._referencePointIndexes=this._calcReferencePointIndexes())},setParams:function(e,t,n){this._params=t?i({},this._params,e):i({},p,e),this._referencePointIndexes=null,(n||this._params.snap!=this._prevSnap)&&(this._serviceRequestQuery.clear(),this._serviceRequestSieve.stop()),this._serviceRequestSieve.process(),this._callRequestChangeCallback()},getParams:function(){return this._params},destroy:function(){this._serviceRequestQuery.clear(),this._serviceRequestSieve.stop()},_referencePointsChangeCallback:function(){this._referencePointIndexes=null,this._serviceRequestSieve.process(),this._callRequestChangeCallback()},_calcReferencePointIndexes:function(){for(var e=[],t=[],n=0,i=this._referencePointManager.getPoints().length;n<i;n++){var s=o.indexOf(this._params.viaIndexes,n)==-1?e:t;s.push(n)}return{way:e,via:t}},_callRequestChangeCallback:function(){var e=this._oldRequest,t=this._createActualRequest();this._oldRequest=t;var n=this._callbacks.onRequestChange;n&&n.callback.call(n.context,e,t)},_createActualRequest:function(){return{referencePoints:this._referencePointManager.getPoints(),points:this._referencePointManager.getRequests(),params:this._params}},_sendRequestCallback:function(){var e=this._params.snap,t="auto"==this._params.routingMode,n=this._initFlag,i=+new Date,o=this._createActualRequest();this._prevSnap=e,this._initFlag=!1,this._serviceRequestQuery.push(o,function(o){this._serviceRequestSieve.setTimeout((this._serviceRequestSieve.getTimeout()+(+new Date-i))/2),this._successRequestCallback(o,"rough"==e,n,t)},this._failRequestCallback,this);var s=this._callbacks.onRequestSend;s&&s.callback.call(s.context,o)},_makeRequestCallback:function(e,t,n){var i,o=this._emptyPointController.filterRequest(e),r=this._emptyPointController.getJsonCache(o),a=o!=e;r?(a&&(r=this._emptyPointController.completeJson(r,e)),i=d.resolve(r)):(i=s.route(o.points,o.params),a&&(i=i.then(function(t){return this._emptyPointController.setJsonCache(t,o),this._emptyPointController.completeJson(t,e)},this)));var l=this._callbacks.onRequestLoading;l&&(i=l.callback.call(l.context,i)),i.done(t,n)},_cancelRequestCallback:function(e){var t=this._callbacks.onRequestCancel;t&&t.callback.call(t.context,e)},_successRequestCallback:function(e,t,n,i){e=this._fixConsistency(e,i);var o=this._callbacks.onRequestSuccess;o&&o.callback.call(o.context,e,t,n)},_failRequestCallback:function(e){var t=this._callbacks.onRequestFail;t&&t.callback.call(t.context,e)},_coordMakers:{"null":function(){return null},string:function(){return null},coords:function(e){return e},geometry:function(e){return e.getCoordinates()},geoObject:function(e){return e.geometry.getCoordinates()}},_fixConsistency:function(e,t){var n=this.getReferencePointIndexes().via,i=e.features[1].features;if(n.length&&!i.length&&t)for(var o=0,s=n.length;o<s;o++){var a=n[o],l=this._referencePointManager.getPoints()[a],c=r.getPointType(l);i.push({type:"Feature",properties:{index:o,request:r.getPointRequest(l)},geometry:{type:"Point",coordinates:this._coordMakers[c](l)}})}return e}}),t(g)})}],["!B",function(e){e.modules.define("multiRouter.MultiRoute",["util.defineClass","event.Manager","event.globalize","multiRoute.component.DecoratorEventMapper","multiRouter.component.PointsDragController","yandex.state.component.MultiRouter","multiRouter.MultiRouteModel","multiRouter.MultiRouteJsonView","multiRouter.referencePointUtils","util.bind"],function(t,n,i,o,s,r,a,l,c,u,h){function d(e,t){e=g(e),this._jsonView=new c(e,t),this.geometry=this._jsonView.geometry,this.properties=this._jsonView.properties,this.state=this._jsonView.state,this.options=this._jsonView.options,this.events=new i({context:this}),this._jsonView.events.setParent(new s(this.events)),this._pointsDragController=new r(this._jsonView,{dragStart:{callback:this._onDragStart,context:this},drag:{callback:this._onDrag,context:this},dragEnd:{callback:this._onDragEnd,context:this}}),this.model=this._jsonView.model,this.events.addController(p),this.events.fire("create"),this._yandexStateComponent=new a(this)}function g(e){return"function"!=typeof e.getWayPoints&&(e=new l(e.referencePoints,e.params,e.json)),e}var p=o(d);n(d,{getWayPoints:function(){return this._jsonView.getWayPoints()},getViaPoints:function(){return this._jsonView.getViaPoints()},getRoutes:function(){return this._jsonView.getRoutes()},setActiveRoute:function(t){if(e.env.debug&&t&&t.model.multiRoute!=this.model)throw new Error("multiRouter.MultiRoute: Недопустимый объект маршрута.");this._jsonView.setActiveRoute(t)},getActiveRoute:function(){return this._jsonView.getActiveRoute()},getPixelBounds:function(){return this._jsonView.getPixelBounds()},getBounds:function(){return this._jsonView.getBounds()},destroy:function(){this._pointsDragController.destroy(),this._jsonView.events.setParent(null),this._jsonView.destroy()},getOverlay:function(){return this._jsonView.getOverlay()},getOverlaySync:function(){return this._jsonView.getOverlaySync()},setParent:function(e){return this._jsonView.setParent(e),this},getParent:function(){return this._jsonView.getParent()},getMap:function(){return this._jsonView.getMap()},_onDragStart:function(e){this._dragendTimeoutID&&clearTimeout(this._dragendTimeoutID),e.capture(),r.staticEvents.fire("dragstart",{map:e.getMap()});var t=e.model.multiRoute,n=t.getParams();n.snap="rough",t.setParams(n)},_onDrag:function(e){e.model.setReferencePoint(u.fixCoordOrder(e.model.multiRoute,e.geometry.getCoordinates()))},_onDragEnd:function(e){var t=e.model.multiRoute,n=t.getParams();delete n.snap,t.setParams(n);var i=e.getMap();this._dragendTimeoutID||(this._dragendTimeoutID=setTimeout(h(function(){this._dragendTimeoutID=NaN,r.staticEvents.fire("dragend",{map:i}),e.release()},this),700))}}),t(d)})}],["!D",function(e){e.modules.define("multiRouter.MultiRouteJsonView",["util.defineClass","multiRouter.base.ParentView","geometryEditor.component.SubEntityManager","multiRouter.WayPoint","multiRouter.ViaPoint","multiRouter.Pin","multiRouter.driving.Route","multiRouter.masstransit.Route","multiRouter.pedestrian.Route","option.Mapper","GeoObjectCollection","util.bounds","util.bind","multiRouter.component.RouteBalloon","theme.islands.multiRouter.meta"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p,m){function f(e,t){f.superclass.constructor.call(this,e,t),this.options.setName("multiRoute"),this.options.setMapper(M),this._wayPointsManager=new o(e.getWayPoints(),{create:{callback:this._wayPointCreateCallback,context:this},process:{callback:this._wayPointProcessCallback,context:this},destroy:{callback:this._wayPointDestroyCallback,context:this}},"model"),this._viaPointsManager=new o(e.getViaPoints(),{create:{callback:this._viaPointCreateCallback,context:this},destroy:{callback:this._viaPointDestroyCallback,context:this}},"model"),this._routesManager=new o(e.getRoutes(),{create:{callback:this._routeCreateCallback,context:this},process:{callback:this._routeProcessCallback,context:this},destroy:{callback:this._routeDestroyCallback,context:this}},"model"),this._activeRoute=this.options.get("activeRouteAutoSelection",!0)?_(this._routesManager.getSubEntities()):null,this._setupActiveRoute()}function _(e){for(var t=null,n=1/0,i=0,o=e.length;i<o;i++){var s=e[i],r=s.model.properties.get("durationInTraffic")||s.model.properties.get("duration");r&&(!t||r<n)&&(n=r,t=s)}return t}var M=new h,v=h.addOptionalPrefix;M.setRule({name:"wayPoints",rule:function(e){return v(e,"wayPoint")}}),M.setRule({name:"viaPoints",rule:function(e){return v(e,"viaPoint")}}),M.setRule({name:"pins",rule:function(e){return v(e,"pin")}}),M.setRule({name:"routes",rule:function(e){return v(e,"route")}}),M.setRule({name:"editorAddon",rule:function(e){return h.addPrefix(e,"editor")}});var y=new h;y.setRule({name:"startWayPoint",rule:function(e){return v(e,"start")}}),y.setRule({name:"finishWayPoint",rule:function(e){return v(e,"finish")}});var j=new h;j.setRule({name:"viaPoint",rule:function(e){return v(e,"active")}});var b=new h;b.setRule({name:"pin",rule:function(e){return v(e,"active")}});var I=new h;I.setRule({name:"activeRoute",rule:function(e){return v(e,"active")}});var L={driving:l,masstransit:c,pedestrian:u};n(f,i,{createSubCollections:function(){return this._wayPointsCollection=new d,this._wayPointsCollection.options.setName("wayPoints"),this._wayPointsCollection.options.setMapper(y),this._viaPointsCollection=new d,this._viaPointsCollection.options.setName("viaPoints"),this._pinsCollection=new d,this._pinsCollection.options.setName("pins"),this._routesCollection=new d,this._routesCollection.options.setName("routes"),this._routesCollection.options.setMapper(I),this._routesCollection.events.add("dblclick",this._onRouteDblClick,this).add("click",this._onRouteClick,this),[this._wayPointsCollection,this._viaPointsCollection,this._pinsCollection,this._routesCollection]},getWayPoints:function(){return this._wayPointsCollection},getViaPoints:function(){return this._viaPointsCollection},getRoutes:function(){return this._routesCollection},setActiveRoute:function(t){if(e.env.debug&&t&&t.model.multiRoute!=this.model)throw new Error("multiRouter.MultiRouteJsonView: Недопустимый объект маршрута.");this._setActiveRoute(t)},getActiveRoute:function(){return this._activeRoute},destroy:function(){this._routesManager.destroy(),this._viaPointsManager.destroy(),this._wayPointsManager.destroy(),f.superclass.destroy.call(this)},setupModelListeners:function(){this.model.events.add("jsonchange",this._onModelJsonChange,this)},clearModelListeners:function(){this.model.events.remove("jsonchange",this._onModelJsonChange,this)},_onModelJsonChange:function(e){this.boundsAggregator.freeze(),e.get("wayPointsChange")&&this._wayPointsManager.update(this.model.getWayPoints()),e.get("viaPointsChange")&&this._viaPointsManager.update(this.model.getViaPoints()),e.get("routesChange")&&this._routesManager.update(this.model.getRoutes()),this.boundsAggregator.unfreeze(),this.events.fire("update")},_wayPointCreateCallback:function(e,t){var n=new s(e);this._wayPointsCollection.add(n,t);var i=new a(e);return this._pinsCollection.add(i,t),{model:e,wayPoint:n,pin:i}},_wayPointProcessCallback:function(e){for(var t=0,n=e.length;t<n;t++){var i="wayPoint";0==t?i="startWayPoint":t==e.length-1&&(i="finishWayPoint"),e[t].wayPoint.options.setName(i)}},_wayPointDestroyCallback:function(e){this._pinsCollection.remove(e.pin),this._wayPointsCollection.remove(e.wayPoint)},_viaPointCreateCallback:function(e,t){var n=new r(e);return this._viaPointsCollection.add(n,t),n},_viaPointDestroyCallback:function(e){this._viaPointsCollection.remove(e)},_routeCreateCallback:function(e,t){var n=L[e.getType()],i=new n(e);return this._routesCollection.add(i,t),i},_routeProcessCallback:function(e){if(this.options.get("activeRouteAutoSelection",!0))this._setActiveRoute(_(e));else{var t=!0;if(this._activeRoute)for(var n=0,i=e.length;n<i;n++)e[n]==this._activeRoute&&(t=!1);t&&this._setActiveRoute(null)}},_routeDestroyCallback:function(e){this._routesCollection.remove(e)},_setActiveRoute:function(e){if(this._activeRoute!=e){this._activeRoute&&m.get(this._activeRoute).close(),this._clearActiveRoute();var t=this._activeRoute;return this._activeRoute=e,this._setupActiveRoute(),this._setActivePins(t,this._activeRoute),this.events.fire("activeroutechange",{oldActiveRoute:t}),!0}return!1},_setupActiveRoute:function(){this._activeRoute&&this._activeRoute.options.setName("activeRoute")},_clearActiveRoute:function(){this._activeRoute&&this._activeRoute.options.setName("route")},_onRouteClick:function(e){for(var t=e.get("target");t&&t.getParent()!=this._routesCollection;)t=t.getParent();if(t){var n=e.get("target").geometry.getType(),i=m.get(t);if("LineString"==n){var o=this._setActiveRoute(t);!o&&this.options.get("routeOpenBalloonOnClick")&&(i.open(e.get("coords")),this._forbidDblClick())}else this.options.get("routeOpenBalloonOnClick")&&i.close()}},_onRouteDblClick:function(e){this._dblClickForbiden&&e.disallowMapEvent()},_forbidDblClick:function(){this._dblClickForbiden=!0,setTimeout(p(function(){this._dblClickForbiden=!1},this),25)},_setActivePins:function(e,t){!e&&t&&(this._pinsCollection.options.setMapper(b),this._viaPointsCollection.options.setMapper(j)),e&&!t&&(this._pinsCollection.options.setMapper(null),this._viaPointsCollection.options.setMapper(null))},mapChangeCallback:function(e,t){f.superclass.mapChangeCallback.call(this,e,t),t&&this.options.get("boundsAutoApply")&&(this._boundsAutoApply()||this.model.events.add("requestsuccess",this._onRequestSuccess1,this))},_boundsAutoApply:function(){var e=this._wayPointsCollection.getBounds();if(e){var t=this.getMap().options.get("projection"),n=this._routesCollection.getBounds(),i=this._viaPointsCollection.getBounds();return n&&(e=g.fromBounds([e,n],t)),i&&(e=g.fromBounds([e,i],t)),this.getMap().setBounds(e,{checkZoomRange:!0,zoomMargin:this.options.get("zoomMargin",0),useMapMargin:this.options.get("useMapMargin",!0)}).then(this._fireBoundsAutoApply,this),!0}return!1},_onRequestSuccess1:function(e){this.model.events.remove("requestsuccess",this._onRequestSuccess1,this),e.get("init")&&this.getMap()&&this._boundsAutoApply()},_fireBoundsAutoApply:function(){this.events.fire("boundsautoapply")}}),t(f)})}],["!s",function(e){e.modules.define("multiRouter.MultiRouteModel",["util.defineClass","event.Manager","data.Manager","data.Sync","vow","util.array","multiRoute.model.common.emptyJson","multiRouter.model.component.ServiceController","multiRoute.component.DecoratorEventMapper"],function(t,n,i,o,s,r,a,l,c,u){function h(e,t){this._serviceController=new c(e,t,{onRequestChange:{callback:this._requestChangeCallback,context:this},onRequestSend:{callback:this._requestSendCallback,context:this},onRequestLoading:{callback:this._requestLoadingCallback,context:this},onRequestSuccess:{callback:this._requestSuccessCallback,context:this},onRequestFail:{callback:this._requestFailCallback,context:this},onRequestCancel:{callback:this._requestCancelCallback,context:this}}),this._jsonModel=null,this._jsonModelDataSync=null,this._pointModelsDecorator=null,this.events=new i({context:this}),this.properties=new o}var d,g,p;n(h,{getJson:function(){return this._jsonModel?this._jsonModel.getJson():l},setReferencePoints:function(e,t,n){this._serviceController.setReferencePoints(e,t,n)},getReferencePoints:function(){return this._serviceController.getReferencePoints()},getReferencePointIndexes:function(){return this._serviceController.getReferencePointIndexes()},setParams:function(e,t,n){this._serviceController.setParams(e,t,n)},getParams:function(){return this._serviceController.getParams()},getAllPoints:function(){return this._pointModelsDecorator?this._pointModelsDecorator.getAllPoints():[]},getWayPoints:function(){return this._pointModelsDecorator?this._pointModelsDecorator.getWayPoints():[]},getViaPoints:function(){return this._pointModelsDecorator?this._pointModelsDecorator.getViaPoints():[]},getRoutes:function(){return this._pointModelsDecorator?this._pointModelsDecorator.getRoutes():[]},destroy:function(){this._serviceController.destroy(),this._jsonModel&&(this._pointModelsDecorator.destroy(),this._jsonModelDataSync.destroy(),this._jsonModel.events.remove("jsonchange",this._onJsonModelJsonChange,this),this._jsonModel.events.setParent(null),this._jsonModel.destroy())},_requestChangeCallback:function(e,t){this.events.fire("requestchange",{referencePoints:t.referencePoints,params:t.params,oldReferencePoints:e.referencePoints,oldParams:e.params})},_requestSendCallback:function(e){this.events.fire("requestsend",{referencePoints:e.referencePoints,params:e.params})},_requestLoadingCallback:function(e){return this._jsonModel||(e=g?e.then(function(e){return this._createJsonModel(),e},this):r.all([e,this._getPreloadPromise()]).spread(function(e){return this._createJsonModel(),e},this)),e},_requestSuccessCallback:function(e,t,n){this._jsonModel.setJson(e);var i=this._fireWayPointsChange,o=this._fireViaPointsChange,s=this._fireRoutesChange;this._fireWayPointsChange=!1,this._fireViaPointsChange=!1,this._fireRoutesChange=!1,this.events.fire("requestsuccess",{init:n,rough:t,wayPointsChange:i,viaPointsChange:o,routesChange:s})},_requestFailCallback:function(e){this.events.fire("requestfail",{error:e})},_requestCancelCallback:function(e){this.events.fire("requestcancel",{referencePoints:e.referencePoints,params:e.params})},_createJsonModel:function(){this._jsonModel=new g(l),this._jsonModel.events.setParent(new u(this.events)),this._jsonModel.events.add("jsonchange",this._onJsonModelJsonChange,this),this._jsonModelDataSync=new s([this.properties,this._jsonModel.properties]),this._pointModelsDecorator=new d(this._jsonModel,this,{wayReferencePointChangeCallback:{callback:this._onWayPointReferencePointChange,context:this},viaReferencePointChangeCallback:{callback:this._onViaPointReferencePointChange,context:this}})},_onViaPointReferencePointChange:function(e){var t=e.get("target"),n=this._serviceController.getReferencePointIndexes().via[a.indexOf(this._pointModelsDecorator.getViaPoints(),t)];this._serviceController.setReferencePoint(n,t.getReferencePoint())},_onWayPointReferencePointChange:function(e){var t=e.get("target"),n=this._serviceController.getReferencePointIndexes().way[a.indexOf(this._pointModelsDecorator.getWayPoints(),t)];this._serviceController.setReferencePoint(n,t.getReferencePoint())},_getPreloadPromise:function(){return"undefined"==typeof p&&(p=e.modules.require(["multiRouter.model.component.PointModelsDecorator","multiRouter.MultiRouteJsonModel"]).spread(function(e,t){d=e,g=t})),p},_onJsonModelJsonChange:function(e){this._fireWayPointsChange=e.get("wayPointsChange"),this._fireViaPointsChange=e.get("viaPointsChange"),this._fireRoutesChange=e.get("routesChange")}}),h.prototype.getPoints=h.prototype.getAllPoints,t(h)})}],[";g",function(e){e.modules.define("multiRouter.pedestrian.Path",["util.defineClass","GeoObjectCollection","option.Mapper","multiRouter.base.Path","multiRouter.pedestrian.Segment","multiRouter.pedestrian.SegmentMarker"],function(e,t,n,i,o,s,r){function a(e,t){a.superclass.constructor.call(this,e,t),this.options.setMapper(c)}var l=new i,c=new i,u=new i;l.setRule({name:"pedestrianSegment",rule:function(e){return i.addOptionalPrefix(e,"pedestrianSegment")}}),u.setRule({name:"pedestrianMarker",rule:function(e){return[i.addPrefix(e,"pedestrianMarker"),i.addPrefix(e,"marker"),e]}}),t(a,o,{createSubCollections:function(){var e=a.superclass.createSubCollections.call(this);return e[0].options.setMapper(l),this._markersCollection=new n,this._markersCollection.options.setMapper(u),e.push(this._markersCollection),e},getSegmentMarkers:function(){return this._markersCollection},segmentCreateCallback:function(e,t){var n=new s(e),i=new r(e);return i.options.setName(e.getType()+"Marker"),this.getSegments().add(n,t),this._markersCollection.add(i,t),{model:e,segment:n,marker:i}},segmentDestroyCallback:function(e){this.getSegments().remove(e.segment),this._markersCollection.remove(e.marker),e.segment.destroy(),e.marker.destroy()}}),e(a)})}],[";h",function(e){e.modules.define("multiRouter.pedestrian.Route",["util.defineClass","multiRouter.base.Route","GeoObjectCollection","multiRouter.pedestrian.Path","multiRouter.preset"],function(e,t,n,i,o){function s(e,t){s.superclass.constructor.call(this,e,t)}t(s,n,{createSubPath:function(e){return new o(e)}}),e(s)})}],[";k",function(e){e.modules.define("multiRouter.pedestrian.Segment",["util.defineClass","multiRouter.base.Segment"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t),this.options.setName("pedestrianSegment")}t(i,n,{}),e(i)})}],[";l",function(e){e.modules.define("multiRouter.pedestrian.SegmentMarker",["util.defineClass","multiRouter.base.LeafView","geometry.Point"],function(e,t,n,i){function o(e,t){o.superclass.constructor.call(this,e,t)}t(o,n,{createGeoObjectFeature:function(e){return{geometry:new i(e.geometry.getCoordinates()[0]),properties:e.properties}},onModelJsonChange:function(){this.geometry.setCoordinates(this.model.geometry.getCoordinates()[0]),this.events.fire("update")}}),e(o)})}],["!E",function(e){e.modules.define("multiRouter.Pin",["util.defineClass","multiRouter.base.LeafView","geometry.Point"],function(e,t,n,i){function o(e,t){o.superclass.constructor.call(this,e,t),this.options.setName("pin")}t(o,n,{createGeoObjectFeature:function(e){return{geometry:new i(e.geometry.getCoordinates()),properties:e.properties}}}),e(o)})}],["6b",function(e){var t=e.modules.importImages({"via.png":{src:"images/via.png"}});e.modules.define("multiRouter.preset",["option.presetStorage","map.associate.serviceGeoObjects","util.math.cycleRestrict","util.extend","GeoObject","interactivityModel.transparent","layout.Image","geoObject.addon.balloon"],function(e,n,i,o,s,r,a,l,c){n.add("router#interactivePath",{balloonDataSource:function(e,t,n){var l,u,h=e.getParent(),d=e.findSegment(n),g=e.geometry.getCoordinates()[d.getPolylineStartIndex()],p=e.getMap(),m=d.getHumanAction(),f=d.getStreet(),_=d.getHumanLength(),M=h.options.get("avoidTrafficJams")?d.getHumanJamsTime():d.getHumanTime(),v="",y=p.options.get("projection"),j=p.getZoom(),b=y.isCycled()[0],I=Math.pow(2,j+8)/2,L=function(){l&&(h.options.set("opacity",l),l=null),u&&(i.get(p).remove(u),u=null),c.get(e).events.remove("close",L)},C=function(e){var t=y.toGlobalPixels(e,j);return b&&(t[0]=o(t[0],n[0]-I,n[0]+I)),t};m&&(v+=m),f&&(v&&(v+=", "),v+=f),v&&(v+="<br/>"),v+=_+", "+M,t({properties:s({balloonContent:v,action:d.getAction(),humanAction:d.getHumanAction(),angle:d.getAngle(),lenght:d.getLength(),length:d.getLength(),humanLength:d.getHumanLength(),time:d.getTime(),humanTime:d.getHumanTime(),jamsTime:d.getJamsTime(),humanJamsTime:d.getHumanJamsTime(),street:d.getStreet()},e.properties.getAll())},C(g)),L(),l=h.options.get("opacity"),h.options.set("opacity",.5),u=new r({geometry:{type:"LineString",coordinates:d.getCoordinates()}},{interactivityModel:a,opacity:Math.max(2*l-1,0),strokeWidth:e.options.get("strokeWidth"),strokeColor:e.options.get("strokeColor")}),i.get(p).add(u),c.get(e).events.add("close",L)}}),n.add("router#plainPath",{}),n.add("multiRouter#route",{pane:"routes",strokeWidth:3,strokeColor:"#4d4d4d",opacity:.7}),n.add("multiRouter#activeRoute",{strokeColor:"#2086f8",opacity:.85}),n.add("router#viaPoint",{iconImageHref:t.get("via.png"),iconImageOffset:[-9,-9],iconImageSize:[18,19],iconLayout:l}),e(!0)})}],["!l",function(e){e.modules.define("multiRouter.referencePointUtils",["util.array"],function(t,n){function i(e){return"function"==typeof e.getType&&"Point"==e.getType()}function o(e){return e.getCoordinates().join(",")}function s(t){var o="";if(t?"string"==typeof t?o="string":n.isArray(t)?o="coords":i(t)?o="geometry":t.geometry&&i(t.geometry)&&(o="geoObject"):o="null",e.env.debug&&!o)throw new Error("multiRouter.referencePointUtils: Неправильный формат опорной точки.");return o}var r={"null":function(){return""},string:function(e){return e},coords:function(e){return e.join(",")},geometry:o,geoObject:function(e){return o(e.geometry)}};t({getPointRequest:function(e){return r[s(e)](e)},getPointType:s,fixCoordOrder:function(t,n){return t.getParams().searchCoordOrder!=e.env.coordinatesOrder?n.slice().reverse():n}})})}],["6f",function(e){e.modules.define("multiRouter.service",["util.defineClass","util.array","util.extend","util.coordinates.decode","util.bounds","util.signedJsonp","projection.wgs84Mercator","multiRouter.service.yMapsJsonToGeoJson","router.restrict","geocode","search","vow"],function(t,n,i,o,s,r,a,l,c,u,h,d,g){function p(){}function m(e,t){for(var n=[],i=0,o=e.length;i<o;i++)n.push(f(e[i],t));return n}function f(e,t){var n=/^(\s*-?\d+(\.\d+)?\s*(,(?!$)|$)){2}$/;return"string"==typeof e&&n.test(e)&&(e=i.map(e.split(","),Number)),"string"!=typeof e&&(e=N(e,t)),e}function _(t,n){for(var i=[],o=[],s=0,r=t.length;s<r;s++){var a=t[s];"string"==typeof a?(i.push(a),o.push(s)):n.reverseGeocoding&&(i.push("longlat"==e.env.coordinatesOrder?a:[a[1],a[0]]),o.push(s))}return{points:i,indexes:o}}function M(e,t){return y(e,t).then(function(e){for(var t=[],n=[],i=0,o=e.length;i<o;i++){var s=e[i].geoObjects.get(0);s?(t[i]=s.geometry.getCoordinates(),n[i]=s.properties.getAll()):(t[i]=[],n[i]={})}return{points:t,metaData:n}})}function v(t,n,i){for(var o=n.points,s=n.metaData,r={points:t.slice(),metaData:[]},a=0,l=o.length;a<l;a++){var c=i.indexes[a];"string"==typeof r.points[c]&&(r.points[c]=N(o[a],e.env.coordinatesOrder)),r.metaData[c]=s[a],r.metaData[c].request=i.points[a]}return r}function y(e,t){for(var n=[],i=0,o=e.length;i<o;i++)n.push(d(e[i],{results:1,strictBounds:t.strictBounds,boundedBy:t.boundedBy,searchType:"string"==typeof t.searchType?t.searchType:t.searchType.join(",")}));return g.all(n)}function j(t,n){return t.length<2?g.resolve(b(t)):a({url:e.env.hosts.api.services.route+"2.0/",requestParams:x(t,n),postprocessUrl:function(t){return e.env.hostConfigQuery?t+"&"+e.env.hostConfigQuery:t},responseFieldName:"data"})}function b(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push({request:e[n],coordinates:e[n]});return{type:"FeatureCollection",properties:{RouterMetaData:{Waypoints:t}},features:[]}}function I(e,t,n){for(var o=e.properties.RouterMetaData.Waypoints,s=0,r=0,a=t.length;s<a;s++)if(i.indexOf(n.viaIndexes,s)==-1){var l=t[s];l&&L(o[r],l),r++}return e}function L(e,t){for(var n=0,i=S.length;n<i;n++){var o=S[n];"undefined"!=typeof t[o]&&(e[o]=t[o])}}function C(e,t){e.properties.params=t;var n;u.isActive()&&(n=c(e),u.testMultiroute(n)||(e.features=[],n.features[2].features=[]));try{"function"==typeof t.jsonProcessor&&(e=n&&t.jsonProcessor==c?n:t.jsonProcessor(e))}catch(i){throw new Error("multiRouter.service.route: Ошибка при разборе ответа сервера: "+i.message)}return e}function x(t,n){var o={lang:e.env.lang,key:e.env.key,token:e.env.token,apikey:e.env.apikey,rll:w(t).join("~"),rtm:n.avoidTrafficJams?"dtr":"atm",results:n.results||3},s=n.viaIndexes;if(s.length){if(e.env.debug&&(i.indexOf(s,0)!=-1||i.indexOf(s,t.length-1)!=-1))throw new Error("multiRouter.service: Недопустимый индекс транзитной точки.");o.via=s.join("~")}switch(n.snap&&(o.snap=n.snap,"rough"!=n.snap||"masstransit"!=n.routingMode&&"pedestrian"!=n.routingMode||(o.results=1)),n.routingMode){case"masstransit":
o.rtt="mt";break;case"pedestrian":o.rtt="pd"}return o}function w(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(String(e[n]));return t}function N(e,t){return"longlat"!=t?e.slice().reverse():e}p.WrongJson=function(){return new Error("Wrong JSON")},n(p,{route:function(t,n){n=o({jsonProcessor:c,searchCoordOrder:e.env.coordinatesOrder,viaIndexes:[],searchType:"geo"},n),t=m(t,n.searchCoordOrder);var i=_(t,n);return i.points.length?M(i.points,n).then(function(e){return e=v(t,e,i),j(e.points,n).then(function(t){return t.properties?(t=I(t,e.metaData,n),C(t,n)):g.reject(p.WrongJson())})},this):j(t,n).then(function(e){return e.properties?C(e,n):g.reject(p.WrongJson())})}});var S=["request","address","description","name","companyMetaData","geocoderMetaData","publicMapMetaData"];t(new p)})}],["!A",function(e){e.modules.define("multiRouter.service.yMapsJsonToGeoJson",["util.array","util.bounds","util.extend","util.coordinates.decode","formatter","projection.wgs84Mercator","coordSystem.geo"],function(t,n,i,o,s,r,a,l){function c(e){for(var t=e.properties.RouterMetaData.Waypoints,n=[],i=0,s=t.length;i<s;i++){var r=t[i];n[i]={type:"Feature",properties:o({index:i},r),geometry:{type:"Point",coordinates:r.coordinates?z(r.coordinates):null}}}return n}function u(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var s=e[i];n[i]=G[s.properties.RouteMetaData.type](s,i,t)}return n}function h(e,t,i){var o=e.properties.RouteMetaData;return{type:"FeatureCollection",features:d(e.features,i),properties:{index:t,type:o.type,blocked:!!o.blocked,hasTolls:!!o.hasTolls,distance:o.Distance,duration:o.Duration,durationInTraffic:o.DurationInTraffic,boundedBy:n.map(e.properties.boundedBy,z),rawProperties:e.properties}}}function d(e,t){for(var i=[],o=0,r=e.length;o<r;o++){var a=e[o],l=a.properties,c=l.PathMetaData,u=n.map(s(l.encodedCoordinates),z);i[o]={type:"FeatureCollection",features:g(a.features,u,t,o),properties:{index:o,type:"driving",distance:c.Distance,duration:c.Duration,durationInTraffic:c.DurationInTraffic,coordinates:u,encodedCoordinates:l.encodedCoordinates,rawProperties:l}}}return i}function g(e,t,n,i){for(var o=[],s=0,r=e.length;s<r;s++){var a=e[s],l=a.properties,c=l.SegmentMetaData,u=O(a);o[s]={type:"Feature",properties:{index:s,type:"driving",street:c.street,action:c.Action,distance:c.Distance,duration:c.Duration,durationInTraffic:c.DurationInTraffic,text:c.text,lodIndex:u.lodIndex,viaPoints:p(a.geometry.geometries,t,n,i),rawProperties:l},geometry:{type:"LineString",coordinates:A(a,e[s+1],t,O)}}}return o}function p(e,t,n,i){for(var o=[],s=0,r=0,a=e.length;r<a;r++){var l=e[r];if("Point"==l.type){var c=n.length;n.push({type:"Feature",properties:{index:c,lodIndex:l.lodIndex,pathIndex:i},geometry:{type:"Point",coordinates:t[l.lodIndex]}}),o[s]=c,s++}}return o}function m(e,t){var i=e.properties.RouteMetaData,o=f(e.features);return{type:"FeatureCollection",features:o,properties:{index:t,type:i.type,distance:N(o),duration:{value:i.Duration.value,text:i.Duration.text||P(i.Duration.value)},boundedBy:e.properties.boundedBy?n.map(e.properties.boundedBy,z):_(o),rawProperties:e.properties}}}function f(e){for(var t=[],i=0,o=e.length;i<o;i++){var r=e[i],a=r.properties,l=a.PathMetaData,c=n.map(s(a.encodedCoordinates),z),u=M(r.features,c);t[i]={type:"FeatureCollection",features:u,properties:{index:i,type:"masstransit",distance:N(u),duration:l.Duration,coordinates:c,encodedCoordinates:a.encodedCoordinates,rawProperties:a}}}return t}function _(e){for(var t=[],n=0,o=e.length;n<o;n++)t.push(i.fromPoints(e[n].properties.coordinates,a));return i.fromBounds(t,a)}function M(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var s=e[i];n[i]=Z[v(s)](s,e[i+1],t,i)}return n}function v(e){var t=e.properties.SegmentMetaData;if(t.Walk)return"walk";if(t.Transports)return"transport";if(t.Transfer)return"transfer";throw new Error("multiRouter.service.yMapsJsonToGeoJson: Неизвестный тип сегмента маршрута")}function y(e,t,n,i){var o=e.properties.SegmentMetaData,s={index:i,type:"walk",text:o.text,distance:o.Distance,duration:o.Duration,links:o.Links,lodIndex:k(e).lodIndex,rawProperties:e.properties};return o.WaitingDuration&&(s.waitingDuration=o.WaitingDuration),{type:"Feature",properties:s,geometry:{type:"LineString",coordinates:A(e,t,n,k)}}}function j(e,t,n,i){var o=A(e,t,n,k),s=e.properties.SegmentMetaData,r={index:i,type:"transport",text:s.text,distance:D(o),duration:s.Duration,links:s.Links,cost:s.Cost,transports:s.Transports,lodIndex:k(e).lodIndex,stops:{type:"FeatureCollection",features:I(e.features,n)},rawProperties:e.properties};return{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:o}}}function b(e,t,n,i){var o=e.properties.SegmentMetaData,s={index:i,type:"transfer",text:o.text,distance:o.Distance,duration:o.Duration,links:o.Links,lodIndex:k(e).lodIndex,rawProperties:e.properties};return o.WaitingDuration&&(s.waitingDuration=o.WaitingDuration),{type:"Feature",properties:s,geometry:{type:"LineString",coordinates:A(e,t,n,k)}}}function I(e,t){for(var n=[],i=0,o=0,s=e.length;i<s;i++){var r=e[i],a=r.properties&&r.properties.StopMetaData,l=r.geometry.lodIndex;a&&(n[o]={type:"Feature",properties:{index:o,id:a.id,name:a.name,lodIndex:l,rawProperties:r.properties},geometry:{type:"Point",coordinates:t[l]}},o++)}return n}function L(e,t){var i=e.properties.RouteMetaData,o=C(e.features);return{type:"FeatureCollection",features:o,properties:{index:t,type:i.type,distance:{value:i.WalkingDistance.value,text:i.WalkingDistance.text||E(i.WalkingDistance.value)},duration:{value:i.Duration.value,text:i.Duration.text||P(i.Duration.value)},boundedBy:e.properties.boundedBy?n.map(e.properties.boundedBy,z):_(o),rawProperties:e.properties}}}function C(e){for(var t=[],i=0,o=e.length;i<o;i++){var r=e[i],a=r.properties,l=a.PathMetaData,c=n.map(s(a.encodedCoordinates),z),u=x(r.features,c);t[i]={type:"FeatureCollection",features:u,properties:{index:i,type:"pedestrian",distance:l.WalkingDistance,duration:l.Duration,coordinates:c,encodedCoordinates:a.encodedCoordinates,rawProperties:a}}}return t}function x(e,t){for(var n=[],i=0,o=e.length;i<o;i++)n[i]=w(e[i],e[i+1],t,i);return n}function w(e,t,n,i){var o=e.properties.SegmentMetaData,s={index:i,type:"pedestrian",text:o.text,distance:o.Distance,duration:o.Duration,links:o.Links,lodIndex:k(e).lodIndex,rawProperties:e.properties};return{type:"Feature",properties:s,geometry:{type:"LineString",coordinates:A(e,t,n,k)}}}function N(e){var t=S(e);return{value:t,text:E(t)}}function S(e){for(var t=0,n=0,i=e.length;n<i;n++)t+=e[n].properties.distance.value;return t}function D(e){var t=T(e);return{value:t,text:E(t)}}function T(e){for(var t=0,n=0,i=e.length;n<i-1;n++)t+=l.solveInverseProblem(e[n],e[n+1]).distance;return t}function E(e){return r.distance(e).replace(/\&\#160\;/g," ")}function P(e){return r.duration(e).replace(/\&\#160\;/g," ")}function z(e){return R?[e[1],e[0]]:e}function A(e,t,n,i){return t?n.slice(i(e).lodIndex,i(t).lodIndex+1):n.slice(i(e).lodIndex)}function O(e){return e.geometry.geometries[0]}function k(e){return e.features[0].geometry}t(function(e){var t=[],n=u(e.features,t);return{type:"FeatureCollection",features:[{type:"FeatureCollection",features:c(e),properties:{name:"waypoints"}},{type:"FeatureCollection",features:t,properties:{name:"viapoints"}},{type:"FeatureCollection",features:n,properties:{name:"routes"}}],properties:{waypoints:e.properties.RouterMetaData.Waypoints,params:e.properties.params,rawProperties:e.properties}}});var G={driving:h,masstransit:m,pedestrian:L},Z={walk:y,transport:j,transfer:b},R="latlong"==e.env.coordinatesOrder})}],["!F",function(e){e.modules.define("multiRouter.ViaPoint",["util.defineClass","multiRouter.base.Point"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t),this.options.setName("viaPoint")}t(i,n),e(i)})}],["!H",function(e){e.modules.define("multiRouter.WayPoint",["util.defineClass","multiRouter.base.Point"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t),this.options.setName("wayPoint")}t(i,n),e(i)})}],[".k",function(e){e.modules.define("not-found-tile",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-tile-not-found{text-align:center;display:block;font-family:Arial,serif;font-size:10px;white-space:nowrap;position:absolute;top:40%;width:90%;left:10%;overflow:hidden}",e)})}],["!M",function(e){e.modules.define("ObjectManager",["util.defineClass","BaseObjectManager","event.Manager","objectManager.ObjectCollection","objectManager.ClusterCollection","objectManager.component.View","component.child.MapChild","objectManager.component.ObjectControllerAddon","util.extend","Event","yandex.counter"],function(e,t,n,i,o,s,r,a,l,c,u,h){var d=function(e){this.events=new i({context:this}),this._mapChildComponent=new a({onMapChange:{callback:this._onMapChange,context:this},onParentChange:{callback:this._onParentChange,context:this}}),this._objectsEditingEventManager=new i,this._clustersEditingEventManager=new i,this.objects=new o(this,this._objectsEditingEventManager),this.clusters=new s(this,this._clustersEditingEventManager),d.superclass.constructor.call(this,e,{objects:this.objects,clusters:this.clusters,events:this.events,addDisplayedObjects:{callback:this._addObjects,context:this},removeDisplayedObjects:{callback:this._removeObjects,context:this},removeAll:{callback:this._removeAllObjects,context:this}}),this._objectControllerAddon=new l(this),this._view=null,h.countByKey("modulesUsage","objectManager.create")};t(d,n,{getMap:function(){return this._mapChildComponent.getMap()},getParent:function(){return this._mapChildComponent.getParent()},setParent:function(e){return this._mapChildComponent.setParent(e),this},add:function(e){return this.objects.add(e),this},remove:function(e){return this.objects.remove(e),this},removeAll:function(){return this.objects.removeAll(),this},onAddToMap:function(e){this._setupView(),this._objectControllerAddon.setMap(e),this._objectControllerAddon.events.add("statechange",this._onObjectControllerStateChange,this).add("pixelboundschange",this._onObjectControllerBoundsChange,this),d.superclass.onAddToMap.call(this,e)},onRemoveFromMap:function(e){d.superclass.onRemoveFromMap.call(this,e),this._objectControllerAddon.events.remove("statechange",this._onObjectControllerStateChange,this).remove("pixelboundschange",this._onObjectControllerBoundsChange,this),this._objectControllerAddon.setMap(null),this._clearView()},getObjectState:function(e){var t=d.superclass.getObjectState.call(this,e),n=this._objectControllerAddon.getController(),i=n&&n.getObjectState(e);return i&&(t=c(t,i)),t},getBounds:function(){return this._objectControllerAddon.getController()?this._objectControllerAddon.getController().getBounds():null},getPixelBounds:function(){return this._objectControllerAddon.getController()?this._objectControllerAddon.getController().getPixelBounds():null},_setupView:function(){this._view=new r(this,this._objectsEditingEventManager,this._clustersEditingEventManager)},_clearView:function(){this._view.destroy()},_onMapChange:function(e,t){e&&this.onRemoveFromMap(e),t&&this.onAddToMap(t),this.events.fire("mapchange",{oldMap:e,newMap:t})},_onParentChange:function(e,t){t&&this.options.setParent(t.options),t||this.options.setParent(null),this.events.fire("parentchange",{oldParent:e,newParent:t})},_addObjects:function(e){this._objectControllerAddon.getController().add(e)},_removeObjects:function(e){this._objectControllerAddon.getController().remove(e)},_removeAllObjects:function(){this._objectControllerAddon.getController().removeAll()},_onObjectControllerStateChange:function(e){var t=e.get("removedClusters"),n=e.get("addedClusters");t&&t.length&&this._clustersEditingEventManager.fire("remove",new u({target:this,type:"remove",clusters:t})),n&&n.length&&this._clustersEditingEventManager.fire("add",new u({target:this,type:"add",clusters:n})),this._fireStateChange({added:e.get("added"),removed:e.get("removed"),addedClusters:e.get("addedClusters"),removedClusters:e.get("removedClusters"),update:e.get("update"),sync:e.get("sync")})},_onObjectControllerBoundsChange:function(){this.events.fire("pixelboundschange")},_fireStateChange:function(e){this.events.fire("statechange",{added:e.added||[],removed:e.removed||[],addedClusters:e.addedClusters||[],removedClusters:e.removedClusters||[],update:e.update||[],sync:e.sync})}}),e(d)})}],[";m",function(e){e.modules.define("objectManager.addon.clustersBalloon",["objectManager.ClusterCollection","popup.addonBuilder","objectManager.Balloon"],function(e,t,n,i){e(n.build({type:"balloon",metaEventManager:t.getMetaEventManager(),defaultManager:i}))})}],[";o",function(e){e.modules.define("objectManager.addon.clustersHint",["objectManager.ClusterCollection","popup.addonBuilder","objectManager.Hint"],function(e,t,n,i){e(n.build({type:"hint",metaEventManager:t.getMetaEventManager(),defaultManager:i,popupManagerOption:"objectManagerHintManager"}))})}],[";n",function(e){e.modules.define("objectManager.addon.objectsBalloon",["objectManager.ObjectCollection","popup.addonBuilder","objectManager.Balloon"],function(e,t,n,i){e(n.build({type:"balloon",metaEventManager:t.getMetaEventManager(),defaultManager:i}))})}],[";p",function(e){e.modules.define("objectManager.addon.objectsHint",["objectManager.ObjectCollection","popup.addonBuilder","objectManager.Hint"],function(e,t,n,i){e(n.build({type:"hint",metaEventManager:t.getMetaEventManager(),defaultManager:i,popupManagerOption:"objectManagerHintManager"}))})}],["6k",function(e){e.modules.define("objectManager.Balloon",["util.defineClass","Balloon","component.sharedEntity.captor.Balloon","event.Manager","map.addon.balloon","option.Manager","data.Manager","util.component","util.extend","util.array","projection.idle","util.preset","Monitor","popup.managerStorage","projection.idle","objectManager.objectCollection.optionMapper","objectManager.clusterCollection.optionMapper","popup.component.checkEmptiness","vow","balloon.component.getBalloonMode","objectManager.component.createGeometry","geoObject.balloonPositioner.storage"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j,b){function I(e){this._collection=e,this.events=new o({context:this}),this._objectIdWithOpenBalloon=null,this._balloonCaptorListener=null,this._setupCaptor(),this._setupListeners(),this._setupOptionMonitor(),this._activeObjectId=null,this._checkMapListener(this._collection.getObjectManager().getMap())}function L(e,t){var n=e.properties||{},i=t.properties||{},o=n.clusterCaption||n.balloonContentHeader||"",s=i.clusterCaption||i.balloonContentHeader||"";return o.toString()<s.toString()?-1:1}var C={autoPan:!1},x={projection:m};t(I,l.createProxyMethods(function(){return this._captor},["getOverlay","getOverlaySync","autoPan","getOwner","setOptions","getOptions"]),{destroy:function(){this._clearOptionMonitor(),this._clearListeners(),this._clearCaptor()},open:function(e,t){this._activeObjectId=e;var n=this._collection.getById(e),i=v.defer();return this._captor.open(this._specifyPosition(e,t),this._specifyData(n),this._createPopupOptions(n)).always(function(t){t.isRejected()?(this._activeObjectId=null,i.reject(t.valueOf())):(this._onOpen(e),i.resolve(!0))},this),i.promise()},close:function(e){var t=v.defer();return this._captor.close(e).always(function(e){e.isRejected()?t.reject(e.valueOf()):(this._onClose(),t.resolve(!0))},this),t.promise()},isOpen:function(e){return this._objectIdWithOpenBalloon==e},isEmpty:function(e){var t=this._collection.getById(e),n=this._specifyData(t),i=this._collection.getObjectManager().getMap();return n.options=this._createPopupOptions(t),M(i,"balloon",t.geometry.coordinates,n)},setData:function(e){return this._captor.setData(this._specifyData(e))},getData:function(){var e=this._captor.getData();return e?e.object:null},getPosition:function(){return this._collection.options.get("projection").fromGlobalPixels(this._captor.getPosition(),this._collection.getObjectManager().getMap().getZoom())},setPosition:function(e){var t=this._captor,n=t.getData().object.id;return t.setPosition(this._specifyPosition(n,e))},_setupCaptor:function(){var e=this._collection.getObjectManager().getMap(),t=e&&s.get(e);this._captor=new i(this,this._collection,"balloon",t),this._captor.events.add(["open","close"],function(e){e.stopImmediatePropagation()}).add(["release"],function(){this._onClose()},this)},_clearCaptor:function(){this._captor.close(),this._captor.destroy(),this._captor=null},_setupListeners:function(){this._collection.getObjectManager().events.add("mapchange",this._onMapChange,this),this._collection.events.add("remove",this._onChildRemove,this),this._collection.overlays.events.add("remove",this._onOverlayRemove,this),this._collection.options.get("openBalloonOnClick",!0)&&this._collection.events.add("click",this._onClick,this)},_clearListeners:function(){this._collection.getObjectManager().events.remove("mapchange",this._onMapChange,this),this._collection.events.remove("remove",this._onChildRemove,this),this._collection.overlays.events.remove("remove",this._onOverlayRemove,this),this._collection.options.get("openBalloonOnClick",!0)&&this._collection.events.remove("click",this._onClick,this),this._checkMapListener(null)},_setupOptionMonitor:function(){this._optionMonitor=new g(this._collection.options).add("openBalloonOnClick",this._onOpenBallonOnClickChange,this,{defaultValue:!0})},_clearOptionMonitor:function(){this._optionMonitor.destroy()},_onClick:function(e){if(!e.isDefaultPrevented()){var t=e.get("objectId");t!=this._objectIdWithOpenBalloon&&this._getObjectOption(t,"openBalloonOnClick",!0)&&(e.preventDefault(),this._getObjectOption(t,"openEmptyBalloon",!1)?this.open(t,e.get("globalPixels")):this.isEmpty(t).done(function(n){!n&&this._collection.getById(t)&&this.open(t,e.get("globalPixels"))},this))}},_onOpen:function(e){this._objectIdWithOpenBalloon&&this._onClose(),this._captor.isOpen()&&this._activeObjectId==e&&(this._activeObjectId=null,this._objectIdWithOpenBalloon=e,this._balloonCaptorListener=this._captor.getPopup().events.group().add("userclose",this._onUserClose,this),"Point"==this._collection.getById(e).geometry.type&&this._getObjectOption(e,"hideIconOnBalloonOpen",!0)&&(this._panelModeMonitor=new g(this._captor.getPopup().getOverlaySync().options).add(["panelMode"],function(){this._toggleIcon(e,this._panelModeMonitor.get("panelMode"))},this),this._panelModeMonitor.get("panelMode")||this._toggleIcon(e,this._panelModeMonitor.get("panelMode"))),this.events.fire("open",{objectId:e}))},_onClose:function(){if(null!=this._objectIdWithOpenBalloon){var e=this._collection.getById(this._objectIdWithOpenBalloon);e&&"Point"==e.geometry.type&&this._showIcon(this._objectIdWithOpenBalloon),this.events.fire("close",{objectId:this._objectIdWithOpenBalloon}),this._objectIdWithOpenBalloon=null}this._panelModeMonitor&&(this._panelModeMonitor.removeAll(),this._panelModeMonitor=null),this._balloonCaptorListener&&this._balloonCaptorListener.removeAll()},_onMapChange:function(){var e=this._collection.getObjectManager().getMap();e?this._setupSharingManager():this.close(),this._checkMapListener(e)},_checkMapListener:function(e){this._mapEventsListener&&this._mapEventsListener.removeAll(),e?(this._mapEventsListener=e.events.group().add("boundschange",this._onMapBoundsChange,this),this._oldMapZoom=e.getZoom()):this._mapEventsListener=null},_onMapBoundsChange:function(){var e=this._oldMapZoom,t=this._collection.getObjectManager().getMap().getZoom();if(this._captor.isOpen()&&e!=t){var n=this._captor.getPosition(),i=Math.pow(2,t-e);this._disableAutoPan(),this._captor.setPosition([n[0]*i,n[1]*i]),this._enableAutoPan()}this._oldMapZoom=t},_onOpenBallonOnClickChange:function(){this._optionMonitor.get("openBalloonOnClick")?this._collection.events.add("click",this._onClick,this):this._collection.events.remove("click",this._onClick,this)},_setupSharingManager:function(){this._captor.setSharingManager(s.get(this._collection.getObjectManager().getMap()))},_onUserClose:function(){this._onClose()},_specifyData:function(e){var t,n=this._collection.getObjectManager().options.get("showInAlphabeticalOrder",!1);return"Cluster"==e.type&&n&&e.features?(t=c({},e,{features:e.features.slice().sort(L)}),t.properties=c({},e.properties,{geoObjects:t.features})):t=e,{collection:this._collection,properties:new a(t.properties),state:this._collection.state||new a,object:t}},_toggleIcon:function(e,t){t?this._showIcon(e):this._hideIcon(e)},_hideIcon:function(e){var t=this._collection.overlays.getById(e);t&&t.setMap(null)},_showIcon:function(e){var t=this._collection.overlays.getById(e);t&&t.setMap(this._collection.getObjectManager().getMap())},_disableAutoPan:function(){d.addTo(this.getOptions(),C)},_enableAutoPan:function(){d.removeFrom(this.getOptions(),C)},_onChildRemove:function(e){var t=e.get("objectId");this._objectIdWithOpenBalloon==t&&this.close()},_onOverlayRemove:function(e){var t=e.get("objectId");this._objectIdWithOpenBalloon==t&&this.close()},_getObjectOption:function(e,t,n){var i=this._collection.getById(e);if(!i)return null;var o=i.options?i.options[t]:void 0;return"undefined"==typeof o?this._collection.options.get(t,n):o},_specifyPosition:function(e,t){var n=this._collection.getById(e),i=this._collection.getObjectManager().getMap(),o=j(n,this._collection.options.get("projection"));o.setMap(i);var s=o.getPixelGeometry();return b.get(s.getType()).calculatePosition(s,t||i.getGlobalPixelCenter())},_createPopupOptions:function(e){return new r({},new r(e.options?c({},x,e.options):x,this._collection.options,null,f),"balloon")}}),f.setRule({name:"balloon",rule:"prefixed"}).setRule({name:"balloon",key:["projection"],rule:"plain"}),_.setRule({name:"balloon",rule:"prefixed"}).setRule({name:"balloon",key:["projection"],rule:"plain"}),p.add("objectManager#balloon",I),e(I)})}],["!P",function(e){e.modules.define("objectManager.ClusterCollection",["util.defineClass","ReadOnlyCollection","objectManager.OverlayCollection","objectManager.clusterCollection.optionMapper","objectManager.clusterCollection.overlayOptionMapper","event.Manager","event.Mapper","Event","objectManager.OverlayMappingTable","option.Manager","data.Manager","util.bind","event.globalize","util.extend","theme.islands.cluster.metaOptions"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p){var m=function(e,t){this._clusterEditingEventManager=new r,m.superclass.constructor.call(this,this._clusterEditingEventManager),this._objectManager=e,this.options.setMapper(o),this.options.setName("clusterCollection"),this.options.events.add("change",function(){this.events.fire("optionschange")},this),this.events.addController(f),this.state=new h,this._clustersById={},this._overlayEditingEventManager=new r,this.overlays=new i(this._overlayEditingEventManager),this.overlays.options.setMapper(s),this.overlays.options.setParent(this.options),this.overlays.events.setParent(new a(this.events,new c(this))),this._editingEventManager=t,this._editingEventManager.add("add",this._onClustersAdd,this).add("remove",this._onClustersRemove,this).add("removeall",this._onClustersRemoveAll,this).add("addoverlay",this._onOverlayAdd,this).add("removeoverlay",this._onOverlayRemove,this).add("removealloverlays",this._onOverlayRemoveAll,this),this.events.fire("create")},f=g(m);t(m,n,{getById:function(e){return this._clustersById[e]||null},getObjectManager:function(){return this._objectManager},setClusterOptions:function(e,t){var n=this.getById(e);return n&&(n.options=n.options?p(n.options,t):t,this.events.fire("clusteroptionschange",{objectId:e})),this},setClusterProperties:function(e,t){var n=this.getById(e);n&&(n.properties=n.properties?p(n.properties,t):t,this.events.fire("clusterpropertieschange",{objectId:e}))},onChildAdd:function(e){var t=new l({type:"add",target:this,child:e,objectId:e.id});this.events.fire("add",t)},onChildRemove:function(e){var t=new l({type:"remove",target:this,child:e,objectId:e.id});this.events.fire("remove",t)},_onClustersAdd:function(e){for(var t=e.get("clusters"),n=0,i=t.length;n<i;n++)this._clustersById[t[n].id]=t[n],this._clusterEditingEventManager.fire("add",new l({type:"add",target:this,object:t[n]}));this.events.fire("clustersadd",new l({clusters:t,target:this,type:"clustersadd"}))},_onClustersRemove:function(e){for(var t=e.get("clusters"),n=this._getIdsArray(t),i=this._getAddedObjectsById(n),o=0,s=i.length;o<s;o++)delete this._clustersById[i[o].id],this._clusterEditingEventManager.fire("remove",new l({target:this,type:"remove",object:i[o]}));this.events.fire("clustersremove",new l({clusters:i,target:this,type:"clustersremove"}))},_onClustersRemoveAll:function(){this._clustersById={},this._clusterEditingEventManager.fire("removeall")},_getAddedObjectsById:function(e){for(var t=[],n=0,i=e.length;n<i;n++)this._clustersById[e[n]]&&t.push(this._clustersById[e[n]]);return t},_getIdsArray:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push("undefined"!=typeof e[n].id?e[n].id:e[n]);return t},_onOverlayAdd:function(e){this._overlayEditingEventManager.fire("add",new l({type:"add",target:this,overlay:e.get("overlay"),objectId:e.get("objectId")}))},_onOverlayRemove:function(e){this._overlayEditingEventManager.fire("remove",new l({type:"remove",target:this,overlay:e.get("overlay"),objectId:e.get("objectId")}))},_onOverlayRemoveAll:function(e){this._overlayEditingEventManager.fire("removeall")}}),e(m)})}],[";t",function(e){e.modules.define("objectManager.clusterCollection.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],[";u",function(e){e.modules.define("objectManager.clusterCollection.overlayOptionMapper",["option.Mapper"],function(e,t){function n(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}var i=new t;i.setRule({name:"overlay.html.Placemark",rule:function(e,t){return[n(e,"clusterIcon"),n(e,"cluster"),n(e,"icon")]}}),i.setRule({name:"overlay.Placemark",rule:function(e,t){return[n(e,"clusterIcon"),n(e,"cluster"),n(e,"icon")]}}),i.setRule({name:"overlay.html.Placemark",key:"projection",rule:"plain"}),i.setRule({name:"overlay.Placemark",key:"projection",rule:"plain"}),e(i)})}],[";s",function(e){e.modules.define("objectManager.CollectionMappingTable",["util.defineClass","Event"],function(e,t,n){var i=function(e){this._context=e,this["*"]=this._defaultMappingFunction,this.add=!1,this.remove=!1,this.parentchange=!1,this.optionschange=!1,this.mapchange=!1};t(i,{_defaultMappingFunction:function(e){return new n({currentTarget:this._context},e)}}),e(i)})}],[";y",function(e){e.modules.define("objectManager.component.BaseDataLoadController",["util.defineClass","event.Manager","component.TileBoundsGetter","component.tileBoundsGetter.util","objectManager.component.DataStorage","objectManager.component.DataSource","util.cancelableCallback","util.bounds","util.math.areEqual"],function(e,t,n,i,o,s,r,a,l,c){function u(e,t){for(var n,i=[],o=0,s=e.length;o<s;o++){n=e[o];for(var r=n[0][0];r<n[1][0];r++)for(var a=n[0][1];a<n[1][1];a++)i.push({tileNumber:[r,a],zoom:t})}return i}var h=function(e){var t=e.getMap();this.events=new n({context:this}),this.context=e,this.storage=new s(this.context),this.dataSource=new r(this.context),this._tileBoundsGetter=new i(this.context.options,{wholeZoom:!0}),this._tileBoundsListener=this._tileBoundsGetter.events.group().add("tileboundschange",this._onTileBoundsChange,this),this._tileBoundsGetter.setMap(t),this._requestCallbacks=[],this.loadData(u(this._tileBoundsGetter.get(),Math.round(t.getZoom())))};t(h,{destroy:function(){this._tileBoundsGetter.setMap(null),this._tileBoundsListener.removeAll(),this.storage.removeAll(),this.abortLoading()},onMapZoomChange:function(e){},onMapMove:function(e){var t=o.getDisjointArea(e.get("newTileBounds"),e.get("oldTileBounds"),!0);this.loadData(this.getNotLoadedTiles(u(t.added,Math.round(this.context.getMap().getZoom()))))},loadData:function(e){var t=a.create(function(e){this.onDataLoad(e.tilesArray,e.data)},this);this._requestCallbacks.push(t),this.dataSource.load(e).then(t)},abortLoading:function(){for(var e=this._requestCallbacks,t=0,n=e.length;t<n;t++)e[t].cancel();e=[]},reloadData:function(){var e=this.storage.getAll();this.storage.removeAll(),this.events.fire("statechange",{added:[],removed:e}),this.loadData(u(this._tileBoundsGetter.get(),Math.round(this.context.getMap().getZoom())))},getNotLoadedTiles:function(e){},onDataLoad:function(e,t){this._checkBounds()},getBounds:function(){var e=this.getPixelBounds(),t=this.context.getMap();return e&&t?l.fromGlobalPixelBounds(e,t.getZoom(),t.options.get("projection")):null},getPixelBounds:function(){var e=this.storage.getBounds();if(e&&this.context.getMap()){var t=Math.pow(2,this.context.getMap().getZoom()-23);return[[e[0][0]*t,e[0][1]*t],[e[1][0]*t,e[1][1]*t]]}return null},_getTileDataFromStorage:function(e,t){return this.storage.getTileData(e,t)},_onTileBoundsChange:function(e){Math.round(e.get("oldZoom"))!=Math.round(e.get("newZoom"))?this.onMapZoomChange(e):this.onMapMove(e)},_checkBounds:function(){var e=this.getPixelBounds();!!this._oldBounds==!!e&&e&&c(e[0],this._oldBounds[0])&&c(e[1],this._oldBounds[1])||(this.events.fire("pixelboundschange"),this._oldBounds=e)}}),e(h)})}],["!U",function(e){e.modules.define("objectManager.component.ClusterListener",["util.defineClass","util.bounds","Monitor"],function(e,t,n,i){var o=function(e){this._context=e,this._map=null,this._optionMonitor=null};t(o,{setMap:function(e){this._map!=e&&(this._map&&this._removeFromMap(),this._map=e,this._map&&this._addToMap())},_addToMap:function(){this._context.options.get("clusterDisableClickZoom",!1)||this._startClusterClickListening(),this._optionMonitor=new i(this._context.options).add("clusterDisableClickZoom",this._onDisableClickZoomChange,this)},_removeFromMap:function(){this._optionMonitor.destroy(),this._context.options.get("clusterDisableClickZoom",!1)||this._stopClusterClickListening()},_onDisableClickZoomChange:function(){this._context.options.get("clusterDisableClickZoom",!1)?this._stopClusterClickListening():this._startClusterClickListening()},_startClusterClickListening:function(){this._context.clusters.overlays.events.add("click",this._onClusterOverlayClick,this)},_stopClusterClickListening:function(){this._context.clusters.overlays.events.remove("click",this._onClusterOverlayClick,this)},_onClusterOverlayClick:function(e){if(!e.isDefaultPrevented()){var t=this._map;Math.round(t.getZoom())!=t.zoomRange.getCurrent()[1]&&(this._setMapBounds(e.get("objectId")),e.preventDefault())}},_setMapBounds:function(e){var t=this._calculateClusterBounds(e);if(t){var n=this._map;n.setBounds(t,{preciseZoom:!n.options.get("avoidFractionalZoom"),margin:this._context.options.get("zoomMargin",0),useMapMargin:this._context.options.get("useMapMargin",!0),checkZoomRange:!0})}},_calculateClusterBounds:function(e){var t=this._context.clusters.getById(e),i=null;if(t.bbox)i=t.bbox;else if(t.features){for(var o=t.features,s=[],r=0,a=o.length;r<a;r++)s.push(o[r].geometry.coordinates);i=0==s.length?null:n.fromPoints(s,this._context.options.get("projection"))}return i}}),e(o)})}],["!V",function(e){e.modules.define("objectManager.component.createGeometry",["geometry.Point","geometry.LineString","geometry.Circle","geometry.Polygon","geometry.Rectangle","util.extend"],function(e,t,n,i,o,s,r){var a={POINT:"Point",CIRCLE:"Circle",RECTANGLE:"Rectangle",LINE_STRING:"LineString",POLYGON:"Polygon"};e(function(e,r){var l,c={projection:r,pixelRendering:"static"},u=e.geometry,h=u.type,d=u.coordinates,g=u.options||c;switch(h){case a.POINT:l=new t(d,g);break;case a.CIRCLE:l=new i(d,u.radius,g);break;case a.LINE_STRING:l=new n(d,g);break;case a.POLYGON:l=new o(d,u.fillRule||"nonZero",g);break;case a.RECTANGLE:l=new s(d,g)}return l})})}],["!X",function(e){e.modules.define("objectManager.component.customPaddingJsonp",["util.jsonp","vow"],function(e,t,n){function i(e){var i=e.padding,o=n.defer();if(i){var s=window[i];window[i]=function(e){window[i]=s,!e||e.error?o.reject(e?e.error:"no data"):o.resolve(e.data||e)}}return t({paramName:e.paramName||"callback",padding:e.padding,url:e.url,timeout:e.timeout,noCache:e.noCache,requestParams:e.requestParams
}).done(function(e){e.error?o.reject(e.error):o.resolve(e.data||e)},function(e){i&&(window[i]=s),o.reject(e)}),o.promise()}e(i)})}],["!Y",function(e){e.modules.define("objectManager.component.DataSource",["util.defineClass","vow","util.processUrlTemplate","util.bounds","util.array","objectManager.component.customPaddingJsonp","objectManager.util"],function(e,t,n,i,o,s,r,a){function l(e){var t,n,i=e.slice(1),o=[e[0].slice(),e[0].slice()];do t=c(o,i,"left");while(t);do t=c(o,i,"right");while(t);do t=c(o,i,"top");while(t);do t=c(o,i,"bottom");while(t);return n=[o],i.length&&(n=n.concat(l(i))),n}function c(e,t,n){var i=[];if("left"==n){if(0==e[0][0])return!1;for(var o,r=e[0][1],a=e[1][1]+1;r<a;r++){if(o=u([e[0][0]-1,r],t),o==-1)return!1;i.push(t[o])}e[0][0]-=1}if("right"==n){for(var o,r=e[0][1],a=e[1][1]+1;r<a;r++){if(o=u([e[1][0]+1,r],t),o==-1)return!1;i.push(t[o])}e[1][0]+=1}if("top"==n){if(0==e[1][0])return!1;for(var o,l=e[0][0],a=e[1][0]+1;l<a;l++){if(o=u([l,e[0][1]-1],t),o==-1)return!1;i.push(t[o])}e[0][1]-=1}if("bottom"==n){for(var o,l=e[0][0],a=e[1][0]+1;l<a;l++){if(o=u([l,e[1][1]+1],t),o==-1)return!1;i.push(t[o])}e[1][1]+=1}for(var o,c=0,a=i.length;c<a;c++)o=s.indexOf(t,i[c]),t.splice(o,1);return!0}function u(e,t){for(var n=0,i=t.length;n<i;n++)if(t[n][0]==e[0]&&t[n][1]==e[1])return n;return-1}var h=function(e){this._context=e};t(h,{load:function(e){for(var t=this._getRequests(e),i=[],o=n.defer(),s={tilesArray:[],data:[]},r=0,l=t.length;r<l;r++)i.push(this._makeLayersInfoRequest(t[r]));return n.allResolved(i).then(function(){for(var e=0,n=i.length;e<n;e++)i[e].isFulfilled()&&(s.data.push(i[e].valueOf()),s.tilesArray=s.tilesArray.concat(a.getTilesArrayFromTileBoundsArray([t[e].tileBounds],t[e].zoom,!0)));o.resolve(s)}),o.promise()},_getRequests:function(e){var t=[];if(this._context.options.get("splitRequests",!1))for(var n,i,o=0,s=e.length;o<s;o++)n=e[o].tileNumber,i=e[o].zoom,t.push({zoom:e[o].zoom,tileNumber:e[o].tileNumber,boundingBox:this._getBoundingBox([n,n],i),tileBounds:[n,n]});else{for(var r={},a=[],o=0,s=e.length;o<s;o++)r[e[o].zoom]||(r[e[o].zoom]=[]),r[e[o].zoom].push(e[o].tileNumber);for(var i in r)r.hasOwnProperty(i)&&a.push({zoom:Number(i),tileBoundsArray:l(r[i])});for(var c,o=0,s=a.length;o<s;o++){c=a[o];for(var u,h=0,d=c.tileBoundsArray.length;h<d;h++)u=c.tileBoundsArray[h],t.push({zoom:c.zoom,boundingBox:this._getBoundingBox(u,c.zoom),tileBounds:u})}}return t},_makeLayersInfoRequest:function(e){var t=this._context,n=t.getTileUrl(e),i=t.getPadding(e);return r({url:n,padding:i,paramName:t.options.get("paddingParamName"),noCache:t.options.get("noCache"),timeout:t.options.get("timeout")})},_getBoundingBox:function(e,t){var n=[[256*e[0][0],256*e[0][1]],[256*(e[1][0]+1)-1e-10,256*(e[1][1]+1)-1e-10]];return o.fromGlobalPixelBounds(n,t,this._context.options.get("projection"))}}),e(h)})}],["!0",function(e){e.modules.define("objectManager.component.DataStorage",["util.defineClass","util.PrTree","objectManager.component.getObjectBBox"],function(e,t,n,i){function o(e,t){var n=[[256*e[0],256*e[1]],[256*(e[0]+1),256*(e[1]+1)]],i=23-t,o=Math.pow(2,i);return[[n[0][0]*o,n[0][1]*o],[n[1][0]*o-1,n[1][1]*o-1]]}var s=function(e){this._context=e,this._tree=new n,this._items={}};t(s,{add:function(e){for(var t,n=[],o=0,s=e.length;o<s;o++)t=e[o].id,this._items[t]||(this._items[t]={value:e[o],bbox:i(e[o],this._context.getMap())},n.push(this._items[t]));n.length&&this._tree.insert(n)},remove:function(e){for(var t=0,n=e.length;t<n;t++){var i=this._items[e[t].id];i&&(this._tree.remove(i),delete this._items[e[t].id])}},removeAll:function(){this._tree.removeAll(),this._items={}},getAll:function(){var e=[];for(var t in this._items)e.push(this._items[t].value);return e},getTileData:function(e,t){for(var n=o(e,t),i=this._tree.search(n),s=[],r=0,a=i.length;r<a;r++)s.push(i[r].value);return s},getBounds:function(){return this._tree.getLength()?this._tree.getBounds():null},getLength:function(){return this._tree.getLength()}}),e(s)})}],["!2",function(ym){ym.modules.define("objectManager.component.Filter",["util.id","util.defineClass"],function(provide,utilId,defineClass){function Filter(e){if(this._objects={},"string"==typeof e){var t=addObjectToFilterString(e),n=createFilterFunctionTemplate(t);this._filterFunction=evaluateExpression(n)}else this._filterFunction=e}function evaluateExpression(expression){var result;return eval("result = "+expression),result}function createFilterFunctionTemplate(e){return"function (object) { return "+e+"; }"}function addObjectToFilterString(e){for(var t,n="",i=0;t=textInQuotesRegExp.exec(e);)n+=processReservedWords(e.slice(i,t.index)),n+=t[0],i=textInQuotesRegExp.lastIndex;return i<e.length&&(n+=processReservedWords(e.slice(i))),n}function processReservedWords(e){for(var t,n=e;t=optionsSearchRegExp.exec(e);)n=n.replace(t[0],t[1]+"object."+t[2]+t[3]);return n}var optionsSearchRegExp=/(^|[^\w])(options|properties|geometry|id)($|[^\w])/g,textInQuotesRegExp=/["'](.*?)["']+/g;defineClass(Filter,{add:function(e){for(var t=0,n=e.length;t<n;t++)this._objects[utilId.get(e[t])]={filterResult:this._applyFilter(e[t]),object:e[t]}},remove:function(e){for(var t=0,n=e.length;t<n;t++)delete this._objects[utilId.get(e[t])]},destroy:function(){this._objects=null},isFilteredOut:function(e){var t=utilId.get(e);return!this._objects[t]||!this._objects[t].filterResult},getValidObjects:function(){var e=[];for(var t in this._objects)this._objects.hasOwnProperty(t)&&this._objects[t].filterResult&&e.push(this._objects[t].object);return e},getFilteredObjects:function(){var e=[];for(var t in this._objects)this._objects.hasOwnProperty(t)&&!this._objects[t].filterResult&&e.push(this._objects[t].object);return e},_applyFilter:function(e){return this._filterFunction(e)}}),provide(Filter)})}],["!3",function(e){e.modules.define("objectManager.component.getObjectBBox",["geometry.Circle","util.bounds","util.pixelBounds","util.array"],function(e,t,n,i,o){function s(e,t){var n=[];return o.each(e,function(e){n.push(t.toGlobalPixels(e,r))}),n}var r=23,a={POINT:"Point",CIRCLE:"Circle",RECTANGLE:"Rectangle",LINE_STRING:"LineString",POLYGON:"Polygon"};e(function(e,o){var l,c=o.options.get("projection"),u=e.geometry,h=u.type,d=u.coordinates;switch(h){case a.POINT:var g=s([d],c)[0];l=[g,g];break;case a.CIRCLE:var p=new t(d,u.radius);p.setMap(o),l=n.toGlobalPixelBounds(p.getBounds(),r,c),p.setMap(null);break;case a.RECTANGLE:case a.LINE_STRING:d=s(d,c),l=i.fromPoints(d);break;case a.POLYGON:d=[].concat.apply([],d),d=s(d,c),l=i.fromPoints(d)}return l})})}],["!6",function(e){e.modules.define("objectManager.component.ObjectController",["util.defineClass","event.Manager","component.TileBoundsGetter","Monitor","util.array","util.extend","component.tileBoundsGetter.util","util.PrTree","objectManager.component.getObjectBBox","util.bounds","util.math.areEqual"],function(e,t,n,i,o,s,r,a,l,c,u,h){function d(e,t){var n=[[256*e[0][0],256*e[0][1]],[256*e[1][0],256*e[1][1]]],i=23-t,o=Math.pow(2,i);return[[n[0][0]*o,n[0][1]*o],[n[1][0]*o-1,n[1][1]*o-1]]}function g(e,t){return"Point"==e.geometry.type||!!t.zoomChanged}var p=function(e){this.options=e,this._map=null,this.events=new n({context:this}),this._tileBoundsGetter=new i(e),this._optionMonitor=null,this._unprocessedObjects=[],this._objectWrappers=[],this._wrappersById={},this._prTree=null};t(p,{setMap:function(e){this._map=e,e?(this._prTree=new l,this._tileBoundsGetter.setMap(e),this._addToMap(e)):(this._removeFromMap(e),this._tileBoundsGetter.setMap(null))},getMap:function(){return this._map},add:function(e){return this._map?(this._addObjectsToTree(e),this._showObjects(this._tileBoundsGetter.get()),this._checkBounds()):this._unprocessedObjects=this._unprocessedObjects.concat(e),this},remove:function(e){return this._map&&(this._hideShownObjects(e),this._removeObjectsFromTree(e),this._checkBounds()),this._removeUnprocessedObjects(e),this},removeAll:function(){this._fireRemoveAll(),this._prTree&&(this._prTree.removeAll(),this._checkBounds()),this._objectWrappers=[],this._unprocessedObjects=[],this._wrappersById={}},destroy:function(){this._map&&(this.removeAll(),this._removeFromMap()),this.events.fire("destroy")},getObjectState:function(e){return e in this._wrappersById?{isShown:!!this._wrappersById[e].isShown,isClustered:!1,cluster:null}:null},getObject:function(e){return e in this._wrappersById?r({},this._wrappersById[e].hash):null},getAll:function(){for(var e=[],t=0,n=this._objectWrappers.length;t<n;t++)e.push(this._objectWrappers[t].hash);return e.concat(this._unprocessedObjects)},getBounds:function(){var e=this._prTree;return e&&e.getLength()?u.fromGlobalPixelBounds(e.getBounds(),23,this._map.options.get("projection")):null},getPixelBounds:function(){var e=this._prTree;if(e&&e.getLength()){var t=Math.pow(2,this._map.getZoom()-23),n=e.getBounds();return[[n[0][0]*t,n[0][1]*t],[n[1][0]*t,n[1][1]*t]]}return null},_addToMap:function(e){this._setupOptionMonitor(),this._unprocessedObjects.length&&(this._addObjectsToTree(this._unprocessedObjects),this._unprocessedObjects=[]),this._tileBoundsListener=this._tileBoundsGetter.events.group().add("tileboundschange",this._onTileBoundsChange,this),this._objectWrappers.length&&this._showObjects(this._tileBoundsGetter.get())},_removeFromMap:function(e){this._clearOptionMonitor(),this._fireRemoveAll(),this._tileBoundsListener.removeAll()},_setupOptionMonitor:function(){this._optionMonitor=new o(this.options).add("viewportMargin",this._refresh,this)},_clearOptionMonitor:function(){this._optionMonitor.destroy()},_showObjects:function(e,t){for(var n=[],i=0,o=e.length;i<o;i++)for(var s=this._getObjectsInBounds(e[i],t),r=0,a=s.length;r<a;r++)this._wrappersById[s[r].id].isShown||(this._wrappersById[s[r].id].isShown=!0,n.push(s[r]));this._fireStateChange({added:n})},_getObjectsInBounds:function(e,t){var n=d(e,this._map.getZoom()),i=this._prTree.search(n),o=[];if("undefined"==typeof t)for(var s=0,r=i.length;s<r;s++)o.push(i[s].hash);else{for(var a={},s=0,r=t.length;s<r;s++)a[t[s].hash.id]=!0;for(var s=0,r=i.length;s<r;s++)a[i[s].hash.id]&&o.push(i[s].hash)}return o},_fireStateChange:function(e){var t=[],n=[],i=[],o=[];if(e.removed)for(var s=0,r=e.removed.length;s<r;s++)"Feature"==e.removed[s].type?t.push(e.removed[s]):"Cluster"==e.removed[s].type&&o.push(e.removed[s]);if(e.added)for(var s=0,r=e.added.length;s<r;s++)"Feature"==e.added[s].type?n.push(e.added[s]):"Cluster"==e.added[s].type&&i.push(e.added[s]);(n.length||t.length||i.length||o.length||e.update&&e.update.length)&&this.events.fire("statechange",{added:n,removed:t,addedClusters:i,removedClusters:o,update:e.update||[],sync:e.sync})},_fireRemoveAll:function(){for(var e=[],t=0,n=this._objectWrappers.length;t<n;t++)e.push(this._objectWrappers[t].hash),this._objectWrappers[t].isShown=!1;e.length&&this._fireStateChange({removed:e,sync:!0})},_hideShownObjects:function(e){for(var t=[],n=0,i=e.length;n<i;n++)this._wrappersById[e[n].id]&&this._wrappersById[e[n].id].isShown&&t.push(e[n]);this._fireStateChange({removed:t})},_removeUnprocessedObjects:function(e){for(var t,n=[],i=0,o=this._unprocessedObjects.length;i<o;i++){t=!0;for(var s=0,r=e.length;s<r&&!t;s++)e[s].id==this._unprocessedObjects[i].id&&(t=!1);t&&n.push(this._unprocessedObjects[i])}this._unprocessedObjects=n},_onTileBoundsChange:function(e){this._refresh({zoomChanged:e.get("oldzoom")!=e.get("newZoom")})},_refresh:function(e){for(var t=[],n=0,i=this._objectWrappers.length;n<i;n++)this._objectWrappers[n].isShown&&t.push(this._objectWrappers[n].hash);var o=this._getObjectsInTileBoundsArray(this._tileBoundsGetter.get());this._updateVisibleObjects(t,o,e)},_updateVisibleObjects:function(e,t,n){e.sort(m),t.sort(m);for(var i=[],o=[],s=[],r=0,a=0,l=e.length,c=t.length;r<l&&a<c;)e[r].id<t[a].id?(g(e[r],n)?o.push(e[r]):s.push(e[r]),r++):e[r].id>t[a].id?(i.push(t[a]),a++):(s.push(e[r]),r++,a++);for(r!=l&&(o=o.concat(e.slice(r))),a!=c&&(i=i.concat(t.slice(a))),r=0,l=i.length;r<l;r++)this._wrappersById[i[r].id].isShown=!0;for(r=0,l=o.length;r<l;r++)this._wrappersById[o[r].id].isShown=!1;this._fireStateChange({update:s,added:i,removed:o})},_getObjectsInTileBoundsArray:function(e,t){for(var n,i=[],o={},s=0,r=e.length;s<r;s++){n=this._getObjectsInBounds(e[s],t);for(var a=0,l=n.length;a<l;a++)o[n[a].id]||(o[n[a].id]=!0,i.push(n[a]))}return i},_addObjectsToTree:function(e){for(var t=[],n=0,i=e.length;n<i;n++)if(!this._wrappersById[e[n].id]){var o={hash:e[n],bbox:c(e[n],this._map)};this._wrappersById[e[n].id]=o,this._objectWrappers.push(o),t.push(o)}this._prTree.insert(t)},_removeObjectsFromTree:function(e){for(var t=[],n={},i=0,o=e.length;i<o;i++)this._wrappersById[e[i].id]&&(n[e[i].id]=!0,t.push(this._wrappersById[e[i].id]));for(var s,r=[],a={},i=0,o=this._objectWrappers.length;i<o;i++)s=this._objectWrappers[i].hash.id,n[s]||(r.push(this._objectWrappers[i]),a[s]=this._objectWrappers[i]);if(this._wrappersById=a,this._prTree.getLength()/10<t.length)this._prTree.removeAll(),this._prTree.insert(r);else for(var i=0,o=t.length;i<o;i++)this._prTree.remove(t[i]);this._objectWrappers=r},_checkBounds:function(){var e=this._prTree.getBounds();!!this._oldBounds==!!e&&e&&h(e[0],this._oldBounds[0])&&h(e[1],this._oldBounds[1])||(this.events.fire("pixelboundschange"),this._oldBounds=e)}});var m=function(e,t){return e.id>t.id?1:e.id==t.id?0:-1};e(p)})}],["!4",function(e){e.modules.define("objectManager.component.ObjectControllerAddon",["util.defineClass","Monitor","clusterer.component.GridClusterer","objectManager.component.ObjectController","option.Manager","event.Manager"],function(e,t,n,i,o,s,r){var a=function(e,t){this._context=e,this._map=null,this._objectController=null,this._objectControllerListener=null,this._parameters=t||{},this.events=new r({context:this})};t(a,{setMap:function(e){this._map=e,e?this._addToMap(e):this._removeFromMap(e)},getController:function(){return this._objectController},_addToMap:function(e){this._setupObjectController(),this._parameters.clusteringDisabled||(this._optionMonitor=new n(this._context.options).add(["clusterize"],this._onClusterizeChange,this))},_removeFromMap:function(e){this._optionMonitor&&this._optionMonitor.destroy(),this._clearObjectController()},_setupObjectController:function(){!this._parameters.clusteringDisabled&&this._context.options.get("clusterize",!1)?this._objectController=new i(new s((void 0),this._context.options,"clusterer")):this._objectController=new o(this._context.options),this._objectControllerListener=this._objectController.events.group().add("statechange",function(e){this._fireStateChange({added:e.get("added"),removed:e.get("removed"),addedClusters:e.get("addedClusters"),removedClusters:e.get("removedClusters"),update:e.get("update"),sync:e.get("sync")})},this).add("pixelboundschange",function(){this.events.fire("pixelboundschange")},this),this._objectController.setMap(this._context.getMap())},_clearObjectController:function(){this._objectController&&(this._objectController.destroy(),this._objectControllerListener.removeAll())},_onClusterizeChange:function(){var e=[];this._objectController&&(e=this._objectController.getAll()),this._clearObjectController(),this._setupObjectController(),this._objectController&&this._objectController.add(e)},_fireStateChange:function(e){this.events.fire("statechange",{added:e.added||[],removed:e.removed||[],addedClusters:e.addedClusters||[],removedClusters:e.removedClusters||[],update:e.update||[],sync:e.sync})}}),e(a)})}],[";A",function(e){e.modules.define("objectManager.component.OnceLoadingDataController",["util.defineClass","objectManager.component.BaseDataLoadController","objectManager.component.TileLoadTree","objectManager.parseData","objectManager.util"],function(e,t,n,i,o,s){var r=function(e){r.superclass.constructor.call(this,e),this._tileLoadTree=new i(e)};t(r,n,{onMapZoomChange:function(e){var t=e.get("newTileBounds"),n=this.getNotLoadedTiles(s.getTilesArrayFromTileBoundsArray(t,Math.round(this.context.getMap().getZoom())));n.length&&this.loadData(n)},getNotLoadedTiles:function(e){for(var t,n,i=[],o=0,s=e.length;o<s;o++)t=e[o].tileNumber,n=e[o].zoom,this._tileLoadTree.isTileLoaded(t,n)||(i=i.concat(this._tileLoadTree.getMissingTiles(t,n)));return i},onDataLoad:function(e,t){for(var n=0,i=e.length;n<i;n++)this._tileLoadTree.addLoadedTile(e[n].tileNumber,e[n].zoom);for(var s=[],n=0,i=t.length;n<i;n++)s=s.concat(o(t[n]));this.storage.add(s),this._showData(e),r.superclass.onDataLoad.call(this,e,t)},reloadData:function(){this._tileLoadTree.clear(),r.superclass.reloadData.call(this)},_showData:function(e){for(var t=0,n=e.length;t<n;t++)this.events.fire("statechange",{added:this._getTileDataFromStorage(e[t].tileNumber,e[t].zoom),removed:[]})},_getTileDataFromStorage:function(e,t){return this.storage.getTileData(e,t)}}),e(r)})}],[";B",function(e){e.modules.define("objectManager.component.ReloadOnZoomChangeController",["util.defineClass","objectManager.component.BaseDataLoadController","objectManager.parseData","objectManager.util","util.cancelableCallback"],function(e,t,n,i,o,s){var r=function(e){r.superclass.constructor.call(this,e),this._loadedTiles={},this._oldZoomObjects=[]};t(r,n,{onMapZoomChange:function(e){this._loadedTiles={},this.abortLoading(),this._expiredObjects=this.storage.getAll(),this.loadData(o.getTilesArrayFromTileBoundsArray(e.get("newTileBounds"),Math.round(this.context.getMap().getZoom())))},getNotLoadedTiles:function(e){for(var t,n=[],i=0,o=e.length;i<o;i++)t=e[i].tileNumber,this._loadedTiles[t[0]]&&this._loadedTiles[t[0]][t[1]]||n.push(e[i]);return n},onDataLoad:function(e,t){for(var n=[],o=[],s=[],a=[],l={},c=0,u=t.length;c<u;c++){for(var h=i(t[c]),d=[],g=0,p=h.length;g<p;g++)l[h[g].id]||(l[h[g].id]=!0,d.push(h[g]));n=n.concat(d)}if(this._expiredObjects){var m=this._getObjectsDiff(n,this._expiredObjects);o=m.removed,s=m.added,a=m.update,this._expiredObjects=null}else s=n;this._markTiles(e),this.storage.remove(o),this.storage.add(s),this.events.fire("statechange",{added:s,removed:o}),r.superclass.onDataLoad.call(this,e,t)},destroy:function(){r.superclass.destroy.call(this),this._expiredObjects=[]},_markTiles:function(e){for(var t,n,i=0,o=e.length;i<o;i++)t=e[i].tileNumber[0],n=e[i].tileNumber[1],this._loadedTiles[t]||(this._loadedTiles[t]={}),this._loadedTiles[t][n]={loaded:!0}},_getObjectsDiff:function(e,t){var n,i,o={added:[],removed:[]},s={},r={};for(n=0,i=e.length;n<i;n++)r[e[n].id]=e[n];for(n=0,i=t.length;n<i;n++)s[t[n].id]=t[n];for(n=0,i=e.length;n<i;n++)s[e[n].id]||o.added.push(e[n]);for(n=0,i=t.length;n<i;n++)r[t[n].id]||o.removed.push(t[n]);return o}}),e(r)})}],["!9",function(e){e.modules.define("objectManager.component.TileLoadTree",["util.defineClass"],function(e,t){function n(e){var t=[],n=[2*e[0],2*e[1]];return t.push(n),t.push([n[0],n[1]+1]),t.push([n[0]+1,n[1]]),t.push([n[0]+1,n[1]+1]),t}var i=function(e){this._tileTree={},this._context=e};t(i,{clear:function(){this._tileTree={}},addLoadedTile:function(e,t){this._tileTree[t]||(this._tileTree[t]={}),this._tileTree[t][e[0]]||(this._tileTree[t][e[0]]={}),this._tileTree[t][e[0]][e[1]]=!0},isTileLoaded:function(e,t,i){if(this._tileTree[t]&&this._tileTree[t][e[0]]&&this._tileTree[t][e[0]][e[1]])return!0;if(t>=this._context.options.get("maxZoom",23)||t<=this._context.options.get("minZoom",0))return!1;if("down"!=i){var o=[Math.floor(e[0]/2),Math.floor(e[1]/2)];if(this.isTileLoaded(o,t-1,"up"))return this.addLoadedTile(e,t),!0}if("up"!=i){var s=n(e),r=t+1;if(this.isTileLoaded(s[0],r,"down")&&this.isTileLoaded(s[1],r,"down")&&this.isTileLoaded(s[2],r,"down")&&this.isTileLoaded(s[3],r,"down"))return this.addLoadedTile(e,t),!0}return!1},getMissingTiles:function(e,t){var i=[];if(!this.isTileLoaded(e,t))if(t==this._context.options.get("maxZoom",23))i.push({tileNumber:e,zoom:t});else{for(var o=n(e),s=t+1,r=!0,a=0;a<4;a++)this.isTileLoaded(o[a],s)&&(r=!1);r?i.push({tileNumber:e,zoom:t}):i=i.concat(this.getMissingTiles(o[0],s)).concat(this.getMissingTiles(o[1],s)).concat(this.getMissingTiles(o[2],s)).concat(this.getMissingTiles(o[3],s))}return i}}),e(i)})}],["!$",function(e){e.modules.define("objectManager.component.TileSource",["util.processUrlTemplate","util.defineClass"],function(e,t,n){function i(e){this._objectManager=e}n(i,{getTileUrl:function(e){var n=this._objectManager;return t(n.getUrlTemplate(),e)},getPadding:function(e){var n=this._objectManager.options.get("paddingTemplate",null);return n?t(n,e).replace(/\W/g,"_"):null}}),e(i)})}],["!_",function(e){e.modules.define("objectManager.component.View",["util.defineClass","vow","util.cancelableCallback","geometry.pixel.Point","overlay.storage","option.Manager","option.Router","Event","util.id","constants.zIndex","objectManager.objectCollection.overlayOptionMapper","objectManager.clusterCollection.overlayOptionMapper","util.extend","objectManager.component.createGeometry","util.Chunker","util.bind"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f){var _=function(e,t,n){this._context=e,this._objectsEditingEventManager=t,this._clustersEditingEventManager=n,this._contextListener=null,this._overlayStorageCallbacks={},this._overlayCreateCallbacks={},this._objectCollectionListener=null,this._clusterCollectionListener=null,this._overlayListeners={},this._startObjectManagerListening(),this._startListeningObjectCollection(),this._startListeningClusterCollection(),this._startOverlaysListening(),this._geometries={},this._geometriesListeners={},this._chunker=null,this._removeFromMapQueue={}};t(_,{setObjectManager:function(e){e!=this._context&&(this._context&&this._onObjectManagerRemove(),this._context=e,this._context&&this._onObjectManagerAdd())},destroy:function(){this._stopOverlaysListening(),this._stopListeningClusterCollection(),this._stopListeningObjectCollection(),this._stopObjectManagerListening(),this._clearOverlayCreateCallbacks(),this._clearOverlayStorageCallbacks()},_startObjectManagerListening:function(){this._contextListener=this._context.events.group().add("statechange",this._onStateChange,this)},_stopObjectManagerListening:function(){this._contextListener.removeAll()},_startListeningObjectCollection:function(){this._objectCollectionListener=this._context.objects.events.group().add("objectoptionschange",this._onObjectOptionsChange,this).add("objectpropertieschange",this._onObjectPropertiesChange,this)},_stopListeningObjectCollection:function(){this._objectCollectionListener.removeAll()},_startListeningClusterCollection:function(){this._clusterCollectionListener=this._context.clusters.events.group().add("clusteroptionschange",this._onClusterOptionsChange,this).add("clusterpropertieschange",this._onClusterPropertiesChange,this)},_stopListeningClusterCollection:function(){this._clusterCollectionListener.removeAll()},_startOverlaysListening:function(){this._context.objects.overlays.events.add("mouseenter",this._onOverlayMouseEnter,this).add(["mouseleave","mapchange"],this._onOverlayMouseLeave,this),this._context.clusters.overlays.events.add("mouseenter",this._onOverlayMouseEnter,this).add(["mouseleave","mapchange"],this._onOverlayMouseLeave,this)},_stopOverlaysListening:function(){this._context.objects.overlays.events.remove("mouseenter",this._onOverlayMouseEnter,this).remove(["mouseleave","mapchange"],this._onOverlayMouseLeave,this),this._context.clusters.overlays.events.remove("mouseenter",this._onOverlayMouseEnter,this).remove(["mouseleave","mapchange"],this._onOverlayMouseLeave,this)},_onObjectOptionsChange:function(e){var t=e.get("objectId"),n=this._context.objects.overlays.getById(t);n&&this._setParentOptionManager(n,this._context.objects.getById(t),"object")},_onClusterOptionsChange:function(e){var t=e.get("objectId"),n=this._context.clusters.overlays.getById(t);n&&this._setParentOptionManager(n,this._context.clusters.getById(t),"cluster")},_onObjectPropertiesChange:function(e){var t=e.get("objectId"),n=this._context.objects.overlays.getById(t);n&&n.setData(this._context.objects.getById(t))},_onClusterPropertiesChange:function(e){var t=e.get("objectId"),n=this._context.clusters.overlays.getById(t);n&&n.setData(this._context.clusters.getById(t))},_onStateChange:function(e){var t=e.get("added"),n=e.get("removed"),i=e.get("update"),o=e.get("addedClusters"),s=e.get("removedClusters"),r=e.get("sync");r?(n&&n.length&&this._removeObjectsFromMapSync(n),s&&s.length&&this._removeClustersFromMapSync(s)):(n&&n.length&&this._removeObjectsFromMap(n),s&&s.length&&this._removeClustersFromMap(s)),o&&o.length&&this._addClustersToMap(o),t&&t.length&&this._addObjectsToMap(t),i&&i.length&&this._updateObjects(i)},_addObjectsToMap:function(e){for(var t=0,n=e.length;t<n;t++)this._removeFromMapQueue[e[t].id]?delete this._removeFromMapQueue[e[t].id]:this._setupObjectView(e[t],"object")},_removeObjectsFromMap:function(e){for(var t=0,n=e.length;t<n;t++)this._removeFromMapQueue[e[t].id]=!0;new m(e,{worker:f(this._removeObjectFromMap,this),chunkSize:1e3,useRaf:!0}).start()},_removeClustersFromMap:function(e){for(var t=0,n=e.length;t<n;t++)this._removeFromMapQueue[e[t].id]=!0;new m(e,{worker:f(this._removeClusterFromMap,this),chunkSize:1e3,useRaf:!0}).start()},_removeObjectsFromMapSync:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];this._removeFromMapQueue[i.id]=!0,this._removeObjectFromMap(i)}},_removeClustersFromMapSync:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];this._removeFromMapQueue[i.id]=!0,this._removeClusterFromMap(i)}},_removeObjectFromMap:function(e){this._removeFromMapQueue[e.id]&&(this._clearOverlayData(e,"object"),this._destroyObjectView(e,"object"),delete this._removeFromMapQueue[e.id])},_addClustersToMap:function(e){for(var t=0,n=e.length;t<n;t++)this._removeFromMapQueue[e[t].id]?delete this._removeFromMapQueue[e[t].id]:this._setupObjectView(e[t],"cluster")},_removeClusterFromMap:function(e){this._removeFromMapQueue[e.id]&&(this._clearOverlayData(e,"cluster"),this._destroyObjectView(e,"cluster"),delete this._removeFromMapQueue[e.id])},_setupObjectView:function(e,t){var n=e.id;if(this._context.options.get("syncOverlayInit",!1)){var o=this._createObjectOverlaySync(e);this._addOverlayToMap(o,e,t)}else this._overlayCreateCallbacks[n]=i.create(function(i){this._overlayCreateCallbacks[n]&&delete this._overlayCreateCallbacks[n],this._addOverlayToMap(i,e,t)},this),this._createObjectOverlay(e).done(this._overlayCreateCallbacks[n])},_addOverlayToMap:function(e,t,n){var i="object"==n,o=new l({target:this,type:"addoverlay",objectId:t.id,overlay:e});i?this._objectsEditingEventManager.fire("addoverlay",o):this._clustersEditingEventManager.fire("addoverlay",o);var s=null!=(i?this._context.objects.overlays.getById(t.id):this._context.clusters.overlays.getById(t.id));s&&(this._setParentOptionManager(e,t,n),e.setMap(this._context.getMap()))},_clearOverlayData:function(e,t){var n=e.id;this._geometries[n]&&(this._geometries[n].setMap(null),delete this._geometries[n],this._geometriesListeners[e.id].removeAll(),delete this._geometriesListeners[e.id]),this._overlayCreateCallbacks[n]&&(this._overlayCreateCallbacks[n].cancel(),delete this._overlayCreateCallbacks[n]),this._overlayStorageCallbacks[n]&&(this._overlayStorageCallbacks[n].cancel(),delete this._overlayStorageCallbacks[n])},_destroyObjectView:function(e,t){var n=e.id,i="object"==t,o=i?this._context.objects.overlays.getById(n):this._context.clusters.overlays.getById(n);if(o){o.setMap(null),o.options.setParent(null);var s=new l({type:"remove",target:this,overlay:o,objectId:n});i?this._objectsEditingEventManager.fire("removeoverlay",s):this._clustersEditingEventManager.fire("removeoverlay",s)}},_createObjectOverlay:function(e){var t=n.defer();return this._getOverlay(e,function(n){var i=this._createOverlay(n,e);t.resolve(i)}),t.promise()},_createObjectOverlaySync:function(e){var t=this._getOverlaySync(e);return this._createOverlay(t,e)},_createOverlay:function(e,t){return new e(this._createPixelGeometry(t),t)},_updateOverlay:function(e,t){t&&t.setGeometry(this._createPixelGeometry(e))},_updateObjects:function(e){for(var t,n=0,i=e.length;n<i;n++)t=this._context.objects.overlays.getById(e[n].id)||this._context.clusters.overlays.getById(e[n].id),t&&"Point"==e[n].geometry.type&&this._updateOverlay(e[n],t)},_getOverlay:function(e,t){var n=this._resolveOverlay(e),o=s.get(n);"undefined"==typeof o?(this._overlayStorageCallbacks[e.id]=i.create(function(n){this._overlayStorageCallbacks[e.id]&&delete this._overlayStorageCallbacks[e.id],t.call(this,n)},this),s.require([n],this._overlayStorageCallbacks[e.id])):t.call(this,o)},_getOverlaySync:function(e){var t=this._resolveOverlay(e);return s.get(t)},_resolveOverlay:function(e){var t=null!=this._context.objects.getById(e.id),n=t?this._context.objects.options:this._context.clusters.options;return e.options&&e.options.overlay||n.get(e.geometry.type+"Overlay","default#placemark")},_setParentOptionManager:function(e,t,n){var i="object"==n,o=i?this._context.objects.overlays.options:this._context.clusters.overlays.options;if(t.options){var s=new r(t.options);i?s.setMapper(h):s.setMapper(d),e.options.setParent(new a(s,o))}else e.options.setParent(o);this._setOverlayZIndex(e,"zIndex",this._isMouseOver?"hover":"overlay")},_onOverlayMouseEnter:function(e){this._isMouseOver=!0,this._setupHoverZIndex(e.get("overlay"))},_onOverlayMouseLeave:function(e){this._isMouseOver=!1,this._clearOverlayZIndex(e.get("overlay"))},_setupHoverZIndex:function(e){this._setOverlayZIndex(e,"zIndexHover","hover")},_clearOverlayZIndex:function(e){this._setOverlayZIndex(e,"zIndex","overlay")},_setOverlayZIndex:function(e,t,n){var i=e.options.getParent(),o=i.resolve(t);o||(o=i.resolve("icon"+t.charAt(0).toUpperCase()+t.substr(1))),e.options.set("zIndex",o||u[n])},_clearOverlayCreateCallbacks:function(){for(var e in this._overlayCreateCallbacks)this._overlayCreateCallbacks.hasOwnProperty(e)&&this._overlayCreateCallbacks[e].cancel()},_clearOverlayStorageCallbacks:function(){for(var e in this._overlayStorageCallbacks)this._overlayStorageCallbacks.hasOwnProperty(e)&&this._overlayStorageCallbacks[e].cancel()},_createPixelGeometry:function(e){return"Point"==e.geometry.type?new o(this._context.options.get("projection").toGlobalPixels(e.geometry.coordinates,this._context.getMap().getZoom())):(this._geometries[e.id]||(this._geometries[e.id]=p(e,this._context.options.get("projection")),this._geometries[e.id].setMap(this._context.getMap()),this._geometriesListeners[e.id]=this._geometries[e.id].events.group().add("pixelgeometrychange",function(){this._updateOverlay(e,this._context.objects.overlays.getById(e.id))},this)),this._geometries[e.id].getPixelGeometry())}}),e(_)})}],["6m",function(e){e.modules.define("objectManager.Hint",["util.defineClass","Hint","component.sharedEntity.captor.Popup","event.Manager","map.addon.hint","objectManager.objectCollection.optionMapper","objectManager.clusterCollection.optionMapper","option.Manager","util.component","util.extend","util.preset","Monitor","projection.idle","data.Manager","popup.component.checkEmptiness","popup.managerStorage","vow","util.id","util.cancelableCallback","objectManager.component.createGeometry","util.bounds"],function(e,t,n,i,o,s,r,a,l,c,u,h,d,g,p,m,f,_,M,v,y,j){function b(e){this._collection=e,e.getObjectManager().getMap()&&(this._setupSharingManager(),this._setupDomEvents()),this.events=new o({context:this}),this._setupOptionMonitor(),this._objectIdWithOpenHint=null,this._activeObjectId=null,this._objectIdWithOpenBalloon=null,this._collectionEventListener=null,this._enableHintMove=!0,this._setupCollectionEvents(),this._setupMapChangeListener(),this._captorListeners={},this._isEmptyCheckCallback=null}var I={projection:g};t(b,c.createProxyMethods(function(){return this._captor},["getOwner","getOverlay","getOverlaySync","getPosition","getOptions","setOptions","setPosition"]),{isOpen:function(e){return!(!this._captor||!this._captor.isOpen()||this._objectIdWithOpenHint!=e)},isEmpty:function(e){var t=this._collection.getById(e),n=this._specifyData(t);return n.options=this._createPopupOptions(t),m(this._collection.getObjectManager().getMap(),"hint",t.geometry.coordinates,n);
},open:function(e,t){this._activeObjectId=e;var n=_.defer();this._captor&&this._objectIdWithOpenHint!=e&&(this._destroyCaptor(this._captor),this._clearCaptorListeners(this._captor)),this._objectIdWithOpenHint==e&&this._captor||(this._captor=this._createCaptor(e),this._setupCaptorListeners(this._captor));var i=this._collection.getById(e),o=this._captor.open(t||this._getCenter(e),this._specifyData(i),this._createPopupOptions(i));return o.always(function(t){t.isRejected()?(this._onOpenReject(e),n.reject(t.valueOf())):(this._onOpen(e),n.resolve(!0))},this),n.promise()},close:function(e){if(this._captor){var t=_.defer();return this._captor.close(e).always(function(e){e.isRejected()?t.reject(e.valueOf()):(this._onClose(),t.resolve(!0))},this),t.promise()}return _.resolve(!0)},setData:function(e){if(this._captor)return this._captor.setData(this._specifyData(e))},getData:function(){if(this._captor){var e=this._captor.getData();return e?e.object:null}return null},destroy:function(){this.close(!0),this._captor&&(this._clearCaptorListeners(this._captor),this._destroyCaptor(this._captor),this._captor=null),this._optionMonitor.destroy(),this._clearDomEvents(),this._clearMapChangeListener()},_setupOptionMonitor:function(){this._optionMonitor=new d(this._collection.options).add("openHintOnHover",this._onOpenHintOnHoverChange,this)},_setupMapChangeListener:function(){this._collection.getObjectManager().events.add("mapchange",this._onMapChange,this)},_clearMapChangeListener:function(){this._collection.getObjectManager().events.remove("mapchange",this._onMapChange,this)},_onOpenHintOnHoverChange:function(){this._collection.options.get("openHintOnHover",!0)?this._collection.events.add("mouseenter",this._onMouseEnter,this):this._collection.events.remove("mouseenter",this._onMouseEnter,this)},_onClose:function(){var e=this._objectIdWithOpenHint;null!==e&&"undefined"!=typeof e&&(e==this._activeObjectId&&(this._activeObjectId=null),this._objectIdWithOpenHint=null,this._lastPosition=null,this.events.fire("close",{objectId:e}))},_setupDomEvents:function(){this._collection.options.get("openHintOnHover",!0)&&this._collection.events.add("mouseenter",this._onMouseEnter,this)},_clearDomEvents:function(){this._collection.options.get("openHintOnHover",!0)&&this._collection.events.remove("mouseenter",this._onMouseEnter,this)},_onMouseEnter:function(e){if(!e.isDefaultPrevented()){var t=e.get("objectId");t!=this._objectIdWithOpenBalloon&&this._getObjectOption(t,"openHintOnHover",!0)&&(e.preventDefault(),this._enableHintMove=!0,this._lastPosition=e.get("globalPixels"),this._getObjectOption(t,"openEmptyHint",!1)?this.open(t,this._lastPosition):(this._isEmptyCheckCallback=v.create(function(e){!e&&this._collection.getById(t)&&this._lastPosition&&this.open(t,this._lastPosition)},this),this.isEmpty(t).then(this._isEmptyCheckCallback)))}},_onOpen:function(e){e!=this._objectIdWithOpenHint&&(this._objectIdWithOpenHint=e,this.events.fire("open",{objectId:e}))},_onOpenReject:function(e){e==this._activeObjectId&&(this._activeObjectId=null)},_onMapChange:function(){this._collection.getObjectManager().getMap()?(this._setupSharingManager(),this._setupDomEvents(),this._setupCollectionEvents()):(this._clearCollectionEvents(),this._clearDomEvents(),this.close(!0))},_setupSharingManager:function(){this._captor&&(this._sharingManager=s.get(this._collection.getObjectManager().getMap()),this._captor.setSharingManager(this._sharingManager))},_setupCollectionEvents:function(){this._collectionEventListener=this._collection.events.group().add("mouseleave",this._onObjectMouseLeave,this).add("mousemove",this._onObjectMouseMove,this).add("overlayremove",this._onOverlayRemove,this).add("balloonopen",this._onBalloonOpen,this).add("balloonclose",this._onBalloonClose,this)},_clearCollectionEvents:function(){this._collectionEventListener&&(this._collectionEventListener.removeAll(),this._collectionEventListener=null)},_onObjectMouseLeave:function(){this._isEmptyCheckCallback&&(this._isEmptyCheckCallback.cancel(),this._isEmptyCheckCallback=null),null!==this._activeObjectId&&"undefined"!=typeof this._activeObjectId&&(this._enableHintMove=!1,this._lastPosition=null,this.close())},_onObjectMouseMove:function(e){this._enableHintMove&&(this._captor&&this._captor.setPosition(e.get("globalPixels")),this._lastPosition=e.get("globalPixels"))},_onBalloonOpen:function(e){this._isEmptyCheckCallback&&(this._isEmptyCheckCallback.cancel(),this._isEmptyCheckCallback=null);var t=e.get("objectId");t==this._activeObjectId&&this.close(!0),this._objectIdWithOpenBalloon=t},_onBalloonClose:function(){this._objectIdWithOpenBalloon=null},_onOverlayRemove:function(e){var t=e.get("objectId");t==this._activeObjectId&&this.close(!0)},_createCaptor:function(e){var t=this._collection.getObjectManager().getMap(),n=t&&s.get(t),o=new i(this,this._collection,"hint",n);return o},_destroyCaptor:function(e){e.close(!0),e.destroy()},_setupCaptorListeners:function(e){this._captorListeners[M.get(e)]=e.events.group().add(["open","close"],function(e){e.stopImmediatePropagation()}).add("release",this._onClose,this).add("capture",function(){this.close(!0)},this)},_clearCaptorListeners:function(e){var t=M.get(e);this._captorListeners[t].removeAll(),delete this._captorListeners[t]},_specifyData:function(e){return{collection:this._collection,properties:new p(e.properties),state:this._collection.state||new p,object:e}},_getObjectOption:function(e,t,n){var i=this._collection.getById(e);if(!i)return null;var o=i.options?i.options[t]:void 0;return"undefined"==typeof o?this._collection.options.get(t,n):o},_getCenter:function(e){var t=this._collection.getById(e),n=this._collection.options.get("projection"),i=y(t,n),o=this._collection.getObjectManager().getMap();return i.setMap(o),j.getCenter(i.getPixelGeometry().getBounds())},_createPopupOptions:function(e){return new l({},new l(e.options?u({},I,e.options):I,this._collection.options,null,r),"hint")}}),r.setRule({name:"hint",rule:"prefixed"}).setRule({name:"hint",key:"projection",rule:"plain"}),a.setRule({name:"hint",rule:"prefixed"}).setRule({name:"hint",key:"projection",rule:"plain"}),e(b)})}],["!R",function(e){e.modules.define("objectManager.ObjectCollection",["util.defineClass","component.collection.BaseCollection","objectManager.OverlayCollection","objectManager.objectCollection.optionMapper","objectManager.parseData","event.Manager","event.Mapper","objectManager.OverlayMappingTable","Event","option.Manager","event.globalize","util.extend"],function(e,t,n,i,o,s,r,a,l,c,u,h,d){var g=function(e,t){this._objectManager=e,this.events=new r({context:this}),this.events.addController(p),this.options=new u,this.options.events.add("change",function(){this.events.fire("optionschange")},this),this.options.setMapper(o),this.options.setName("objectCollection"),this._collectionComponent=new n({onAdd:{callback:this._onAdd,context:this},onRemove:{callback:this._onRemove,context:this}}),this._objectsById={},this._overlayEditingEventManager=new r,this.overlays=new i(this._overlayEditingEventManager),this.overlays.options.setParent(this.options),this.overlays.events.setParent(new a(this.events,new l(this))),this._editingEventManager=t,this._editingEventManager.add("addoverlay",this._onOverlayAdd,this).add("removeoverlay",this._onOverlayRemove,this).add("removealloverlays",this._onOverlayRemoveAll,this),this.events.fire("create")},p=h(g);t(g,{getObjectManager:function(){return this._objectManager},add:function(e){var t=s(e);return t=this._getNewObjects(t),this._addObjects(t),this},remove:function(e){var t=this._getIdsArray(e),n=this._getAddedObjectsById(t);return this._removeObjects(n),this},removeAll:function(){var e=this.getAll();return this._objectsById={},this._collectionComponent.removeAll(),this.events.fire("objectsremove",new c({type:"objectsremove",target:this,objects:e})),this},getById:function(e){return this._objectsById[e]||null},getLength:function(){return this._collectionComponent.getLength()},getIterator:function(){return this._collectionComponent.getIterator()},each:function(e,t){this._collectionComponent.each(e,t)},getAll:function(){for(var e,t=this.getIterator(),n=[];(e=t.getNext())!=t.STOP_ITERATION;)n.push(e);return n},setObjectOptions:function(e,t){var n=this.getById(e);return n&&(n.options=n.options?d(n.options,t):t,this.events.fire("objectoptionschange",{objectId:e})),this},setObjectProperties:function(e,t){var n=this.getById(e);n&&(n.properties=n.properties?d(n.properties,t):t,this.events.fire("objectpropertieschange",{objectId:e}))},_getNewObjects:function(e){for(var t=[],n=0,i=e.length;n<i;n++)this.getById(e[n].id)||t.push(e[n]);return t},_addObjects:function(e){for(var t=0,n=e.length;t<n;t++)this._objectsById[e[t].id]=e[t],this._collectionComponent.add(e[t]);this.events.fire("objectsadd",new c({type:"objectsadd",target:this,objects:e}))},_removeObjects:function(e){for(var t=0,n=e.length;t<n;t++)delete this._objectsById[e[t].id],this._collectionComponent.remove(e[t]);this.events.fire("objectsremove",new c({type:"objectsremove",target:this,objects:e}))},_getIdsArray:function(e){for(var t=s(e),n=[],i=0,o=t.length;i<o;i++)"undefined"!=typeof t[i].id?n.push(t[i].id):n.push(t[i]);return n},_getAddedObjectsById:function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]in this._objectsById&&t.push(this._objectsById[e[n]]);return t},_onAdd:function(e){this.events.fire("add",new c({type:"add",target:this,child:e,objectId:e.id}))},_onRemove:function(e){this.events.fire("remove",new c({type:"remove",target:this,child:e,objectId:e.id}))},_onOverlayAdd:function(e){this._overlayEditingEventManager.fire("add",new c({type:"add",target:this,overlay:e.get("overlay"),objectId:e.get("objectId")}))},_onOverlayRemove:function(e){this._overlayEditingEventManager.fire("remove",new c({type:"remove",target:this,overlay:e.get("overlay"),objectId:e.get("objectId")}))},_onOverlayRemoveAll:function(e){this._overlayEditingEventManager.fire("removeall")}}),e(g)})}],[";v",function(e){e.modules.define("objectManager.objectCollection.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],[";w",function(e){e.modules.define("objectManager.objectCollection.overlayOptionMapper",["option.Mapper"],function(e,t){e(new t)})}],["6o",function(e){e.modules.define("objectManager.optionMapper",["option.Mapper"],function(e,t){e(new t)})}],["!S",function(e){e.modules.define("objectManager.OverlayCollection",["util.defineClass","ReadOnlyCollection","event.Manager","Event","option.Manager","util.bind","util.id","constants.mapDomEvents","objectManager.objectCollection.overlayOptionMapper","geoObject.view.overlayMapping"],function(e,t,n,i,o,s,r,a,l,c,u){for(var h={},d=0,g=l.length;d<g;d++)h[l[d]]=!0;var p=function(e){this._overlayEditingEventManager=new i,p.superclass.constructor.call(this,this._overlayEditingEventManager),this.options.setMapper(c),this._overlaysById={},this._idsByOverlay={},this._controller={onAfterEventFiring:r(this._onAfterObjectEventFiring,this)},this._editingEventManager=e,this._editingEventManager.add("add",this._onEditingManagerAddRequest,this).add("remove",this._onEditingManagerRemoveRequest,this).add("removeall",this._onEditingManagerRemoveAllRequest,this),this._mappingByOverlayName={}};t(p,n,{getById:function(e){return this._overlaysById[e]||null},getId:function(e){var t=this._idsByOverlay[a.get(e)];return"undefined"==typeof t?null:t},onChildAdd:function(e){this._mappingByOverlayName[e.options.getName()]||(this._mappingByOverlayName[e.options.getName()]=!0,u.setupMapping(c,e.options.getName(),e.getGeometry().getType())),e.events.addController(this._controller),this.events.fire("add",new o({type:"add",target:this,overlay:e,objectId:this.getId(e)}))},onChildRemove:function(e){var t=this.getId(e),n=a.get(e);e.events.removeController(this._controller),delete this._overlaysById[t],delete this._idsByOverlay[n],this.events.fire("remove",new o({type:"remove",target:this,overlay:e,objectId:t}))},_onEditingManagerAddRequest:function(e){var t=e.get("overlay"),n=e.get("objectId");this._idsByOverlay[a.get(t)]=n,this._overlaysById[n]=t,this._overlayEditingEventManager.fire("add",new o({type:"add",target:this,object:t}))},_onEditingManagerRemoveRequest:function(e){var t=e.get("overlay");this._overlayEditingEventManager.fire("remove",new o({type:"remove",target:this,object:t}))},_onEditingManagerRemoveAllRequest:function(){this._overlaysById={},this._idsByOverlay={},this._overlayEditingEventManager.fire("removeAll")},_onAfterObjectEventFiring:function(e,t,n){if(t in h&&!n.isImmediatePropagationStopped()){var i=n.get("target");this.events.fire(t,{objectId:this.getId(i),overlay:i,pagePixels:n.get("pagePixels"),clientPixels:n.get("clientPixels"),globalPixels:n.get("globalPixels"),coords:n.get("coords"),domEvent:n.get("domEvent")})}}}),e(p)})}],[";x",function(e){e.modules.define("objectManager.OverlayMappingTable",["util.defineClass","Event"],function(e,t,n){var i=function(e){this._context=e,this["*"]=this._defaultMappingFunction,this.add=this._addMappingFunction,this.remove=this._removeMappingFunction};t(i,{_defaultMappingFunction:function(e){return new n({currentTarget:this._context},e)},_addMappingFunction:function(e){return new n({type:"overlayadd",currentTarget:this._context},e)},_removeMappingFunction:function(e){return new n({type:"overlayremove",currentTarget:this._context},e)}}),e(i)})}],["!8",function(e){e.modules.define("objectManager.parseData",["util.array","util.json"],function(e,t,n){function i(e){return"string"==typeof e?i(n.from(e)):t.isArray(e)?t.map(e,s):"FeatureCollection"==e.type?o(e):"Feature"==e.type||"Cluster"==e.type?[s(e)]:[]}function o(e){for(var t=[],n=0,i=e.features.length;n<i;n++){var s=e.features[n];switch(s.type){case"FeatureCollection":t=t.concat(o(s));break;case"Cluster":s.properties&&!s.properties.geoObjects&&s.features&&(s.properties.geoObjects=s.features.slice()),t.push(s);break;default:t.push(s)}}return t}function s(e){return e.hasOwnProperty("options")||(e.options={}),e.hasOwnProperty("properties")||(e.properties={}),e}e(i)})}],["6p",function(e){e.modules.define("objectManager.util",[],function(e){e({getTilesArrayFromTileBoundsArray:function(e,t,n){for(var i,o=[],s=0,r=e.length;s<r;s++){i=e[s];for(var a=i[0][0];n?a<=i[1][0]:a<i[1][0];a++)for(var l=i[0][1];n?l<=i[1][1]:l<i[1][1];l++)o.push({tileNumber:[a,l],zoom:t})}return o}})})}],["6s",function(e){e.modules.define("option.Manager",["util.defineClass","util.extend","util.objectKeys","component.child.BaseChild","option.presetStorage","event.manager.Base","Event","option.manager.Monitor","option.manager.LocalMonitor"],function(e,t,n,i,o,s,r,a,l,c){var u={},h=t(function(e,t,n,i){this._options=e||null,this._originalOptions=Boolean(this._options),this._baseItem=new o(this._parentChangeCallback,this),t&&this._baseItem.setParent(t),this._name=n,this._mapper=null,this._cache={},this._frozen=!1,this._changed=!1,this._monitor=null,this.setMapper(i),this.events=new r},{setParent:function(e){return this._baseItem.setParent(e),this},getParent:function(){return this._baseItem.getParent()},setName:function(e){this._name!=e&&(this._name=e,this._cache={},this._fire())},getName:function(){return this._name},setMapper:function(e){this._getMapper()!=e&&(this._mapper&&this._clearMapper(),this._mapper=e?{mapper:e,active:!1}:null,this.getParent()&&(this._mapper&&this._setupMapper(),this.events&&this._fire()))},_getMapper:function(){return this._mapper?this._mapper.mapper:null},set:function(e,t){var n=e;"string"==typeof e&&(n={},n[e]=t);var o=i(n),s=this._getOptionsForChanging(),r=!1;n.hasOwnProperty("preset")&&(this._cache={});for(var a=0,l=o.length;a<l;++a)e=o[a],t=n[e],s[e]!==t&&(this._cache[e]=t,s[e]=t,r=!0);return r&&this._fire(),this},get:function(e,t){if("preset"==e)return this.getNative(e)||t;var n=this._cache[e];if("undefined"==typeof n){var i=this._find(e);n=this._cache[e]="undefined"==typeof i?u:i}return n==u?t:n},getNative:function(e){return this._options?this._options[e]:void 0},getAll:function(){return this._getOptionsForChanging()},resolve:function(e,t){if(this._mapper){var n,i=this._mapper.mapper.resolve(e,t);if("string"==typeof i)n=this.get(i);else for(var o=0,s=i.length;o<s&&(n=this.get(i[o]),"undefined"==typeof n);o++);return n}return this.get(e)},unset:function(e){"string"==typeof e&&(e=[e]);for(var t=this._getOptionsForChanging(),n=!0,i=!1,o=0,s=e.length;o<s;o++){var r=e[o];t.hasOwnProperty(r)&&(n&&("preset"==r?(this._cache={},n=!1):delete this._cache[r]),delete t[r],i=!0)}return i&&this._fire(),this},unsetAll:function(){return this._cache={},this._options=null,this._fire(),this},freeze:function(){return this._frozen=!0,this},unfreeze:function(){return this._frozen=!1,this._changed&&(this._changed=!1,this._fire()),this},isFrozen:function(){return this._frozen},getMonitor:function(e){var t=this._monitor||(this._monitor=new l(this));return e?new c(t,e):t},_setupMapper:function(){this._mapper.active||(this._mapper.mapper.events.add("rulechange",this._fire,this),this._mapper.active=!0)},_clearMapper:function(){this._mapper.active&&(this._mapper.mapper.events.remove("rulechange",this._fire,this),this._mapper.active=!1)},_find:function(e){var t;return this._options&&(t=this._options[e],"undefined"==typeof t&&"undefined"!=typeof this._options.preset&&(t=this._resolvePreset(this._options.preset,e))),"undefined"==typeof t&&this._parent&&(t=this._parent.resolve(e,this._name)),t},_resolvePreset:function(e,t){var n;if(e instanceof Array)for(var i=0;i<e.length&&(n=this._resolveKey(e[i],t),"undefined"==typeof n);i++);else n=this._resolveKey(e,t);return n},_resolveKey:function(e,t){var n;return e=s.get(e),"undefined"!=typeof e&&("undefined"!=typeof e[t]?n=e[t]:"undefined"!=typeof e.preset&&(n=this._resolvePreset(e.preset,t))),n},_parentChangeCallback:function(e,t){this._cache={},e&&e.events.remove("change",this._onParentChange,this),t&&t.events.add("change",this._onParentChange,this),this._parent=t,t?this._mapper&&this._setupMapper():this._mapper&&this._clearMapper(),this.events&&(this.events.fire("parentchange",{target:this,oldParent:e,newParent:t}),this._fire())},_onParentChange:function(){this._cache={},this._fire()},_getOptionsForChanging:function(){return this._options?this._originalOptions&&(this._options=n({},this._options),this._originalOptions=!1):this._options={},this._options},_fire:function(){this._frozen?this._changed=!0:(this._monitor&&this._monitor.checkChange(),this.events.fire("change",new a({target:this,type:"change"})))}});e(h)})}],["!!",function(e){e.modules.define("option.manager.LocalMonitor",["util.defineClass"],function(e,t){function n(e,t){this._monitor=e,this._defaultValues=t}t(n,{add:function(e,t,n){return this._monitor.add(e,t,n,this._defaultValues),this},remove:function(e,t,n){return this._monitor.remove(e,t,n,this._defaultValues),this},get:function(e){return this._monitor.get(e,this._defaultValues)}}),e(n)})}],["!*",function(e){e.modules.define("option.manager.Monitor",["util.defineClass","util.bind"],function(e,t,n){function i(e){this._optionManger=e,this._listeners=[],this._values={},this._nameCounters={},this._onCheckCounter=0,this._needTrim=!1,this._trimTimeoutId=0}function o(e,t,n){return e==r?n&&"undefined"!=typeof n[t]?n[t]:s:e}var s,r={};t(i,{add:function(e,t,n,i){if(this._listeners.push(e,t,n,i),"string"==typeof e)this._addName(e);else for(var o=0,s=e.length;o<s;o++)this._addName(e[o]);return this},remove:function(e,t,n,i){var o=this._searchListener(e,t,n,i);if(o!=-1)if(this._listeners[o]=null,this._needTrim=!0,"string"==typeof e)this._removeName(e);else for(var s=0,r=e.length;s<r;s++)this._removeName(e[s]);return this._tryTrimListeners(),this},get:function(e,t){return o(this._values[e],e,t)},checkChange:function(){this._onCheckCounter++;for(var e={},t=0,n=this._listeners.length;t<n;t+=4)this._listeners[t]&&this._checkListener(this._listeners[t],this._listeners[t+1],this._listeners[t+2],this._listeners[t+3],e);this._onCheckCounter--,this._tryTrimListeners()},_checkListener:function(e,t,n,i,s){if("string"==typeof e)this._updateNameValue(e,s),s[e]!=this._values[e]&&this._callNameListener(t,n,o(this._values[e],e,i),o(s[e],e,i));else{this._updateNameValues(e,s);for(var r=0,a=e.length;r<a;r++)if(s[e[r]]!=this._values[e[r]]){this._callNameListener(t,n,this._fixUndefForNames(this._values,e,i),this._fixUndefForNames(s,e,i));break}}},_updateNameValue:function(e,t){"undefined"==typeof t[e]&&(t[e]=this._values[e],this._values[e]=this._resolveNameValue(e))},_updateNameValues:function(e,t){for(var n=0,i=e.length;n<i;n++)this._updateNameValue(e[n],t)},_callNameListener:function(e,t,n,i){t?e.call(t,n,i):e(n,i)},_searchListener:function(e,t,n,i){for(var o=0,s=this._listeners.length;o<s;o+=4)if(this._compareNames(this._listeners[o],e)&&this._listeners[o+1]==t&&this._listeners[o+2]==n&&this._listeners[o+3]==i)return o;return-1},_addName:function(e){this._nameCounters[e]?this._nameCounters[e]++:(this._nameCounters[e]=1,this._values[e]=this._resolveNameValue(e))},_removeName:function(e){this._nameCounters[e]--,this._nameCounters[e]||delete this._values[e]},_resolveNameValue:function(e){return this._optionManger.get(e,r)},_compareNames:function(e,t){var n=typeof e;if(n==typeof t){if("string"==n)return e==t;var i=e.length;if(i==t.length){for(var o=0;o<i;o++)if(e[o]!=t[o])return!1;return!0}}return!1},_tryTrimListeners:function(){this._onCheckCounter||!this._needTrim||this._trimTimeoutId||(this._trimTimeoutId=setTimeout(n(function(){this._needTrim=!1,this._trimTimeoutId=0,this._trimListeners()},this),0))},_trimListeners:function(){for(var e=[],t=0,n=this._listeners.length;t<n;t+=4)this._listeners[t]&&e.push(this._listeners[t],this._listeners[t+1],this._listeners[t+2],this._listeners[t+3]);this._listeners=e},_fixUndefForNames:function(e,t,n){for(var i={},s=0,r=t.length;s<r;s++){var a=t[s];i[a]=o(e[a],a,n)}return i}}),e(i)})}],["6u",function(e){e.modules.define("option.Mapper",["event.Manager","Event","util.array"],function(e,t,n,i){function o(e,t,n){if(i.isArray(n)){for(var o,r=0,a=n.length;r<a;r++){var l=s(e,t,n[r]);o?"string"==typeof l?o.push(l):o=o.concat(l):o="string"==typeof l?[l]:l.slice()}return o}return s(e,t,n)}function s(e,t,n){return"plain"==n?e:"prefixed"==n?r(e,t):n(e,t)}function r(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)}var a=function(e){this._defaultRule=e||null,this._rules={nameRules:{},keyRules:{},keyNameRules:{}},this.events=new t};a.addPrefix=function(e,t){return t+e.slice(0,1).toUpperCase()+e.slice(1)},a.addOptionalPrefix=function(e,t){return[a.addPrefix(e,t),e]},a.addOptionalPrefixForBalloonHint=function(e,t){return 0==e.indexOf("balloon")||0==e.indexOf("hint")?a.addOptionalPrefix(e,t):a.addPrefix(e,t)},a.prototype={setRule:function(e){e.rule||(e.rule="plain");for(var t=[].concat(e.key),i=[].concat(e.name),o=0,s=t.length;o<s;o++)for(var r=0,a=i.length;r<a;r++)this._applyRule(t[o],i[r],e.rule);return this.events.fire("rulechange",new n({target:this,selector:e,rule:e.rule})),this},fireChange:function(){this.events.fire("rulechange")},_applyRule:function(e,t,n){var i=this._rules;t&&e?(i.keyNameRules[e]||(i.keyNameRules[e]={}))[t]=n:t?i.nameRules[t]=n:e&&(i.keyRules[e]=n)},unsetRule:function(e){for(var t=[].concat(e.key),i=[].concat(e.name),o=0,s=t.length;o<s;o++)for(var r=0,a=i.length;r<a;r++)this._cleanRule(t[o],i[r]);return this.events.fire("rulechange",new n({target:this,selector:e,rule:null})),this},_cleanRule:function(e,t){var n=this._rules;t&&e?n.keyNameRules[e]&&delete n.keyNameRules[e][t]:t?delete n.nameRules[t]:e&&delete n.keyRules[e]},resolve:function(e,t){var n=this._rules;return n.keyNameRules[e]&&n.keyNameRules[e][t]?o(e,t,n.keyNameRules[e][t]):n.nameRules[t]?o(e,t,n.nameRules[t]):n.keyRules[e]?o(e,t,n.keyRules[e]):this._defaultRule?o(e,t,this._defaultRule):e}},e(a)})}],["6v",function(e){e.modules.define("option.presetStorage",["util.Storage"],function(e,t){e(new t)})}],["6x",function(e){e.modules.define("option.Router",["util.defineClass","util.array","event.manager.Base","Event"],function(e,t,n,i,o){var s=t(function(e){this._parents=Array.prototype.slice.call(arguments),this._setupChangeListeners(this._parents),this.events=new i},{getParentsLength:function(){return this._parents.length},indexOfParent:function(e){return n.indexOf(this._parents,e)},spliceParents:function(e,t){var n,i=arguments.length;return i>2?(n=this._parents.splice.apply(this._parents,arguments),this._setupChangeListeners(this._parents.slice(e,(e||0)+i-2))):n=this._parents.splice(e,t),this._clearChangeListeners(n),this._fireChange(),n},resolve:function(e,t){for(var n,i=0,o=this._parents.length;i<o&&(n=this._parents[i].resolve(e,t),"undefined"==typeof n);i++);return n},_setupChangeListeners:function(e){for(var t=0,n=e.length;t<n;t++)e[t].events.add("change",this._fireChange,this)},_clearChangeListeners:function(e){for(var t=0,n=e.length;t<n;t++)e[t].events.remove("change",this._fireChange,this)},_fireChange:function(){this.events.fire("change",new o({target:this,type:"change"}))}});e(s)})}],["6D",function(e){e.modules.define("overlay.storage",["util.AsyncStorage"],function(e,t){e(new t("overlay"))})}],[";O",function(e){e.modules.define("package.controls.predefinedSets",["control.manager.predefinedSets","map.metaOptions"],function(e,t,n){function i(e){var t=["zoomControl","searchControl","typeSelector","geolocationControl"],n=[];"small"!=e&&"medium"!=e||t.push("fullscreenControl"),"medium"!=e&&"large"!=e||t.push("trafficControl","rulerControl"),"large"==e&&t.push("routeEditor");for(var i=0,o=t.length;i<o;i++)n.push("small"==e?{type:t[i],options:{size:"small"}}:t[i]);return n}t.add("smallMapDefaultSet",i("small")),t.add("mediumMapDefaultSet",i("medium")),t.add("largeMapDefaultSet",i("large")),t.add("default",i("medium")),n.set("defaultControls",["default"]),e(i)})}],["*_",function(e){e.modules.define("package.full",["Balloon","behavior.DblClickZoom","behavior.Drag","behavior.LeftMouseButtonMagnifier","behavior.MultiTouch","behavior.RightMouseButtonMagnifier","behavior.RouteEditor","behavior.Ruler","behavior.ScrollZoom","behavior.storage","Circle","Clusterer","clusterer.addon.balloon","clusterer.addon.hint","ClusterPlacemark","Collection","collection.Item","control.Button","control.FullscreenControl","control.GeolocationControl","control.ListBox","control.ListBoxItem","control.Manager","control.RouteEditor","control.RulerControl","control.SearchControl","control.storage","control.TrafficControl","control.TypeSelector","control.ZoomControl","coordSystem.cartesian","coordSystem.geo","data.Manager","DomEvent","domEvent.manager","domEvent.MultiPointer","domEvent.MultiTouch","domEvent.Pointer","domEvent.Touch","Event","event.Group","event.Manager","event.Mapper","formatter","geocode","geolocation","geometry.base.Circle","geometry.base.LinearRing","geometry.base.LineString","geometry.base.Point","geometry.base.Polygon","geometry.base.Rectangle","geometry.Circle","geometry.LineString","geometry.pixel.Circle","geometry.pixel.LineString","geometry.pixel.MultiPolygon","geometry.pixel.Point","geometry.pixel.Polygon","geometry.pixel.Rectangle","geometry.Point","geometry.Polygon","geometry.Rectangle","geometryEditor.LineString","geometryEditor.Point","geometryEditor.Polygon","GeoObject","geoObject.addon.balloon","geoObject.addon.editor","geoObject.addon.hint","geoObject.Balloon","geoObject.Hint","GeoObjectArray","GeoObjectCollection","geoQuery","GeoQueryResult","geoXml.load","getZoomRange","Hint","Hotspot","hotspot.Manager","hotspot.Container","hotspot.Layer","hotspot.layer.addon.balloon","hotspot.layer.addon.hint","hotspot.layer.Balloon","hotspot.layer.Hint","hotspot.layer.Object","hotspot.loader","hotspot.ObjectSource","hotspot.layer.ObjectSource","interactivityModel.geoObject","interactivityModel.layer","interactivityModel.opaque","interactivityModel.silent","interactivityModel.storage","interactivityModel.transparent","Layer","layer.storage","layer.tile.CanvasTile","layer.tile.DomTile","layer.tileContainer.CanvasContainer","layer.tileContainer.DomContainer","LayerCollection","layout.Image","layout.ImageWithContent","layout.storage","layout.templateBased.Base","LoadingObjectManager","Map","map.action.Continuous","map.action.Manager","map.action.Single","map.addon.balloon","map.addon.hint","map.Balloon","map.behavior.Manager","map.Container","map.Converter","map.Copyrights","map.GeoObjects","map.Hint","map.layer.Manager","map.margin.Manager","map.margin.Accessor","map.pane.Manager","map.ZoomRange","MapEvent","MapType","mapType.storage","meta","Monitor","pane.EventsPane","pane.MovablePane","pane.StaticPane","poi.dataSource","multiRouter.MultiRouteModel","multiRouter.MultiRoute","multiRouter.editor.addon","ObjectManager","objectManager.addon.clustersBalloon","objectManager.addon.clustersHint","objectManager.addon.objectsBalloon","objectManager.addon.objectsHint","option.Manager","option.presetStorage","overlay.storage","package.controls.predefinedSets","Placemark","Polygon","Polyline","Popup","projection.Cartesian","projection.sphericalMercator","projection.wgs84Mercator","Rectangle","RemoteObjectManager","regions","util.requireCenterAndZoom","route","shape.Circle","shape.LineString","shape.MultiPolygon","shape.Polygon","shape.Rectangle","shape.storage","suggest","SuggestView","search","Template","template.filtersStorage","templateLayoutFactory","traffic.provider.Actual","traffic.provider.Archive","traffic.provider.Forecast","traffic.provider.storage","util.AsyncStorage","util.augment","util.bind","util.bounds","util.pixelBounds","util.cursor.Accessor","util.cursor.Manager","util.defineClass","util.Dragger","util.extend","util.math.areEqual","util.math.cycleRestrict","util.math.restrict","util.Storage","vow"],e.modules.providePackage)}],["*R",function(e){e.modules.define("package.system",["vow","theme.browser.current","system.settings","package.yandex"],function(e){e(!0)})}],["*U",function(e){e.modules.define("package.yandex",function(e){var t={map:"Map",sat:"Satellite",skl:"Skeleton"},n={map:["map"],satellite:["sat"],hybrid:["sat","skl"]};if(e.env.restrictions&&e.env.restrictions.prohibitedLayers)for(var i=e.env.restrictions.prohibitedLayers.split(","),o=0,s=i.length;o<s;o++)delete t[i[o]];var r=["yandex.mapType.metaOptions","yandex.counterStorage"];for(var s in t)t.hasOwnProperty(s)&&r.push("yandex.layer."+t[s]);for(var a in n)if(n.hasOwnProperty(a)){for(var l=n[a],o=0,s=l.length;o<s&&t[l[o]];o++);o==s&&r.push("yandex.mapType."+a)}return r},function(e){e(!0)})}],[".n",function(e){e.modules.define("pane-controls-css",["system.provideCss"],function(e,t){t("@media print{.ymaps-2-1-42-controls-pane{visibility:hidden}}",e)})}],["*!",function(e){e.modules.define("pane.Base",["util.defineClass","util.extend","util.dom.element","util.dom.style","util.dom.className","event.Manager","domEvent.manager","constants.mapDomEvents","MapEvent","util.css"],function(t,n,i,o,s,r,a,l,c,u,h){function d(t,n){this._map=t,n=i({zIndex:0,overflow:"hidden"},n),this._zIndex=n.zIndex,this._overflow=n.overflow,this._checkContextMenuEvent=n.checkContextMenu,this._element=o.create({className:n.className,css:i({position:"absolute",left:0,top:0},n.css),patch:n.patch});var u=e.env.browser;"pointer"==u.eventMapper&&r.add(this._element,h.addPrefix("touch-action-none")),"WebKit"==u.engine&&"Safari"!=u.name&&"MobileSafari"!=u.name&&s.patch(this._element,{transform:{use3D:!0}}),this.events=new a({context:this}),l.add(this._element,c,this._onDomEvent,this)}n(d,{getMap:function(){return this._map},getElement:function(){return this._element},getZIndex:function(){return this._zIndex},getOverflow:function(){return this._overflow},destroy:function(){l.remove(this._element,c,this._onDomEvent,this)},_onDomEvent:function(e){this._checkContextMenuEvent&&"contextmenu"==e.get("type")&&!this._map.options.get("enableContextMenu",!1)&&e.callMethod("preventDefault");var t=e.get("type");this.events.fire(t,new u({type:t,target:this,map:this._map,domEvent:e},e))}}),t(d)})}],["**",function(e){e.modules.define("pane.BaseContainer",["util.defineClass","util.extend","pane.Base","util.math.areEqual","util.math.areEqualPaths"],function(e,t,n,i,o,s){
function r(e,t){r.superclass.constructor.call(this,e,t),t=n({margin:0},t),this._margin=t.margin,this._mapSizeHalf=this._calcMapSizeHalf(),this._viewport=null,this._globalOriginOffset=this._calculateOriginOffset(e.getGlobalPixelCenter()),this._mapListeners=e.events.group().add("actionbegin",this.onActionBegin,this).add("actiontick",this.onActionTick,this).add("actionend",this.onActionEnd,this).add("actionrender",this.onActionRender,this).add("sizechange",this._onMapSizeChange,this)}t(r,i,{getMapSizeHalf:function(){return this._mapSizeHalf},getOriginOffset:function(){return this._globalOriginOffset},updateClientPixels:function(e){var t=this._calculateOriginOffset(e);o(this._globalOriginOffset,t)||(this._globalOriginOffset=t,this.events.fire("clientpixelschange"))},getViewport:function(){return this._viewport||(this._viewport=this.calcViewport())},calcViewport:function(){return[[-this._margin,-this._margin],[2*this._mapSizeHalf[0]+this._margin,2*this._mapSizeHalf[1]+this._margin]]},updateViewport:function(){var e=this._viewport;this._viewport=this.calcViewport(),(e&&!this._viewport||!e&&this._viewport||e&&this._viewport&&!s(e,this._viewport))&&this.events.fire("viewportchange")},toClientPixels:function(e){var t=this._globalOriginOffset;return[e[0]-t[0],e[1]-t[1]]},fromClientPixels:function(e){var t=this._globalOriginOffset;return[e[0]+t[0],e[1]+t[1]]},destroy:function(){this._mapListeners.removeAll()},onActionRender:function(){},_onMapSizeChange:function(){this._mapSizeHalf=this._calcMapSizeHalf(),this.updateClientPixels(this.getMap().getGlobalPixelCenter()),this.updateViewport(),this.events.fire("panesizechange")},_calcMapSizeHalf:function(){var e=this.getMap().container.getSize();return[e[0]/2,e[1]/2]},_calculateOriginOffset:function(e){return[Math.round(e[0])-this._mapSizeHalf[0],Math.round(e[1])-this._mapSizeHalf[1]]}}),e(r)})}],["*)",function(e){e.modules.define("pane.BaseMovableContainer",["util.defineClass","pane.BaseContainer"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t)}t(i,n,{calcViewport:function(){var e=i.superclass.calcViewport.call(this),t=this.getOffset();return e[0][0]-=t[0],e[0][1]-=t[1],e[1][0]-=t[0],e[1][1]-=t[1],e}}),e(i)})}],["08",function(e){e.modules.define("pane.controls.css",["pane-controls-css"],function(e){e({})})}],["6E",function(e){e.modules.define("pane.EventsPane",function(e){var t=["util.defineClass","util.extend","util.dom.style","util.cursor.Manager","pane.Base","interactivityModel.EventController","interactivityModel.transparent","util.css"];return(e.env.browser.isIE||e.env.browser.isEdge)&&t.push("pane.eventsPane.ie.css"),t},function(e,t,n,i,o,s,r,a,l){function c(e,t){t=n({className:l.addPrefix("events-pane"),css:{width:"100%",height:"100%"},patch:{selectable:!1},transparent:!1,checkContextMenu:!0},t),c.superclass.constructor.call(this,e,t),this.cursors=new o(this.getElement()),t.transparent&&this.events.addController(new r(a))}t(c,s),e(c)})}],["*:",function(e){e.modules.define("pane.movable.TransformPane",["util.defineClass","pane.BaseMovableContainer","util.extend","graphics.renderManager","util.scheduler.manager","util.scheduler.world","util.tailThrottle"],function(e,t,n,i,o,s,r,a){function l(e,t){l.superclass.constructor.call(this,e,t),t=i({zoomSensitivity:1e-5,zoomThreshold:.8},t),this._zoomSensitivity=t.zoomSensitivity,this._zoomThreshold=t.zoomThreshold,this._zoom=e.getZoom(),this._actionStartZoom=0,this._actionStartPosition=0,this._position=e.getGlobalPixelCenter(),this._offset=[0,0],this._shedulerProcess=null,this._renderManager=o.getContainer(this),this._restartDebounce1=a(200,this._restartLayer,this),this._restartDebounce2=a(600,this._restartLayer,this),this._longActionDebounce=a(2e3,this._restartLayer,this),this._updateviewportDebounce=a(200,this.updateViewport,this)}var c=.7;t(l,n,{getZoom:function(){return this._zoom},getOffset:function(){return this._offset},getPosition:function(){return this._position},onActionBegin:function(){this.events.fire("actionbegin")},onActionTick:function(e){this._stopSheduler();var t=e.get("tick");t.duration?this._shedulerProcess=s.schedule("processing",function(){this._applyTickState(this.getMap().action.getCurrentState(),!0),this._longActionDebounce(),this.events.fire("rendertick")},this,{duration:t.duration}):this._applyTickState(t)},onActionRender:function(){this.events.fire("rendertick")},updateClientPixels:function(e){this._position=e,l.superclass.updateClientPixels.call(this,e)},onActionEnd:function(e){this._stopSheduler(),this._resetOffset(),this._zoom=this.getMap().getZoom(),this.updateClientPixels(this.getMap().getGlobalPixelCenter()),this.updateViewport(),this.events.fire("actionend"),this.events.fire("rendertick")},_restart:function(){r.isStopped()?this._restartDebounce2():this._restartDebounce1()},_restartLayer:function(){this._actionStartZoom=0,this._actionStartPosition=0,this.events.fire("actionrestart")},destroy:function(){this._stopSheduler(),l.superclass.destroy.call(this)},_applyTickState:function(e,t){Math.abs(e.zoom-this._zoom)<this._zoomSensitivity?this._updateViewport(e,t):this._updateZoom(e,t),this.events.fire("actiontick"),this.events.fire("rendertock")},_updateViewport:function(e,t){var n=Math.pow(2,e.zoom-this._zoom),i=[e.globalPixelCenter[0]/n,e.globalPixelCenter[1]/n],o=this.getOriginOffset(),s=this.getMapSizeHalf(),r=[s[0]*c,s[1]*c],a=[o[0]+s[0]-i[0],o[1]+s[1]-i[1]],l=t?4:1,u=[Math.round(a[0]*l)/l,Math.round(a[1]*l)/l];this._actionStartPosition||(this._actionStartPosition=a),u[0]==this._offset[0]&&u[1]==this._offset[1]||(this._offset=u,(Math.abs(this._actionStartPosition[0]-a[0])>r[0]||Math.abs(this._actionStartPosition[1]-a[1])>r[1])&&this._restart(),this._updateviewportDebounce())},_updateZoom:function(e){this._resetOffset(),this._zoom=e.zoom,this.updateClientPixels(e.globalPixelCenter),this.events.fire("zoomchange"),this._actionStartZoom?Math.abs(this._actionStartZoom-e.zoom)>this._zoomThreshold&&this._restart():this._actionStartZoom=e.zoom},_resetOffset:function(){(this._offset[0]||this._offset[1])&&(this._offset=[0,0])},_stopSheduler:function(){this._shedulerProcess&&(this._shedulerProcess.stop(),this._shedulerProcess=null)}}),e(l)})}],["*@",function(e){e.modules.define("pane.movable.TransitionPane",["util.defineClass","pane.BaseMovableContainer","util.extend","util.dom.style","domEvent.manager"],function(t,n,i,o,s,r){function a(e,t){a.superclass.constructor.call(this,e,t),t=o({zoomSensitivity:1e-5},t),this._zoomSensitivity=t.zoomSensitivity,this._zoom=e.getZoom(),this._offset=[0,0],this._inAction=!1,this._nowTransiting=!1,h||this._applyTransition({offset:[0,0],use3D:!0},0),"Presto"==l.engine&&this.stopTransition(),r.add(this.getElement(),"transitionend",this._onTransitionEnd,this)}var l=e.env.browser,c=l.isMobile||l.isTablet,u=l.osFamily,h="iOS"==u&&c;n(a,i,{getZoom:function(){return this._zoom},getOffset:function(){return this._offset},destroy:function(){r.remove(this.getElement(),"transitionend",this._onTransitionEnd,this),a.superclass.destroy.call(this)},onActionBegin:function(){this._inAction=!0,this.events.fire("actionbegin")},onActionTick:function(e){var t=e.get("tick");this._nowTransiting&&this.stopTransition(),this._lastTick=t,this._applyTick(t),t.duration||this._check(),this.events.fire("actiontick"),this.events.fire("rendertick")},onActionEnd:function(){this._nowTransiting&&this.stopTransition(),this._zoom=this.getMap().getZoom(),this._offset=[0,0],"Presto"==l.engine&&this.getMap().container.getElement().removeChild(this.getElement()),this._applyTransition({offset:[0,0],use3D:!0},0),"Presto"==l.engine&&this.getMap().container.getElement().appendChild(this.getElement()),this.updateClientPixels(this.getMap().getGlobalPixelCenter()),this.updateViewport(),this.events.fire("actionend"),this.events.fire("rendertick"),this._inAction=!1},stopTransition:function(){this._nowTransiting=!1,s.css(this.getElement(),{transitionProperty:"",transitionDuration:"0ms"}),this.getElement().parentNode?this.getElement().parentNode.clientLeft:0},_applyTick:function(e){this._applyTransition(this._animatorTransition(e),e.duration,e.timingFunction)},_animatorTransition:function(e){var t=Math.pow(2,e.zoom-this._zoom),n=this.getOriginOffset(),i=this.getMapSizeHalf(),o=[e.globalPixelCenter[0]/t,e.globalPixelCenter[1]/t],s=[i[0]*t-i[0],i[1]*t-i[1]];return{offset:[Math.round(t*(n[0]+i[0]-o[0])-s[0]),Math.round(t*(n[1]+i[1]-o[1])-s[1])],scale:t,use3D:!0}},_applyTransition:function(t,n,i){this.stopTransition(),n>0?(this._nowTransiting=!0,s.patch(this.getElement(),{transform:t,transitionDuration:n+"ms",transitionProperty:e.supports.css.checkTransitionProperty("transform"),transitionTimingFunction:i||"linear"})):s.patch(this.getElement(),{transform:t,transitionDuration:n+"ms"})},_check:function(){if(this._inAction){var e=this.getMap().action.getCurrentState(),t=this.getOriginOffset(),n=this.getMapSizeHalf(),i=e.globalPixelCenter,o=[t[0]+n[0]-i[0],t[1]+n[1]-i[1]],s=Math.floor(e.zoom)!=Math.floor(this._zoom),r=Math.abs(o[0]-this._offset[0])>this._margin||Math.abs(o[1]-this._offset[1])>this._margin;r&&!s&&Math.abs(e.zoom-this._zoom)<this._zoomSensitivity&&(this._offset=o,this.updateViewport())}},_onTransitionEnd:function(e){e.get("target")==this.getElement()&&(this._nowTransiting=!1,this._lastTick||this._check())}}),t(a)})}],["6F",function(e){e.modules.define("pane.MovablePane",function(e){return["util.defineClass",e.env.browser.transformTransition?"pane.movable.TransitionPane":"pane.movable.StepwisePane"]},function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t)}t(i,n),e(i)})}],["6K",function(e){e.modules.define("pane.StaticPane",["util.defineClass","pane.BaseContainer"],function(e,t,n){function i(e,t){i.superclass.constructor.call(this,e,t),this._zoom=e.getZoom()}t(i,n,{getZoom:function(){return this._zoom},onActionBegin:function(){this.events.fire("actionbegin")},onActionTick:function(e){var t=e.get("tick");this._zoom!=t.zoom&&(this._zoom=t.zoom,this.events.fire("zoomchange"),this.updateClientPixels(t.globalPixelCenter)),this.events.fire("actiontick")},onActionEnd:function(){this._zoom=this.getMap().getZoom(),this.updateClientPixels(this.getMap().getGlobalPixelCenter()),this.events.fire("actionend")},destroy:function(){this.getMap().events.remove("boundschange",this._onMapBoundsChange,this),i.superclass.destroy.call(this)}}),e(i)})}],[".v",function(e){e.modules.define("placemark",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-placemark{position:absolute;z-index:1;display:block;height:28px;background-repeat:repeat-x;background-position:0 -60px;background-size:auto!important}.ymaps-2-1-42-placemark__content{position:relative;z-index:5;display:block;width:auto;height:27px;margin:0 -3px;text-align:center;white-space:nowrap;color:#000;font:13px Arial,sans-serif}.ymaps-2-1-42-placemark__content-inner{display:block;overflow:hidden;margin-top:6px;margin-left:5px;margin-right:5px;height:15px}.ymaps-2-1-42-placemark__content-inner>*{display:block}.ymaps-2-1-42-placemark_state_active .ymaps-2-1-42-placemark__content{margin-right:-9px}.ymaps-2-1-42-placemark__l{width:13px}.ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark__r{position:absolute;z-index:4;display:block;height:27px}.ymaps-2-1-42-placemark__l{left:-13px;background-position:0 0}.ymaps-2-1-42-placemark__r{right:-14px;width:14px;background-position:-14px 0}.ymaps-2-1-42-placemark_state_active .ymaps-2-1-42-placemark__r{right:-26px;width:26px;height:41px;background-position:-80px 0}",e)})}],["$L",function(e){e.modules.define("Placemark",["util.defineClass","GeoObject"],function(e,t,n){function i(e,t,n){i.superclass.constructor.call(this,{geometry:o(e),properties:t},n)}function o(e){return e&&"undefined"==typeof e.length?e:{type:"Point",coordinates:e}}t(i,n),e(i)})}],["3)",function(e){e.modules.define("placemark_theme",function(e){return[this.name+(e.env.browser.oldIE?".ie8":".standards")]},function(e){e({})})}],[".D",function(e){e.modules.define("placemark_theme.standards",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-placemark_theme_black,.ymaps-2-1-42-placemark_theme_black .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_black .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM1OTU5NTl9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_black .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM1OTU5NTl9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9zdmc+)}.ymaps-2-1-42-placemark_theme_blue,.ymaps-2-1-42-placemark_theme_blue .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_blue .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMxZTk4ZmZ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_blue .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMxZTk4ZmZ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9zdmc+)}.ymaps-2-1-42-placemark_theme_brown,.ymaps-2-1-42-placemark_theme_brown .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_brown .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM3OTNkMGV9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_brown .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM3OTNkMGV9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_red,.ymaps-2-1-42-placemark_theme_red .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_red .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNlZDQ1NDN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_red .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNlZDQ1NDN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_darkblue,.ymaps-2-1-42-placemark_theme_darkblue .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_darkblue .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMxNzdiYzl9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_darkblue .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMxNzdiYzl9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_darkorange,.ymaps-2-1-42-placemark_theme_darkorange .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_darkorange .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNlNjc2MWJ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_darkorange .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNlNjc2MWJ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_night,.ymaps-2-1-42-placemark_theme_night .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_night .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMwZTQ3Nzl9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_night .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMwZTQ3Nzl9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_pink,.ymaps-2-1-42-placemark_theme_pink .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_pink .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNmMzcxZDF9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_pink .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNmMzcxZDF9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_gray,.ymaps-2-1-42-placemark_theme_gray .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_theme_grey,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_gray .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNiM2IzYjN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_gray .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNiM2IzYjN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_grey .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_grey .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNiM2IzYjN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_grey .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNiM2IzYjN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_darkgreen,.ymaps-2-1-42-placemark_theme_darkgreen .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_darkgreen .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMxYmFkMDN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_darkgreen .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiMxYmFkMDN9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_violet,.ymaps-2-1-42-placemark_theme_violet .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_violet .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNiNTFlZmZ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_violet .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNiNTFlZmZ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_yellow,.ymaps-2-1-42-placemark_theme_yellow .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_yellow .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNmZmQyMWV9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_yellow .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNmZmQyMWV9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_green,.ymaps-2-1-42-placemark_theme_green .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_green .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM1NmRiNDB9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_green .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM1NmRiNDB9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_orange,.ymaps-2-1-42-placemark_theme_orange .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_orange .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNmZjkzMWV9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_orange .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiNmZjkzMWV9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_lightblue,.ymaps-2-1-42-placemark_theme_lightblue .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_lightblue .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM4MmNkZmZ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_lightblue .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM4MmNkZmZ9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-42-placemark_theme_olive,.ymaps-2-1-42-placemark_theme_olive .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_theme_olive .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM5N2ExMDB9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSItMzQwIiB5MT0iMzkxLjkiIHgyPSItMzM5LjEiIHkyPSIzOTIuNyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSA3MjYyLjA0IDg1NzUuMTEpIj48c3RvcCBvZmZzZXQ9IjAiIGNsYXNzPSJibGFja19zb2xpZF9zdGFydCIvPjxzdG9wIG9mZnNldD0iMSIgY2xhc3M9ImJsYWNrX3NvbGlkX2ZpbmlzaCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggY2xhc3M9InNoYWRvdyIgZmlsbD0idXJsKCNzaGFkb3ctZ3JhZGllbnQpIiBkPSJNNDguNzIgMzkuN2M0LjcxLTIuNCAxNy44Mi0xMS41MiAxOC4zLTExLjk4LjU2LS41MiAxLjA3LTEuMDYgMS41LTEuNjIgMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE0LjEyIDExNC4xMiAwIDAgMS02LjE0IDguMmwtLjU0LjY3Yy0uMTIuMTUtLjI3LjMyLS40Ny41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMzYgMTMuNUMzNiA2IDQyIDAgNDkuNSAwYTEzLjQ0IDEzLjQ0IDAgMCAxIDEzLjMgMTUuODJsLjAyLjE2LS4wNC4yM2MtLjYgMy43LTMuMDYgOC40Ny02LjggMTRhMTE4LjM0IDExOC4zNCAwIDAgMS02LjE0IDguMjJjLS4yNS4zLS40NC41Mi0uNTUuN2EzLjU5IDMuNTkgMCAwIDEtMS4yLjk3Yy0uNC4yLS44Ni4yNy0xLjQuMmwtLjIxLS4wNGEyLjI5IDIuMjkgMCAwIDEtMS42Ni0xLjY4Yy0uMS0uNDQtLjEtLjgyIDAtMS4xOSAwLS4wNy4wMi0uMTMuMDQtLjE5bDIuNzctMTAuMjZBMTMuNjEgMTMuNjEgMCAwIDEgMzYgMTMuNXoiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNMzggMTMuNUMzOCA3LjEgNDMuMSAyIDQ5LjUgMmExMS40NCAxMS40NCAwIDAgMSAxMS4yOCAxMy43di4xNUM1OS41IDIzLjg1IDQ3LjcgMzcuOCA0Ny43IDM3LjhzLS4zOC41Mi0uNzMuNGMtLjM3LS4xLS4yLS41Ni0uMi0uNTZsMy40Mi0xMi43MWMtLjIxLjA3LS40OS4wNy0uNjkuMDdDNDMuMTUgMjUgMzggMTkuOSAzOCAxMy41eiIvPjxjaXJjbGUgY2xhc3M9IndoaXRlX3NvbGlkIiBjeD0iNDkuNSIgY3k9IjEzLjUiIHI9IjguNSIvPjwvZz48Zz48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgNjBoMTIwdjJIMHpNMCA4NWgxMjB2MkgweiIvPjxwYXRoIGNsYXNzPSJjdXN0b21fY29sb3Jfc29saWQiIGQ9Ik0wIDYyaDEyMHYzSDB6TTAgODJoMTIwdjNIMHoiLz48cGF0aCBjbGFzcz0id2hpdGVfc29saWQiIGQ9Ik0wIDY1aDEyMHYxN0gweiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-42-placemark_theme_olive .ymaps-2-1-42-placemark__r{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTIwIDEwMCI+PHN0eWxlPi53aGl0ZV9vcGFjaXR5e2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6Ljh9LmN1c3RvbV9jb2xvcl9zb2xpZHtmaWxsOiM5N2ExMDB9LndoaXRlX3NvbGlke2ZpbGw6I2ZmZn0uYmxhY2tfc29saWRfZmluaXNoLC5ibGFja19zb2xpZF9zdGFydHtzdG9wLWNvbG9yOiMwMDB9LmJsYWNrX3NvbGlkX2ZpbmlzaHtzdG9wLW9wYWNpdHk6MH0uc2hhZG93e29wYWNpdHk6LjV9PC9zdHlsZT48cGF0aCBjbGFzcz0id2hpdGVfb3BhY2l0eSIgZD0iTTAgMTMuNUMwIDYgNiAwIDEzLjUgMFMyNyA2IDI3IDEzLjUgMjAuOTYgMjcgMTMuNSAyNyAwIDIxIDAgMTMuNXptMjIgMGE4LjUgOC41IDAgMSAwLTE2Ljk5LS4wMUE4LjUgOC41IDAgMCAwIDIyIDEzLjV6Ii8+PGNpcmNsZSBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBjeD0iMTMuNSIgY3k9IjEzLjUiIHI9IjExLjUiLz48Y2lyY2xlIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgY3g9IjEzLjUiIGN5PSIxMy41IiByPSI4LjUiLz48Zz48bGluZWFyR3JhZGllbnQgaWQ9InNoYWRvdy1ncmFkaWVudDIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iLTYwOC40IiB5MT0iMzU0LjEiIHgyPSItNjA3LjQiIHkyPSIzNTQuOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyMS4yMTYxIDAgMCAtMjEuNzg3OSAxMjk5MS4xNiA3NzUyLjY0KSI+PHN0b3Agb2Zmc2V0PSIwIiBjbGFzcz0iYmxhY2tfc29saWRfc3RhcnQiLz48c3RvcCBvZmZzZXQ9IjEiIGNsYXNzPSJibGFja19zb2xpZF9maW5pc2giLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGNsYXNzPSJzaGFkb3ciIGZpbGw9InVybCgjc2hhZG93LWdyYWRpZW50MikiIGQ9Ik04NC43MiAzOS43YzQuNy0yLjQgMTcuODItMTEuNTIgMTguMy0xMS45OGExMy44IDEzLjggMCAwIDAgMS41LTEuNjJjMy00IDEuMTEtNy42Mi00LjQ0LTguMDMtLjQ3LS4wMy0xLjA2LS4xLTEuNjgtLjE2LS45NiAzLjQzLTMuMjIgNy42LTYuNDMgMTIuMzNhMTE2Ljc5IDExNi43OSAwIDAgMS02LjE0IDguMmwtLjU1LjY3Yy0uMTEuMTUtLjI3LjMyLS40Ni41LS4wMy0uMDEtLjAyLS4wMS0uMTIuMDZoLjAyeiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNODAgMjV2MmgzLjZsLTIuNzQgMTAuMTNhMi41MyAyLjUzIDAgMCAwLS4wNSAxLjM4Yy4yLjguOCAxLjUgMS43IDEuNjhoLjJjLjU0LjEgMSAwIDEuNC0uMTcuMjYtLjEyLjUtLjI5LjczLS40OC4yLS4xNy4zNS0uMzQuNDYtLjVsLjU1LS42NWMuNDYtLjU3Ljk4LTEuMiAxLjUyLTEuOSAxLjU3LTIuMDIgMy4xNS00LjE1IDQuNjItNi4zMiAzLjc1LTUuNTIgNi4yMS0xMC4zIDYuOC0xNGwuMDQtLjIzLS4wMy0uMTJBMTMuNDQgMTMuNDQgMCAwIDAgODUuNSAwSDgwdjIiLz48cGF0aCBjbGFzcz0iY3VzdG9tX2NvbG9yX3NvbGlkIiBkPSJNODAgMjJ2M2g1LjVjLjI0IDAgLjQ4IDAgLjcxLS4wMmwtMy40MyAxMi43cy0uMTYuNS4yLjZjLjM1LjEuNzMtLjQuNzMtLjRTOTUuNTEgMjMuOSA5Ni44IDE1Ljg5bC0uMDItLjE1QTExLjQ0IDExLjQ0IDAgMCAwIDg1LjUgMkg4MHYzIi8+PHBhdGggY2xhc3M9IndoaXRlX3NvbGlkIiBkPSJNODUuNSA1SDgwdjE3aDUuNWE4LjUgOC41IDAgMCAwIDAtMTd6Ii8+PC9nPjxnPjxwYXRoIGNsYXNzPSJ3aGl0ZV9vcGFjaXR5IiBkPSJNMCA2MGgxMjB2Mkgwek0wIDg1aDEyMHYySDB6Ii8+PHBhdGggY2xhc3M9ImN1c3RvbV9jb2xvcl9zb2xpZCIgZD0iTTAgNjJoMTIwdjNIMHpNMCA4MmgxMjB2M0gweiIvPjxwYXRoIGNsYXNzPSJ3aGl0ZV9zb2xpZCIgZD0iTTAgNjVoMTIwdjE3SDB6Ii8+PC9nPjwvc3ZnPg==)}",e);
})}],[".H",function(e){e.modules.define("placemark_type_blank",["system.provideCss"],function(e,t){t(".ymaps-2-1-42-placemark_type_blank{width:28px;background-position:0 0;background-repeat:no-repeat}.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_state_active{background-image:none;width:0}.ymaps-2-1-42-placemark_type_blank .ymaps-2-1-42-placemark__content{position:absolute;top:0;z-index:6;margin:0!important;width:27px;background:0 0}.ymaps-2-1-42-placemark_type_blank.ymaps-2-1-42-placemark_state_active .ymaps-2-1-42-placemark__content{left:-8px}.ymaps-2-1-42-placemark_type_blank .ymaps-2-1-42-placemark__l,.ymaps-2-1-42-placemark_type_blank .ymaps-2-1-42-placemark__r{display:none}.ymaps-2-1-42-placemark_state_active.ymaps-2-1-42-placemark_type_blank .ymaps-2-1-42-placemark__r{display:block;background-position:-36px 0!important;right:-28px;width:36px}",e)})}],["6g",function(e){e.modules.define("placemarkNew.layout.html",["placemark","placemark_theme","placemark_type_blank"],function(e){e([0,'<ymaps class="ymaps-2-1-42-placemark ymaps-2-1-42-placemark_state_active ymaps-2-1-42-placemark_theme_blue" style="right: 2px; bottom: 12px;"><ymaps class="ymaps-2-1-42-placemark__l"></ymaps><ymaps class="ymaps-2-1-42-placemark__r"></ymaps><ymaps class="ymaps-2-1-42-placemark__content"><ymaps class="ymaps-2-1-42-placemark__content-inner">',2002,["options.contentLayout",[["observeSize"],["name",'"iconContent"'],["maxWidth","options.maxWidth"]]],0,"</ymaps></ymaps></ymaps>"])})}],["6)",function(e){e.modules.define("poi.dataSource",["interactivityModel.storage","interactivityModel.layer","yandex.dataProvider","projection.wgs84Mercator","hotspot.layer.Object","shape.Polygon","geometry.pixel.Polygon","event.Manager","util.defineClass","util.bounds","util.cancelableCallback","option.Manager","yandex.layers"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(e,t){for(var n=[],i=0,o=e.length;i<o;i++)n.push(f(e[i],t));return[].concat.apply([],n)}function f(e,t){var n=[],i=e&&e[t]&&e[t].LayerMetaData;if(i)for(var o=0,s=i.length;o<s;o++){var r=i[o],a=[r&&r.x,r&&r.y],l=r&&r.z;if(r&&r.response&&r.response.data)for(var c=r.response.data.features||[],u=0,h=c.length;u<h;u++){var d=c[u].geometry;d.coordinates&&(d.coordinates=v?[d.coordinates[0],d.coordinates[1]]:[d.coordinates[1],d.coordinates[0]]);var g=c[u].properties;if(g&&g.HotspotMetaData&&g.HotspotMetaData.TagsMetaData&&g.HotspotMetaData.TagsMetaData.org_type){var p=g.HotspotMetaData.TagsMetaData.org_type;"string"==typeof p&&(g.rubrics=[p])}g.rubrics||(g.rubrics=[]),n.push({tileNumber:a,zoom:l,geometry:d,properties:g})}}return n}function _(e,t){var n=e.tileNumber,i=e.zoom,o=t-i,s=Math.pow(2,o);return[n[0]*s,n[1]*s]}function M(e,t){for(var n=[],i=0,o=e[0].length;i<o;i++)n.push([e[0][i][0]+t[0],e[0][i][1]+t[1]]);return[n]}var v="latlong"==e.env.coordinatesOrder,y=function(e,t){this._map=e,this._mapListeners=this._map.events.group().add("boundschange",this._getPoi,this),this._shapesByTileNumber={},this._pendingRequests=[],this._isLoading=!1,this._currentZoom,this._inited=!1,this._queue={},this.options=new g(t),this._getPoi(),this.events=new c({context:this})};u(y,{destroy:function(){this._cancelRequests(),this._mapListeners.removeAll()},requestObjects:function(e,t,n,i){if(null!=this._currentZoom&&Math.round(n)==Math.round(this._currentZoom)){var o=t[0]+"_"+t[1],s=this._getShapesByTileNumber(e,o);s?i(s):this._isLoading?this._queue.hasOwnProperty(o)?this._queue[o].list.push(i):this._queue[o]={layer:e,list:[i]}:i([])}else i([])},cancelLastRequest:function(){},_getShapesByTileNumber:function(e,t){var n,i=this._shapesByTileNumber[t];if(i&&i.length){n=[];for(var o=0,s=i.length;o<s;o++)n.push(this._translateShape(e,i[o],this._currentZoom))}return n},_cancelRequests:function(){for(var e=0,t=this._pendingRequests.length;e<t;e++)this._pendingRequests[e].cancel()},_getPoi:function(){function e(e){var t=this.options.get("alias","map")+"j";e.isRejected()||f.push(e.valueOf()),--g<=0&&(f.length?this._generateShapesByTileNumberCache(m(f,t)):this._shapesByTileNumber={},this._callQueue(),this._isLoading=!1,this._pendingRequests=[],this._inited||(this._inited=!0,this.events.fire("update")))}this._cancelRequests();for(var t=this._map,n="round"==t.options.get("tilesRoundingMethod","round")?Math.round(t.getZoom()):Math.floor(t.getZoom()),i=this._getTileRanges(t.getBounds(),n),s=[],r=0,a=i.length;r<a;r++){var l=d.create(e,this),c=this.options.get("alias","map"),u={},h=p.getLayerVersion(c);c+="j",u[c+"_tile_range"]=i[r],u[c+"_version"]=h,o.getLayersInfo([c],t.getCenter(),n,null,u).always(l),s.push(l)}this._pendingRequests=s,this._currentZoom=n,this._isLoading=!0;var g=s.length,f=[]},_generateShapesByTileNumberCache:function(e){for(var t={},n=0,i=e.length;n<i;n++){var o=e[n],r=s.toGlobalPixels(o.geometry.coordinates,this._currentZoom),a=[Math.floor(r[0]/256),Math.floor(r[1]/256)],l=a[0]+"_"+a[1];t.hasOwnProperty(l)?t[l].push(o):t[l]=[o]}this._shapesByTileNumber=t},_callQueue:function(){for(var e in this._queue)if(this._queue.hasOwnProperty(e))for(var t=this._queue[e],n=this._getShapesByTileNumber(t.layer,e),i=0,o=t.list.length;i<o;i++)t.list[i](n||[]);this._queue={}},_getTileRanges:function(e,t){for(var n=h.toGlobalPixelBounds(e,t,s),i=this._splitPixelBounds(n,Math.pow(2,t+8)),o=0,r=i.length;o<r;o++)i[o][0][0]=Math.floor(i[o][0][0]/256),i[o][1][0]=Math.floor(i[o][1][0]/256),i[o][0][1]=Math.ceil(i[o][0][1]/256),i[o][1][1]=Math.ceil(i[o][1][1]/256);return i},_splitPixelBounds:function(e,t){var n=e[0][1]>t,i=e[1][1]>t,o=[];return n&&i?o.push([[e[0][0],t-1],[e[1][0],t-1]],[[0,e[0][1]-t],[e[1][0],t-1]],[[e[0][0],t-1],[0,e[1][1]-t]],[[0,e[0][1]-t],[0,e[1][1]-t]]):n?o.push([[e[0][0],t-1],[e[1][0],e[1][1]]],[[0,e[0][1]-t],[e[1][0],e[1][1]]]):i?o.push([[e[0][0],e[0][1]],[e[1][0],t-1]],[[e[0][0],e[0][1]],[0,e[1][1]-t]]):o.push(e),o},_translateShape:function(e,t,o){var s=_(t,o),c=[256*s[0],256*s[1]],u=t.properties.HotspotMetaData,h=u.RenderedGeometry.coordinates,d=M(h,c),g=e.options.get("interactivityModel")||i,p="string"==typeof g?n.get(g):g;return new r(new a(new l(d)),{geometry:t.geometry,properties:t.properties},{zIndex:u.zIndex,interactivityModel:p})}}),t(y)})}],["$M",function(e){e.modules.define("Polygon",["util.augment","GeoObject"],function(e,t,n){function i(e){return e&&"undefined"!=typeof e.length?{type:"Polygon",coordinates:e}:e}var o=function(e,t,n){o.superclass.constructor.call(this,{geometry:i(e),properties:t},n)};t(o,n),e(o)})}],["$O",function(e){e.modules.define("Polyline",["util.augment","GeoObject"],function(e,t,n){function i(e){return e&&"undefined"!=typeof e.length?{type:"LineString",coordinates:e}:e}var o=function(e,t,n){o.superclass.constructor.call(this,{geometry:i(e),properties:t},n)};t(o,n),e(o)})}],["6:",function(e){e.modules.define("Popup",["util.defineClass","constants.mapDomEvents","event.Manager","geometry.pixel.Point","option.Manager","util.bind","util.math.areEqual","util.dom.element","vow","overlay.storage","popup.states","event.Mapper","Event"],function(t,n,i,o,s,r,a,l,c,u,h,d,g,p){function m(e,t){this._map=e,this.events=new o({context:this}),this.options=new r(t),this._data=null,this._state=d.CLOSED,this._deferredOpen=null,this._deferredClose=null}function f(e){this._popup=e,this._createMappings()}m.OpenError=function(){return new Error("Opening was canceled by another action")},m.CloseError=function(){return new Error("Closing was canceled by another action")},m.DestroyedError=function(){return new Error("Popup was destroyed")},m.OverlayNotFound=function(){return new Error("Overlay wans't found")},n(m,{open:function(e,t){this._clearCloseAction();var n,i=u.defer(),o=i.promise();if(t&&this.setData(t),e&&(n=this.setPosition(e)),this._state==d.OPEN)n?i.resolve(n):i.resolve();else if(this._state==d.OPENING)i.resolve(this._deferredOpen.promise());else{this._clearOpenAction(),this._deferredOpen=i;var s=this.options.get("openTimeout");"number"==typeof s?this._openTimeout=setTimeout(a(function(){this._openTimeout=null,i.resolve(this.doOpen())},this),s):i.resolve(this.doOpen()),o.then(this._onOpen,this)}return o},close:function(e){e=e&&"boolean"==typeof e,this._clearCloseAction(),this._clearOpenAction();var t=this._deferredClose=u.defer(),n=t.promise();if(this._state==d.OPEN){var i=this.options.get("closeTimeout");"number"!=typeof i||e?t.resolve(this.doClose(e)):this._closeTimeout=setTimeout(a(function(){this._closeTimeout=null,t.resolve(this.doClose(e))},this),i),n.then(this._onClose,this)}else this._state=d.CLOSED,t.resolve();return n},isOpen:function(){return this._state==d.OPEN},getState:function(){return this._state},setPosition:function(e){return this._position=e,this.setupGeometry(),u.resolve()},getPosition:function(){return this._position},setData:function(e){return e&&"object"==typeof e&&!c.isNode(e)||(e={content:e}),this._data=e,this._overlay&&this._overlay.setData(this._data),u.resolve()},getData:function(){return this._data},getMap:function(){return this._map},getOverlay:function(){if(this._overlay)return u.resolve(this._overlay);if(this._overlayDeferred)return u.resolve(this._overlayDeferred.promise());var e=this._overlayDeferred=u.defer(),t=this.options.get("overlay"),n={options:this.options},i=h.get(t,n);return"undefined"==typeof i?h.require({keys:[t],data:n}).spread(function(t){e.resolve(this._createOverlay(t))},function(){e.reject(y)},this):e.resolve(this._createOverlay(i)),e.promise()},getOverlaySync:function(){return this._overlay},destroy:function(){this._clearCloseAction(),this._clearOpenAction(),this._clearOverlay(),this._state=d.DESTROYED},doOpen:function(){if("DESTROYED"==this._state)return u.reject(v);var e=this.getOverlaySync();return e?(this._state=d.OPEN,e.setMap(this._map),u.resolve()):(this._state=d.OPENING,this.getOverlay().then(function(e){this._state==d.OPENING&&(this._state=d.OPEN,e.setMap(this._map))},this))},doClose:function(){return this._state=d.CLOSED,this._overlay&&this._overlay.setMap(null),u.resolve()},setupGeometry:function(){if(this._overlay){var e=this._buildGeometry();this._geometry&&l(this._geometry.getCoordinates(),e.getCoordinates())||(this._overlay.setGeometry(e),this._geometry=e)}},_createOverlay:function(e){this._geometry=this._buildGeometry();var t=this._overlay=new e(this._geometry,this._data);return t.options.setParent(this.options),t.events.setParent(new g(this.events,new f(this))),t},_clearOverlay:function(){this._overlay&&(this._overlay.setMap(null),this._overlay.events.setParent(null),this._overlay=null)},_buildGeometry:function(){var t=this.options.get("projection");if(e.env.debug){if(!this._position)throw new Error("Popup.buildGeometry: Не заданы координаты.");if(!t)throw new Error("Popup.buildGeometry: Не задана проекция.")}return new s(t.toGlobalPixels(this._position,this._map.getZoom()))},_clearOpenAction:function(){this._openTimeout&&(clearTimeout(this._openTimeout),this._openTimeout=null),this._deferredOpen&&this._deferredOpen.reject(_)},_clearCloseAction:function(){this._closeTimeout&&(clearTimeout(this._closeTimeout),this._closeTimeout=null),this._deferredClose&&this._deferredClose.reject(M)},_onOpen:function(){this._state==d.OPEN&&this.events.fire("open")},_onClose:function(){this._state==d.CLOSED&&this.events.fire("close")}});var _=m.OpenError(),M=m.CloseError(),v=m.DestroyedError(),y=m.OverlayNotFound();n(f,{_createMappings:function(){for(var e=0,t=i.length;e<t;e++)this[i[e]]=this._defaultMapping},_defaultMapping:function(e){return new p({type:e.get("type"),target:this._popup,domEvent:e.get("domEvent")},e)}}),t(m)})}],["6@",function(e){e.modules.define("popup.addonBuilder",["event.Mapper","popup.managerStorage","util.defineProperty","util.id","Event"],function(t,n,i,o,s,r){function a(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}function l(e){return"string"==typeof e&&(e=i.get(e)),e}function c(t){function n(e){var t=e.get("target");c(t),t.events&&t.events.add("optionschange",p)}function i(e){var t=e.get("target");h(t),t.events&&t.events.remove("optionschange",p)}function c(e){var t=s.get(e),n=!!e.options.get(y,!0);if(!b[t]&&n){var i=b[t]={managerClass:l(e.options.get(j,v))};M?o(e,f,function(){return i.manager||(i.manager=d(e,i.managerClass))},null,{configurable:!0}):e[f]=d(e,i.managerClass)}}function h(e){var t=s.get(e),n=b[t];if(n){var i=M?n.manager:e[f];i&&(_&&i.events.remove(_,m,e),i.destroy()),delete b[t],delete e[f]}}function d(t,n){if(e.env.debug&&"function"!=typeof n)throw new Error("popup.addonBuilder.initManager: Не удалось получить конструктор менеджера инфо-объекта.");var i=new n(t);return _&&i.events.add(_,m,t),i}function g(e){return e[f]||c(e),e[f]}function p(e){var t=e.get("target"),n=b[s.get(t)],i=!!t.options.get(y,!0);if(i){var o=l(t.options.get(j,v));n?n.managerClass!=o&&(h(t),c(t)):c(t)}else n&&h(t)}function m(e){var t=f+e.get("type");this.events.fire(t,new r({type:t,currentTarget:this.events.params.context},e))}var f=t.type,_=t.fireEvents||["open","close"],M=t.lazyInit&&u,v=t.defaultManager,y=a("has",f),j=t.popupManagerOption||f+"Manager",b={};return t.metaEventManager&&(t.metaEventManager.add("create",n).add("destroy",i),M&&t.initEvents&&t.metaEventManager.add(t.initEvents,function(e){g(e.get("target"))})),{get:g}}var u=!e.env.browser.oldIE;t({build:c})})}],["6j",function(e){e.modules.define("popup.component.checkEmptiness",["overlay.storage","vow","Hint","Balloon"],function(e,t,n,i,o){e(function(e,s,r,a){function l(t){if(t.hasOwnProperty("checkEmptiness"))c.resolve(t.checkEmptiness(a));else{var n="hint"==s?new i(e):new o(e);n.setPosition(r),n.setData(a),n.options.setParent(a.options),n.getOverlay().done(function(e){c.resolve(e.isEmpty())},function(e){c.reject(e)})}}var c=n.defer(),u=a.options.get("overlay"),h=t.get(u,a);return"undefined"==typeof h?t.require({keys:[u],data:a}).spread(l,function(e){c.reject(e)},this).done():l(h),c.promise()})})}],["6z",function(e){e.modules.define("popup.managerStorage",["util.Storage"],function(e,t){e(new t)})}],["6I",function(e){e.modules.define("popup.states",[],function(e){e({OPENING:"OPENING",OPEN:"OPEN",CLOSED:"CLOSED",DESTROYED:"DESTROYED"})})}],["6Z",function(e){e.modules.define("projection.Cartesian",["util.defineClass","util.math.cycleRestrict","coordSystem.Cartesian"],function(t,n,i,o){function s(t,n,i){if(e.env.debug&&(t[0][0]==t[1][0]||t[0][1]==t[1][1]))throw new Error("projection.Cartesian: Некорректные значения параметра bounds. Координаты углов не должны совпадать.");r&&(t=[[t[0][1],t[0][0]],[t[1][1],t[1][0]]]),this._bounds=t,this._cycled=n?n:[!1,!1],this._xRange=t[1][0]-t[0][0],this._yRange=t[1][1]-t[0][1],this._coordSystem=new o(i)}var r="latlong"==e.env.coordinatesOrder;n(s,{toGlobalPixels:function(t,n){if(e.env.debug){if(!t)throw new Error("Cartesian.toGlobalPixels: не передан параметр point");if("undefined"==typeof n)throw new Error("Cartesian.toGlobalPixels: не передан параметр zoom")}var i=this._bounds,o=Math.pow(2,n+8),s=t[r?1:0],a=t[r?0:1];return[(s-i[0][0])/this._xRange*o,(i[1][1]-a)/this._yRange*o]},fromGlobalPixels:function(t,n){if(e.env.debug){if(!t)throw new Error("Cartesian.fromGlobalPixels: не передан параметр point");if("undefined"==typeof n)throw new Error("Cartesian.fromGlobalPixels: не передан параметр zoom")}var i=this._bounds,o=Math.pow(2,n+8),s=("latlong"==e.env.coordinatesOrder,[t[0]*this._xRange/o+i[0][0],i[1][1]-this._yRange*t[1]/o]);return s=this._getFixedPoint(s),r?[s[1],s[0]]:s},isCycled:function(){return this._cycled},getCoordSystem:function(){return this._coordSystem},_getFixedPoint:function(e){var t=this._bounds;return[this._cycled[0]?i(e[0],t[0][0],t[1][0]):e[0],this._cycled[1]?i(e[1],t[0][1],t[1][1]):e[1]]}}),t(s)})}],["7a",function(e){e.modules.define("projection.GeoToGlobalPixels",["projection.Mercator","coordSystem.geo","util.math.cycleRestrict"],function(t,n,i,o){t(function(t){var s=t&&t.radius||6378137,r=2*Math.PI*s,a=1/r,l=r/2,c=0,u=180/Math.PI,h=256*a,d=t&&"latlong"==t.coordinatesOrder;this._mercator=new n(t),this.fromGlobalPixels=function(t,n){if(e.env.debug){if(!t)throw new Error("GeoToGlobalPixels.fromGlobalPixels: не передан параметр vector");if("undefined"==typeof n)throw new Error("GeoToGlobalPixels.fromGlobalPixels: не передан параметр zoom")}n!=c&&(h=Math.pow(2,n+8)*a,c=n);var i=this._globalPixelXToGeo(t[0],n),o=this._mercator.yToLatitude(l-t[1]/h);return d?[o,i]:[i,o]},this.toGlobalPixels=function(t,n){if(e.env.debug){if(!t)throw new Error("GeoToGlobalPixels.toGlobalPixels: не передан параметр point");if("undefined"==typeof n)throw new Error("GeoToGlobalPixels.toGlobalPixels: не передан параметр zoom")}n!=c&&(h=Math.pow(2,n+8)*a,c=n);var i=this._mercator.geoToMercator(t);return[(l+i[0])*h,(l-i[1])*h]},this.distanceToGlobalPixels=function(t,n,i){if(e.env.debug){if(!t)throw new Error("GeoToGlobalPixels.distanceToGlobalPixels: не передан параметр point");if("undefined"==typeof i)throw new Error("GeoToGlobalPixels.distanceToGlobalPixels: не передан параметр zoom")}var o=r*Math.cos(t[d?0:1]*Math.PI/180)/Math.pow(2,i+8);return Math.abs(n/o)},this.isCycled=function(){return[!0,!1]},this.getCoordSystem=function(){return i},this._globalPixelXToGeo=function(e,t){return o(Math.PI*e/Math.pow(2,t+7)-Math.PI,-Math.PI,Math.PI)*u}})})}],["7d",function(e){e.modules.define("projection.idle",["coordSystem.cartesian"],function(e,t){e({toGlobalPixels:function(e,t){return e.slice()},fromGlobalPixels:function(e,t){return e.slice()},isCycled:function(){return[!1,!1]},getCoordSystem:function(){return t}})})}],["7e",function(e){e.modules.define("projection.Mercator",["util.math.restrict","util.math.cycleRestrict"],function(e,t,n){e(function(e){var i=e&&e.radius||6378137,o=e&&"undefined"!=typeof e.e?e.e:.0818191908426,s=e&&"latlong"==e.coordinatesOrder,r=o*o,a=r*r,l=a*r,c=a*a,u=1/i,h=r/2+5*a/24+l/12+13*c/360,d=7*a/48+29*l/240+811*c/11520,g=7*l/120+81*c/1120,p=4279*c/161280,m=Math.PI/180,f=180/Math.PI;this.mercatorToGeo=function(e){var t=this.xToLongitude(e[0]),n=this.yToLatitude(e[1]);return s?[n,t]:[t,n]},this.geoToMercator=function(e){return[this.longitudeToX(e[s?1:0]),this.latitudeToY(e[s?0:1])]},this.xToLongitude=function(e){return n(e*u,-Math.PI,Math.PI)*f},this.yToLatitude=function(e){var t=.5*Math.PI-2*Math.atan(1/Math.exp(e*u)),n=t+h*Math.sin(2*t)+d*Math.sin(4*t)+g*Math.sin(6*t)+p*Math.sin(8*t);return n*f},this.longitudeToX=function(e){var t=n(e*m,-Math.PI,Math.PI);return i*t},this.latitudeToY=function(e){var n=1e-10,s=t(e,-90+n,90-n)*m,r=o*Math.sin(s),a=Math.tan(.25*Math.PI+.5*s),l=Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(r)),o),c=a/l;return i*Math.log(c)}})})}],["7g",function(e){e.modules.define("projection.sphericalMercator",["projection.GeoToGlobalPixels"],function(t,n){t(new n({e:0,coordinatesOrder:e.env.coordinatesOrder}))})}],["7k",function(e){e.modules.define("projection.wgs84Mercator",["projection.GeoToGlobalPixels"],function(t,n){t(new n({coordinatesOrder:e.env.coordinatesOrder}))})}],["7n",function(e){e.modules.define("projection.zeroZoom",["coordSystem.cartesian"],function(e,t){e({toGlobalPixels:function(e,t){var n=Math.pow(2,t);return[e[0]*n,e[1]*n]},fromGlobalPixels:function(e,t){var n=Math.pow(2,-t);return[e[0]*n,e[1]*n]},isCycled:function(){return[!1,!1]},getCoordSystem:function(){return t}})})}],["2e",function(e){e.modules.define("ReadOnlyCollection",["util.defineClass","component.collection.BaseCollection","event.Manager","Event","option.Manager"],function(e,t,n,i,o,s){var r=function(e){this.events=new i({context:this}),this.options=new s,this._collectionComponent=new n({onAdd:{callback:this.onChildAdd,context:this},onRemove:{callback:this.onChildRemove,context:this}}),this._editingEventManager=e,this._editingEventManager.add("add",this._addObject,this).add("remove",this._removeObject,this).add("removeall",this._removeAll,this)};t(r,{getLength:function(){return this._collectionComponent.getLength()},getIterator:function(){return this._collectionComponent.getIterator()},each:function(e,t){this._collectionComponent.each(e,t)},getAll:function(){for(var e,t=this.getIterator(),n=[];(e=t.getNext())!=t.STOP_ITERATION;)n.push(e);return n},_addObject:function(e){this._collectionComponent.add(e.get("object"))},_removeObject:function(e){this._collectionComponent.remove(e.get("object"))},_removeAll:function(){this._collectionComponent.removeAll()},onChildAdd:function(e){var t=new o({type:"add",target:this,child:e});this.events.fire("add",t)},onChildRemove:function(e){var t=new o({type:"remove",target:this,child:e});this.events.fire("remove",t)}}),e(r)})}],["$P",function(e){e.modules.define("Rectangle",["util.augment","GeoObject"],function(e,t,n){function i(e){return e&&"undefined"!=typeof e.length?{type:"Rectangle",coordinates:e}:e}var o=function(e,t,n){o.superclass.constructor.call(this,{geometry:i(e),properties:t},n)};t(o,n),e(o)})}],0]);
//# sourceMappingURL=maps/combine.js.map
