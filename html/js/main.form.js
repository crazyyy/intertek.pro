function formPlaceholder(){$(".feedback form").on("click",".pl",function(){$(this).prev().trigger("focus")}),$('.feedback input[type="text"],.feedback textarea').on("keydown",function(e){13===e.keyCode&&e.preventDefault()}).each(function(){$(this).val()||$(this).after($("<div/>").addClass("pl").html($(this).attr("data-placeholder").replace("*","<span class='star'>*</span>")))}).focusin(function(){$(this).next().is(".pl")&&$(this).next().remove()}).focusout(function(){$(this).position();$(this).val()||$(this).after($("<div/>").addClass("pl").html($(this).attr("data-placeholder").replace("*","<span class='star'>*</span>")))})}function formShowErrors(e,a){$.each(this.validElements(),function(e,a){var t=$(a);t.parent().find(".error-label").remove(),t.data("title","").removeClass("error")}),$.each(a,function(e,a){var t=$(a.element);t.parent().find(".error-label").remove()}),$.each(a,function(e,a){var t=$(a.element);t.data("title",a.message).addClass("error"),t.next().is(".pl")&&(t=t.next()),t.after($("<div/>").addClass("error-label").text(a.message))})}function popupFormSubmit(e,a){if(e){var t=$("form",e)[0],o=$('input[name="name"]',t).attr("data-error"),n=$('input[name="phone"]',t).attr("data-error");$('input[name="phone"]').inputmask({mask:"+7 ( 999 ) 999-99-99",showMaskOnHover:!1,onincomplete:function(){this.value=$(this).val().replace(/_/g,"")}}),jQuery.validator.addMethod("phone",function(e,a){return e=e.replace(/_/g,""),this.optional(a)||/^[\+ \+(\+)\+-\d]+$/i.test(e)&&20==e.length},"Введите правильный телефон"),jQuery.validator.addMethod("alpha",function(e,a){return this.optional(a)||/^[A-Za-zА-Яа-я| \-]+$/i.test(e)},"Введите правильное имя"),$(t).validate({ignore:"",onfocusin:null,onfocusout:null,onclick:null,showErrors:formShowErrors,messages:{name:{required:o},phone:{required:n}},rules:{name:{required:!0,alpha:!0},phone:{required:!0,phone:!0}},submitHandler:function(a){return $("input[type=submit]",e).val(" ").attr("disabled","true").css({backgroundImage:"url(/img/loader.gif)",backgroundRepeat:" no-repeat",backgroundPosition:"50%"}),$.ajax({url:$(a).attr("action"),type:"post",dataType:"json",data:$(a).serialize(),success:function(t){return $("input[type=submit]",e).removeAttr("disabled").css({backgroundImage:"none"}).val("Жду звонка"),t&&"0"!=t?void(t.errors||($(a).fadeOut(400),$(".feedback__info",e).fadeIn(500).animate({top:"30%"},500),setTimeout(function(){$.fancybox.close(!0)},5e3))):void alert("Во время отправки произошла ошибка, проверьте корректность введенных данных и попробуйте ещё раз.")},error:function(){$("input[type=submit]",e).removeAttr("disabled").css({backgroundImage:"none"}).val("Жду звонка"),alert("Во время отправки произошла ошибка, проверьте корректность введенных данных и попробуйте ещё раз.")}}),!1}})}}function fancyBoxShow(){$(".fancybox, .galery").fancybox({loop:!0,padding:0,margin:30,minWidth:200,maxHeight:800,fitToView:!0,width:"95%",height:"95%",autoSize:!0,openEffect:"fade",closeEffect:"fade",openSpeed:600,closeSpeed:600,nextEffect:"elastic",prevEffect:"elastic",tpl:{closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},beforeShow:function(){$("body,html").css({"overflow-y":"hidden"})},afterClose:function(){$("body,html").css({"overflow-y":"visible"})},helpers:{title:{type:"outside"},overlay:{locked:!0,css:{background:"rgba(0, 0, 0, 0.8)"}}}})}$(document).ready(function(){popupFormSubmit($("#feedback_call")[0]),popupFormSubmit($("#feedback_kons")[0]),popupFormSubmit($("#feedback_usluga")[0]),formPlaceholder(),fancyBoxShow()});
//# sourceMappingURL=maps/main.form.js.map
